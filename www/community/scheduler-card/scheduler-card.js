!function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function t(e,t,r,a){var i,s=arguments.length,n=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(n=(s<3?i(n):s>3?i(t,r,n):i(t,r))||n);return s>3&&n&&Object.defineProperty(t,r,n),n
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */}const r="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,a=(e,t,r=null)=>{for(;t!==r;){const r=t.nextSibling;e.removeChild(t),t=r}},i=`{{lit-${String(Math.random()).slice(2)}}}`,s=`\x3c!--${i}--\x3e`,n=new RegExp(`${i}|${s}`);class o{constructor(e,t){this.parts=[],this.element=t;const r=[],a=[],s=document.createTreeWalker(t.content,133,null,!1);let o=0,c=-1,h=0;const{strings:p,values:{length:f}}=e;for(;h<f;){const e=s.nextNode();if(null!==e){if(c++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:r}=t;let a=0;for(let e=0;e<r;e++)l(t[e].name,"$lit$")&&a++;for(;a-- >0;){const t=p[h],r=d.exec(t)[2],a=r.toLowerCase()+"$lit$",i=e.getAttribute(a);e.removeAttribute(a);const s=i.split(n);this.parts.push({type:"attribute",index:c,name:r,strings:s}),h+=s.length-1}}"TEMPLATE"===e.tagName&&(a.push(e),s.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(i)>=0){const a=e.parentNode,i=t.split(n),s=i.length-1;for(let t=0;t<s;t++){let r,s=i[t];if(""===s)r=u();else{const e=d.exec(s);null!==e&&l(e[2],"$lit$")&&(s=s.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),r=document.createTextNode(s)}a.insertBefore(r,e),this.parts.push({type:"node",index:++c})}""===i[s]?(a.insertBefore(u(),e),r.push(e)):e.data=i[s],h+=s}}else if(8===e.nodeType)if(e.data===i){const t=e.parentNode;null!==e.previousSibling&&c!==o||(c++,t.insertBefore(u(),e)),o=c,this.parts.push({type:"node",index:c}),null===e.nextSibling?e.data="":(r.push(e),c--),h++}else{let t=-1;for(;-1!==(t=e.data.indexOf(i,t+1));)this.parts.push({type:"node",index:-1}),h++}}else s.currentNode=a.pop()}for(const e of r)e.parentNode.removeChild(e)}}const l=(e,t)=>{const r=e.length-t.length;return r>=0&&e.slice(r)===t},c=e=>-1!==e.index,u=()=>document.createComment(""),d=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function h(e,t){const{element:{content:r},parts:a}=e,i=document.createTreeWalker(r,133,null,!1);let s=f(a),n=a[s],o=-1,l=0;const c=[];let u=null;for(;i.nextNode();){o++;const e=i.currentNode;for(e.previousSibling===u&&(u=null),t.has(e)&&(c.push(e),null===u&&(u=e)),null!==u&&l++;void 0!==n&&n.index===o;)n.index=null!==u?-1:n.index-l,s=f(a,s),n=a[s]}c.forEach(e=>e.parentNode.removeChild(e))}const p=e=>{let t=11===e.nodeType?0:1;const r=document.createTreeWalker(e,133,null,!1);for(;r.nextNode();)t++;return t},f=(e,t=-1)=>{for(let r=t+1;r<e.length;r++){const t=e[r];if(c(t))return r}return-1};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
const m=new WeakMap,v=e=>"function"==typeof e&&m.has(e),y={},g={};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
class b{constructor(e,t,r){this.__parts=[],this.template=e,this.processor=t,this.options=r}update(e){let t=0;for(const r of this.__parts)void 0!==r&&r.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=r?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],a=this.template.parts,i=document.createTreeWalker(e,133,null,!1);let s,n=0,o=0,l=i.nextNode();for(;n<a.length;)if(s=a[n],c(s)){for(;o<s.index;)o++,"TEMPLATE"===l.nodeName&&(t.push(l),i.currentNode=l.content),null===(l=i.nextNode())&&(i.currentNode=t.pop(),l=i.nextNode());if("node"===s.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(l.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,s.name,s.strings,this.options));n++}else this.__parts.push(void 0),n++;return r&&(document.adoptNode(e),customElements.upgrade(e)),e}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const _=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),w=` ${i} `;class P{constructor(e,t,r,a){this.strings=e,this.values=t,this.type=r,this.processor=a}getHTML(){const e=this.strings.length-1;let t="",r=!1;for(let a=0;a<e;a++){const e=this.strings[a],n=e.lastIndexOf("\x3c!--");r=(n>-1||r)&&-1===e.indexOf("--\x3e",n+1);const o=d.exec(e);t+=null===o?e+(r?w:s):e.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+i}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==_&&(t=_.createHTML(t)),e.innerHTML=t,e}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const E=e=>null===e||!("object"==typeof e||"function"==typeof e),S=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class x{constructor(e,t,r){this.dirty=!0,this.element=e,this.name=t,this.strings=r,this.parts=[];for(let e=0;e<r.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new j(this)}_getValue(){const e=this.strings,t=e.length-1,r=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=r[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!S(e))return e}let a="";for(let i=0;i<t;i++){a+=e[i];const t=r[i];if(void 0!==t){const e=t.value;if(E(e)||!S(e))a+="string"==typeof e?e:String(e);else for(const t of e)a+="string"==typeof t?t:String(t)}}return a+=e[t],a}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class j{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===y||E(e)&&e===this.value||(this.value=e,v(e)||(this.committer.dirty=!0))}commit(){for(;v(this.value);){const e=this.value;this.value=y,e(this)}this.value!==y&&this.committer.commit()}}class ${constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(u()),this.endNode=e.appendChild(u())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=u()),e.__insert(this.endNode=u())}insertAfterPart(e){e.__insert(this.startNode=u()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;v(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=y,e(this)}const e=this.__pendingValue;e!==y&&(E(e)?e!==this.value&&this.__commitText(e):e instanceof P?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):S(e)?this.__commitIterable(e):e===g?(this.value=g,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,r="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=r:this.__commitNode(document.createTextNode(r)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof b&&this.value.template===t)this.value.update(e.values);else{const r=new b(t,e.processor,this.options),a=r._clone();r.update(e.values),this.__commitNode(a),this.value=r}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let r,a=0;for(const i of e)r=t[a],void 0===r&&(r=new $(this.options),t.push(r),0===a?r.appendIntoPart(this):r.insertAfterPart(t[a-1])),r.setValue(i),r.commit(),a++;a<t.length&&(t.length=a,this.clear(r&&r.endNode))}clear(e=this.startNode){a(this.startNode.parentNode,e.nextSibling,this.endNode)}}class O{constructor(e,t,r){if(this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=r}setValue(e){this.__pendingValue=e}commit(){for(;v(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=y,e(this)}if(this.__pendingValue===y)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=y}}class k extends x{constructor(e,t,r){super(e,t,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new A(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class A extends j{}let C=!1;(()=>{try{const e={get capture(){return C=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class F{constructor(e,t,r){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=r,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;v(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=y,e(this)}if(this.__pendingValue===y)return;const e=this.__pendingValue,t=this.value,r=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),a=null!=e&&(null==t||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),a&&(this.__options=D(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=y}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const D=e=>e&&(C?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */;function z(e){let t=R.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},R.set(e.type,t));let r=t.stringsArray.get(e.strings);if(void 0!==r)return r;const a=e.strings.join(i);return r=t.keyString.get(a),void 0===r&&(r=new o(e,e.getTemplateElement()),t.keyString.set(a,r)),t.stringsArray.set(e.strings,r),r}const R=new Map,T=new WeakMap;
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const I=new
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
class{handleAttributeExpressions(e,t,r,a){const i=t[0];if("."===i){return new k(e,t.slice(1),r).parts}if("@"===i)return[new F(e,t.slice(1),a.eventContext)];if("?"===i)return[new O(e,t.slice(1),r)];return new x(e,t,r).parts}handleTextExpression(e){return new $(e)}};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const N=(e,...t)=>new P(e,t,"html",I)
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */,U=(e,t)=>`${e}--${t}`;let L=!0;void 0===window.ShadyCSS?L=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),L=!1);const q=e=>t=>{const r=U(t.type,e);let a=R.get(r);void 0===a&&(a={stringsArray:new WeakMap,keyString:new Map},R.set(r,a));let s=a.stringsArray.get(t.strings);if(void 0!==s)return s;const n=t.strings.join(i);if(s=a.keyString.get(n),void 0===s){const r=t.getTemplateElement();L&&window.ShadyCSS.prepareTemplateDom(r,e),s=new o(t,r),a.keyString.set(n,s)}return a.stringsArray.set(t.strings,s),s},V=["html","svg"],M=new Set,H=(e,t,r)=>{M.add(e);const a=r?r.element:document.createElement("template"),i=t.querySelectorAll("style"),{length:s}=i;if(0===s)return void window.ShadyCSS.prepareTemplateStyles(a,e);const n=document.createElement("style");for(let e=0;e<s;e++){const t=i[e];t.parentNode.removeChild(t),n.textContent+=t.textContent}(e=>{V.forEach(t=>{const r=R.get(U(t,e));void 0!==r&&r.keyString.forEach(e=>{const{element:{content:t}}=e,r=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{r.add(e)}),h(e,r)})})})(e);const o=a.content;r?function(e,t,r=null){const{element:{content:a},parts:i}=e;if(null==r)return void a.appendChild(t);const s=document.createTreeWalker(a,133,null,!1);let n=f(i),o=0,l=-1;for(;s.nextNode();){l++;for(s.currentNode===r&&(o=p(t),r.parentNode.insertBefore(t,r));-1!==n&&i[n].index===l;){if(o>0){for(;-1!==n;)i[n].index+=o,n=f(i,n);return}n=f(i,n)}}}(r,n,o.firstChild):o.insertBefore(n,o.firstChild),window.ShadyCSS.prepareTemplateStyles(a,e);const l=o.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)t.insertBefore(l.cloneNode(!0),t.firstChild);else if(r){o.insertBefore(n,o.firstChild);const e=new Set;e.add(n),h(r,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const Q={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},B=(e,t)=>t!==e&&(t==t||e==e),G={attribute:!0,type:String,converter:Q,reflect:!1,hasChanged:B};class K extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,r)=>{const a=this._attributeNameForProperty(r,t);void 0!==a&&(this._attributeToPropertyMap.set(a,r),e.push(a))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=G){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const r="symbol"==typeof e?Symbol():"__"+e,a=this.getPropertyDescriptor(e,r,t);void 0!==a&&Object.defineProperty(this.prototype,e,a)}static getPropertyDescriptor(e,t,r){return{get(){return this[t]},set(a){const i=this[e];this[t]=a,this.requestUpdateInternal(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||G}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const r of t)this.createProperty(r,e[r])}}static _attributeNameForProperty(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,r=B){return r(e,t)}static _propertyValueFromAttribute(e,t){const r=t.type,a=t.converter||Q,i="function"==typeof a?a:a.fromAttribute;return i?i(e,r):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const r=t.type,a=t.converter;return(a&&a.toAttribute||Q.toAttribute)(e,r)}initialize(){this._updateState=0,this._updatePromise=new Promise(e=>this._enableUpdatingResolver=e),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,r){t!==r&&this._attributeToProperty(e,r)}_propertyToAttribute(e,t,r=G){const a=this.constructor,i=a._attributeNameForProperty(e,r);if(void 0!==i){const e=a._propertyValueToAttribute(t,r);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(i):this.setAttribute(i,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const r=this.constructor,a=r._attributeToPropertyMap.get(e);if(void 0!==a){const e=r.getPropertyOptions(a);this._updateState=16|this._updateState,this[a]=r._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,r){let a=!0;if(void 0!==e){const i=this.constructor;r=r||i.getPropertyOptions(e),i._valueHasChanged(this[e],t,r.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==r.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,r))):a=!1}!this._hasRequestedUpdate&&a&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}K.finalized=!0;
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
const J=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:r,elements:a}=t;return{kind:r,elements:a,finisher(t){window.customElements.define(e,t)}}})(e,t),W=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(r){r.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}};function Z(e){return(t,r)=>void 0!==r?((e,t,r)=>{t.constructor.createProperty(r,e)})(e,t,r):W(e,t)}
/**
    @license
    Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
    This code may only be used under the BSD style license found at
    http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
    http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
    found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
    part of the polymer project is also subject to an additional IP rights grant
    found at http://polymer.github.io/PATENTS.txt
    */const Y=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,X=Symbol();class ee{constructor(e,t){if(t!==X)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(Y?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const te=(e,...t)=>{const r=t.reduce((t,r,a)=>t+(e=>{if(e instanceof ee)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(r)+e[a+1],e[0]);return new ee(r,X)};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const re={};class ae extends K{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,r)=>e.reduceRight((e,r)=>Array.isArray(r)?t(r,e):(e.add(r),e),r),r=t(e,new Set),a=[];r.forEach(e=>a.unshift(e)),this._styles=a}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map(e=>{if(e instanceof CSSStyleSheet&&!Y){const t=Array.prototype.slice.call(e.cssRules).reduce((e,t)=>e+t.cssText,"");return new ee(String(t),X)}return e})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Y?this.renderRoot.adoptedStyleSheets=e.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==re&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){return re}}ae.finalized=!0,ae.render=(e,t,r)=>{if(!r||"object"!=typeof r||!r.scopeName)throw new Error("The `scopeName` option is required.");const i=r.scopeName,s=T.has(t),n=L&&11===t.nodeType&&!!t.host,o=n&&!M.has(i),l=o?document.createDocumentFragment():t;if(((e,t,r)=>{let i=T.get(t);void 0===i&&(a(t,t.firstChild),T.set(t,i=new $(Object.assign({templateFactory:z},r))),i.appendInto(t)),i.setValue(e),i.commit()})(e,l,Object.assign({templateFactory:q(i)},r)),o){const e=T.get(l);T.delete(l);const r=e.value instanceof b?e.value.template:void 0;H(i,l,r),a(t,t.firstChild),t.appendChild(l),T.set(t,e)}!s&&n&&window.ShadyCSS.styleElement(t.host)};var ie="object"==typeof global&&global&&global.Object===Object&&global,se="object"==typeof self&&self&&self.Object===Object&&self,ne=ie||se||Function("return this")(),oe=ne.Symbol,le=Object.prototype,ce=le.hasOwnProperty,ue=le.toString,de=oe?oe.toStringTag:void 0;var he=Object.prototype.toString;var pe=oe?oe.toStringTag:void 0;function fe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":pe&&pe in Object(e)?function(e){var t=ce.call(e,de),r=e[de];try{e[de]=void 0;var a=!0}catch(e){}var i=ue.call(e);return a&&(t?e[de]=r:delete e[de]),i}(e):function(e){return he.call(e)}(e)}function me(e){return null!=e&&"object"==typeof e}function ve(e){return"symbol"==typeof e||me(e)&&"[object Symbol]"==fe(e)}function ye(e,t){for(var r=-1,a=null==e?0:e.length,i=Array(a);++r<a;)i[r]=t(e[r],r,e);return i}var ge=Array.isArray,be=oe?oe.prototype:void 0,_e=be?be.toString:void 0;function we(e){if("string"==typeof e)return e;if(ge(e))return ye(e,we)+"";if(ve(e))return _e?_e.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Pe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Ee=/^\s+|\s+$/g,Se=/^[-+]0x[0-9a-f]+$/i,xe=/^0b[01]+$/i,je=/^0o[0-7]+$/i,$e=parseInt;function Oe(e){return e?(e=function(e){if("number"==typeof e)return e;if(ve(e))return NaN;if(Pe(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Pe(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ee,"");var r=xe.test(e);return r||je.test(e)?$e(e.slice(2),r?2:8):Se.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ke(e){return e}function Ae(e){if(!Pe(e))return!1;var t=fe(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Ce,Fe=ne["__core-js_shared__"],De=(Ce=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||""))?"Symbol(src)_1."+Ce:"";var ze=Function.prototype.toString;function Re(e){if(null!=e){try{return ze.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Te=/^\[object .+?Constructor\]$/,Ie=Function.prototype,Ne=Object.prototype,Ue=Ie.toString,Le=Ne.hasOwnProperty,qe=RegExp("^"+Ue.call(Le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ve(e){return!(!Pe(e)||(t=e,De&&De in t))&&(Ae(e)?qe:Te).test(Re(e));var t}function Me(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ve(r)?r:void 0}var He=Me(ne,"WeakMap"),Qe=Object.create,Be=function(){function e(){}return function(t){if(!Pe(t))return{};if(Qe)return Qe(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Ge(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Ke(e,t){var r=-1,a=e.length;for(t||(t=Array(a));++r<a;)t[r]=e[r];return t}var Je=Date.now;var We,Ze,Ye,Xe=function(){try{var e=Me(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),et=(We=Xe?function(e,t){return Xe(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:ke,Ze=0,Ye=0,function(){var e=Je(),t=16-(e-Ye);if(Ye=e,t>0){if(++Ze>=800)return arguments[0]}else Ze=0;return We.apply(void 0,arguments)});function tt(e,t){for(var r=-1,a=null==e?0:e.length;++r<a&&!1!==t(e[r],r,e););return e}function rt(e,t,r,a){for(var i=e.length,s=r+(a?1:-1);a?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function at(e){return e!=e}function it(e,t,r){return t==t?function(e,t,r){for(var a=r-1,i=e.length;++a<i;)if(e[a]===t)return a;return-1}(e,t,r):rt(e,at,r)}var st=/^(?:0|[1-9]\d*)$/;function nt(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&st.test(e))&&e>-1&&e%1==0&&e<t}function ot(e,t,r){"__proto__"==t&&Xe?Xe(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function lt(e,t){return e===t||e!=e&&t!=t}var ct=Object.prototype.hasOwnProperty;function ut(e,t,r){var a=e[t];ct.call(e,t)&&lt(a,r)&&(void 0!==r||t in e)||ot(e,t,r)}function dt(e,t,r,a){var i=!r;r||(r={});for(var s=-1,n=t.length;++s<n;){var o=t[s],l=a?a(r[o],e[o],o,r,e):void 0;void 0===l&&(l=e[o]),i?ot(r,o,l):ut(r,o,l)}return r}var ht=Math.max;function pt(e,t,r){return t=ht(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,s=ht(a.length-t,0),n=Array(s);++i<s;)n[i]=a[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=a[i];return o[t]=r(n),Ge(e,this,o)}}function ft(e,t){return et(pt(e,t,ke),e+"")}function mt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function vt(e){return null!=e&&mt(e.length)&&!Ae(e)}function yt(e,t,r){if(!Pe(r))return!1;var a=typeof t;return!!("number"==a?vt(r)&&nt(t,r.length):"string"==a&&t in r)&&lt(r[t],e)}var gt=Object.prototype;function bt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||gt)}function _t(e){return me(e)&&"[object Arguments]"==fe(e)}var wt=Object.prototype,Pt=wt.hasOwnProperty,Et=wt.propertyIsEnumerable,St=_t(function(){return arguments}())?_t:function(e){return me(e)&&Pt.call(e,"callee")&&!Et.call(e,"callee")};var xt="object"==typeof e&&e&&!e.nodeType&&e,jt=xt&&"object"==typeof module&&module&&!module.nodeType&&module,$t=jt&&jt.exports===xt?ne.Buffer:void 0,Ot=($t?$t.isBuffer:void 0)||function(){return!1},kt={};function At(e){return function(t){return e(t)}}kt["[object Float32Array]"]=kt["[object Float64Array]"]=kt["[object Int8Array]"]=kt["[object Int16Array]"]=kt["[object Int32Array]"]=kt["[object Uint8Array]"]=kt["[object Uint8ClampedArray]"]=kt["[object Uint16Array]"]=kt["[object Uint32Array]"]=!0,kt["[object Arguments]"]=kt["[object Array]"]=kt["[object ArrayBuffer]"]=kt["[object Boolean]"]=kt["[object DataView]"]=kt["[object Date]"]=kt["[object Error]"]=kt["[object Function]"]=kt["[object Map]"]=kt["[object Number]"]=kt["[object Object]"]=kt["[object RegExp]"]=kt["[object Set]"]=kt["[object String]"]=kt["[object WeakMap]"]=!1;var Ct="object"==typeof e&&e&&!e.nodeType&&e,Ft=Ct&&"object"==typeof module&&module&&!module.nodeType&&module,Dt=Ft&&Ft.exports===Ct&&ie.process,zt=function(){try{var e=Ft&&Ft.require&&Ft.require("util").types;return e||Dt&&Dt.binding&&Dt.binding("util")}catch(e){}}(),Rt=zt&&zt.isTypedArray,Tt=Rt?At(Rt):function(e){return me(e)&&mt(e.length)&&!!kt[fe(e)]},It=Object.prototype.hasOwnProperty;function Nt(e,t){var r=ge(e),a=!r&&St(e),i=!r&&!a&&Ot(e),s=!r&&!a&&!i&&Tt(e),n=r||a||i||s,o=n?function(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}(e.length,String):[],l=o.length;for(var c in e)!t&&!It.call(e,c)||n&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||nt(c,l))||o.push(c);return o}function Ut(e,t){return function(r){return e(t(r))}}var Lt=Ut(Object.keys,Object),qt=Object.prototype.hasOwnProperty;function Vt(e){if(!bt(e))return Lt(e);var t=[];for(var r in Object(e))qt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Mt(e){return vt(e)?Nt(e):Vt(e)}var Ht=Object.prototype.hasOwnProperty;function Qt(e){if(!Pe(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=bt(e),r=[];for(var a in e)("constructor"!=a||!t&&Ht.call(e,a))&&r.push(a);return r}function Bt(e){return vt(e)?Nt(e,!0):Qt(e)}var Gt,Kt=(Gt=function(e,t){dt(t,Bt(t),e)},ft((function(e,t){var r=-1,a=t.length,i=a>1?t[a-1]:void 0,s=a>2?t[2]:void 0;for(i=Gt.length>3&&"function"==typeof i?(a--,i):void 0,s&&yt(t[0],t[1],s)&&(i=a<3?void 0:i,a=1),e=Object(e);++r<a;){var n=t[r];n&&Gt(e,n,r,i)}return e}))),Jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wt=/^\w*$/;function Zt(e,t){if(ge(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ve(e))||(Wt.test(e)||!Jt.test(e)||null!=t&&e in Object(t))}var Yt=Me(Object,"create");var Xt=Object.prototype.hasOwnProperty;var er=Object.prototype.hasOwnProperty;function tr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function rr(e,t){for(var r=e.length;r--;)if(lt(e[r][0],t))return r;return-1}tr.prototype.clear=function(){this.__data__=Yt?Yt(null):{},this.size=0},tr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},tr.prototype.get=function(e){var t=this.__data__;if(Yt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Xt.call(t,e)?t[e]:void 0},tr.prototype.has=function(e){var t=this.__data__;return Yt?void 0!==t[e]:er.call(t,e)},tr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Yt&&void 0===t?"__lodash_hash_undefined__":t,this};var ar=Array.prototype.splice;function ir(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}ir.prototype.clear=function(){this.__data__=[],this.size=0},ir.prototype.delete=function(e){var t=this.__data__,r=rr(t,e);return!(r<0)&&(r==t.length-1?t.pop():ar.call(t,r,1),--this.size,!0)},ir.prototype.get=function(e){var t=this.__data__,r=rr(t,e);return r<0?void 0:t[r][1]},ir.prototype.has=function(e){return rr(this.__data__,e)>-1},ir.prototype.set=function(e,t){var r=this.__data__,a=rr(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this};var sr=Me(ne,"Map");function nr(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function or(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}or.prototype.clear=function(){this.size=0,this.__data__={hash:new tr,map:new(sr||ir),string:new tr}},or.prototype.delete=function(e){var t=nr(this,e).delete(e);return this.size-=t?1:0,t},or.prototype.get=function(e){return nr(this,e).get(e)},or.prototype.has=function(e){return nr(this,e).has(e)},or.prototype.set=function(e,t){var r=nr(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this};function lr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var a=arguments,i=t?t.apply(this,a):a[0],s=r.cache;if(s.has(i))return s.get(i);var n=e.apply(this,a);return r.cache=s.set(i,n)||s,n};return r.cache=new(lr.Cache||or),r}lr.Cache=or;var cr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ur=/\\(\\)?/g,dr=function(e){var t=lr(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(cr,(function(e,r,a,i){t.push(a?i.replace(ur,"$1"):r||e)})),t}));function hr(e,t){return ge(e)?e:Zt(e,t)?[e]:dr(function(e){return null==e?"":we(e)}(e))}function pr(e){if("string"==typeof e||ve(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fr(e,t){for(var r=0,a=(t=hr(t,e)).length;null!=e&&r<a;)e=e[pr(t[r++])];return r&&r==a?e:void 0}function mr(e,t){for(var r=-1,a=t.length,i=e.length;++r<a;)e[i+r]=t[r];return e}var vr=oe?oe.isConcatSpreadable:void 0;function yr(e){return ge(e)||St(e)||!!(vr&&e&&e[vr])}function gr(e,t,r,a,i){var s=-1,n=e.length;for(r||(r=yr),i||(i=[]);++s<n;){var o=e[s];t>0&&r(o)?t>1?gr(o,t-1,r,a,i):mr(i,o):a||(i[i.length]=o)}return i}function br(e){return(null==e?0:e.length)?gr(e,1):[]}function _r(e){return et(pt(e,void 0,br),e+"")}var wr=Ut(Object.getPrototypeOf,Object),Pr=Function.prototype,Er=Object.prototype,Sr=Pr.toString,xr=Er.hasOwnProperty,jr=Sr.call(Object);function $r(e){var t=this.__data__=new ir(e);this.size=t.size}$r.prototype.clear=function(){this.__data__=new ir,this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},$r.prototype.get=function(e){return this.__data__.get(e)},$r.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ir){var a=r.__data__;if(!sr||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new or(a)}return r.set(e,t),this.size=r.size,this};var Or="object"==typeof e&&e&&!e.nodeType&&e,kr=Or&&"object"==typeof module&&module&&!module.nodeType&&module,Ar=kr&&kr.exports===Or?ne.Buffer:void 0,Cr=Ar?Ar.allocUnsafe:void 0;function Fr(e,t){for(var r=-1,a=null==e?0:e.length,i=0,s=[];++r<a;){var n=e[r];t(n,r,e)&&(s[i++]=n)}return s}function Dr(){return[]}var zr=Object.prototype.propertyIsEnumerable,Rr=Object.getOwnPropertySymbols,Tr=Rr?function(e){return null==e?[]:(e=Object(e),Fr(Rr(e),(function(t){return zr.call(e,t)})))}:Dr;var Ir=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)mr(t,Tr(e)),e=wr(e);return t}:Dr;function Nr(e,t,r){var a=t(e);return ge(e)?a:mr(a,r(e))}function Ur(e){return Nr(e,Mt,Tr)}function Lr(e){return Nr(e,Bt,Ir)}var qr=Me(ne,"DataView"),Vr=Me(ne,"Promise"),Mr=Me(ne,"Set"),Hr=Re(qr),Qr=Re(sr),Br=Re(Vr),Gr=Re(Mr),Kr=Re(He),Jr=fe;(qr&&"[object DataView]"!=Jr(new qr(new ArrayBuffer(1)))||sr&&"[object Map]"!=Jr(new sr)||Vr&&"[object Promise]"!=Jr(Vr.resolve())||Mr&&"[object Set]"!=Jr(new Mr)||He&&"[object WeakMap]"!=Jr(new He))&&(Jr=function(e){var t=fe(e),r="[object Object]"==t?e.constructor:void 0,a=r?Re(r):"";if(a)switch(a){case Hr:return"[object DataView]";case Qr:return"[object Map]";case Br:return"[object Promise]";case Gr:return"[object Set]";case Kr:return"[object WeakMap]"}return t});var Wr=Jr,Zr=Object.prototype.hasOwnProperty;var Yr=ne.Uint8Array;function Xr(e){var t=new e.constructor(e.byteLength);return new Yr(t).set(new Yr(e)),t}var ea=/\w*$/;var ta=oe?oe.prototype:void 0,ra=ta?ta.valueOf:void 0;function aa(e,t,r){var a,i,s,n=e.constructor;switch(t){case"[object ArrayBuffer]":return Xr(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return function(e,t){var r=t?Xr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?Xr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return(s=new(i=e).constructor(i.source,ea.exec(i))).lastIndex=i.lastIndex,s;case"[object Set]":return new n;case"[object Symbol]":return a=e,ra?Object(ra.call(a)):{}}}var ia=zt&&zt.isMap,sa=ia?At(ia):function(e){return me(e)&&"[object Map]"==Wr(e)};var na=zt&&zt.isSet,oa=na?At(na):function(e){return me(e)&&"[object Set]"==Wr(e)},la={};function ca(e,t,r,a,i,s){var n,o=1&t,l=2&t,c=4&t;if(r&&(n=i?r(e,a,i,s):r(e)),void 0!==n)return n;if(!Pe(e))return e;var u=ge(e);if(u){if(n=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Zr.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!o)return Ke(e,n)}else{var d=Wr(e),h="[object Function]"==d||"[object GeneratorFunction]"==d;if(Ot(e))return function(e,t){if(t)return e.slice();var r=e.length,a=Cr?Cr(r):new e.constructor(r);return e.copy(a),a}(e,o);if("[object Object]"==d||"[object Arguments]"==d||h&&!i){if(n=l||h?{}:function(e){return"function"!=typeof e.constructor||bt(e)?{}:Be(wr(e))}(e),!o)return l?function(e,t){return dt(e,Ir(e),t)}(e,function(e,t){return e&&dt(t,Bt(t),e)}(n,e)):function(e,t){return dt(e,Tr(e),t)}(e,function(e,t){return e&&dt(t,Mt(t),e)}(n,e))}else{if(!la[d])return i?e:{};n=aa(e,d,o)}}s||(s=new $r);var p=s.get(e);if(p)return p;s.set(e,n),oa(e)?e.forEach((function(a){n.add(ca(a,t,r,a,e,s))})):sa(e)&&e.forEach((function(a,i){n.set(i,ca(a,t,r,i,e,s))}));var f=c?l?Lr:Ur:l?keysIn:Mt,m=u?void 0:f(e);return tt(m||e,(function(a,i){m&&(a=e[i=a]),ut(n,i,ca(a,t,r,i,e,s))})),n}la["[object Arguments]"]=la["[object Array]"]=la["[object ArrayBuffer]"]=la["[object DataView]"]=la["[object Boolean]"]=la["[object Date]"]=la["[object Float32Array]"]=la["[object Float64Array]"]=la["[object Int8Array]"]=la["[object Int16Array]"]=la["[object Int32Array]"]=la["[object Map]"]=la["[object Number]"]=la["[object Object]"]=la["[object RegExp]"]=la["[object Set]"]=la["[object String]"]=la["[object Symbol]"]=la["[object Uint8Array]"]=la["[object Uint8ClampedArray]"]=la["[object Uint16Array]"]=la["[object Uint32Array]"]=!0,la["[object Error]"]=la["[object Function]"]=la["[object WeakMap]"]=!1;function ua(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new or;++t<r;)this.add(e[t])}function da(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}function ha(e,t){return e.has(t)}ua.prototype.add=ua.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ua.prototype.has=function(e){return this.__data__.has(e)};function pa(e,t,r,a,i,s){var n=1&r,o=e.length,l=t.length;if(o!=l&&!(n&&l>o))return!1;var c=s.get(e);if(c&&s.get(t))return c==t;var u=-1,d=!0,h=2&r?new ua:void 0;for(s.set(e,t),s.set(t,e);++u<o;){var p=e[u],f=t[u];if(a)var m=n?a(f,p,u,t,e,s):a(p,f,u,e,t,s);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!da(t,(function(e,t){if(!ha(h,t)&&(p===e||i(p,e,r,a,s)))return h.push(t)}))){d=!1;break}}else if(p!==f&&!i(p,f,r,a,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function fa(e){var t=-1,r=Array(e.size);return e.forEach((function(e,a){r[++t]=[a,e]})),r}function ma(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var va=oe?oe.prototype:void 0,ya=va?va.valueOf:void 0;var ga=Object.prototype.hasOwnProperty;var ba=Object.prototype.hasOwnProperty;function _a(e,t,r,a,i,s){var n=ge(e),o=ge(t),l=n?"[object Array]":Wr(e),c=o?"[object Array]":Wr(t),u="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),d="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),h=l==c;if(h&&Ot(e)){if(!Ot(t))return!1;n=!0,u=!1}if(h&&!u)return s||(s=new $r),n||Tt(e)?pa(e,t,r,a,i,s):function(e,t,r,a,i,s,n){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Yr(e),new Yr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return lt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=fa;case"[object Set]":var l=1&a;if(o||(o=ma),e.size!=t.size&&!l)return!1;var c=n.get(e);if(c)return c==t;a|=2,n.set(e,t);var u=pa(o(e),o(t),a,i,s,n);return n.delete(e),u;case"[object Symbol]":if(ya)return ya.call(e)==ya.call(t)}return!1}(e,t,l,r,a,i,s);if(!(1&r)){var p=u&&ba.call(e,"__wrapped__"),f=d&&ba.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,v=f?t.value():t;return s||(s=new $r),i(m,v,r,a,s)}}return!!h&&(s||(s=new $r),function(e,t,r,a,i,s){var n=1&r,o=Ur(e),l=o.length;if(l!=Ur(t).length&&!n)return!1;for(var c=l;c--;){var u=o[c];if(!(n?u in t:ga.call(t,u)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var h=!0;s.set(e,t),s.set(t,e);for(var p=n;++c<l;){var f=e[u=o[c]],m=t[u];if(a)var v=n?a(m,f,u,t,e,s):a(f,m,u,e,t,s);if(!(void 0===v?f===m||i(f,m,r,a,s):v)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var y=e.constructor,g=t.constructor;y==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,r,a,i,s))}function wa(e,t,r,a,i){return e===t||(null==e||null==t||!me(e)&&!me(t)?e!=e&&t!=t:_a(e,t,r,a,wa,i))}function Pa(e){return e==e&&!Pe(e)}function Ea(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function Sa(e){var t=function(e){for(var t=Mt(e),r=t.length;r--;){var a=t[r],i=e[a];t[r]=[a,i,Pa(i)]}return t}(e);return 1==t.length&&t[0][2]?Ea(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,a){var i=r.length,s=i,n=!a;if(null==e)return!s;for(e=Object(e);i--;){var o=r[i];if(n&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){var l=(o=r[i])[0],c=e[l],u=o[1];if(n&&o[2]){if(void 0===c&&!(l in e))return!1}else{var d=new $r;if(a)var h=a(c,u,l,e,t,d);if(!(void 0===h?wa(u,c,3,a,d):h))return!1}}return!0}(r,e,t)}}function xa(e,t){return null!=e&&t in Object(e)}function ja(e,t,r){for(var a=-1,i=(t=hr(t,e)).length,s=!1;++a<i;){var n=pr(t[a]);if(!(s=null!=e&&r(e,n)))break;e=e[n]}return s||++a!=i?s:!!(i=null==e?0:e.length)&&mt(i)&&nt(n,i)&&(ge(e)||St(e))}function $a(e,t){return null!=e&&ja(e,t,xa)}function Oa(e,t){return Zt(e)&&Pa(t)?Ea(pr(e),t):function(r){var a=function(e,t,r){var a=null==e?void 0:fr(e,t);return void 0===a?r:a}(r,e);return void 0===a&&a===t?$a(r,e):wa(t,a,3)}}function ka(e){return Zt(e)?(t=pr(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return fr(t,e)}}(e);var t}function Aa(e){return"function"==typeof e?e:null==e?ke:"object"==typeof e?ge(e)?Oa(e[0],e[1]):Sa(e):ka(e)}var Ca,Fa=function(e,t,r){for(var a=-1,i=Object(e),s=r(e),n=s.length;n--;){var o=s[Ca?n:++a];if(!1===t(i[o],o,i))break}return e};function Da(e,t){return e&&Fa(e,t,Mt)}var za=function(e,t){return function(r,a){if(null==r)return r;if(!vt(r))return e(r,a);for(var i=r.length,s=t?i:-1,n=Object(r);(t?s--:++s<i)&&!1!==a(n[s],s,n););return r}}(Da);function Ra(e,t){var r;return(ge(e)?tt:za)(e,"function"==typeof(r=t)?r:ke)}function Ta(e,t){var r=[];return za(e,(function(e,a,i){t(e,a,i)&&r.push(e)})),r}function Ia(e,t){return(ge(e)?Fr:Ta)(e,Aa(t))}var Na=Math.max;var Ua,La=(Ua=function(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var i,s,n=null==r?0:(i=Oe(r),s=i%1,i==i?s?i-s:i:0);return n<0&&(n=Na(a+n,0)),rt(e,Aa(t),n)},function(e,t,r){var a=Object(e);if(!vt(e)){var i=Aa(t);e=Mt(e),t=function(e){return i(a[e],e,a)}}var s=Ua(e,t,r);return s>-1?a[i?e[s]:s]:void 0});function qa(e,t){var r=-1,a=vt(e)?Array(e.length):[];return za(e,(function(e,i,s){a[++r]=t(e,i,s)})),a}var Va=Object.prototype.hasOwnProperty;function Ma(e,t){return null!=e&&Va.call(e,t)}function Ha(e,t){return null!=e&&ja(e,t,Ma)}function Qa(e){return null==e?[]:function(e,t){return ye(t,(function(t){return e[t]}))}(e,Mt(e))}function Ba(e,t){return t.length<2?e:fr(e,function(e,t,r){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++a<i;)s[a]=e[a+t];return s}(t,0,-1))}var Ga=Object.prototype.hasOwnProperty;function Ka(e,t){return wa(e,t)}function Ja(e){return void 0===e}function Wa(e,t){var r={};return t=Aa(t),Da(e,(function(e,a,i){ot(r,a,t(e,a,i))})),r}function Za(e,t){return null==(e=Ba(e,t=hr(t,e)))||delete e[pr((r=t,a=null==r?0:r.length,a?r[a-1]:void 0))];var r,a}function Ya(e){return function(e){if(!me(e)||"[object Object]"!=fe(e))return!1;var t=wr(e);if(null===t)return!0;var r=xr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Sr.call(r)==jr}(e)?void 0:e}var Xa=_r((function(e,t){var r={};if(null==e)return r;var a=!1;t=ye(t,(function(t){return t=hr(t,e),a||(a=t.length>1),t})),dt(e,Lr(e),r),a&&(r=ca(r,7,Ya));for(var i=t.length;i--;)Za(r,t[i]);return r}));function ei(e,t,r,a){if(!Pe(e))return e;for(var i=-1,s=(t=hr(t,e)).length,n=s-1,o=e;null!=o&&++i<s;){var l=pr(t[i]),c=r;if(i!=n){var u=o[l];void 0===(c=a?a(u,l,o):void 0)&&(c=Pe(u)?u:nt(t[i+1])?[]:{})}ut(o,l,c),o=o[l]}return e}function ti(e,t,r){for(var a=-1,i=t.length,s={};++a<i;){var n=t[a],o=fr(e,n);r(o,n)&&ei(s,hr(n,e),o)}return s}function ri(e,t){return function(e,t){if(null==e)return{};var r=ye(Lr(e),(function(e){return[e]}));return t=Aa(t),ti(e,r,(function(e,r){return t(e,r[0])}))}(e,function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}(Aa(t)))}function ai(e,t){if(e!==t){var r=void 0!==e,a=null===e,i=e==e,s=ve(e),n=void 0!==t,o=null===t,l=t==t,c=ve(t);if(!o&&!c&&!s&&e>t||s&&n&&l&&!o&&!c||a&&n&&l||!r&&l||!i)return 1;if(!a&&!s&&!c&&e<t||c&&r&&i&&!a&&!s||o&&r&&i||!n&&i||!l)return-1}return 0}function ii(e,t,r){var a=-1;return t=ye(t.length?t:[ke],At(Aa)),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(qa(e,(function(e,r,i){return{criteria:ye(t,(function(t){return t(e)})),index:++a,value:e}})),(function(e,t){return function(e,t,r){for(var a=-1,i=e.criteria,s=t.criteria,n=i.length,o=r.length;++a<n;){var l=ai(i[a],s[a]);if(l)return a>=o?l:l*("desc"==r[a]?-1:1)}return e.index-t.index}(e,t,r)}))}var si=_r((function(e,t){return null==e?{}:function(e,t){return ti(e,t,(function(t,r){return $a(e,r)}))}(e,t)}));function ni(e,t,r,a){for(var i=r-1,s=e.length;++i<s;)if(a(e[i],t))return i;return-1}var oi=Array.prototype.splice;var li=ft((function(e,t){return e&&e.length&&t&&t.length?function(e,t,r,a){var i=a?ni:it,s=-1,n=t.length,o=e;for(e===t&&(t=Ke(t)),r&&(o=ye(e,At(r)));++s<n;)for(var l=0,c=t[s],u=r?r(c):c;(l=i(o,u,l,a))>-1;)o!==e&&oi.call(o,l,1),oi.call(e,l,1);return e}(e,t):e})),ci=ft((function(e,t){if(null==e)return[];var r=t.length;return r>1&&yt(e,t[0],t[1])?t=[]:r>2&&yt(t[0],t[1],t[2])&&(t=[t[0]]),ii(e,gr(t,1),[])})),ui={add:"hinzufgen",cancel:"abbrechen",next:"weiter",save:"speichern",delete:"lschen"},di={no_group_selected:"Whle zuerst eine Gruppe aus",no_entity_selected:"Whle zuerst eine Entity aus",no_groups_defined:"Es gibt keine Gruppe",no_entities_for_group:"Es gibt keine Entities in dieser Gruppe",no_actions_for_entity:"Es gibt keine Aktionen fr diese Entity",no_entries_defined:"Es gibt keine Eintrge"},hi={group:"Gruppe",entity:"Entity",action:"Aktion",days:"Tage",time:"Zeit",options:"Optionen",day_type_daily:"jeden Tag",day_type_weekdays:"Werktags",day_type_custom:"benutzerdefiniert",shift_with_sun:"Zeit automatisch an Sonnenauf- bzw. Sonnenuntergang anpassen",brightness:"Helligkeit",temperature:"Temperatur",position:"Position"},pi={mon:"Mo",tue:"Di",wed:"Mi",thu:"Do",fri:"Fr",sat:"Sa",sun:"So"},fi={mon:"Montag",tue:"Dienstag",wed:"Mittwoch",thu:"Donnerstag",fri:"Freitag",sat:"Samstag",sun:"Sonntag"},mi={on:"An",every:"jeden",and:"und",at:"um",before:"vor",after:"nach",sunrise:"Sonnenaufgang",sunset:"Sonnenuntergang"},vi={turn_on:"anschalten",turn_off:"ausschalten",close_cover:"schlieen",open_cover:"ffnen",set_temperature:"Temperatur einstellen",set_to:"setzen auf",set_position:"Position setzen"},yi={climate:"Heizung",cover:"Beschattung",fan:"Lfter",light:"Licht",switch:"Schalter",vacuum:"Staubsauger"},gi={scheduler:"Zeitplaner",actions:ui,instructions:di,fields:hi,days_short:pi,days_long:fi,words:mi,services:vi,domains:yi},bi=Object.freeze({__proto__:null,scheduler:"Zeitplaner",actions:ui,instructions:di,fields:hi,days_short:pi,days_long:fi,words:mi,services:vi,domains:yi,default:gi}),_i={add:"add item",cancel:"cancel",next:"next",save:"save",delete:"delete"},wi={no_group_selected:"Select a group first",no_entity_selected:"Select an entity first",no_groups_defined:"There are no groups defined",no_entities_for_group:"There are no entities in this group",no_actions_for_entity:"There are no actions for this entity",no_entries_defined:"There are no items to show"},Pi={group:"Group",entity:"Entity",action:"Action",days:"Days",time:"Time",options:"Options",day_type_daily:"every day",day_type_weekdays:"weekdays",day_type_custom:"custom",shift_with_sun:"automatically adjust time to sunrise/sunset",brightness:"Brightness",temperature:"Temperature",position:"Position"},Ei={mon:"mon",tue:"tue",wed:"wed",thu:"thu",fri:"fri",sat:"sat",sun:"sun"},Si={mon:"monday",tue:"tuesday",wed:"wednesday",thu:"thursday",fri:"friday",sat:"saturday",sun:"sunday"},xi={on:"on",every:"every",and:"and",at:"at",before:"before",after:"after",sunrise:"sunrise",sunset:"sunset"},ji={turn_on:"turn on",turn_off:"turn off",close_cover:"close",open_cover:"open",set_temperature:"set temperature",set_to:"set to",set_position:"set position"},$i={climate:"climate",cover:"covers",fan:"fans",light:"lights",switch:"switches",vacuum:"vacuum"},Oi={scheduler:"Scheduler",actions:_i,instructions:wi,fields:Pi,days_short:Ei,days_long:Si,words:xi,services:ji,domains:$i},ki=Object.freeze({__proto__:null,scheduler:"Scheduler",actions:_i,instructions:wi,fields:Pi,days_short:Ei,days_long:Si,words:xi,services:ji,domains:$i,default:Oi}),Ai={add:"Agregar",cancel:"cancelar",next:"siguiente",save:"guardar",delete:"borrar"},Ci={no_group_selected:"Selecciona un grupo primero",no_entity_selected:"Selecciona una entidad primero",no_groups_defined:"No hay grupos definidos",no_entities_for_group:"No hay entidades en este grupo",no_actions_for_entity:"No hay acciones para esta entidad",no_entries_defined:"No hay dispositivos definidos"},Fi={group:"Grupo",entity:"Entidad",action:"Accin",days:"Das",time:"Hora",options:"Opciones",day_type_daily:"cada da",day_type_weekdays:"dias semanales",day_type_custom:"personalizado",shift_with_sun:"ajusta automaticamente la hora al amanecer/atardecer",brightness:"Brillo",temperature:"Temperatura",position:"Posicin"},Di={mon:"lun",tue:"mar",wed:"mie",thu:"jue",fri:"vie",sat:"sab",sun:"dom"},zi={mon:"lunes",tue:"martes",wed:"mircoles",thu:"jueves",fri:"viernes",sat:"sbado",sun:"domingo"},Ri={on:"el",every:"cada",and:"y",at:"a las",before:"antes",after:"despus",sunrise:"amanecer",sunset:"atardecer"},Ti={turn_on:"encender",turn_off:"apagar",close_cover:"cerrar",open_cover:"abrir",set_temperature:"establecer temperatura",set_to:"establecer a",set_position:"posicin de ajuste"},Ii={climate:"climatizacin",cover:"persiana",fan:"ventilador",light:"luces",switch:"interruptores",vacuum:"aspirador"},Ni={scheduler:"Programador",actions:Ai,instructions:Ci,fields:Fi,days_short:Di,days_long:zi,words:Ri,services:Ti,domains:Ii},Ui=Object.freeze({__proto__:null,scheduler:"Programador",actions:Ai,instructions:Ci,fields:Fi,days_short:Di,days_long:zi,words:Ri,services:Ti,domains:Ii,default:Ni}),Li={add:"lisa ajastus",cancel:"loobu",next:"jrgmine",save:"salvesta",delete:"kustuta"},qi={no_group_selected:"Vali grupp",no_entity_selected:"Vali olem",no_groups_defined:"Gruppe pole mratud",no_entities_for_group:"Antud grupis puuduvad olemid",no_actions_for_entity:"Selles olemis puuduvad tegevused",no_entries_defined:"Pole midagi kuvada"},Vi={group:"Grupp",entity:"Olem",action:"Tegevus",days:"Pev",time:"Aeg",options:"Suvandid",day_type_daily:"iga pev",day_type_weekdays:"ndalapev",day_type_custom:"seadistatud",shift_with_sun:"mrake automaatselt Pikese tus/loojang",brightness:"Heledus",temperature:"Temperatuur",position:"Asukoht"},Mi={mon:"E",tue:"T",wed:"K",thu:"N",fri:"R",sat:"L",sun:"P"},Hi={mon:"Esmaspev",tue:"Teisipev",wed:"Kolmapev",thu:"Neljapev",fri:"Reede",sat:"Laupev",sun:"Phapev"},Qi={on:"sisse",every:"iga",and:"ja",at:"ajal",before:"enne",after:"prast",sunrise:"pikesetus",sunset:"loojang"},Bi={turn_on:"llita sisse",turn_off:"llita vlja",close_cover:"sulge",open_cover:"ava",set_temperature:"mra temperatuur",set_to:"seadista vrtusele",set_position:"seadista asendisse"},Gi={climate:"kliimaseade",cover:"(akna)katted",fan:"ventilaatorid",light:"tuled",switch:"llitid",vacuum:"tolmuimejad"},Ki={scheduler:"Ajastaja",actions:Li,instructions:qi,fields:Vi,days_short:Mi,days_long:Hi,words:Qi,services:Bi,domains:Gi},Ji=Object.freeze({__proto__:null,scheduler:"Ajastaja",actions:Li,instructions:qi,fields:Vi,days_short:Mi,days_long:Hi,words:Qi,services:Bi,domains:Gi,default:Ki}),Wi={add:"ajouter un item",cancel:"annuler",next:"suivant",save:"sauvegarder",delete:"effacer"},Zi={no_group_selected:"Slectionner un groupe en premier",no_entity_selected:"Slectionner une entit en premier",no_groups_defined:"Il n'y a pas de groupe dfini",no_entities_for_group:"Il n'y a pas d'entit dans ce groupe",no_actions_for_entity:"Il n'y a pas d'action pour cette entit",no_entries_defined:"Il n'y a pas d'item  afficher"},Yi={group:"Groupe",entity:"Entit",action:"Action",days:"Jours",time:"Temps",options:"Options",day_type_daily:"chaque jour",day_type_weekdays:"en semaine",day_type_custom:"sur mesure",shift_with_sun:"ajuster automatiquement l'heure au lever/coucher du soleil",brightness:"Luminosit",temperature:"Temprature",position:"Position"},Xi={mon:"lun",tue:"mar",wed:"mer",thu:"jeu",fri:"ven",sat:"sam",sun:"dim"},es={mon:"lundi",tue:"mardi",wed:"mercredi",thu:"jeudi",fri:"vendredi",sat:"samedi",sun:"dimanche"},ts={on:"marche",every:"tout",and:"et",at:"",before:"avant",after:"aprs",sunrise:"lever du soleil",sunset:"coucher du soleil"},rs={turn_on:"allumer",turn_off:"teindre",close_cover:"fermer",open_cover:"ouvrir",set_temperature:"rgler la temprature",set_to:"dfini ",set_position:"position dfinie"},as={climate:"climat",cover:"contrleur",fan:"ventilateur",light:"lumire",switch:"interrupteurs",vacuum:"aspirateur"},is={scheduler:"Planificateur",actions:Wi,instructions:Zi,fields:Yi,days_short:Xi,days_long:es,words:ts,services:rs,domains:as},ss=Object.freeze({__proto__:null,scheduler:"Planificateur",actions:Wi,instructions:Zi,fields:Yi,days_short:Xi,days_long:es,words:ts,services:rs,domains:as,default:is}),ns={add:"j idzts",cancel:"mgse",next:"tovbb",save:"trls",delete:"delete"},os={no_group_selected:"Elbb egy csoportot szksges vlasztani",no_entity_selected:"Elbb egy entitst szksges vlasztani",no_groups_defined:"Nincsenek deffinilt csoportok",no_entities_for_group:"Ebben a csoportban nem tallhatk entitsok",no_actions_for_entity:"Ehhez az entitshoz nem tartoznak mveletek",no_entries_defined:"Nincs megjelenthet elem"},ls={group:"Csoport",entity:"Entits",action:"Mvelet",days:"Napokon",time:"Idpontban",options:"Opcik",day_type_daily:"minden nap",day_type_weekdays:"munkanapokon",day_type_custom:"egyedi",shift_with_sun:"Az id automatikus igaztsa napkelthez/naplementhez",brightness:"Fnyer",temperature:"Hmrsklet",position:"Pozcit"},cs={mon:"ht",tue:"ked",wed:"sze",thu:"cs",fri:"pn",sat:"szo",sun:"vas"},us={mon:"htf",tue:"kedd",wed:"szerda",thu:"cstrtk",fri:"pntek",sat:"szombat",sun:"vasrnap"},ds={on:"on",every:"minden",and:"s",at:"at",before:"eltt",after:"utn",sunrise:"napkelte",sunset:"naplemente"},hs={turn_on:"bekapcsols",turn_off:"kikapcsols",close_cover:"zrs",open_cover:"nyits",set_temperature:"hmrsklet",set_to:"belltva",set_position:"vltoztass pozcit"},ps={climate:"termosztt",cover:"redny",fan:"ventiltor",light:"lmpa",switch:"kapcsol",vacuum:"prszv"},fs={scheduler:"Idztsek",actions:ns,instructions:os,fields:ls,days_short:cs,days_long:us,words:ds,services:hs,domains:ps},ms=Object.freeze({__proto__:null,scheduler:"Idztsek",actions:ns,instructions:os,fields:ls,days_short:cs,days_long:us,words:ds,services:hs,domains:ps,default:fs}),vs={add:"Nieuw item",cancel:"annuleren",next:"verder",save:"opslaan",delete:"verwijder"},ys={no_group_selected:"Selecteer eerst een groep",no_entity_selected:"Selecteer eerst een entiteit",no_groups_defined:"Er zijn geen groepen gedefinieerd",no_entities_for_group:"Deze groep heeft geen entiteiten",no_actions_for_entity:"Deze entiteit heeft geen acties",no_entries_defined:"Er zijn geen items aangemaakt"},gs={group:"Groep",entity:"Entiteit",action:"Actie",days:"Dagen",time:"Tijdstip",options:"Opties",day_type_daily:"Dagelijks",day_type_weekdays:"werkdagen",day_type_custom:"Anders",shift_with_sun:"Automatisch aanpassen aan zonsopgang/zonsondergang",brightness:"Helderheid",temperature:"Temperatuur",position:"Positie"},bs={mon:"ma",tue:"di",wed:"wo",thu:"do",fri:"vr",sat:"za",sun:"zo"},_s={mon:"maandag",tue:"dinsdag",wed:"woensdag",thu:"donderdag",fri:"vrijdag",sat:"zaterdag",sun:"zondag"},ws={on:"op",every:"elke",and:"en",at:"om",before:"voor",after:"na",sunrise:"zonsopgang",sunset:"zonsondergang"},Ps={turn_on:"aanzetten",turn_off:"uitzetten",close_cover:"sluiten",open_cover:"openen",set_temperature:"temperatuur instellen",set_to:"Zet op",set_position:"positie instellen"},Es={climate:"verwarming",cover:"zonwering",fan:"ventilatie",light:"verlichting",switch:"schakelaars",vacuum:"stofzuiger"},Ss={scheduler:"Tijdplanner",actions:vs,instructions:ys,fields:gs,days_short:bs,days_long:_s,words:ws,services:Ps,domains:Es},xs=Object.freeze({__proto__:null,scheduler:"Tijdplanner",actions:vs,instructions:ys,fields:gs,days_short:bs,days_long:_s,words:ws,services:Ps,domains:Es,default:Ss}),js={add:"legg til",cancel:"avbryt",next:"neste",save:"lagre",delete:"slett"},$s={no_group_selected:"Velg en gruppe frst",no_entity_selected:"Velg en entitet frst",no_groups_defined:"Ingen grupper definert",no_entities_for_group:"Det finnes ingen entiteter i denne gruppen",no_actions_for_entity:"Det finnes ingen handlinger for denne entiteten",no_entries_defined:"Det er ingen definerte tidsplaner  vise"},Os={group:"Gruppe",entity:"Entitet",action:"Handling",days:"Dager",time:"Tid",options:"Valg",day_type_daily:"hver dag",day_type_weekdays:"ukedager",day_type_custom:"egendefinert",shift_with_sun:"automatisk juster tid for soloppgang/solnedgang",brightness:"Lysstyrke",temperature:"Temperatur",position:"Posisjon"},ks={mon:"man",tue:"tir",wed:"ons",thu:"tor",fri:"fre",sat:"lr",sun:"sn"},As={mon:"mandag",tue:"tirsdag",wed:"onsdag",thu:"torsdag",fri:"fredag",sat:"lrdag",sun:"sndag"},Cs={on:"den",every:"hver",and:"og",at:"p",before:"fr",after:"etter",sunrise:"soloppgang",sunset:"solnedgang"},Fs={turn_on:"sl p",turn_off:"sl av",close_cover:"lukk",open_cover:"pne",set_temperature:"sett temperatur",set_to:"sett til",set_position:"sett posisjon"},Ds={climate:"klima",cover:"cover",fan:"vifter",light:"lys",switch:"brytere",vacuum:"stvsugere"},zs={scheduler:"Tidsplan",actions:js,instructions:$s,fields:Os,days_short:ks,days_long:As,words:Cs,services:Fs,domains:Ds},Rs=Object.freeze({__proto__:null,scheduler:"Tidsplan",actions:js,instructions:$s,fields:Os,days_short:ks,days_long:As,words:Cs,services:Fs,domains:Ds,default:zs}),Ts={add:"dodaj",cancel:"anuluj",next:"dalej",save:"zapisz",delete:"usu"},Is={no_group_selected:"Najpierw wybierz grup",no_entity_selected:"Najpierw wybierz encj",no_groups_defined:"Nie ma zdefiniowanych grup",no_entities_for_group:"Nie ma encji w tej grupie",no_actions_for_entity:"Nie ma akcji dla tej encji",no_entries_defined:"Nie ma elementw do pokazania"},Ns={group:"Grupa",entity:"Encja",action:"Akcja",days:"Dni",time:"Czas",options:"Opcje",day_type_daily:"codziennie",day_type_weekdays:"dni tygodnia",day_type_custom:"niestandardowy",shift_with_sun:"automatycznie dopasuj czas do wschodw/zachodw",brightness:"Jasno",temperature:"Temperatura",position:"Pozycj"},Us={mon:"pon",tue:"wt",wed:"r",thu:"czw",fri:"pt",sat:"sob",sun:"niedz"},Ls={mon:"poniedziaek",tue:"wtorek",wed:"roda",thu:"czwartek",fri:"pitek",sat:"sobota",sun:"niedziela"},qs={on:"w",every:"kady",and:"oraz",at:"o",before:"przed",after:"po",sunrise:"wschd",sunset:"zachodw"},Vs={turn_on:"wcz",turn_off:"wycz",close_cover:"zamknij",open_cover:"otwrz",set_temperature:"Ustaw temperatur",set_to:"ustaw na",set_position:"Ustaw pozycj"},Ms={climate:"termostat",cover:"roleta",fan:"wiatrak",light:"wiato",switch:"wcznik",vacuum:"odkurzacz"},Hs={scheduler:"Harmonogram",actions:Ts,instructions:Is,fields:Ns,days_short:Us,days_long:Ls,words:qs,services:Vs,domains:Ms},Qs=Object.freeze({__proto__:null,scheduler:"Harmonogram",actions:Ts,instructions:Is,fields:Ns,days_short:Us,days_long:Ls,words:qs,services:Vs,domains:Ms,default:Hs}),Bs={add:"adicionar item",cancel:"cancelar",next:"prximo",save:"gravar",delete:"apagar"},Gs={no_group_selected:"Selecione um grupo primeiro",no_entity_selected:"Selecione uma entidade primeiro",no_groups_defined:"No tem grupo definido",no_entities_for_group:"No tem entidade no grupo",no_actions_for_entity:"No h aes para esta entidade",no_entries_defined:"No tem item pra mostar"},Ks={group:"Grupo",entity:"Entidade",action:"Ao",days:"Dias",time:"Hora",options:"Opes",day_type_daily:"todos os dias",day_type_weekdays:"dias da semana",day_type_custom:"personalizado",shift_with_sun:"automaticamente ajusta hora pelo nascer do sol/pr do sol",brightness:"Brilho",temperature:"Temperatura",position:"Posio"},Js={mon:"seg",tue:"ter",wed:"qua",thu:"qui",fri:"sex",sat:"sab",sun:"dom"},Ws={mon:"segunda",tue:"tera",wed:"quarta",thu:"quinta",fri:"sexta",sat:"sabdo",sun:"domingo"},Zs={on:"on",every:"cada",and:"e",at:"s",before:"antes",after:"depois",sunrise:"nascer do sol",sunset:"pr do sol"},Ys={turn_on:"ligar",turn_off:"desligar",close_cover:"fechar",open_cover:"abrir",set_temperature:"ajustar temperatura",set_to:"ajustar para",set_position:"ajustar posio"},Xs={climate:"ar condicionado",cover:"persiana",fan:"ventilador",light:"luz",switch:"interruptor",vacuum:"aspirador"},en={scheduler:"Agenda",actions:Bs,instructions:Gs,fields:Ks,days_short:Js,days_long:Ws,words:Zs,services:Ys,domains:Xs},tn=Object.freeze({__proto__:null,scheduler:"Agenda",actions:Bs,instructions:Gs,fields:Ks,days_short:Js,days_long:Ws,words:Zs,services:Ys,domains:Xs,default:en}),rn={add:"",cancel:"",next:"",save:"",delete:""},an={no_group_selected:"  ",no_entity_selected:"  ",no_groups_defined:"    ",no_entities_for_group:"    ",no_actions_for_entity:"    ",no_entries_defined:" "},sn={group:"",entity:"",action:"",days:"",time:"",options:"",day_type_daily:"",day_type_weekdays:" ",day_type_custom:" ",shift_with_sun:"     / ",brightness:"",temperature:"",position:""},nn={mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},on={mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},ln={on:"",every:"",and:"",at:"",before:"",after:"",sunrise:"",sunset:""},cn={turn_on:"",turn_off:"",close_cover:"",open_cover:"",set_temperature:" ",set_to:"",set_position:" "},un={climate:"",cover:"",fan:"",light:"",switch:"",vacuum:""},dn={scheduler:"",actions:rn,instructions:an,fields:sn,days_short:nn,days_long:on,words:ln,services:cn,domains:un},hn={de:bi,en:ki,es:Ui,et:Ji,es_419:Ui,fr:ss,hu:ms,nb:Rs,nl:xs,nn:Rs,no:Rs,pl:Qs,pt:tn,pt_BR:tn,ru:Object.freeze({__proto__:null,scheduler:"",actions:rn,instructions:an,fields:sn,days_short:nn,days_long:on,words:ln,services:cn,domains:un,default:dn})};function pn(e,t="",r=""){const a=fn();var i;try{i=e.split(".").reduce((e,t)=>e[t],hn[a])}catch(t){i=e.split(".").reduce((e,t)=>e[t],hn.en)}return void 0===i&&(i=e.split(".").reduce((e,t)=>e[t],hn.en)),""!==t&&""!==r&&(i=i.replace(t,r)),i}function fn(){var e;let t=null===(e=localStorage.getItem("selectedLanguage"))||void 0===e?void 0:e.replace(/['"]+/g,"").replace("-","_");if(!t||"null"==t){const e=document.querySelector("home-assistant").hass;t=e.selectedLanguage||e.language||"en"}return String(t)}function mn(e,t){let r=e>=0?Math.floor(e/60):Math.ceil(e/60),a=e-60*r;return a%t!=0&&(a=Math.round(a/t)*t),a>=60&&(r++,a-=60),r>=24&&(r-=24),60*r+a}function vn(e,t={}){let r=!!t.amPm&&t.amPm,a=!!t.absolute&&t.absolute,i=e>=0?Math.floor(e/60):Math.ceil(e/60),s=e-60*i,n="";r&&(n=i>=12?"PM":"AM",(i>12||12==i&&s>0)&&(i-=12));let o=String(Math.abs(i)).padStart(2,"0"),l=String(Math.abs(s)).padStart(2,"0"),c=i<0||s<0;return{hours:o,minutes:l,time:`${c&&!a?"-":""}${o}:${l}${r?" "+n:""}`,signed:c,amPm:n}}function yn(e,t={}){let r=t.stepSize?t.stepSize:1,a=!!t.signed&&t.signed,i=t.max?t.max:1440,s=mn(e,r);return s<0&&!a?e+=1440:s>=1440&&(e-=1440),s<-i?-i:s>i?i:e}function gn(e){let t,r,a;if(null!==(a=/^([0-9]{2}):([0-9]{2})$/.exec(e)))[t,r]=[Number(a[1]),Number(a[2])];else if(null!==(a=/^([0-9]{2})([0-9]{2})$/.exec(e)))[t,r]=[Number(a[1]),Number(a[2])];else{if(null!==(a=/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}[\+|\-][0-9]{2}:[0-9]{2}$/.exec(e))){let e=new Date(a[0]);return gn(`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`)}console.log(`failed to parse timestamp '${e}'`)}return 60*t+r}function bn(e){return"weekdays"==e.daysType?[1,2,3,4,5]:"custom"==e.daysType?e.daysCustom.sort().filter(e=>0!=e):[]}const _n={light:{actions:[{service:"turn_on",icon:"lightbulb-on-outline",variable:{field:"brightness"}},{service:"turn_off",icon:"lightbulb-off-outline"}]},switch:{actions:[{service:"turn_on"},{service:"turn_off"}]},cover:{actions:[{service:"open_cover",name:pn("services.open_cover")},{service:"close_cover",name:pn("services.close_cover")},{service:"set_cover_position",name:pn("services.set_position"),variable:{field:"position"}}]},climate:{actions:[{service:"set_temperature",variable:{field:"temperature"},icon:"thermometer"},{service:"turn_off",icon:"thermometer-off"}]},fan:{actions:[{service:"turn_on",icon:"fan"},{service:"turn_off",icon:"fan-off"}]}};function wn(e){var t={automation:"robot",camera:"camera",climate:"home-thermometer-outline",cover:"window-shutter",fan:"fan",input_number:"sort-numeric-variant",input_select:"form-select",input_text:"form-textbox",input_time:"clock",light:"lightbulb-outline",media_player:"speaker",script:"script-text",switch:"flash",vacuum:"robot-vacuum"};return e in t?t[e]:"folder-outline"}function Pn(e){let t=null;return"climate"==e?t=pn("domains.climate"):"cover"==e?t=pn("domains.cover"):"fan"==e?t=pn("domains.fan"):"light"==e?t=pn("domains.light"):"switch"==e?t=pn("domains.switch"):"vacuum"==e&&(t=pn("domains.vacuum")),t||e}function En(e){const t={brightness:{name:pn("fields.brightness"),unit:"",min:0,max:255,step:1,optional:!0,show_percentage:!0},temperature:{name:pn("fields.temperature"),unit:"C",min:10,max:30,step:1,optional:!1,show_percentage:!1},position:{name:pn("fields.position"),unit:"%",min:0,max:100,step:1,optional:!1,show_percentage:!1},default:{name:e,unit:"",min:0,max:255,step:1,optional:!1,show_percentage:!1}};return void 0!==t[e]?Object.assign({},t[e]):Object.assign({},t.default)}const Sn={id:"create_routine",service:"create_routine",name:"create routine",icon:"hass:cog-refresh-outline",routine:!1},xn=[{startTime:gn("00:00"),endTime:gn("08:00")},{startTime:gn("08:00"),endTime:gn("16:00")},{startTime:gn("16:00"),endTime:1440}];"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function jn(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var $n=jn((function(e,t){var r;r=function(){var e=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"\'","":"\'","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial"}'),t=JSON.parse('{"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue"},"vi":{"":"D","":"d"}}');function r(r,a){if("string"!=typeof r)throw new Error("slugify: string argument expected");var i=t[(a="string"==typeof a?{replacement:a}:a||{}).locale]||{},s=void 0===a.replacement?"-":a.replacement,n=r.split("").reduce((function(t,r){return t+(i[r]||e[r]||r).replace(a.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")}),"").trim().replace(new RegExp("[\\s"+s+"]+","g"),s);return a.lower&&(n=n.toLowerCase()),a.strict&&(n=n.replace(new RegExp("[^a-zA-Z0-9"+s+"]","g"),"").replace(new RegExp("[\\s"+s+"]+","g"),s)),n}return r.extend=function(t){for(var r in t)e[r]=t[r]},r},e.exports=r(),e.exports.default=r()}));const On=/^D([0-7]+)T([0-9SR\-\+]+)([A0-9+]+)$/,kn=/^(A([0-9]+))+$/,An=/^([0-9]{4})?(S[SR])([0-9]{4})?$/;function Cn(e){if(-1===e.indexOf("."))return"";return String(e.split(".").shift())}function Fn(e){let t=Mt(e);t=t.sort();let r={};return t.forEach(t=>r[t]=e[t]),$n(JSON.stringify(Qa(r)).replace(/\W/g," "),"_")}function Dn(e){return e.match(/^switch.schedule_[0-9a-f]{6}$/)}function zn(e){return!e||!e.length||1==e.length&&0==e[0]?"daily":5!=e.length||e.includes(6)||e.includes(7)?"custom":"weekdays"}function Rn(e){if("daily"==zn(e))return pn("fields.day_type_daily");if("weekdays"==zn(e))return`${pn("words.on")} ${pn("fields.day_type_weekdays")}`;{let r=Array();e.includes(1)&&r.push(pn("days_long.mon")),e.includes(2)&&r.push(pn("days_long.tue")),e.includes(3)&&r.push(pn("days_long.wed")),e.includes(4)&&r.push(pn("days_long.thu")),e.includes(5)&&r.push(pn("days_long.fri")),e.includes(6)&&r.push(pn("days_long.sat")),e.includes(7)&&r.push(pn("days_long.sun"));let a=r.join(", ");var t=a.lastIndexOf(", ");return t&&(a=a.slice(0,t)+a.slice(t).replace(", ",` ${pn("words.and")} `)),`${pn("words.every")} ${a}`}}function Tn(e,t){let r=!!t.amPm&&t.amPm;if(!e.event)return`${pn("words.at")} ${vn(e.value,{amPm:r}).time}`;let a="unknown";if("sunrise"==e.event&&null!==t.sunrise){a=vn(yn(Number(t.sunrise)+e.value),{amPm:r}).time}else if("sunset"==e.event&&null!==t.sunset){a=vn(yn(Number(t.sunset)+e.value),{amPm:r}).time}return 0==Math.abs(e.value)?`${pn("words.at")} ${pn("words."+e.event)} (${a})`:`${vn(e.value,{absolute:!0}).time} ${vn(e.value).signed?pn("words.before"):pn("words.after")} ${pn("words."+e.event)} (${a})`}function In(e){return"string"!=typeof e&&(e=String(e)),Ln(e.replace(/_/g," "))}function Nn(e){return"string"!=typeof e&&(e=String(e)),e.match(/^[a-z]+:[a-z0-9-]+$/i)?e:"hass:"+e}function Un(e,t){let r=In(t.name);if(e.hasOwnProperty("level")){let a=t.variable,i=Number(e.level),s=a.hasOwnProperty("unit")?a.unit:"";a.show_percentage&&(i=Math.round((i-a.min)/(a.max-a.min)*100),i<a.min?i=a.min:i>a.max&&(i=a.max),s="%"),r=`${pn("services.set_to")} ${i}${s}`}return Ln(r)}function Ln(e){return e.charAt(0).toUpperCase()+e.slice(1)}function qn(e){let t=e.map(e=>{let t={startTime:e.time.value,endTime:e.time.value,action:e.action};return e.hasOwnProperty("level")&&Object.assign(t,{level:e.level}),e.hasOwnProperty("levelEnabled")&&Object.assign(t,{levelEnabled:e.levelEnabled}),t});t.find(e=>0==e.startTime)||t.push({startTime:0,endTime:0}),t.sort((e,t)=>e.startTime>t.startTime?1:e.startTime<t.startTime?-1:0);let r,a=1440;for(r=t.length-1;r>=0;r--)t[r].endTime=a,a=t[r].startTime;return t}class Vn{constructor(){this.entities=[],this.groups=[],this.userConfig={groups:{},domains:{},entities:{},discover_existing:!0,standard_configuration:!0}}setUserConfig(e){Object.assign(this.userConfig,si(e,["entities","groups","discover_existing","standard_configuration"])),this.userConfig.standard_configuration&&Object.assign(this.userConfig,{domains:_n}),e.domains&&Ra(e.domains,(e,t)=>{let r=Object.assign({},this.userConfig.domains);Object.assign(r,{[t]:e}),this.userConfig.domains=r}),this.userConfig.groups&&Ra(e.groups,this.AddGroup.bind(this))}AddGroup(e,t){if(this.FindGroup(t))return;let r=Object.assign({id:t,icon:"folder-outline",domains:[],entities:[],name:Pn(t)},ri(Object.assign({},e),Ja));this.groups.push(r)}FindGroup(e){let t=La(this.groups,{id:e});return t||null}AddEntityToGroup(e){let t=Cn(e),r=La(this.groups,r=>r.domains.includes(t)||r.entities.includes(e));if(!r)if(r=this.FindGroup(t),r){let a=[...r.entities];a.push(e),this.groups.forEach((e,r)=>{e.id==t&&(this.groups[r].entities=a)})}else this.AddGroup({icon:wn(t),entities:[e]},t)}GetGroups(){let e=[...this.groups];return e=ci(e,"name"),e}AddEntity(e,t){if(this.FindEntity(t))return;let r=Object.assign({id:t,name:t.split(".").pop(),icon:wn(Cn(t))},ri(Object.assign({},e),Ja));this.entities.push(r),this.AddEntityToGroup(t)}FindEntity(e){let t=La(this.entities,{id:e});return t||null}GetEntitiesForGroup(e){let t=[...this.entities];if(e){let r=this.FindGroup(e);if(!r)return[];t=t.filter(e=>{let t=Cn(e.id);return(null==r?void 0:r.entities.includes(e.id))||(null==r?void 0:r.domains.includes(t))})}return t=ci(t,"name"),t}AddActionToEntity(e,t){if(!this.FindEntity(e))throw Error(`Entity '${e}' must be created before actions can be assigned`);if(this.FindAction(e,t.id))return;if(this.GetActionsForEntity(e).find(e=>!!e.hasOwnProperty("variable")&&!(!t.hasOwnProperty("service_data")||!t.service_data.hasOwnProperty(e.variable.field))))return;let r=[...this.GetActionsForEntity(e)];r.push(t),this.entities.forEach((t,a)=>{t.id==e&&(this.entities[a].actions=r)})}CreateAction(e){let t={id:Fn(si(e,["service","service_data"])),name:(a=e.service,"turn_on"==a?pn("services.turn_on"):"turn_off"==a?pn("services.turn_off"):"open_cover"==a?pn("services.open_cover"):"close_cover"==a?pn("services.close_cover"):"set_temperature"==a?pn("services.set_temperature"):"set_cover_position"==a?pn("services.set_position"):-1!==a.indexOf(".")?a.split(".").pop():a),icon:(r=e.service,"turn_on"==r?"toggle-switch-outline":"turn_off"==r?"toggle-switch-off-outline":"open_cover"==r?"window-shutter-open":"close_cover"==r?"window-shutter":"set_temperature"==r?"thermometer":"set_cover_position"==r?"window-shutter":"flash"),service:e.service,routine:!1};var r,a;return Ha(e,"service_data")&&!function(e){if(null==e)return!0;if(vt(e)&&(ge(e)||"string"==typeof e||"function"==typeof e.splice||Ot(e)||Tt(e)||St(e)))return!e.length;var t=Wr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(bt(e))return!Vt(e).length;for(var r in e)if(Ga.call(e,r))return!1;return!0}(e)&&Object.assign(t,si(e,"service_data")),Ha(e,"icon")&&Object.assign(t,si(e,"icon")),Ha(e,"name")&&Object.assign(t,si(e,"name")),Ha(e,"variable")&&Object.assign(t,{variable:Object.assign(En(e.variable.field),e.variable)}),Ha(e,"routine")&&Object.assign(t,si(e,"routine")),t}FindAction(e,t){let r=this.GetActionsForEntity(e),a=La(r,{id:t});return a||null}GetActionsForEntity(e){let t=this.FindEntity(e);if(!t)return[];let r=[...t.actions];return r.filter(e=>e.routine).length&&!La(r,{id:Sn.id})&&r.push(Object.assign({},Sn)),r=ci(r,"name"),r}LoadEntities(e){if(Ra(e,t=>{let r=t.entity_id,a=Cn(r);if(!Dn(r)&&(a in this.userConfig.domains||r in this.userConfig.entities)){let i=[],s={actions:[],name:e[r].attributes.friendly_name,icon:e[r].attributes.icon},n=!1;if(a in this.userConfig.domains&&(Ha(this.userConfig.domains[a],"include")&&!this.userConfig.domains[a].include.includes(r)&&(n=!0),Ha(this.userConfig.domains[a],"exclude")&&this.userConfig.domains[a].exclude.includes(r)&&(n=!0),Object.assign(s,Xa(this.userConfig.domains[a],"actions")),Ha(this.userConfig.domains[a],"actions")&&!n)){let e=Wa(this.userConfig.domains[a].actions,e=>{if(Cn((e=Object.assign({},e)).service)==a&&(e=Object.assign(e,{service:e.service.split(".").pop()})),"light"==a&&t.attributes.hasOwnProperty("supported_features")){!(1&t.attributes.supported_features)&&e.variable&&delete e.variable}else if("cover"==a&&t.attributes.hasOwnProperty("supported_features")){if(!(4&t.attributes.supported_features)&&e.variable)return null}return this.CreateAction(e)});e=Ia(e,e=>e),Ra(e,e=>i.push(e))}if(r in this.userConfig.entities){if(Object.assign(s,Xa(this.userConfig.entities[r],"actions")),Ha(this.userConfig.entities[r],"actions")){let e=Wa(this.userConfig.entities[r].actions,e=>{if(Cn((e=Object.assign({},e)).service)==a&&(e=Object.assign(e,{service:e.service.split(".").pop()})),"light"==a&&t.attributes.hasOwnProperty("supported_features")){!(1&t.attributes.supported_features)&&e.variable&&delete e.variable}else if("cover"==a&&t.attributes.hasOwnProperty("supported_features")){if(!(4&t.attributes.supported_features)&&e.variable)return null}return this.CreateAction(e)});e=Ia(e,e=>e),Ra(e,e=>i.push(e))}n=!1}if(n)return;this.AddEntity(s,r),Ra(i,e=>this.AddActionToEntity(r,e))}}),this.userConfig.discover_existing){let a=Ia(e,e=>Dn(e.entity_id));r=e=>e.attributes.actions,a=(ge(t=a)?ye:qa)(t,Aa(r)),a=br(a),Ra(a,t=>{let r=Object.assign({},t),a=r.entity,i=r.service,s=Xa(r,["entity","service"]);Cn(a)||(a=Cn(i)+"."+a,i=i.split(".").pop());let n=this.CreateAction({service:i,service_data:s});if(!this.FindEntity(a)){if(!e[a])return;let t={actions:[],name:e[a].attributes.friendly_name,icon:e[a].attributes.icon};this.AddEntity(t,a)}this.AddActionToEntity(a,n)})}var t,r}}const Mn=te`
      /* list view */

      div.list-item {
        display: grid;
        grid-template-columns: min-content 1fr min-content;
        grid-template-rows: min-content min-content min-content min-content;
        grid-template-areas: "icon name switch"
                             "icon action switch"
                             "icon days switch"
                             "icon time switch";
        grid-gap: 2px 20px;
        background: none;
        cursor: pointer;
        padding: 10px 20px;
        position: relative;
        z-index: 1;
      }

      div.list-item:before  {
        content: " ";
        background: var(--list-item-background-color);
        opacity: 0.1;
        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: -1;
       }

      div.list-item:hover:before {
          background: var(--primary-color);
          border-radius: 4px;
      }

      div.list-item-icon {
        grid-area: icon;
        color: var(--state-icon-color);
      }

      div.list-item-icon ha-icon {
        width: 24px;
        height: 24px;
      }

      div.list-item-icon.enabled {
        color: var(--state-icon-active-color);
      }

      div.list-item-switch {
        grid-area: switch;
      }

      div.list-item-switch ha-switch {
        margin-top: 3px;
      }

      div.list-item-name {
        grid-area: name;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      div.list-item-action {
        grid-area: action;
        color: var(--secondary-text-color);
      }

      div.list-item-days {
        grid-area: days;
        color: var(--secondary-text-color);
      }

      div.list-item-time {
        grid-area: time;
        color: var(--secondary-text-color);
      }

      div.disabled div.list-item-icon, div.disabled div.list-item-name, div.disabled div.list-item-action, div.disabled div.list-item-days, div.disabled div.list-item-time {
        color: var(--disabled-text-color);
      }

      /* add/edit view */
   
      div.header {
        color: var(--secondary-text-color);
        text-transform: uppercase;
        font-size: 12px;
        font-weight: 500;
        margin: 0px 0px 0px 0px;
      }

      div.card-section {
        padding: 10px 10px;
      }

      div.card-section.first {
        padding-top: 0px;
      }
      
      div.card-section.last {
        padding-bottom: 10px;
      }

      div.text-field {
        color: var(--disabled-text-color);
      }

      div.summary {
        display: grid;
        grid-template-columns: 1fr max-content 1fr;
        grid-template-areas: "entity arrow action";
        grid-auto-flow: column;
        grid-gap: 5px;
      }

      div.summary-entity { grid-area: entity; }
      div.summary-action { grid-area: action; }
      div.summary-text { grid-area: text; }
      div.summary-icon { grid-area: icon; }
      div.summary-arrow {
        grid-area: arrow;
        color: var(--secondary-text-color);
        display: flex;
        justify-content:center;
        align-items:center;
      }

      div.summary-entity, div.summary-action {
        color: var(--dark-primary-color);
        padding: 10px;
        font-size: 14px;
        font-weight: 500;
        --mdc-icon-size: 20px;
        position: relative;
        display: flex;
        justify-content:center;
        align-items:center;
        display: grid;
        grid-template-columns: min-content 1fr;
        grid-template-areas: "icon text";
        grid-auto-flow: column;
        grid-gap: 10px;
      }

       div.summary-entity:before, div.summary-action:before  {
        content: " ";
        background: var(--primary-color);
        opacity: 0.15;
        border-radius: 4px;
        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: 1;
       }

       div.summary-text::first-letter {
        text-transform: uppercase;
       }

      div#day-list-custom.closed {
        display: none;
      }
      
      div#day-list-custom {
        overflow: hidden;
        max-height: 100px; /* approximate max height */
        transition-property: all;
        transition-duration: 1s;
        transition-timing-function: cubic-bezier(0, 1, 0.5, 1);
      }

      mwc-button {
        margin: 2px 0px;
      }

      mwc-button.active {
        background: var(--primary-color);
        --mdc-theme-primary: var(--text-primary-color);
        border-radius: 4px;
      }
      
      div.option-item {
        padding: 2px 5px;
        display: flex;
        align-items: center;
      }
      
      .padded-right {
        margin-right: 11px;
      }
`;var Hn=jn((function(e,t){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var a=t.length-1,i=1;i<a;++i)t[i]=t[i].slice(1,-1);return t[a]=t[a].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function a(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function s(e){var a=t("[0-9]","[A-Fa-f]"),i=r(r("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+r("%[89A-Fa-f]"+a+"%"+a+a)+"|"+r("%"+a+a)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",n=t("[\\:\\/\\?\\#\\[\\]\\@]",s),o=e?"[\\uE000-\\uF8FF]":"[]",l=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=(r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),r(r(i+"|"+t(l,s,"[\\:]"))+"*"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),u=r(c+"\\."+c+"\\."+c+"\\."+c),d=r(a+"{1,4}"),h=r(r(d+"\\:"+d)+"|"+u),p=r(r(d+"\\:")+"{6}"+h),f=r("\\:\\:"+r(d+"\\:")+"{5}"+h),m=r(r(d)+"?\\:\\:"+r(d+"\\:")+"{4}"+h),v=r(r(r(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+r(d+"\\:")+"{3}"+h),y=r(r(r(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+r(d+"\\:")+"{2}"+h),g=r(r(r(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+h),b=r(r(r(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+h),_=r(r(r(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),w=r(r(r(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),P=r([p,f,m,v,y,g,b,_,w].join("|")),E=r(r(l+"|"+i)+"+"),S=(r("[vV]"+a+"+\\."+t(l,s,"[\\:]")+"+"),r(r(i+"|"+t(l,s))+"*"),r(i+"|"+t(l,s,"[\\:\\@]")));return r(r(i+"|"+t(l,s,"[\\@]"))+"+"),r(r(S+"|"+t("[\\/\\?]",o))+"*"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",l,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",l,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",l,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",l,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",l,s,"[\\:\\@\\/\\?]",o),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",l,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",l,s),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",l,n),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+u+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+r(r("\\%25|\\%(?!"+a+"{2})")+"("+E+")")+"?\\]?$")}}var n=s(!1),o=s(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,i=!1,s=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function v(e){throw new RangeError(p[e])}function y(e,t){var r=e.split("@"),a="";r.length>1&&(a=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=[],a=e.length;a--;)r[a]=t(e[a]);return r}((e=e.replace(h,".")).split("."),t).join(".");return a+i}function g(e){for(var t=[],r=0,a=e.length;r<a;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<a){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),r--)}else t.push(i)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,r){var a=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;a+=36)e=f(e/35);return f(a+36*e/(e+38))},w=function(e){var t,r=[],a=e.length,i=0,s=128,n=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var l=0;l<o;++l)e.charCodeAt(l)>=128&&v("not-basic"),r.push(e.charCodeAt(l));for(var u=o>0?o+1:0;u<a;){for(var d=i,h=1,p=36;;p+=36){u>=a&&v("invalid-input");var m=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((c-i)/h))&&v("overflow"),i+=m*h;var y=p<=n?1:p>=n+26?26:p-n;if(m<y)break;var g=36-y;h>f(c/g)&&v("overflow"),h*=g}var b=r.length+1;n=_(i-d,b,0==d),f(i/b)>c-s&&v("overflow"),s+=f(i/b),i%=b,r.splice(i++,0,s)}return String.fromCodePoint.apply(String,r)},P=function(e){var t=[],r=(e=g(e)).length,a=128,i=0,s=72,n=!0,o=!1,l=void 0;try{for(var u,d=e[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var h=u.value;h<128&&t.push(m(h))}}catch(e){o=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}var p=t.length,y=p;for(p&&t.push("-");y<r;){var w=c,P=!0,E=!1,S=void 0;try{for(var x,j=e[Symbol.iterator]();!(P=(x=j.next()).done);P=!0){var $=x.value;$>=a&&$<w&&(w=$)}}catch(e){E=!0,S=e}finally{try{!P&&j.return&&j.return()}finally{if(E)throw S}}var O=y+1;w-a>f((c-i)/O)&&v("overflow"),i+=(w-a)*O,a=w;var k=!0,A=!1,C=void 0;try{for(var F,D=e[Symbol.iterator]();!(k=(F=D.next()).done);k=!0){var z=F.value;if(z<a&&++i>c&&v("overflow"),z==a){for(var R=i,T=36;;T+=36){var I=T<=s?1:T>=s+26?26:T-s;if(R<I)break;var N=R-I,U=36-I;t.push(m(b(I+N%U,0))),R=f(N/U)}t.push(m(b(R,0))),s=_(i,O,y==p),i=0,++y}}}catch(e){A=!0,C=e}finally{try{!k&&D.return&&D.return()}finally{if(A)throw C}}++i,++a}return t.join("")},E=function(e){return y(e,(function(e){return d.test(e)?"xn--"+P(e):e}))},S=function(e){return y(e,(function(e){return u.test(e)?w(e.slice(4).toLowerCase()):e}))},x={};function j(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function $(e){for(var t="",r=0,a=e.length;r<a;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(a-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(a-r>=9){var n=parseInt(e.substr(r+4,2),16),o=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&o)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function O(e,t){function r(e){var r=$(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,j).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,j).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,j).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,j).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,j).replace(t.PCT_ENCODED,i)),e}function k(e){return e.replace(/^0*(.*)/,"$1")||"0"}function A(e,t){var r=e.match(t.IPV4ADDRESS)||[],a=l(r,2)[1];return a?a.split(".").map(k).join("."):e}function C(e,t){var r=e.match(t.IPV6ADDRESS)||[],a=l(r,3),i=a[1],s=a[2];if(i){for(var n=i.toLowerCase().split("::").reverse(),o=l(n,2),c=o[0],u=o[1],d=u?u.split(":").map(k):[],h=c.split(":").map(k),p=t.IPV4ADDRESS.test(h[h.length-1]),f=p?7:8,m=h.length-f,v=Array(f),y=0;y<f;++y)v[y]=d[y]||h[m+y]||"";p&&(v[f-1]=A(v[f-1],t));var g=v.reduce((function(e,t,r){if(!t||"0"===t){var a=e[e.length-1];a&&a.index+a.length===r?a.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(g&&g.length>1){var _=v.slice(0,g.index),w=v.slice(g.index+g.length);b=_.join(":")+"::"+w.join(":")}else b=v.join(":");return s&&(b+="%"+s),b}return e}var F=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,D=void 0==="".match(/(){0}/)[1];function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},a=!1!==t.iri?o:n;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(F);if(i){D?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=C(A(r.host,a),a)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=x[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)O(r,a);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=E(r.host.replace(a.PCT_ENCODED,$).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(r,n)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function R(e,t){var r=!1!==t.iri?o:n,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(C(A(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(a.push(":"),a.push(String(e.port))),a.length?a.join(""):void 0}var T=/^\.\.?\//,I=/^\/\.(\/|$)/,N=/^\/\.\.(\/|$)/,U=/^\/?(?:.|\n)*?(?=\/|$)/;function L(e){for(var t=[];e.length;)if(e.match(T))e=e.replace(T,"");else if(e.match(I))e=e.replace(I,"/");else if(e.match(N))e=e.replace(N,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(U);if(!r)throw new Error("Unexpected dot segment condition");var a=r[0];e=e.slice(a.length),t.push(a)}return t.join("")}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?o:n,a=[],i=x[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?S(e.host):E(e.host.replace(r.PCT_ENCODED,$).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}O(e,r),"suffix"!==t.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var s=R(e,t);if(void 0!==s&&("suffix"!==t.reference&&a.push("//"),a.push(s),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||i&&i.absolutePath||(l=L(l)),void 0===s&&(l=l.replace(/^\/\//,"/%2F")),a.push(l)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3],i={};return a||(e=z(q(e,r),r),t=z(q(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=L(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=L(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=L(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=L(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function M(e,t){return e&&e.toString().replace(t&&t.iri?o.PCT_ENCODED:n.PCT_ENCODED,$)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},Q={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize};function B(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var G={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=B(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(B(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),a=l(r,2),i=a[0],s=a[1];e.path=i&&"/"!==i?i:void 0,e.query=s,e.resourceName=void 0}return e.fragment=void 0,e}},K={scheme:"wss",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize},J={},W="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Z="[0-9A-Fa-f]",Y=r(r("%[EFef]"+Z+"%"+Z+Z+"%"+Z+Z)+"|"+r("%[89A-Fa-f]"+Z+"%"+Z+Z)+"|"+r("%"+Z+Z)),X=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),ee=new RegExp(W,"g"),te=new RegExp(Y,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',X),"g"),ae=new RegExp(t("[^]",W,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),ie=ae;function se(e){var t=$(e);return t.match(ee)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,a=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,s={},n=r.query.split("&"),o=0,l=n.length;o<l;++o){var c=n[o].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),d=0,h=u.length;d<h;++d)a.push(u[d]);break;case"subject":r.subject=M(c[1],t);break;case"body":r.body=M(c[1],t);break;default:i=!0,s[M(c[0],t)]=M(c[1],t)}}i&&(r.headers=s)}r.query=void 0;for(var p=0,f=a.length;p<f;++p){var m=a[p].split("@");if(m[0]=M(m[0]),t.unicodeSupport)m[1]=M(m[1],t).toLowerCase();else try{m[1]=E(M(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[p]=m.join("@")}return r},serialize:function(e,t){var r,a=e,s=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(s){for(var n=0,o=s.length;n<o;++n){var l=String(s[n]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(te,se).replace(te,i).replace(re,j),d=l.slice(c+1);try{d=t.iri?S(d):E(M(d,t).toLowerCase())}catch(e){a.error=a.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}s[n]=u+"@"+d}a.path=s.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var f in h)h[f]!==J[f]&&p.push(f.replace(te,se).replace(te,i).replace(ae,j)+"="+h[f].replace(te,se).replace(te,i).replace(ie,j));return p.length&&(a.query=p.join("&")),a}},oe=/^([^\:]+)\:(.*)/,le={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(oe),a=e;if(r){var i=t.scheme||a.scheme||"urn",s=r[1].toLowerCase(),n=r[2],o=i+":"+(t.nid||s),l=x[o];a.nid=s,a.nss=n,a.path=void 0,l&&(a=l.parse(a,t))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",a=e.nid,i=r+":"+(t.nid||a),s=x[i];s&&(e=s.serialize(e,t));var n=e,o=e.nss;return n.path=(a||t.nid)+":"+o,n}},ce=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ue={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ce)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};x[H.scheme]=H,x[Q.scheme]=Q,x[G.scheme]=G,x[K.scheme]=K,x[ne.scheme]=ne,x[le.scheme]=le,x[ue.scheme]=ue,e.SCHEMES=x,e.pctEncChar=j,e.pctDecChars=$,e.parse=z,e.removeDotSegments=L,e.serialize=q,e.resolveComponents=V,e.resolve=function(e,t,r){var a=function(e,t){var r=e;if(t)for(var a in t)r[a]=t[a];return r}({scheme:"null"},r);return q(V(z(e,a),z(t,a),a,!0),a)},e.normalize=function(e,t){return"string"==typeof e?e=q(z(e,t),t):"object"===a(e)&&(e=z(q(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=q(z(e,r),r):"object"===a(e)&&(e=q(e,r)),"string"==typeof t?t=q(z(t,r),r):"object"===a(t)&&(t=q(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?o.ESCAPE:n.ESCAPE,j)},e.unescapeComponent=M,Object.defineProperty(e,"__esModule",{value:!0})}(t)})),Qn=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,i,s;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(i=a;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=a;0!=i--;){var n=s[i];if(!e(t[n],r[n]))return!1}return!0}return t!=t&&r!=r},Bn={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:Gn,checkDataTypes:function(e,t,r){switch(e.length){case 1:return Gn(e[0],t,r,!0);default:var a="",i=Jn(e);for(var s in i.array&&i.object&&(a=i.null?"(":"(!"+t+" || ",a+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)a+=(a?" && ":"")+Gn(s,t,r,!0);return a}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++){var i=t[a];(Kn[i]||"array"===e&&"array"===i)&&(r[r.length]=i)}if(r.length)return r}else{if(Kn[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:Jn,getProperty:Yn,escapeQuotes:Xn,equal:Qn,ucs2length:function(e){for(var t,r=0,a=e.length,i=0;i<a;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r},varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var a in e)if(a!=r&&t[a])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:eo,getPathExpr:function(e,t,r,a){return ao(e,r?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var a=eo(r?"/"+io(t):Yn(t));return ao(e,a)},getData:function(e,t,r){var a,i,s,n;if(""===e)return"rootData";if("/"==e[0]){if(!to.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,s="rootData"}else{if(!(n=e.match(ro)))throw new Error("Invalid JSON-pointer: "+e);if(a=+n[1],"#"==(i=n[2])){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return r[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(s="data"+(t-a||""),!i)return s}for(var o=s,l=i.split("/"),c=0;c<l.length;c++){var u=l[c];u&&(s+=Yn(so(u)),o+=" && "+s)}return o},unescapeFragment:function(e){return so(decodeURIComponent(e))},unescapeJsonPointer:so,escapeFragment:function(e){return encodeURIComponent(io(e))},escapeJsonPointer:io};function Gn(e,t,r,a){var i=a?" !== ":" === ",s=a?" || ":" && ",n=a?"!":"",o=a?"":"!";switch(e){case"null":return t+i+"null";case"array":return n+"Array.isArray("+t+")";case"object":return"("+n+t+s+"typeof "+t+i+'"object"'+s+o+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+s+o+"("+t+" % 1)"+s+t+i+t+(r?s+n+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(r?s+n+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}var Kn=Jn(["string","number","integer","boolean","null"]);function Jn(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var Wn=/^[a-z$_][a-z$_0-9]*$/i,Zn=/'|\\/g;function Yn(e){return"number"==typeof e?"["+e+"]":Wn.test(e)?"."+e:"['"+Xn(e)+"']"}function Xn(e){return e.replace(Zn,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function eo(e){return"'"+Xn(e)+"'"}var to=/^\/(?:[^~]|~0|~1)*$/,ro=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ao(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function io(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function so(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var no=function(e){Bn.copy(e,this)};var oo=jn((function(e){var t=e.exports=function(e,r,a){"function"==typeof r&&(a=r,r={}),function e(r,a,i,s,n,o,l,c,u,d){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var h in a(s,n,o,l,c,u,d),s){var p=s[h];if(Array.isArray(p)){if(h in t.arrayKeywords)for(var f=0;f<p.length;f++)e(r,a,i,p[f],n+"/"+h+"/"+f,o,n,h,s,f)}else if(h in t.propsKeywords){if(p&&"object"==typeof p)for(var m in p)e(r,a,i,p[m],n+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),o,n,h,s,m)}else(h in t.keywords||r.allKeys&&!(h in t.skipKeywords))&&e(r,a,i,p,n+"/"+h,o,n,h,s)}i(s,n,o,l,c,u,d)}}(r,"function"==typeof(a=r.cb||a)?a:a.pre||function(){},a.post||function(){},e,"",e)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}})),lo=co;function co(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return co.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof no)return vo(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var i,s,n,o=uo.call(this,t,r);return o&&(i=o.schema,t=o.root,n=o.baseId),i instanceof no?s=i.validate||e.call(this,i.schema,t,void 0,n):void 0!==i&&(s=vo(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,n)),s}function uo(e,t){var r=Hn.parse(t),a=go(r),i=yo(this._getId(e.schema));if(0===Object.keys(e.schema).length||a!==i){var s=_o(a),n=this._refs[s];if("string"==typeof n)return ho.call(this,e,n,r);if(n instanceof no)n.validate||this._compile(n),e=n;else{if(!((n=this._schemas[s])instanceof no))return;if(n.validate||this._compile(n),s==_o(t))return{schema:n,root:e,baseId:i};e=n}if(!e.schema)return;i=yo(this._getId(e.schema))}return fo.call(this,r,i,e.schema,e)}function ho(e,t,r){var a=uo.call(this,e,t);if(a){var i=a.schema,s=a.baseId;e=a.root;var n=this._getId(i);return n&&(s=wo(s,n)),fo.call(this,r,s,i,e)}}co.normalizeId=_o,co.fullPath=yo,co.url=wo,co.ids=function(e){var t=_o(this._getId(e)),r={"":t},a={"":yo(t,!1)},i={},s=this;return oo(e,{allKeys:!0},(function(e,t,n,o,l,c,u){if(""!==t){var d=s._getId(e),h=r[o],p=a[o]+"/"+l;if(void 0!==u&&(p+="/"+("number"==typeof u?u:Bn.escapeFragment(u))),"string"==typeof d){d=h=_o(h?Hn.resolve(h,d):d);var f=s._refs[d];if("string"==typeof f&&(f=s._refs[f]),f&&f.schema){if(!Qn(e,f.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=_o(p))if("#"==d[0]){if(i[d]&&!Qn(e,i[d]))throw new Error('id "'+d+'" resolves to more than one schema');i[d]=e}else s._refs[d]=p}r[t]=h,a[t]=p}})),i},co.inlineRef=vo,co.schema=uo;var po=Bn.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function fo(e,t,r,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),s=1;s<i.length;s++){var n=i[s];if(n){if(void 0===(r=r[n=Bn.unescapeFragment(n)]))break;var o;if(!po[n]&&((o=this._getId(r))&&(t=wo(t,o)),r.$ref)){var l=wo(t,r.$ref),c=uo.call(this,a,l);c&&(r=c.schema,a=c.root,t=c.baseId)}}}return void 0!==r&&r!==a.schema?{schema:r,root:a,baseId:t}:void 0}}var mo=Bn.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function vo(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&!e(r))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(r=t[i])&&!e(r))return!1}return!0}(e):t?function e(t){var r,a=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&(a+=e(r)),a==1/0)return 1/0}else for(var s in t){if("$ref"==s)return 1/0;if(mo[s])a++;else if("object"==typeof(r=t[s])&&(a+=e(r)+1),a==1/0)return 1/0}return a}(e)<=t:void 0)}function yo(e,t){return!1!==t&&(e=_o(e)),go(Hn.parse(e))}function go(e){return Hn.serialize(e).split("#")[0]+"#"}var bo=/#\/?$/;function _o(e){return e?e.replace(bo,""):""}function wo(e,t){return t=_o(t),Hn.resolve(e,t)}var Po={Validation:So((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:So(Eo)};function Eo(e,t,r){this.message=r||Eo.message(e,t),this.missingRef=lo.url(e,t),this.missingSchema=lo.normalizeId(lo.fullPath(this.missingRef))}function So(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Eo.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var xo=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,a="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,a){var i={key:t,value:e[t]},s={key:a,value:e[a]};return r(i,s)}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,n;if(Array.isArray(t)){for(n="[",r=0;r<t.length;r++)r&&(n+=","),n+=e(t[r])||"null";return n+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=s.push(t)-1,l=Object.keys(t).sort(i&&i(t));for(n="",r=0;r<l.length;r++){var c=l[r],u=e(t[c]);u&&(n&&(n+=","),n+=JSON.stringify(c)+":"+u)}return s.splice(o,1),"{"+n+"}"}}(e)},jo=function(e,t,r){var a="",i=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),n=e.self._getId(e.schema);if(e.opts.strictKeywords){var o=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(o){var l="unknown keyword: "+o;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(a+=" var validate = ",i&&(e.async=!0,a+="async "),a+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",n&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+n+" */ ")),"boolean"==typeof e.schema||!s&&!e.schema.$ref){var c=e.level,u=e.dataLevel,d=e.schema["false schema"],h=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(u||""),v="valid"+c;if(!1===e.schema){e.isTop?f=!0:a+=" var "+v+" = false; ",(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";var y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=i?" return data; ":" validate.errors = null; return true; ":a+=" var "+v+" = true; ";return e.isTop&&(a+=" }; return validate; "),a}if(e.isTop){var g=e.isTop;c=e.level=0,u=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{c=e.level,m="data"+((u=e.dataLevel)||"");if(n&&(e.baseId=e.resolve.url(e.baseId,n)),i&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+c+" = errors;"}v="valid"+c,f=!e.opts.allErrors;var _="",w="",P=e.schema.type,E=Array.isArray(P);if(P&&e.opts.nullable&&!0===e.schema.nullable&&(E?-1==P.indexOf("null")&&(P=P.concat("null")):"null"!=P&&(P=[P,"null"],E=!0)),E&&1==P.length&&(P=P[0],E=!1),e.schema.$ref&&s){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(a+=" "+e.RULES.all.$comment.code(e,"$comment")),P){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,P);var x=e.RULES.types[P];if(S||E||!0===x||x&&!Z(x)){h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type";var j=E?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[j](P,m,e.opts.strictNumbers,!0)+") { ",S){var $="dataType"+c,O="coerced"+c;a+=" var "+$+" = typeof "+m+"; var "+O+" = undefined; ","array"==e.opts.coerceTypes&&(a+=" if ("+$+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+$+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+O+" = "+m+"; } "),a+=" if ("+O+" !== undefined) ; ";var k=S;if(k)for(var A,C=-1,F=k.length-1;C<F;)"string"==(A=k[C+=1])?a+=" else if ("+$+" == 'number' || "+$+" == 'boolean') "+O+" = '' + "+m+"; else if ("+m+" === null) "+O+" = ''; ":"number"==A||"integer"==A?(a+=" else if ("+$+" == 'boolean' || "+m+" === null || ("+$+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==A&&(a+=" && !("+m+" % 1)"),a+=")) "+O+" = +"+m+"; "):"boolean"==A?a+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+O+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+O+" = true; ":"null"==A?a+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+O+" = null; ":"array"==e.opts.coerceTypes&&"array"==A&&(a+=" else if ("+$+" == 'string' || "+$+" == 'number' || "+$+" == 'boolean' || "+m+" == null) "+O+" = ["+m+"]; ");a+=" else {   ",(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+P.join(","):""+P,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+P.join(","):""+P,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } if ("+O+" !== undefined) {  ";var D=u?"data"+(u-1||""):"parentData";a+=" "+m+" = "+O+"; ",u||(a+="if ("+D+" !== undefined)"),a+=" "+D+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+O+"; } "}else{(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+P.join(","):""+P,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+P.join(","):""+P,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!s)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(a+=" } if (errors === ",a+=g?"0":"errs_"+c,a+=") { ",w+="}");else{var z=e.RULES;if(z)for(var R=-1,T=z.length-1;R<T;)if(Z(x=z[R+=1])){if(x.type&&(a+=" if ("+e.util.checkDataType(x.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==x.type&&e.schema.properties){d=e.schema.properties;var I=Object.keys(d);if(I)for(var N,U=-1,L=I.length-1;U<L;){if(void 0!==(M=d[N=I[U+=1]]).default){var q=m+e.util.getProperty(N);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else a+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+q+" === null || "+q+" === '' "),a+=" ) "+q+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(M.default)+" ":a+=" "+JSON.stringify(M.default)+" ",a+="; "}}}else if("array"==x.type&&Array.isArray(e.schema.items)){var V=e.schema.items;if(V){C=-1;for(var M,H=V.length-1;C<H;)if(void 0!==(M=V[C+=1]).default){q=m+"["+C+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else a+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+q+" === null || "+q+" === '' "),a+=" ) "+q+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(M.default)+" ":a+=" "+JSON.stringify(M.default)+" ",a+="; "}}}var Q=x.rules;if(Q)for(var B,G=-1,K=Q.length-1;G<K;)if(Y(B=Q[G+=1])){var J=B.code(e,B.keyword,x.type);J&&(a+=" "+J+" ",f&&(_+="}"))}if(f&&(a+=" "+_+" ",_=""),x.type&&(a+=" } ",P&&P===x.type&&!S)){a+=" else { ";var W;h=e.schemaPath+".type",p=e.errSchemaPath+"/type";(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+P.join(","):""+P,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+P.join(","):""+P,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}f&&(a+=" if (errors === ",a+=g?"0":"errs_"+c,a+=") { ",w+="}")}}function Z(e){for(var t=e.rules,r=0;r<t.length;r++)if(Y(t[r]))return!0}function Y(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,a=0;a<r.length;a++)if(void 0!==e.schema[r[a]])return!0}(t)}return f&&(a+=" "+w+" "),g?(i?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }; return validate;"):a+=" var "+v+" = errors === errs_"+c+";",a},$o=Bn.ucs2length,Oo=Po.Validation,ko=function e(t,r,a,i){var s=this,n=this._opts,o=[void 0],l={},c=[],u={},d=[],h={},p=[];r=r||{schema:t,refVal:o,refs:l};var f=Ao.call(this,t,r,i),m=this._compilations[f.index];if(f.compiling)return m.callValidate=function e(){var t=m.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var v=this._formats,y=this.RULES;try{var g=_(t,r,a,i);m.validate=g;var b=m.callValidate;return b&&(b.schema=g.schema,b.errors=null,b.refs=g.refs,b.refVal=g.refVal,b.root=g.root,b.$async=g.$async,n.sourceCode&&(b.source=g.source)),g}finally{Co.call(this,t,r,i)}function _(t,a,i,u){var h=!a||a&&a.schema==t;if(a.schema!=r.schema)return e.call(s,t,a,i,u);var f,m=!0===t.$async,g=jo({isTop:!0,schema:t,isRoot:h,baseId:u,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Po.MissingRef,RULES:y,validate:jo,util:Bn,resolve:lo,resolveRef:w,usePattern:S,useDefault:x,useCustomRule:j,opts:n,formats:v,logger:s.logger,self:s});g=Io(o,Ro)+Io(c,Do)+Io(d,zo)+Io(p,To)+g,n.processCode&&(g=n.processCode(g,t));try{f=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",g)(s,y,v,r,o,d,p,Qn,$o,Oo),o[0]=f}catch(e){throw s.logger.error("Error compiling schema, function code:",g),e}return f.schema=t,f.errors=null,f.refs=l,f.refVal=o,f.root=h?f:a,m&&(f.$async=!0),!0===n.sourceCode&&(f.source={code:g,patterns:c,defaults:d}),f}function w(t,i,c){i=lo.url(t,i);var u,d,h=l[i];if(void 0!==h)return E(u=o[h],d="refVal["+h+"]");if(!c&&r.refs){var p=r.refs[i];if(void 0!==p)return E(u=r.refVal[p],d=P(i,u))}d=P(i);var f=lo.call(s,_,r,i);if(void 0===f){var m=a&&a[i];m&&(f=lo.inlineRef(m,n.inlineRefs)?m:e.call(s,m,r,a,t))}if(void 0!==f)return function(e,t){var r=l[e];o[r]=t}(i,f),E(f,d);!function(e){delete l[e]}(i)}function P(e,t){var r=o.length;return o[r]=t,l[e]=r,"refVal"+r}function E(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function S(e){var t=u[e];return void 0===t&&(t=u[e]=c.length,c[t]=e),"pattern"+t}function x(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return Bn.toQuotedString(e);case"object":if(null===e)return"null";var t=xo(e),r=h[t];return void 0===r&&(r=h[t]=d.length,d[r]=e),"default"+r}}function j(e,t,r,a){if(!1!==s._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var l="keyword schema is invalid: "+s.errorsText(o.errors);if("log"!=s._opts.validateSchema)throw new Error(l);s.logger.error(l)}}var c,u=e.definition.compile,d=e.definition.inline,h=e.definition.macro;if(u)c=u.call(s,t,r,a);else if(h)c=h.call(s,t,r,a),!1!==n.validateSchema&&s.validateSchema(c,!0);else if(d)c=d.call(s,a,e.keyword,t,r);else if(!(c=e.definition.validate))return;if(void 0===c)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=p.length;return p[f]=c,{code:"customRule"+f,validate:c}}};function Ao(e,t,r){var a=Fo.call(this,e,t,r);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:r},{index:a,compiling:!1})}function Co(e,t,r){var a=Fo.call(this,e,t,r);a>=0&&this._compilations.splice(a,1)}function Fo(e,t,r){for(var a=0;a<this._compilations.length;a++){var i=this._compilations[a];if(i.schema==e&&i.root==t&&i.baseId==r)return a}return-1}function Do(e,t){return"var pattern"+e+" = new RegExp("+Bn.toQuotedString(t[e])+");"}function zo(e){return"var default"+e+" = defaults["+e+"];"}function Ro(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function To(e){return"var customRule"+e+" = customRules["+e+"];"}function Io(e,t){if(!e.length)return"";for(var r="",a=0;a<e.length;a++)r+=t(a,e);return r}var No=jn((function(e){var t=e.exports=function(){this._cache={}};t.prototype.put=function(e,t){this._cache[e]=t},t.prototype.get=function(e){return this._cache[e]},t.prototype.del=function(e){delete this._cache[e]},t.prototype.clear=function(){this._cache={}}})),Uo=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Lo=[0,31,28,31,30,31,30,31,31,30,31,30,31],qo=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Vo=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Mo=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Ho=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Qo=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Bo=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Go=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Ko=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Jo=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Wo=Zo;function Zo(e){return e="full"==e?"full":"fast",Bn.copy(Zo[e])}function Yo(e){var t=e.match(Uo);if(!t)return!1;var r=+t[1],a=+t[2],i=+t[3];return a>=1&&a<=12&&i>=1&&i<=(2==a&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:Lo[a])}function Xo(e,t){var r=e.match(qo);if(!r)return!1;var a=r[1],i=r[2],s=r[3],n=r[5];return(a<=23&&i<=59&&s<=59||23==a&&59==i&&60==s)&&(!t||n)}Zo.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Ho,url:Qo,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Vo,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:al,uuid:Bo,"json-pointer":Go,"json-pointer-uri-fragment":Ko,"relative-json-pointer":Jo},Zo.full={date:Yo,time:Xo,"date-time":function(e){var t=e.split(el);return 2==t.length&&Yo(t[0])&&Xo(t[1],!0)},uri:function(e){return tl.test(e)&&Mo.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":Ho,url:Qo,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Vo,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:al,uuid:Bo,"json-pointer":Go,"json-pointer-uri-fragment":Ko,"relative-json-pointer":Jo};var el=/t|\s/i;var tl=/\/|:/;var rl=/[^\\]\\Z/;function al(e){if(rl.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}var il=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o;var p="maximum"==t,f=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],v=e.opts.$data&&m&&m.$data,y=p?"<":">",g=p?">":"<",b=void 0;if(!h&&"number"!=typeof o&&void 0!==o)throw new Error(t+" must be number");if(!v&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(f+" must be number or boolean");if(v){var _=e.util.getData(m.$data,n,e.dataPathArr),w="exclusive"+s,P="exclType"+s,E="exclIsNumber"+s,S="' + "+($="op"+s)+" + '";i+=" var schemaExcl"+s+" = "+_+"; ",i+=" var "+w+"; var "+P+" = typeof "+(_="schemaExcl"+s)+"; if ("+P+" != 'boolean' && "+P+" != 'undefined' && "+P+" != 'number') { ";var x;b=f;(x=x||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var j=i;i=x.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+P+" == 'number' ? ( ("+w+" = "+a+" === undefined || "+_+" "+y+"= "+a+") ? "+d+" "+g+"= "+_+" : "+d+" "+g+" "+a+" ) : ( ("+w+" = "+_+" === true) ? "+d+" "+g+"= "+a+" : "+d+" "+g+" "+a+" ) || "+d+" !== "+d+") { var op"+s+" = "+w+" ? '"+y+"' : '"+y+"='; ",void 0===o&&(b=f,c=e.errSchemaPath+"/"+f,a=_,h=v)}else{S=y;if((E="number"==typeof m)&&h){var $="'"+S+"'";i+=" if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" ( "+a+" === undefined || "+m+" "+y+"= "+a+" ? "+d+" "+g+"= "+m+" : "+d+" "+g+" "+a+" ) || "+d+" !== "+d+") { "}else{E&&void 0===o?(w=!0,b=f,c=e.errSchemaPath+"/"+f,a=m,g+="="):(E&&(a=Math[p?"min":"max"](m,o)),m===(!E||a)?(w=!0,b=f,c=e.errSchemaPath+"/"+f,g+="="):(w=!1,S+="="));$="'"+S+"'";i+=" if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+d+" "+g+" "+a+" || "+d+" !== "+d+") { "}}b=b||t,(x=x||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+$+", limit: "+a+", exclusive: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+S+" ",i+=h?"' + "+a:a+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";j=i;return i=x.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i},sl=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");i+="if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+d+".length "+("maxItems"==t?">":"<")+" "+a+") { ";var p=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=h?"' + "+a+" + '":""+o,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},nl=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");var p="maxLength"==t?">":"<";i+="if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?i+=" "+d+".length ":i+=" ucs2length("+d+") ",i+=" "+p+" "+a+") { ";var f=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=h?"' + "+a+" + '":""+o,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var v=i;return i=m.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},ol=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");i+="if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+a+") { ";var p=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=h?"' + "+a+" + '":""+o,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},ll={$ref:function(e,t,r){var a,i,s=" ",n=e.level,o=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h="valid"+n;if("#"==l||"#/"==l)e.isRoot?(a=e.async,i="validate"):(a=!0===e.root.schema.$async,i="root.refVal[0]");else{var p=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===p){var f=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(f),(g=g||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(s+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var m=s;s=g.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(s+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,f);e.logger.warn(f),u&&(s+=" if (true) { ")}}else if(p.inline){var v=e.util.copy(e);v.level++;var y="valid"+v.level;v.schema=p.schema,v.schemaPath="",v.errSchemaPath=l,s+=" "+e.validate(v).replace(/validate\.schema/g,p.code)+" ",u&&(s+=" if ("+y+") { ")}else a=!0===p.$async||e.async&&!1!==p.$async,i=p.code}if(i){var g;(g=g||[]).push(s),s="",e.opts.passContext?s+=" "+i+".call(this, ":s+=" "+i+"( ",s+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var b=s+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?e.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(s=g.pop(),a){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(s+=" var "+h+"; "),s+=" try { await "+b+"; ",u&&(s+=" "+h+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(s+=" "+h+" = false; "),s+=" } ",u&&(s+=" if ("+h+") { ")}else s+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",u&&(s+=" else { ")}return s},allOf:function(e,t,r){var a=" ",i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,d=l.baseId,h=!0,p=i;if(p)for(var f,m=-1,v=p.length-1;m<v;)f=p[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:e.util.schemaHasRules(f,e.RULES.all))&&(h=!1,l.schema=f,l.schemaPath=s+"["+m+"]",l.errSchemaPath=n+"/"+m,a+="  "+e.validate(l)+" ",l.baseId=d,o&&(a+=" if ("+u+") { ",c+="}"));return o&&(a+=h?" if (true) { ":" "+c.slice(0,-1)+" "),a},anyOf:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level;if(n.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var v=p.baseId;a+=" var "+h+" = errors; var "+d+" = false;  ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var g=n;if(g)for(var b,_=-1,w=g.length-1;_<w;)b=g[_+=1],p.schema=b,p.schemaPath=o+"["+_+"]",p.errSchemaPath=l+"/"+_,a+="  "+e.validate(p)+" ",p.baseId=v,a+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",f+="}";e.compositeRule=p.compositeRule=y,a+=" "+f+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else c&&(a+=" if (true) { ");return a},$comment:function(e,t,r){var a=" ",i=e.schema[t],s=e.errSchemaPath+"/"+t,n=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?a+=" console.log("+n+");":"function"==typeof e.opts.$comment&&(a+=" self._opts.$comment("+n+", "+e.util.toQuotedString(s)+", validate.root.schema);"),a},const:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h=e.opts.$data&&n&&n.$data;h&&(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; "),h||(a+=" var schema"+i+" = validate.schema"+o+";"),a+="var "+d+" = equal("+u+", schema"+i+"); if (!"+d+") {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to constant' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a},contains:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level,m="i"+i,v=p.dataLevel=e.dataLevel+1,y="data"+v,g=e.baseId,b=e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all);if(a+="var "+h+" = errors;var "+d+";",b){var _=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=n,p.schemaPath=o,p.errSchemaPath=l,a+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var w=u+"["+m+"]";p.dataPathArr[v]=m;var P=e.validate(p);p.baseId=g,e.util.varOccurences(P,y)<2?a+=" "+e.util.varReplace(P,y,w)+" ":a+=" var "+y+" = "+w+"; "+P+" ",a+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=_,a+="  if (!"+f+") {"}else a+=" if ("+u+".length == 0) {";var E=E||[];E.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should contain a valid item' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;return a=E.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { ",b&&(a+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(a+=" } "),a},dependencies:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+i,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m={},v={},y=e.opts.ownProperties;for(w in n)if("__proto__"!=w){var g=n[w],b=Array.isArray(g)?v:m;b[w]=g}a+="var "+d+" = errors;";var _=e.errorPath;for(var w in a+="var missing"+i+";",v)if((b=v[w]).length){if(a+=" if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),c){a+=" && ( ";var P=b;if(P)for(var E=-1,S=P.length-1;E<S;){A=P[E+=1],E&&(a+=" || "),a+=" ( ( "+(z=u+(D=e.util.getProperty(A)))+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(A)+"') "),a+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:D)+") ) "}a+=")) {  ";var x="missing"+i,j="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,x,!0):_+" + "+x);var $=$||[];$.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+j+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==b.length?a+="property "+e.util.escapeQuotes(b[0]):a+="properties "+e.util.escapeQuotes(b.join(", ")),a+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var O=a;a=$.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+O+"]); ":a+=" validate.errors = ["+O+"]; return false; ":a+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var k=b;if(k)for(var A,C=-1,F=k.length-1;C<F;){A=k[C+=1];var D=e.util.getProperty(A),z=(j=e.util.escapeQuotes(A),u+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,A,e.opts.jsonPointers)),a+=" if ( "+z+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(A)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+j+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==b.length?a+="property "+e.util.escapeQuotes(b[0]):a+="properties "+e.util.escapeQuotes(b.join(", ")),a+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",c&&(p+="}",a+=" else { ")}e.errorPath=_;var R=h.baseId;for(var w in m){g=m[w];(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all))&&(a+=" "+f+" = true; if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),a+=") { ",h.schema=g,h.schemaPath=o+e.util.getProperty(w),h.errSchemaPath=l+"/"+e.util.escapeFragment(w),a+="  "+e.validate(h)+" ",h.baseId=R,a+=" }  ",c&&(a+=" if ("+f+") { ",p+="}"))}return c&&(a+="   "+p+" if ("+d+" == errors) {"),a},enum:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h=e.opts.$data&&n&&n.$data;h&&(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ");var p="i"+i,f="schema"+i;h||(a+=" var "+f+" = validate.schema"+o+";"),a+="var "+d+";",h&&(a+=" if (schema"+i+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+i+")) "+d+" = false; else {"),a+=d+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+d+" = true; break; }",h&&(a+="  }  "),a+=" if (!"+d+") {   ";var m=m||[];m.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=m.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a},format:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||"");if(!1===e.opts.format)return c&&(a+=" if (true) { "),a;var d,h=e.opts.$data&&n&&n.$data;h?(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",d="schema"+i):d=n;var p=e.opts.unknownFormats,f=Array.isArray(p);if(h){a+=" var "+(m="format"+i)+" = formats["+d+"]; var "+(v="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+i)+" = "+v+" && "+m+".type || 'string'; if ("+v+") { ",e.async&&(a+=" var async"+i+" = "+m+".async; "),a+=" "+m+" = "+m+".validate; } if (  ",h&&(a+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),a+=" (","ignore"!=p&&(a+=" ("+d+" && !"+m+" ",f&&(a+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),a+=") || "),a+=" ("+m+" && "+y+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?a+=" (async"+i+" ? await "+m+"("+u+") : "+m+"("+u+")) ":a+=" "+m+"("+u+") ",a+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=e.formats[n])){if("ignore"==p)return e.logger.warn('unknown format "'+n+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(a+=" if (true) { "),a;if(f&&p.indexOf(n)>=0)return c&&(a+=" if (true) { "),a;throw new Error('unknown format "'+n+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,y=(v="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(v){var g=!0===m.async;m=m.validate}if(y!=r)return c&&(a+=" if (true) { "),a;if(g){if(!e.async)throw new Error("async format in sync schema");a+=" if (!(await "+(b="formats"+e.util.getProperty(n)+".validate")+"("+u+"))) { "}else{a+=" if (! ";var b="formats"+e.util.getProperty(n);v&&(b+=".validate"),a+="function"==typeof m?" "+b+"("+u+") ":" "+b+".test("+u+") ",a+=") { "}}var _=_||[];_.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",a+=h?""+d:""+e.util.toQuotedString(n),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match format \"",a+=h?"' + "+d+" + '":""+e.util.escapeQuotes(n),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+o:""+e.util.toQuotedString(n),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var w=a;return a=_.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+w+"]); ":a+=" validate.errors = ["+w+"]; return false; ":a+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c&&(a+=" else { "),a},if:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level,m=e.schema.then,v=e.schema.else,y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),g=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),b=p.baseId;if(y||g){var _;p.createErrors=!1,p.schema=n,p.schemaPath=o,p.errSchemaPath=l,a+=" var "+h+" = errors; var "+d+" = true;  ";var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,a+="  "+e.validate(p)+" ",p.baseId=b,p.createErrors=!0,a+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=w,y?(a+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",a+="  "+e.validate(p)+" ",p.baseId=b,a+=" "+d+" = "+f+"; ",y&&g?a+=" var "+(_="ifClause"+i)+" = 'then'; ":_="'then'",a+=" } ",g&&(a+=" else { ")):a+=" if (!"+f+") { ",g&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",a+="  "+e.validate(p)+" ",p.baseId=b,a+=" "+d+" = "+f+"; ",y&&g?a+=" var "+(_="ifClause"+i)+" = 'else'; ":_="'else'",a+=" } "),a+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+_+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match \"' + "+_+" + '\" schema' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" }   ",c&&(a+=" else { ")}else c&&(a+=" if (true) { ");return a},items:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v="i"+i,y=p.dataLevel=e.dataLevel+1,g="data"+y,b=e.baseId;if(a+="var "+h+" = errors;var "+d+";",Array.isArray(n)){var _=e.schema.additionalItems;if(!1===_){a+=" "+d+" = "+u+".length <= "+n.length+"; ";var w=l;l=e.errSchemaPath+"/additionalItems",a+="  if (!"+d+") {   ";var P=P||[];P.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n.length+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have more than "+n.length+" items' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;a=P.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",l=w,c&&(f+="}",a+=" else { ")}var S=n;if(S)for(var x,j=-1,$=S.length-1;j<$;)if(x=S[j+=1],e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0:e.util.schemaHasRules(x,e.RULES.all)){a+=" "+m+" = true; if ("+u+".length > "+j+") { ";var O=u+"["+j+"]";p.schema=x,p.schemaPath=o+"["+j+"]",p.errSchemaPath=l+"/"+j,p.errorPath=e.util.getPathExpr(e.errorPath,j,e.opts.jsonPointers,!0),p.dataPathArr[y]=j;var k=e.validate(p);p.baseId=b,e.util.varOccurences(k,g)<2?a+=" "+e.util.varReplace(k,g,O)+" ":a+=" var "+g+" = "+O+"; "+k+" ",a+=" }  ",c&&(a+=" if ("+m+") { ",f+="}")}if("object"==typeof _&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))){p.schema=_,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",a+=" "+m+" = true; if ("+u+".length > "+n.length+") {  for (var "+v+" = "+n.length+"; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);O=u+"["+v+"]";p.dataPathArr[y]=v;k=e.validate(p);p.baseId=b,e.util.varOccurences(k,g)<2?a+=" "+e.util.varReplace(k,g,O)+" ":a+=" var "+g+" = "+O+"; "+k+" ",c&&(a+=" if (!"+m+") break; "),a+=" } }  ",c&&(a+=" if ("+m+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){p.schema=n,p.schemaPath=o,p.errSchemaPath=l,a+="  for (var "+v+" = 0; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);O=u+"["+v+"]";p.dataPathArr[y]=v;k=e.validate(p);p.baseId=b,e.util.varOccurences(k,g)<2?a+=" "+e.util.varReplace(k,g,O)+" ":a+=" var "+g+" = "+O+"; "+k+" ",c&&(a+=" if (!"+m+") break; "),a+=" }"}return c&&(a+=" "+f+" if ("+h+" == errors) {"),a},maximum:il,minimum:il,maxItems:sl,minItems:sl,maxLength:nl,minLength:nl,maxProperties:ol,minProperties:ol,multipleOf:function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");i+="var division"+s+";if (",h&&(i+=" "+a+" !== undefined && ( typeof "+a+" != 'number' || "),i+=" (division"+s+" = "+d+" / "+a+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+s+" !== parseInt(division"+s+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=h?"' + "+a:a+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var f=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},not:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+i,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){h.schema=n,h.schemaPath=o,h.errSchemaPath=l,a+=" var "+d+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),a+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=m,a+=" if ("+p+") {   ";var v=v||[];v.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var y=a;a=v.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else a+="  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(a+=" if (false) { ");return a},oneOf:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v=p.baseId,y="prevValid"+i,g="passingSchemas"+i;a+="var "+h+" = errors , "+y+" = false , "+d+" = false , "+g+" = null; ";var b=e.compositeRule;e.compositeRule=p.compositeRule=!0;var _=n;if(_)for(var w,P=-1,E=_.length-1;P<E;)w=_[P+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))?(p.schema=w,p.schemaPath=o+"["+P+"]",p.errSchemaPath=l+"/"+P,a+="  "+e.validate(p)+" ",p.baseId=v):a+=" var "+m+" = true; ",P&&(a+=" if ("+m+" && "+y+") { "+d+" = false; "+g+" = ["+g+", "+P+"]; } else { ",f+="}"),a+=" if ("+m+") { "+d+" = "+y+" = true; "+g+" = "+P+"; }";return e.compositeRule=p.compositeRule=b,a+=f+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+g+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(a+=" } "),a},pattern:function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,i+="if ( ",h&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'string') || "),i+=" !"+(h?"(new RegExp("+a+"))":e.usePattern(o))+".test("+d+") ) {   ";var p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=h?""+a:""+e.util.toQuotedString(o),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=h?"' + "+a+" + '":""+e.util.escapeQuotes(o),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+e.util.toQuotedString(o),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var f=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},properties:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+i,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m="key"+i,v="idx"+i,y=h.dataLevel=e.dataLevel+1,g="data"+y,b="dataProperties"+i,_=Object.keys(n||{}).filter(D),w=e.schema.patternProperties||{},P=Object.keys(w).filter(D),E=e.schema.additionalProperties,S=_.length||P.length,x=!1===E,j="object"==typeof E&&Object.keys(E).length,$=e.opts.removeAdditional,O=x||j||$,k=e.opts.ownProperties,A=e.baseId,C=e.schema.required;if(C&&(!e.opts.$data||!C.$data)&&C.length<e.opts.loopRequired)var F=e.util.toHash(C);function D(e){return"__proto__"!==e}if(a+="var "+d+" = errors;var "+f+" = true;",k&&(a+=" var "+b+" = undefined;"),O){if(a+=k?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+m+" = "+b+"["+v+"]; ":" for (var "+m+" in "+u+") { ",S){if(a+=" var isAdditional"+i+" = !(false ",_.length)if(_.length>8)a+=" || validate.schema"+o+".hasOwnProperty("+m+") ";else{var z=_;if(z)for(var R=-1,T=z.length-1;R<T;)J=z[R+=1],a+=" || "+m+" == "+e.util.toQuotedString(J)+" "}if(P.length){var I=P;if(I)for(var N=-1,U=I.length-1;N<U;)se=I[N+=1],a+=" || "+e.usePattern(se)+".test("+m+") "}a+=" ); if (isAdditional"+i+") { "}if("all"==$)a+=" delete "+u+"["+m+"]; ";else{var L=e.errorPath,q="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),x)if($)a+=" delete "+u+"["+m+"]; ";else{a+=" "+f+" = false; ";var V=l;l=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+q+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var M=a;a=re.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+M+"]); ":a+=" validate.errors = ["+M+"]; return false; ":a+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=V,c&&(a+=" break; ")}else if(j)if("failing"==$){a+=" var "+d+" = errors;  ";var H=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var Q=u+"["+m+"]";h.dataPathArr[y]=m;var B=e.validate(h);h.baseId=A,e.util.varOccurences(B,g)<2?a+=" "+e.util.varReplace(B,g,Q)+" ":a+=" var "+g+" = "+Q+"; "+B+" ",a+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=h.compositeRule=H}else{h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);Q=u+"["+m+"]";h.dataPathArr[y]=m;B=e.validate(h);h.baseId=A,e.util.varOccurences(B,g)<2?a+=" "+e.util.varReplace(B,g,Q)+" ":a+=" var "+g+" = "+Q+"; "+B+" ",c&&(a+=" if (!"+f+") break; ")}e.errorPath=L}S&&(a+=" } "),a+=" }  ",c&&(a+=" if ("+f+") { ",p+="}")}var G=e.opts.useDefaults&&!e.compositeRule;if(_.length){var K=_;if(K)for(var J,W=-1,Z=K.length-1;W<Z;){var Y=n[J=K[W+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){var X=e.util.getProperty(J),ee=(Q=u+X,G&&void 0!==Y.default);h.schema=Y,h.schemaPath=o+X,h.errSchemaPath=l+"/"+e.util.escapeFragment(J),h.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),h.dataPathArr[y]=e.util.toQuotedString(J);B=e.validate(h);if(h.baseId=A,e.util.varOccurences(B,g)<2){B=e.util.varReplace(B,g,Q);var te=Q}else{te=g;a+=" var "+g+" = "+Q+"; "}if(ee)a+=" "+B+" ";else{if(F&&F[J]){a+=" if ( "+te+" === undefined ",k&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+f+" = false; ";L=e.errorPath,V=l;var re,ae=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(L,J,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+ae+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+ae+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";M=a;a=re.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+M+"]); ":a+=" validate.errors = ["+M+"]; return false; ":a+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=V,e.errorPath=L,a+=" } else { "}else c?(a+=" if ( "+te+" === undefined ",k&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+f+" = true; } else { "):(a+=" if ("+te+" !== undefined ",k&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=" ) { ");a+=" "+B+" } "}}c&&(a+=" if ("+f+") { ",p+="}")}}if(P.length){var ie=P;if(ie)for(var se,ne=-1,oe=ie.length-1;ne<oe;){Y=w[se=ie[ne+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){h.schema=Y,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),a+=k?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+m+" = "+b+"["+v+"]; ":" for (var "+m+" in "+u+") { ",a+=" if ("+e.usePattern(se)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);Q=u+"["+m+"]";h.dataPathArr[y]=m;B=e.validate(h);h.baseId=A,e.util.varOccurences(B,g)<2?a+=" "+e.util.varReplace(B,g,Q)+" ":a+=" var "+g+" = "+Q+"; "+B+" ",c&&(a+=" if (!"+f+") break; "),a+=" } ",c&&(a+=" else "+f+" = true; "),a+=" }  ",c&&(a+=" if ("+f+") { ",p+="}")}}}return c&&(a+=" "+p+" if ("+d+" == errors) {"),a},propertyNames:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+i,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(a+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){h.schema=n,h.schemaPath=o,h.errSchemaPath=l;var f="key"+i,m="idx"+i,v="i"+i,y="' + "+f+" + '",g="data"+(h.dataLevel=e.dataLevel+1),b="dataProperties"+i,_=e.opts.ownProperties,w=e.baseId;_&&(a+=" var "+b+" = undefined; "),a+=_?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+u+") { ",a+=" var startErrs"+i+" = errors; ";var P=f,E=e.compositeRule;e.compositeRule=h.compositeRule=!0;var S=e.validate(h);h.baseId=w,e.util.varOccurences(S,g)<2?a+=" "+e.util.varReplace(S,g,P)+" ":a+=" var "+g+" = "+P+"; "+S+" ",e.compositeRule=h.compositeRule=E,a+=" if (!"+p+") { for (var "+v+"=startErrs"+i+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(a+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),c&&(a+=" break; "),a+=" } }"}return c&&(a+="  if ("+d+" == errors) {"),a},required:function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h=e.opts.$data&&n&&n.$data;h&&(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ");var p="schema"+i;if(!h)if(n.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=n;if(m)for(var v,y=-1,g=m.length-1;y<g;){v=m[y+=1];var b=e.schema.properties[v];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))||(f[f.length]=v)}}else f=n;if(h||f.length){var _=e.errorPath,w=h||f.length>=e.opts.loopRequired,P=e.opts.ownProperties;if(c)if(a+=" var missing"+i+"; ",w){h||(a+=" var "+p+" = validate.schema"+o+"; ");var E="' + "+(k="schema"+i+"["+(j="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,k,e.opts.jsonPointers)),a+=" var "+d+" = true; ",h&&(a+=" if (schema"+i+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+i+")) "+d+" = false; else {"),a+=" for (var "+j+" = 0; "+j+" < "+p+".length; "+j+"++) { "+d+" = "+u+"["+p+"["+j+"]] !== undefined ",P&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+j+"]) "),a+="; if (!"+d+") break; } ",h&&(a+="  }  "),a+="  if (!"+d+") {   ",(O=O||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;a=O.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else{a+=" if ( ";var x=f;if(x)for(var j=-1,$=x.length-1;j<$;){C=x[j+=1],j&&(a+=" || "),a+=" ( ( "+(R=u+(z=e.util.getProperty(C)))+" === undefined ",P&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(C)+"') "),a+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?C:z)+") ) "}a+=") {  ";var O;E="' + "+(k="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,k,!0):_+" + "+k),(O=O||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";S=a;a=O.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else if(w){h||(a+=" var "+p+" = validate.schema"+o+"; ");var k;E="' + "+(k="schema"+i+"["+(j="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,k,e.opts.jsonPointers)),h&&(a+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),a+=" for (var "+j+" = 0; "+j+" < "+p+".length; "+j+"++) { if ("+u+"["+p+"["+j+"]] === undefined ",P&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+j+"]) "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(a+="  }  ")}else{var A=f;if(A)for(var C,F=-1,D=A.length-1;F<D;){C=A[F+=1];var z=e.util.getProperty(C),R=(E=e.util.escapeQuotes(C),u+z);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,C,e.opts.jsonPointers)),a+=" if ( "+R+" === undefined ",P&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(C)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else c&&(a+=" if (true) {");return a},uniqueItems:function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h="valid"+s,p=e.opts.$data&&o&&o.$data;if(p?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,(o||p)&&!1!==e.opts.uniqueItems){p&&(i+=" var "+h+"; if ("+a+" === false || "+a+" === undefined) "+h+" = true; else if (typeof "+a+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var v="checkDataType"+(m?"s":"");i+=" if ("+e.util[v](f,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",p&&(i+="  }  "),i+=" if (!"+h+") {   ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var g=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i},validate:jo},cl=Bn.toHash,ul=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],dl=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var a,i=t[r].split("/"),s=e;for(a=1;a<i.length;a++)s=s[i[a]];for(a=0;a<ul.length;a++){var n=ul[a],o=s[n];o&&(s[n]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},hl=Po.MissingRef,pl=function e(t,r,a){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(a=r,r=void 0);var s=n(t).then((function(){var e=i._addSchema(t,void 0,r);return e.validate||function e(t){try{return i._compile(t)}catch(e){if(e instanceof hl)return a(e);throw e}function a(a){var s=a.missingSchema;if(c(s))throw new Error("Schema "+s+" is loaded but "+a.missingRef+" cannot be resolved");var o=i._loadingSchemas[s];return o||(o=i._loadingSchemas[s]=i._opts.loadSchema(s)).then(l,l),o.then((function(e){if(!c(s))return n(e).then((function(){c(s)||i.addSchema(e,s,void 0,r)}))})).then((function(){return e(t)}));function l(){delete i._loadingSchemas[s]}function c(e){return i._refs[e]||i._schemas[e]}}}(e)}));a&&s.then((function(e){a(null,e)}),a);return s;function n(t){var r=t.$schema;return r&&!i.getSchema(r)?e.call(i,{$ref:r},!0):Promise.resolve()}};var fl=function(e,t,r){var a,i,s=" ",n=e.level,o=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(o||""),p="valid"+n,f="errs__"+n,m=e.opts.$data&&l&&l.$data;m?(s+=" var schema"+n+" = "+e.util.getData(l.$data,o,e.dataPathArr)+"; ",i="schema"+n):i=l;var v,y,g,b,_,w="definition"+n,P=this.definition,E="";if(m&&P.$data){_="keywordValidate"+n;var S=P.validateSchema;s+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+_+" = "+w+".validate;"}else{if(!(b=e.useCustomRule(this,l,e.schema,e)))return;i="validate.schema"+c,_=b.code,v=P.compile,y=P.inline,g=P.macro}var x=_+".errors",j="i"+n,$="ruleErr"+n,O=P.async;if(O&&!e.async)throw new Error("async keyword in sync schema");if(y||g||(s+=x+" = null;"),s+="var "+f+" = errors;var "+p+";",m&&P.$data&&(E+="}",s+=" if ("+i+" === undefined) { "+p+" = true; } else { ",S&&(E+="}",s+=" "+p+" = "+w+".validateSchema("+i+"); if ("+p+") { ")),y)P.statements?s+=" "+b.validate+" ":s+=" "+p+" = "+b.validate+"; ";else if(g){var k=e.util.copy(e);E="";k.level++;var A="valid"+k.level;k.schema=b.validate,k.schemaPath="";var C=e.compositeRule;e.compositeRule=k.compositeRule=!0;var F=e.validate(k).replace(/validate\.schema/g,_);e.compositeRule=k.compositeRule=C,s+=" "+F}else{(T=T||[]).push(s),s="",s+="  "+_+".call( ",e.opts.passContext?s+="this":s+="self",v||!1===P.schema?s+=" , "+h+" ":s+=" , "+i+" , "+h+" , validate.schema"+e.schemaPath+" ",s+=" , (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var D=o?"data"+(o-1||""):"parentData",z=o?e.dataPathArr[o]:"parentDataProperty",R=s+=" , "+D+" , "+z+" , rootData )  ";s=T.pop(),!1===P.errors?(s+=" "+p+" = ",O&&(s+="await "),s+=R+"; "):s+=O?" var "+(x="customErrors"+n)+" = null; try { "+p+" = await "+R+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+x+" = e.errors; else throw e; } ":" "+x+" = null; "+p+" = "+R+"; "}if(P.modifying&&(s+=" if ("+D+") "+h+" = "+D+"["+z+"];"),s+=""+E,P.valid)d&&(s+=" if (true) { ");else{var T;s+=" if ( ",void 0===P.valid?(s+=" !",s+=g?""+A:""+p):s+=" "+!P.valid+" ",s+=") { ",a=this.keyword,(T=T||[]).push(s),s="",(T=T||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),s+=" } "):s+=" {} ";var I=s;s=T.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+I+"]); ":s+=" validate.errors = ["+I+"]; return false; ":s+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var N=s;s=T.pop(),y?P.errors?"full"!=P.errors&&(s+="  for (var "+j+"="+f+"; "+j+"<errors; "+j+"++) { var "+$+" = vErrors["+j+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+$+".schema = "+i+"; "+$+".data = "+h+"; "),s+=" } "):!1===P.errors?s+=" "+N+" ":(s+=" if ("+f+" == errors) { "+N+" } else {  for (var "+j+"="+f+"; "+j+"<errors; "+j+"++) { var "+$+" = vErrors["+j+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+$+".schema = "+i+"; "+$+".data = "+h+"; "),s+=" } } "):g?(s+="   var err =   ",!1!==e.createErrors?(s+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===P.errors?s+=" "+N+" ":(s+=" if (Array.isArray("+x+")) { if (vErrors === null) vErrors = "+x+"; else vErrors = vErrors.concat("+x+"); errors = vErrors.length;  for (var "+j+"="+f+"; "+j+"<errors; "+j+"++) { var "+$+" = vErrors["+j+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+";  "+$+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(s+=" "+$+".schema = "+i+"; "+$+".data = "+h+"; "),s+=" } } else { "+N+" } "),s+=" } ",d&&(s+=" else { ")}return s},ml={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},vl={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:ml.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:ml.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},yl=/^[a-z_$][a-z0-9_$-]*$/i,gl=function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!yl.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var a=t.type;if(Array.isArray(a))for(var i=0;i<a.length;i++)n(e,a[i],t);else n(e,a,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function n(e,t,a){for(var i,s=0;s<r.length;s++){var n=r[s];if(n.type==t){i=n;break}}i||(i={type:t,rules:[]},r.push(i));var o={keyword:e,definition:a,custom:!0,code:fl,implements:a.implements};i.rules.push(o),r.custom[e]=o}return r.keywords[e]=r.all[e]=!0,this},bl=function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},_l=function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var a=t[r].rules,i=0;i<a.length;i++)if(a[i].keyword==e){a.splice(i,1);break}return this},wl=function e(t,r){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(vl,!0);if(a(t))return!0;if(e.errors=a.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1};var Pl={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},El=$l;$l.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var i=r(t);!0!==r.$async&&(this.errors=r.errors);return i},$l.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},$l.prototype.addSchema=function(e,t,r,a){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,r,a);return this}var s=this._getId(e);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return Dl(this,t=lo.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,a,!0),this},$l.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},$l.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(Sl)?Sl:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return a},$l.prototype.getSchema=function(e){var t=Ol(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=lo.schema.call(e,{schema:{}},t);if(r){var a=r.schema,i=r.root,s=r.baseId,n=ko.call(e,a,i,void 0,s);return e._fragments[t]=new no({ref:t,fragment:!0,schema:a,root:i,baseId:s,validate:n}),n}}(this,e)}},$l.prototype.removeSchema=function(e){if(e instanceof RegExp)return kl(this,this._schemas,e),kl(this,this._refs,e),this;switch(typeof e){case"undefined":return kl(this,this._schemas),kl(this,this._refs),this._cache.clear(),this;case"string":var t=Ol(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,a=r?r(e):e;this._cache.del(a);var i=this._getId(e);i&&(i=lo.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},$l.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},$l.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,i="",s=0;s<e.length;s++){var n=e[s];n&&(i+=a+n.dataPath+" "+n.message+r)}return i.slice(0,-r.length)},$l.prototype._addSchema=function(e,t,r,a){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,s=i?i(e):e,n=this._cache.get(s);if(n)return n;a=a||!1!==this._opts.addUsedSchema;var o=lo.normalizeId(this._getId(e));o&&a&&Dl(this,o);var l,c=!1!==this._opts.validateSchema&&!t;c&&!(l=o&&o==lo.normalizeId(e.$schema))&&this.validateSchema(e,!0);var u=lo.ids.call(this,e),d=new no({id:o,schema:e,localRefs:u,cacheKey:s,meta:r});"#"!=o[0]&&a&&(this._refs[o]=d);this._cache.put(s,d),c&&l&&this.validateSchema(e,!0);return d},$l.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var r,a;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{a=ko.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=a,e.refs=a.refs,e.refVal=a.refVal,e.root=a.root,a;function i(){var t=e.validate,r=t.apply(this,arguments);return i.errors=t.errors,r}},$l.prototype.compileAsync=pl,$l.prototype.addKeyword=gl,$l.prototype.getKeyword=bl,$l.prototype.removeKeyword=_l,$l.prototype.validateKeyword=wl,$l.ValidationError=Po.Validation,$l.MissingRefError=Po.MissingRef,$l.$dataMetaSchema=dl;var Sl="http://json-schema.org/draft-07/schema",xl=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],jl=["/properties"];function $l(e){if(!(this instanceof $l))return new $l(e);var t,r;e=this._opts=Bn.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:zl,warn:zl,error:zl};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=Wo(e.format),this._cache=e.cache||new No,this._loadingSchemas={},this._compilations=[],this.RULES=((t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}]).all=cl(r=["type","$comment"]),t.types=cl(["number","integer","string","array","object","boolean","null"]),t.forEach((function(e){e.rules=e.rules.map((function(e){var a;if("object"==typeof e){var i=Object.keys(e)[0];a=e[i],e=i,a.forEach((function(e){r.push(e),t.all[e]=!0}))}return r.push(e),t.all[e]={keyword:e,code:ll[e],implements:a}})),t.all.$comment={keyword:"$comment",code:ll.$comment},e.type&&(t.types[e.type]=e)})),t.keywords=cl(r.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t),this._getId=function(e){switch(e.schemaId){case"auto":return Fl;case"id":return Al;default:return Cl}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=xo),this._metaOpts=function(e){for(var t=Bn.copy(e._opts),r=0;r<xl.length;r++)delete t[xl[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=Pl,e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var r=ml;e._opts.$data&&(r=dl(r,jl));e.addMetaSchema(r,Sl,!0),e._refs["http://json-schema.org/schema"]=Sl}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function Ol(e,t){return t=lo.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function kl(e,t,r){for(var a in t){var i=t[a];i.meta||r&&!r.test(a)||(e._cache.del(i.cacheKey),delete t[a])}}function Al(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function Cl(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function Fl(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function Dl(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function zl(){}const Rl=new El({allErrors:!0,jsonPointers:!0}),Tl={type:"object",properties:{type:{type:"string"},style:{},discover_existing:{type:"boolean"},standard_configuration:{type:"boolean"},title:{type:["boolean","string"]},am_pm:{type:"boolean"},time_step:{type:"integer",minimum:1,maximum:60},domains:{type:"object",additionalProperties:{type:["object","null"],properties:{icon:{type:"string"},actions:{type:"array",items:{type:"object",properties:{icon:{type:"string"},name:{type:"string"},service:{type:"string"},service_data:{type:"object"},variable:{type:"object",properties:{field:{type:"string"},name:{type:"string"},unit:{type:"string"},min:{type:"number",minimum:0},max:{type:"number",minimum:1},step:{type:"number",minimum:.1},optional:{type:"boolean"},show_percentage:{type:"boolean"}},required:["field"],additionalProperties:!1}},required:["service"],additionalProperties:!1}},include:{type:"array",items:{type:"string"}},exclude:{type:"array",items:{type:"string"}}},additionalProperties:!1}},entities:{type:"object",additionalProperties:{type:["object","null"],properties:{name:{type:"string"},icon:{type:"string"},actions:{type:"array",items:{type:"object",properties:{icon:{type:"string"},name:{type:"string"},service:{type:"string"},service_data:{type:"object"},variable:{type:"object",properties:{field:{type:"string"},name:{type:"string"},unit:{type:"string"},min:{type:"number",minimum:0},max:{type:"number",minimum:1},step:{type:"number",minimum:.1},optional:{type:"boolean"},show_percentage:{type:"boolean"}},required:["field"],additionalProperties:!1}},required:["service"],additionalProperties:!1}}},additionalProperties:!1}},groups:{type:"object",additionalProperties:{type:"object",properties:{name:{type:"string"},icon:{type:"string"},entities:{type:"array",items:{type:"string"}},domains:{type:"array",items:{type:"string"}}},additionalProperties:!1,oneOf:[{required:["entities"]},{required:["domains"]}]}}},additionalProperties:!1};const Il={group:"",entity:"",action:"",newItem:!1,actionConfirmed:!1,editItem:"",time:{value:gn("12:00")},daysCustom:[],daysType:"daily",levelEnabled:null,level:null},Nl={sunrise:null,sunset:null,title:!0,am_pm:!1,time_step:10};let Ul=class extends ae{constructor(){super(...arguments),this._val=0,this.event=null,this.formatAmPm="false",this.stepSize=10,this.sunrise=0,this.sunset=0,this.maxOffset=2}set value(e){let t=this.value;this._val=e,this.requestUpdate("value",t)}get value(){return mn(this._val,this.stepSize)}updated(){let e=new CustomEvent("change",{detail:{event:this.event}});this.dispatchEvent(e)}firstUpdated(){"undefined"==this.event&&(this.event=null);let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=yn(this.value,e)}render(){return N`
      <div class="time-picker">
        <div class="hours-up">
          <mwc-button @click="${this.hoursUp}">
            <ha-icon icon="hass:chevron-up"></ha-icon>
          </mwc-button>
        </div>
        <div class="hours">${this.getHours()}</div>
        <div class="hours-down">
          <mwc-button @click="${this.hoursDown}">
            <ha-icon icon="hass:chevron-down"></ha-icon>
          </mwc-button>
        </div>
        <div class="separator">:</div>
        <div class="minutes-up">
          <mwc-button @click="${this.minutesUp}">
            <ha-icon icon="hass:chevron-up"></ha-icon>
          </mwc-button>
        </div>
        <div class="minutes">${this.getMinutes()}</div>
        <div class="minutes-down">
          <mwc-button @click="${this.minutesDown}">
            <ha-icon icon="hass:chevron-down"></ha-icon>
          </mwc-button>
        </div>
        ${this.getSuffix()}
        <div class="options">
          ${this.getSunModeToggle()}
        </div>
      </div>
    `}getHours(){return vn(this.value,{amPm:"true"==this.formatAmPm}).hours}getMinutes(){return vn(this.value,{amPm:"true"==this.formatAmPm}).minutes}hoursUp(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=yn(this._val+60,e)}hoursDown(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=yn(this._val-60,e)}minutesUp(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=yn(this._val+this.stepSize,e)}minutesDown(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=yn(this._val-this.stepSize,e)}getSunModeToggle(){if(isNaN(this.sunrise)||isNaN(this.sunset))return N``;let e=Math.abs(yn(this._val-this.sunrise,{stepSize:this.stepSize,signed:!0})),t=Math.abs(yn(this._val-this.sunset,{stepSize:this.stepSize,signed:!0}));return this.event||e<=60*this.maxOffset||t<=60*this.maxOffset?N`
          <mwc-button @click="${this.toggleMode}" class="${this.event?"active":""}">
            <ha-icon icon="hass:theme-light-dark"></ha-icon>
          </mwc-button>
      `:N`
          <mwc-button disabled="disabled">
            <ha-icon icon="hass:theme-light-dark"></ha-icon>
          </mwc-button>
      `}getAmPm(){return vn(this._val,{amPm:"true"==this.formatAmPm}).amPm}getBeforeAfter(){return this.value<0?pn("words.before"):pn("words.after")}getSuffix(){return this.event?N`
      <div class="suffix">
        <mwc-button @click="${this.toggleBeforeAfter}">
          ${this.getBeforeAfter()}
        </mwc-button>
        <mwc-button @click="${this.toggleSunriseSunset}">
          <ha-icon icon="hass:${"sunrise"==this.event?"weather-sunny":"weather-night"}"></ha-icon>
        </mwc-button>
      </div>
    `:"true"==this.formatAmPm?N`
      <div class="suffix">
        <mwc-button @click="${this.toggleAmPm}">
          ${this.getAmPm()}
        </mwc-button>
      </div>
    `:N``}toggleAmPm(){this._val<720?this.value=yn(this._val+720):this.value=yn(this._val-720)}toggleBeforeAfter(){this.value=-this._val}toggleSunriseSunset(){this.event="sunrise"==this.event?"sunset":"sunrise",this.value=this._val}toggleMode(){let e=this.value;if(this.event){let t="sunrise"==this.event?this.sunrise:this.sunset;this.event=null,this.value=e+t}else{let t;Math.abs(e-this.sunrise)<Math.abs(e-this.sunset)?(t=this.sunrise,this.event="sunrise"):(t=this.sunset,this.event="sunset"),this.value=e-t}}};Ul.styles=te`
      div.time-picker {
        display: grid;
        grid-template-columns: min-content min-content min-content 1fr min-content;
        grid-template-rows: min-content min-content min-content;
        grid-template-areas: "hours-up   .         minutes-up   suffix options"
                             "hours      separator minutes      suffix options"
                             "hours-down .         minutes-down suffix options";
        grid-gap: 10px 0px;
        align-items: center;
      }

      div.hours-up { grid-area: hours-up; }
      div.hours { grid-area: hours; }
      div.hours-down { grid-area: hours-down; }
      div.separator { grid-area: separator; }
      div.minutes-up { grid-area: minutes-up; }
      div.minutes { grid-area: minutes; }
      div.minutes-down { grid-area: minutes-down; }
      div.suffix { grid-area: suffix; flex-grow: 1; }
      div.options { grid-area: options; }

      div.hours-up, div.hours-down, div.minutes-up, div.minutes-down {
        --mdc-icon-size: 42px;
      }

      div.hours, div.minutes {
        font-size: 42px;
        text-align: center;
      }

      div.separator {
        font-size: 36px;
      }

      div.suffix mwc-button {
        --mdc-typography-button-font-size: 16px;
        --mdc-icon-size: 32px;
      }

      mwc-button.active {
        background: var(--primary-color);
        --mdc-theme-primary: var(--text-primary-color);
        border-radius: 4px;
      }
  `,t([Z({type:Number})],Ul.prototype,"value",null),t([Z({type:String})],Ul.prototype,"event",void 0),t([Z({type:String})],Ul.prototype,"formatAmPm",void 0),t([Z({type:Number})],Ul.prototype,"stepSize",void 0),t([Z({type:Number})],Ul.prototype,"sunrise",void 0),t([Z({type:Number})],Ul.prototype,"sunset",void 0),Ul=t([J("time-picker")],Ul);function Ll(e){return"true"==e||"false"!=e&&!!e.length}let ql=class extends ae{constructor(){super(...arguments),this.min=0,this.max=100,this.step=1,this.value=0,this.show_percentage="false",this.unit="",this.optional="false",this.disabled="false",this.scaleGain=1,this.scaleOffset=0}updated(){}firstUpdated(){(async()=>{await(async()=>{if(customElements.get("ha-checkbox")&&customElements.get("ha-paper-slider"))return;await customElements.whenDefined("partial-panel-resolver");const e=document.createElement("partial-panel-resolver");e.hass={panels:[{url_path:"tmp",component_name:"config"}]},e._updateRoutes(),await e.routerOptions.routes.tmp.load(),await customElements.whenDefined("ha-panel-config");const t=document.createElement("ha-panel-config");await t.routerOptions.routes.automation.load()})()})(),Ll(this.show_percentage)&&(this.unit="%",this.scaleOffset=this.min,this.scaleGain=(this.max-this.min)/100,this.min=0,this.max=100),Ll(this.disabled)&&!Ll(this.optional)&&(this.disabled="false"),isNaN(this.value)&&(this.value=this.min),this.requestUpdate()}render(){return N`
      <div class="container">
        <div class="checkbox">
        ${this.getCheckbox()}
        </div>
        <div class="slider">
        ${this.getSlider()}
        </div>
        <div class="value${Ll(this.disabled)?" disabled":""}">
        ${this.getScaledValue()}${this.unit}
        </div>
    `}getScaledValue(){let e=this.value,t=Math.round((e-this.scaleOffset)/this.scaleGain);return t<this.min?t=this.min:t>this.max&&(t=this.max),Math.round(t*this.step/this.step)}getSlider(){return Ll(this.disabled)?N`
        <ha-paper-slider
        pin
        min=${this.min}
        max=${this.max}
        step=${this.step}
        value=${this.getScaledValue()}
        disabled
        ></ha-paper-slider>`:N`
        <ha-paper-slider
        pin
        min=${this.min}
        max=${this.max}
        step=${this.step}
        value=${this.getScaledValue()}
        @change=${this.updateValue}
        ></ha-paper-slider>`}getCheckbox(){return Ll(this.optional)?Ll(this.disabled)?N`<ha-checkbox @change="${this.toggleChecked}"></ha-checkbox>`:N`<ha-checkbox @change="${this.toggleChecked}" checked></ha-checkbox>`:N``}toggleChecked(e){let t=e.target.checked;this.disabled=t?"false":"true"}updateValue(e){let t=Number(e.target.value)*this.scaleGain+this.scaleOffset;t=Math.round(t*this.step)/this.step,this.value=t}};ql.styles=te`

      :host {
        width: 100%;
      }

      div.container {
        display: grid;
        grid-template-columns: min-content 1fr max-content;
        grid-template-rows: min-content;
        grid-template-areas: "checkbox slider value";
      }

      div.checkbox {
        grid-area: checkbox;
        display: flex;
        align-items: center;
      }

      div.slider {
        grid-area: slider;
        display: flex;
        align-items: center;
      }

      div.value {
        grid-area: value;
        min-width: 40px;
        display: flex;
        align-items: center;
      }

      ha-paper-slider {
        width: 100%;
        --paper-slider-pin-start-color: var(--primary-color);
      }
      
       .disabled {
        color: var(--disabled-text-color);
      }
  `,t([Z({type:Number})],ql.prototype,"min",void 0),t([Z({type:Number})],ql.prototype,"max",void 0),t([Z({type:Number})],ql.prototype,"step",void 0),t([Z({type:Number})],ql.prototype,"value",void 0),t([Z({type:String})],ql.prototype,"show_percentage",void 0),t([Z({type:String})],ql.prototype,"unit",void 0),t([Z({type:String})],ql.prototype,"optional",void 0),t([Z({type:String})],ql.prototype,"disabled",void 0),ql=t([J("variable-slider")],ql);function Vl(e){return e.endTime-e.startTime}let Ml=class extends ae{constructor(){super(...arguments),this.slots=[],this.actions=[],this.stepSize=15,this._activeSlot=null,this._activeThumb=null}updated(){}firstUpdated(){}render(){return N`
      <div class="slider-container">
        <div>
          <div class="slider-track">
            ${this.getSlots()}
          </div>
        </div>
        <div class="slider-legend">
          <div class="slider-legend-item empty"></div>
          <div class="slider-legend-item">03:00</div>
          <div class="slider-legend-item">06:00</div>
          <div class="slider-legend-item">09:00</div>
          <div class="slider-legend-item">12:00</div>
          <div class="slider-legend-item">15:00</div>
          <div class="slider-legend-item">18:00</div>
          <div class="slider-legend-item">21:00</div>
          <div class="slider-legend-item empty"></div>
        </div>
      </div>
      <div>
        ${null!==this._activeSlot&&this.slots.length<10?N`
        <mwc-button @click="${this._addSlot}">
          <ha-icon icon="hass:plus-circle-outline" class="padded-right"></ha-icon>
          Add
        </mwc-button>
        `:N`
        <mwc-button disabled>
          <ha-icon icon="hass:plus-circle-outline" class="padded-right"></ha-icon>
          Add
        </mwc-button>
        `}
        ${null!==this._activeSlot&&this.slots.length>3?N`
        <mwc-button @click="${this._removeSlot}">
          <ha-icon icon="hass:minus-circle-outline" class="padded-right"></ha-icon>
          Remove
        </mwc-button>
        `:N`
        <mwc-button disabled>
          <ha-icon icon="hass:minus-circle-outline" class="padded-right"></ha-icon>
          Remove
        </mwc-button>
        `}
      </div>
    `}getSlots(){let e=[];return this.slots.forEach((t,r)=>{e.push(N`
        <div class="slider-slot${this._activeSlot==r?" active":""}" @click="${this._handleSegmentClick}" index="${r}" style="width: ${Vl(t)/1440*100}%">
          ${this.getSlotAction(t)}
        </div>
      `),r<this.slots.length-1&&e.push(N`
        <div class="slider-thumb${this._activeThumb==r?" active":""}" index="${r}">
          <ha-icon icon="hass:unfold-more-vertical"  @mousedown="${this._handleTouchStart}" @touchstart="${this._handleTouchStart}"></ha-icon>
          <div class="slider-thumb-tooltip" value="time" @update="${this._updateMarker}">
            ${vn(this.slots[r].endTime).time}
          </div>
        </div>`)}),e}getSlotAction(e){if(!e.action)return"";let t=this.actions.find(t=>t.id==e.action);if(e.levelEnabled&&void 0!==e.level&&t.variable){let r=t.variable,a=e.level,i=r.unit;if(r.show_percentage){let e=r.min,t=(r.max-r.min)/100;a=Math.round((a-e)/t),i="%"}return`${a}${i}`}return"turn_on"==e.action?"on":"turn_off"==e.action?"off":""+e.action}_handleSegmentClick(e){let t=e.target,r=Number(t.getAttribute("index"));this._activeSlot=this._activeSlot==r?null:r;let a=new CustomEvent("update",{detail:{slot:this._activeSlot}});this.dispatchEvent(a)}_handleTouchStart(e){let t;if(t=e.target,!t)return;let r=t.parentNode,a=Number(r.getAttribute("index"));this._activeThumb=a;let i=r.parentElement,s=i.getBoundingClientRect(),n=r.previousElementSibling,o=r.nextElementSibling,l=r.querySelector(".slider-thumb-tooltip");const c=n.offsetWidth+o.offsetWidth,u=s.width;let d=Array.from(i.querySelectorAll(".slider-slot")),h=d.map(e=>e.offsetWidth),p=0,f=-1;d.forEach((e,t)=>{e==n?f=t:-1==f&&(p+=h[t])});let m=e=>{let t;t=e instanceof TouchEvent?e.changedTouches[0].pageX:e.pageX;let r=t-s.left;r<0?r=0:r>s.width&&(r=s.width),r>c+p&&(r=c+p),r<p&&(r=p),n.style.width=Math.round(r-p)+"px",o.style.width=Math.round(c-(r-p))+"px";let a=r/u*1440;a=a>=1440?a=1440:mn(a,this.stepSize),l.dispatchEvent(new CustomEvent("update",{detail:{time:a}}))};var v=()=>{window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",v),window.addEventListener("touchend",v);let e=gn(l.innerText),t=Vl(this.slots[f])+Vl(this.slots[f+1]),r=this.slots[f].startTime,a=[...this.slots];Object.assign(a[f],{endTime:e}),Object.assign(a[f+1],{startTime:e,endTime:r+t});let i=new CustomEvent("update",{detail:{slots:a}});this.dispatchEvent(i),m=()=>{},this._activeThumb=null};window.addEventListener("mouseup",v),window.addEventListener("touchend",v),window.addEventListener("mousemove",m),window.addEventListener("touchmove",m)}_updateMarker(e){let t=e.detail,r=0;if(t.hasOwnProperty("time"))r=Number(t.time);else if(t.hasOwnProperty("index")){let e=t.index;r=this.slots[e].endTime}1440==r&&(r-=1),e.target.innerText=vn(r).time}_addSlot(){let e=this.slots[this._activeSlot],t=e.startTime,r=e.endTime,a=mn(t+Vl(e)/2,this.stepSize),i=[...this.slots];Object.assign(i[this._activeSlot],{endTime:a}),i.splice(this._activeSlot+1,0,{startTime:a,endTime:r});let s=new CustomEvent("update",{detail:{slots:i}});this.dispatchEvent(s)}_removeSlot(){let e=this._activeSlot==this.slots.length-1?this._activeSlot-1:this._activeSlot,t=Object.assign({},this.slots[e]);Object.assign(t,{endTime:this.slots[e+1].endTime});let r=[...this.slots];r.splice(e,2,t);let a=new CustomEvent("update",{detail:{slots:r}});this.dispatchEvent(a)}};Ml.styles=te`

      div.slider-track {
        height: 45px;
        width: 100%;
        display: flex;
      }
      
      div.slider-slot {
        height: calc(100%);
        width: 50%;
        display: flex;
        background: var(--primary-color);
        opacity: 0.85;
        z-index: 1;
        cursor: pointer;
        color: var(--text-primary-color);
        justify-content: center;
        align-items: center;
      }
      div.slider-slot.active {
        opacity: 0.85;
        background: var(--accent-color);
      }
      div.slider-slot:hover, div.slider-slot.active:hover {
        opacity: 1;
      }
      
      div.slider-track div.slider-slot:first-of-type {
        border-radius: 4px 0px 0px 4px;
      }
      div.slider-track div.slider-slot:last-of-type {
        border-radius: 0px 4px 4px 0px;
      }
      div.slider-thumb {
        height: 100%;
        width: 2px;
        background: var(--card-background-color);
        display: flex;
        cursor: pointer;
        z-index: 5;
        margin: 0px -1px;
      }
      div.slider-thumb ha-icon {
        background: var(--card-background-color);
        color: var(--primary-text-color);
        width: 26px;
        height: 26px;
        --mdc-icon-size: 26px;
        border-radius: 100%;
        margin-left: -12px;
        margin-top: 10px;
      }

      div.slider-legend {
        display: flex;
        width: 100%;
      }
      div.slider-legend-item {
        width: calc(100% / 8);
        font-size: 0.8em;
        display: flex;
        justify-content: center;
      }
      div.slider-legend-item.empty {
        width: calc(100% / 16);
        display: flex;
      }
      div.slider-thumb-tooltip {
        background: var(--primary-color);
        color: var(--text-primary-color);
        border-radius: 5px;
        font-size: 0.8em;
        position: absolute;
        height: 20px;
        width: 50px;
        margin-top: -21px;
        margin-left: -25px;
        text-align: center;
        line-height: 20px;
      }

      .padded-right {
        margin-right: 11px;
      }
      
      mwc-button {
        margin: 2px 0px;
      }

      mwc-button.active {
        background: var(--primary-color);
        --mdc-theme-primary: var(--text-primary-color);
        border-radius: 4px;
      }
  `,t([Z({type:Array})],Ml.prototype,"slots",void 0),t([Z({type:Array})],Ml.prototype,"actions",void 0),t([Z({type:Number})],Ml.prototype,"stepSize",void 0),t([Z({type:Number})],Ml.prototype,"_activeSlot",void 0),t([Z({type:Number})],Ml.prototype,"_activeThumb",void 0),Ml=t([J("timeslot-editor")],Ml),window.customCards=window.customCards||[],window.customCards.push({type:"scheduler-card",name:"Scheduler Card",description:"Card to manage schedule entities made with scheduler-component."}),console.info(`%c   SCHEDULER-CARD   \n%c   Version: ${"1.4.2".padEnd(8," ")}\n%c   Language: ${fn().padEnd(7," ")}`,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray","color: white; font-weight: bold; background: dimgray"),e.SchedulerCard=class extends ae{constructor(){super(...arguments),this._config=Nl,this.Config=new Vn,this.scheduleItems=[],this.selection=Object.assign({},Il)}static get styles(){return Mn}set hass(e){this._hass||this.init(e),this.updateScheduleList(e),this._hass=e}init(e){void 0!==e.states["sun.sun"]&&Object.assign(this._config,{sunrise:gn(e.states["sun.sun"].attributes.next_rising),sunset:gn(e.states["sun.sun"].attributes.next_setting)}),this.Config.LoadEntities(e.states)}updateScheduleList(e){let t=Ia(e.states,e=>Dn(e.entity_id)).map(e=>function(e,t){let r=e.attributes.actions.map(e=>{let r=String(e.entity),a=String(e.service),i=Object.entries(e).filter(([e])=>!["entity","service"].includes(e)).reduce((e,[t,r])=>Object.assign(e,{[t]:r}),{});if(Cn(r)||(r=`${Cn(a)}.${r}`),Cn(a)==Cn(r)&&(a=String(a.split(".").pop())),!t.FindEntity(r))return{};let s=Object.keys(i).length?Fn({service:a,service_data:i}):Fn({service:a}),n={entity:r,action:s};if(!t.FindAction(r,s)){let e=t.GetActionsForEntity(r).find(e=>e.hasOwnProperty("variable")&&i.hasOwnProperty(e.variable.field));if(!e)return n;{let t=e.variable.field;Object.assign(n,{level:Number(i[t]),levelEnabled:!0}),delete i[t],s=Object.keys(i).length?Fn({service:a,service_data:i}):Fn({service:a})}}return Object.assign(n,{action:s}),n}),a=[];return e.attributes.entries.forEach(e=>{let t,i=On.exec(e),s=kn.exec(i[3]),n=An.exec(i[2]);t=n?{event:"SR"==n[2]?"sunrise":"sunset",value:n[1]?-gn(n[1]):gn(n[3])}:{value:gn(i[2])},s.map(Number).filter(e=>!isNaN(e)).forEach(e=>{e>=r.length||a.push(Object.assign(Object.assign({},r[e]),{time:t,days:i[1].split("").map(Number)}))})}),{id:e.entity_id,enabled:"off"!=e.state,entries:a}}(e,this.Config));Ka(t,this.scheduleItems)||(this.scheduleItems=t,this.requestUpdate())}getCardSize(){return this._hass&&this.scheduleItems.length?6+2*this.scheduleItems.length:6}render(){return this.selection.newItem||this.selection.editItem?this.selection.newItem&&!this.selection.actionConfirmed?N`
        <ha-card>
          ${this.getTitle()}
          <div class="card-section first">
            <div class="header">${pn("fields.group")}</div>
            <div class="option-list">
            ${this.getGroups()}
            </div>
          </div>
          <div class="card-section">
            <div class="header">${pn("fields.entity")}</div>
            <div class="option-list">
            ${this.getEntities()}
            </div>
          </div>
          ${this.getActions()}
          <div class="card-section last">
            <mwc-button outlined @click="${()=>this.editItemCancel()}">${pn("actions.cancel")}</mwc-button>
            ${this.selection.action?N`<mwc-button outlined @click="${()=>this.newItemConfirm()}">${pn("actions.next")}</mwc-button>`:N`<mwc-button outlined disabled>${pn("actions.next")}</mwc-button>`}
          </div>
        </ha-card>
      `:this.selection.action==Sn.id?N`
      <ha-card>
        ${this.getTitle()}
        ${this.showRoutineEditor()}
      </ha-card>
      `:N`
      <ha-card>
        ${this.getTitle()}
        ${this.showEditor()}
      </ha-card>
      `:N`
      <ha-card>
        ${this.getTitle()}
        <div class="card-section first">
        ${this.getEntries()}
        </div>
        <div class="card-section last">
          <mwc-button outlined @click="${()=>{this.newItem()}}">${pn("actions.add")}</mwc-button>
        </div>
      </ha-card>
      `}getTitle(){return"string"==typeof this._config.title?N`<div class="card-header">${this._config.title}</div>`:this._config.title?N`<div class="card-header">${pn("scheduler")}</div>`:N``}newItem(){this.selection=Kt(Object.assign({},Il),{newItem:!0}),this.requestUpdate()}editItemCancel(){this.selection=Object.assign({},Il),this.requestUpdate()}newItemConfirm(){this.selection=Kt(Object.assign({},Il),{newItem:!0,actionConfirmed:!0,entity:this.selection.entity,action:this.selection.action}),this.requestUpdate()}getEntries(){return this.scheduleItems&&this.scheduleItems.length?this.scheduleItems.map(e=>{let t=this.Config.FindEntity(e.entries[0].entity),r=this.Config.FindAction(e.entries[0].entity,e.entries[0].action);if(!t||!r)return N``;if(1==e.entries.length)return N`
          <div class="list-item${e.enabled?"":" disabled"}" @click="${()=>this.editItem(e.id)}">
            <div class="list-item-icon">
              ${t.icon?N`<ha-icon icon="${Nn(t.icon)}"></ha-icon>`:""}
            </div>
            <div class="list-item-name">
              ${In(t.name)}
            </div>
            <div class="list-item-action">
              ${Un(e.entries[0],r)}
            </div>
            <div class="list-item-days">
              ${Ln(Rn(e.entries[0].days))}
            </div>
            <div class="list-item-time">
              ${Ln(Tn(e.entries[0].time,{amPm:this._config.am_pm,sunrise:this._config.sunrise,sunset:this._config.sunset}))}
            </div>
            <div class="list-item-switch">
              ${e.enabled?N`<ha-switch checked="checked" @click="${t=>this.toggleDisable(e.id,t)}"></ha-switch>`:N`<ha-switch @click="${t=>this.toggleDisable(e.id,t)}"></ha-switch>`}
            </div>
          </div>
      `;{let r=e.entries.map(e=>{let t=Un(e,this.Config.FindAction(e.entity,e.action)),r=Tn(e.time,{amPm:this._config.am_pm,sunrise:this._config.sunrise,sunset:this._config.sunset});return N`${t} ${r}<br>`});return N`
          <div class="list-item${e.enabled?"":" disabled"}" @click="${()=>this.editItem(e.id)}">
            <div class="list-item-icon">
              ${t.icon?N`<ha-icon icon="${Nn(t.icon)}"></ha-icon>`:""}
            </div>
            <div class="list-item-name">
              ${In(t.name)}
            </div>
            <div class="list-item-action">
              ${r}
            </div>
            <div class="list-item-days">
              ${Ln(Rn(e.entries[0].days))}
            </div>
            <div class="list-item-time">
            </div>
            <div class="list-item-switch">
              ${e.enabled?N`<ha-switch checked="checked" @click="${t=>this.toggleDisable(e.id,t)}"></ha-switch>`:N`<ha-switch @click="${t=>this.toggleDisable(e.id,t)}"></ha-switch>`}
            </div>
          </div>
        `}}):[N`
      <div class="text-field">
        ${pn("instructions.no_entries_defined")}
      </div>
    `]}toggleDisable(e,t){t.stopPropagation(),!t.target.checked?this._hass.callService("switch","turn_on",{entity_id:e}):this._hass.callService("switch","turn_off",{entity_id:e})}editItem(e){let t=La(this.scheduleItems,{id:e});1==t.entries.length?(this.selection=Kt(Object.assign({},Il),{editItem:e,entity:t.entries[0].entity,action:t.entries[0].action,time:t.entries[0].time,days:t.entries[0].days,daysType:zn(t.entries[0].days)}),void 0!==t.entries[0].level&&Object.assign(this.selection,{levelEnabled:!0,level:t.entries[0].level})):this.selection=Kt(Object.assign({},Il),{editItem:e,entity:t.entries[0].entity,action:Sn.id,days:t.entries[0].days,daysType:zn(t.entries[0].days),plannerSlots:qn(t.entries)}),this.requestUpdate()}getGroups(){let e=this.Config.GetGroups();return e.length?e.map(e=>N`
        <mwc-button class="${this.selection.group==e.id?" active":""}" @click="${()=>{this.selectGroup(e.id)}}">
          ${e.icon?N`<ha-icon icon="${Nn(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${In(e.name)}
        </mwc-button>
      `):[N`<div class="text-field">${pn("instructions.no_groups_defined")}</div>`]}selectGroup(e){Object.assign(this.selection,{group:e,entity:null,action:null}),this.requestUpdate()}getEntities(){if(!this.selection.group)return[N`<div class="text-field">${pn("instructions.no_group_selected")}</div>`];let e=this.Config.GetEntitiesForGroup(this.selection.group);return e.length?e.map(e=>N`
        <mwc-button class="${this.selection.entity==e.id?" active":""}" @click="${()=>{this.selectEntity(e.id)}}">
          ${e.icon?N`<ha-icon icon="${Nn(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${In(e.name)}
        </mwc-button>
      `):[N`<div class="text-field">${pn("instructions.no_entities_for_group")}</div>`]}selectEntity(e){Object.assign(this.selection,{entity:e,action:null}),this.requestUpdate()}getActions(){if(!this.selection.entity)return N`
          <div class="card-section">
            <div class="header">${pn("fields.action")}</div>
            <div class="option-list">
              <div class="text-field">${pn("instructions.no_entity_selected")}</div>
            </div>
          </div>
      `;let e=this.Config.GetActionsForEntity(this.selection.entity);if(!e.length)return N`
          <div class="card-section">
            <div class="header">${pn("fields.action")}</div>
            <div class="option-list">
              <div class="text-field">${pn("instructions.no_actions_for_entity")}</div>
            </div>
          </div>
      `;let t=e.filter(e=>e.id!=Sn.id).map(e=>N`
        <mwc-button class="${this.selection.action==e.id?" active":""}" @click="${()=>{this.selectAction(e.id)}}">
          ${e.icon?N`<ha-icon icon="${Nn(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${In(e.name)}
        </mwc-button>
      `),r=[N``];return r=e.filter(e=>e.id==Sn.id).map(e=>N`
        <div class="card-section first">
          <div class="header">or</div>
          <div class="option-list">
            <mwc-button class="${this.selection.action==e.id?" active":""}" @click="${()=>{this.selectAction(e.id)}}">
              ${e.icon?N`<ha-icon icon="${Nn(e.icon)}" class="padded-right"></ha-icon>`:""}
              ${In(e.name)}
            </mwc-button>
          </div>
        </div>
      `),N`
          <div class="card-section">
            <div class="header">${pn("fields.action")}</div>
            <div class="option-list">
              ${t}
            </div>
          </div>
          ${r}
      `}selectAction(e){Object.assign(this.selection,{action:e}),this.requestUpdate()}setConfig(e){let t={},r={};!function(e){if(!Rl.validate(Tl,e)){let e=Rl.errors.map(e=>{let t="",r=e.dataPath.substr(1).split("/"),a=r.pop();return r.length&&(t+=`in '${r.join("->")}' `),"type"==e.keyword&&(t+="type of "),a?a&&(t+=(isNaN(+a)?`'${a}'`:`[item ${a}]`)+" "):t+="card ",t+=e.message,e.params.hasOwnProperty("additionalProperty")&&(t+=` '${e.params.additionalProperty}'`),t.charAt(0).toUpperCase()+t.slice(1)+"."});throw new Error("Invalid configuration provided. "+e.map((e,t)=>`(${t+1}) ${e}`).join(" "))}}(e);const a=["groups","domains","entities","discover_existing","standard_configuration"];t=Object.entries(e).filter(([e])=>a.includes(e)).reduce((e,[t,r])=>Object.assign(e,{[t]:r}),{}),r=Object.entries(e).filter(([e])=>Object.keys(this._config).includes(e)).reduce((e,[t,r])=>Object.assign(e,{[t]:r}),{}),Object.assign(this._config,r),this.Config.setUserConfig(t)}showEditor(){let e=this.Config.FindEntity(this.selection.entity),t=this.Config.FindAction(this.selection.entity,this.selection.action);return e&&t?N`
    <div class="card-section first">
      <div class="header">${pn("fields.action")}</div>
      <div class="summary">
        <div class="summary-entity">
          <div class="summary-icon">
            ${e.icon?N`<ha-icon icon="${Nn(e.icon)}"></ha-icon>`:""}
          </div>
          <div class="summary-text">
            ${In(e.name)}
          </div>
        </div>
        <div class="summary-arrow">
          <ha-icon icon="hass:arrow-right"></ha-icon>
        </div>
        <div class="summary-action">
          <div class="summary-icon">
            ${t.icon?N`<ha-icon icon="${Nn(t.icon)}"></ha-icon>`:""}
          </div>
          <div class="summary-text">
            ${In(t.name)}
          </div>
        </div>
      </div>
     </div>
     ${t.hasOwnProperty("variable")?this.getLevelPanel(t.variable):""}
    <div class="card-section">
      <div class="header">${pn("fields.days")}</div>
      <div class="day-list">
        <mwc-button class="day-item${"daily"==this.selection.daysType?" active":""}" index="daily" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("fields.day_type_daily")}</mwc-button>
        <mwc-button class="day-item${"weekdays"==this.selection.daysType?" active":""}" index="weekdays" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("fields.day_type_weekdays")}</mwc-button>
        <mwc-button class="day-item${"custom"==this.selection.daysType?" active":""}" index="custom" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("fields.day_type_custom")}</mwc-button>
      </div>
      <div class="day-list${"custom"==this.selection.daysType?"":" closed"}" id="day-list-custom">
        <mwc-button class="day-item${this.selection.daysCustom.includes(1)?" active":""}" index="1" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.mon")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(2)?" active":""}" index="2" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.tue")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(3)?" active":""}" index="3" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.wed")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(4)?" active":""}" index="4" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.thu")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(5)?" active":""}" index="5" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.fri")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(6)?" active":""}" index="6" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.sat")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(7)?" active":""}" index="7" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.sun")}</mwc-button>
      </div>
    </div>
      
    <div class="card-section">
      <div class="header">${pn("fields.time")}</div>
      <time-picker value=${this.selection.time.value} event=${this.selection.time.event} stepSize="${this._config.time_step}" formatAmPm="${this._config.am_pm}" sunrise="${this._config.sunrise}" sunset="${this._config.sunset}" @change="${this.updateTime}"></timepicker>
    </div>

    <div class="card-section last">
      <mwc-button outlined @click="${()=>this.editItemCancel()}">${pn("actions.cancel")}</mwc-button>
      ${void 0===this.selection.editItem?"":N`<mwc-button outlined @click="${()=>this.editItemDelete()}">${pn("actions.delete")}</mwc-button>`}
      <mwc-button outlined @click="${()=>this.editItemSave()}">${pn("actions.save")}</mwc-button>
    </div>
    `:N``}showRoutineEditor(){let e=this.Config.FindEntity(this.selection.entity),t=this.Config.FindAction(this.selection.entity,this.selection.action),r=this.Config.GetActionsForEntity(this.selection.entity).filter(e=>e.routine),a=isNaN(this.selection.activePlannerSlot)?null:this.selection.plannerSlots[this.selection.activePlannerSlot],i=a?r.find(e=>e.id==a.action):null;if(this.selection.plannerSlots||Object.assign(this.selection,{plannerSlots:xn}),i&&i.variable){let e=this.selection.activePlannerSlot,t=[...this.selection.plannerSlots],r=Object.assign({},t[e]);Object.assign(r,{level:this.selection.level,levelEnabled:this.selection.levelEnabled}),t[e]=r,this.selection.plannerSlots=t}return e&&t?N`
    <div class="card-section first">
      <div class="header">${pn("fields.action")}</div>
      <div class="summary">
        <div class="summary-entity">
          <div class="summary-icon">
            ${e.icon?N`<ha-icon icon="${Nn(e.icon)}"></ha-icon>`:""}
          </div>
          <div class="summary-text">
            ${In(e.name)}
          </div>
        </div>
        <div class="summary-arrow">
          <ha-icon icon="hass:arrow-right"></ha-icon>
        </div>
        <div class="summary-action">
          <div class="summary-icon">
            ${t.icon?N`<ha-icon icon="${Nn(t.icon)}"></ha-icon>`:""}
          </div>
          <div class="summary-text">
            ${In(t.name)}
          </div>
        </div>
      </div>
     </div>
    <div class="card-section">
      <div class="header">${pn("fields.days")}</div>
      <div class="day-list">
        <mwc-button class="day-item${"daily"==this.selection.daysType?" active":""}" index="daily" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("fields.day_type_daily")}</mwc-button>
        <mwc-button class="day-item${"weekdays"==this.selection.daysType?" active":""}" index="weekdays" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("fields.day_type_weekdays")}</mwc-button>
        <mwc-button class="day-item${"custom"==this.selection.daysType?" active":""}" index="custom" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("fields.day_type_custom")}</mwc-button>
      </div>
      <div class="day-list${"custom"==this.selection.daysType?"":" closed"}" id="day-list-custom">
        <mwc-button class="day-item${this.selection.daysCustom.includes(1)?" active":""}" index="1" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.mon")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(2)?" active":""}" index="2" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.tue")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(3)?" active":""}" index="3" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.wed")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(4)?" active":""}" index="4" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.thu")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(5)?" active":""}" index="5" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.fri")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(6)?" active":""}" index="6" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.sat")}</mwc-button>
        <mwc-button class="day-item${this.selection.daysCustom.includes(7)?" active":""}" index="7" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${pn("days_short.sun")}</mwc-button>
      </div>
    </div>
      
    <div class="card-section">
      <div class="header">${pn("fields.time")}</div>
      <timeslot-editor
        actions=${JSON.stringify(r)}
        slots=${JSON.stringify(this.selection.plannerSlots)}
        @update=${this.handlePlannerUpdate}
      >
      </timeslot-editor>
    </div>
    <div class="card-section">
      <div class="header">${pn("fields.action")}</div>
      <div class="option-list">
        <div class="text-field">${this.getPlannerActions()}</div>
      </div>
    </div>
     ${i&&i.hasOwnProperty("variable")?this.getLevelPanel(i.variable,!0):""}

    <div class="card-section last">
      <mwc-button outlined @click="${()=>this.editItemCancel()}">${pn("actions.cancel")}</mwc-button>
      ${void 0===this.selection.editItem?"":N`<mwc-button outlined @click="${()=>this.editItemDelete()}">${pn("actions.delete")}</mwc-button>`}
      <mwc-button outlined @click="${()=>this.editItemSave()}">${pn("actions.save")}</mwc-button>
    </div>
    `:N``}handlePlannerUpdate(e){e.target;if(e.detail.hasOwnProperty("slot")){let t=Number(e.detail.slot);this.selection.activePlannerSlot=t;let r=this.selection.plannerSlots[t];void 0!==r.level?Object.assign(this.selection,{level:r.level,levelEnabled:r.levelEnabled}):Object.assign(this.selection,{level:null,levelEnabled:null})}else if(e.detail.hasOwnProperty("slots")){let t=e.detail.slots;this.selection.plannerSlots=[...t]}this.requestUpdate()}getPlannerActions(){if(null===this.selection.activePlannerSlot||void 0===this.selection.activePlannerSlot)return N`<div class="text-field">select a timeslot first</div>`;let e=this.Config.GetActionsForEntity(this.selection.entity),t=this.selection.plannerSlots[this.selection.activePlannerSlot];return e.filter(e=>e.id!=Sn.id).map(e=>N`
        <mwc-button class="${t.action==e.id?" active":""}" @click="${()=>{this.selectPlannerAction(e)}}">
          ${e.icon?N`<ha-icon icon="${Nn(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${In(e.name)}
        </mwc-button>
      `)}selectPlannerAction(e){let t=this.selection.activePlannerSlot,r=[...this.selection.plannerSlots],a=Object.assign({},r[t]);Object.assign(a,{action:a.action==e.id?null:e.id}),a.action&&e.variable&&Object.assign(this.selection,{level:void 0!==a.level?a.level:e.variable.min,levelEnabled:void 0!==a.levelEnabled?a.levelEnabled:!e.variable.optional}),r[t]=a,this.selection.plannerSlots=r,this.requestUpdate()}getLevelPanel(e,t=!1){return N`
    <div class="card-section">
      <div class="header">${e.name}</div>
      <div class="option-item">
        <variable-slider
          min=${e.min}
          max=${e.max}
          step=${e.step}
          value=${this.selection.level}      
          unit=${e.unit}
          optional=${e.optional}
          disabled=${!this.selection.levelEnabled}
          show_percentage=${e.show_percentage}
          @change="${e=>{this.updateLevel(e,t)}}"
        >
        </variable-slider>
      </div>
     </div>`}updateLevel(e,t){let r=e.target;this.selection.level=Number(r.value),this.selection.levelEnabled="false"==String(r.disabled),t&&this.requestUpdate()}updateDays(e){var t=Array("daily","weekdays","custom");t.includes(e)?this.selection.daysType=e:(this.selection.daysCustom.includes(Number(e))?li(this.selection.daysCustom,Number(e)):this.selection.daysCustom.push(Number(e)),this.selection.daysType="custom"),this.shadowRoot.querySelectorAll(".day-item").forEach(e=>{let r=String(e.getAttribute("index"));t.includes(r)?this.selection.daysType==r?e.classList.add("active"):e.classList.remove("active"):this.selection.daysCustom.includes(Number(r))?e.classList.add("active"):e.classList.remove("active")}),"custom"==this.selection.daysType?this.shadowRoot.querySelector("#day-list-custom").classList.remove("closed"):this.shadowRoot.querySelector("#day-list-custom").classList.add("closed")}updateTime(e){let t=e.target,r=Number(t.value),a=e.detail.event;this.selection.time=a?{event:a,value:r}:{value:r}}editItemSave(){let e,t;if(void 0!==this.selection.plannerSlots){let e=this.selection.plannerSlots;e=e.filter(e=>e.action),t=e.map(e=>Object.assign(Object.assign({},e),{time:{value:e.startTime},days:bn(this.selection),action:e.action,entity:this.selection.entity}))}else t=[Object.assign(Object.assign({},this.selection),{days:bn(this.selection)})];e=function(e,t){let r=[],a=[];return e.forEach(e=>{var i;let s=t.FindAction(e.entity,e.action),n={entity:e.entity,service:Cn(s.service)?s.service:`${Cn(e.entity)}.${s.service}`};if(s.hasOwnProperty("service_data")&&Object.assign(n,{service_data:s.service_data}),e.levelEnabled){let t=String(null===(i=s.variable)||void 0===i?void 0:i.field),r=Number(e.level),a=n.hasOwnProperty("service_data")?n.service_data:{};Object.assign(a,{[t]:r}),Object.assign(n,{service_data:a})}let o=a.findIndex(e=>Ka(e,n));o<0&&(o=a.push(n)-1);let l={actions:[o]};e.time.event?Object.assign(l,{event:e.time.event,offset:vn(e.time.value).time}):Object.assign(l,{time:vn(e.time.value).time}),e.days.length&&Object.assign(l,{days:e.days}),r.push(l)}),{actions:a,entries:r}}(t,this.Config),this.selection.newItem?this._hass.callService("scheduler","add",e):this.selection.editItem&&this._hass.callService("scheduler","edit",Object.assign(e,{entity_id:this.selection.editItem})),this.selection=Object.assign({},Il),this.requestUpdate()}editItemDelete(){let e=this.selection.editItem;this._hass.callService("scheduler","remove",{entity_id:e}),this.selection=Object.assign({},Il),this.requestUpdate()}},t([Z()],e.SchedulerCard.prototype,"_hass",void 0),e.SchedulerCard=t([J("scheduler-card")],e.SchedulerCard)}({});
