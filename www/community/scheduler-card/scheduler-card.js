!function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function t(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */}const r="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,a=(e,t,r=null)=>{for(;t!==r;){const r=t.nextSibling;e.removeChild(t),t=r}},s=`{{lit-${String(Math.random()).slice(2)}}}`,i=`\x3c!--${s}--\x3e`,n=new RegExp(`${s}|${i}`);class o{constructor(e,t){this.parts=[],this.element=t;const r=[],a=[],i=document.createTreeWalker(t.content,133,null,!1);let o=0,l=-1,h=0;const{strings:p,values:{length:f}}=e;for(;h<f;){const e=i.nextNode();if(null!==e){if(l++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:r}=t;let a=0;for(let e=0;e<r;e++)c(t[e].name,"$lit$")&&a++;for(;a-- >0;){const t=p[h],r=d.exec(t)[2],a=r.toLowerCase()+"$lit$",s=e.getAttribute(a);e.removeAttribute(a);const i=s.split(n);this.parts.push({type:"attribute",index:l,name:r,strings:i}),h+=i.length-1}}"TEMPLATE"===e.tagName&&(a.push(e),i.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(s)>=0){const a=e.parentNode,s=t.split(n),i=s.length-1;for(let t=0;t<i;t++){let r,i=s[t];if(""===i)r=u();else{const e=d.exec(i);null!==e&&c(e[2],"$lit$")&&(i=i.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),r=document.createTextNode(i)}a.insertBefore(r,e),this.parts.push({type:"node",index:++l})}""===s[i]?(a.insertBefore(u(),e),r.push(e)):e.data=s[i],h+=i}}else if(8===e.nodeType)if(e.data===s){const t=e.parentNode;null!==e.previousSibling&&l!==o||(l++,t.insertBefore(u(),e)),o=l,this.parts.push({type:"node",index:l}),null===e.nextSibling?e.data="":(r.push(e),l--),h++}else{let t=-1;for(;-1!==(t=e.data.indexOf(s,t+1));)this.parts.push({type:"node",index:-1}),h++}}else i.currentNode=a.pop()}for(const e of r)e.parentNode.removeChild(e)}}const c=(e,t)=>{const r=e.length-t.length;return r>=0&&e.slice(r)===t},l=e=>-1!==e.index,u=()=>document.createComment(""),d=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function h(e,t){const{element:{content:r},parts:a}=e,s=document.createTreeWalker(r,133,null,!1);let i=f(a),n=a[i],o=-1,c=0;const l=[];let u=null;for(;s.nextNode();){o++;const e=s.currentNode;for(e.previousSibling===u&&(u=null),t.has(e)&&(l.push(e),null===u&&(u=e)),null!==u&&c++;void 0!==n&&n.index===o;)n.index=null!==u?-1:n.index-c,i=f(a,i),n=a[i]}l.forEach(e=>e.parentNode.removeChild(e))}const p=e=>{let t=11===e.nodeType?0:1;const r=document.createTreeWalker(e,133,null,!1);for(;r.nextNode();)t++;return t},f=(e,t=-1)=>{for(let r=t+1;r<e.length;r++){const t=e[r];if(l(t))return r}return-1};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
const m=new WeakMap,v=e=>"function"==typeof e&&m.has(e),y={},g={};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
class _{constructor(e,t,r){this.__parts=[],this.template=e,this.processor=t,this.options=r}update(e){let t=0;for(const r of this.__parts)void 0!==r&&r.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=r?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],a=this.template.parts,s=document.createTreeWalker(e,133,null,!1);let i,n=0,o=0,c=s.nextNode();for(;n<a.length;)if(i=a[n],l(i)){for(;o<i.index;)o++,"TEMPLATE"===c.nodeName&&(t.push(c),s.currentNode=c.content),null===(c=s.nextNode())&&(s.currentNode=t.pop(),c=s.nextNode());if("node"===i.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(c.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,i.name,i.strings,this.options));n++}else this.__parts.push(void 0),n++;return r&&(document.adoptNode(e),customElements.upgrade(e)),e}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const b=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),w=` ${s} `;class P{constructor(e,t,r,a){this.strings=e,this.values=t,this.type=r,this.processor=a}getHTML(){const e=this.strings.length-1;let t="",r=!1;for(let a=0;a<e;a++){const e=this.strings[a],n=e.lastIndexOf("\x3c!--");r=(n>-1||r)&&-1===e.indexOf("--\x3e",n+1);const o=d.exec(e);t+=null===o?e+(r?w:i):e.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+s}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==b&&(t=b.createHTML(t)),e.innerHTML=t,e}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const E=e=>null===e||!("object"==typeof e||"function"==typeof e),S=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class j{constructor(e,t,r){this.dirty=!0,this.element=e,this.name=t,this.strings=r,this.parts=[];for(let e=0;e<r.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new x(this)}_getValue(){const e=this.strings,t=e.length-1,r=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=r[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!S(e))return e}let a="";for(let s=0;s<t;s++){a+=e[s];const t=r[s];if(void 0!==t){const e=t.value;if(E(e)||!S(e))a+="string"==typeof e?e:String(e);else for(const t of e)a+="string"==typeof t?t:String(t)}}return a+=e[t],a}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class x{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===y||E(e)&&e===this.value||(this.value=e,v(e)||(this.committer.dirty=!0))}commit(){for(;v(this.value);){const e=this.value;this.value=y,e(this)}this.value!==y&&this.committer.commit()}}class ${constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(u()),this.endNode=e.appendChild(u())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=u()),e.__insert(this.endNode=u())}insertAfterPart(e){e.__insert(this.startNode=u()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;v(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=y,e(this)}const e=this.__pendingValue;e!==y&&(E(e)?e!==this.value&&this.__commitText(e):e instanceof P?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):S(e)?this.__commitIterable(e):e===g?(this.value=g,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,r="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=r:this.__commitNode(document.createTextNode(r)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof _&&this.value.template===t)this.value.update(e.values);else{const r=new _(t,e.processor,this.options),a=r._clone();r.update(e.values),this.__commitNode(a),this.value=r}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let r,a=0;for(const s of e)r=t[a],void 0===r&&(r=new $(this.options),t.push(r),0===a?r.appendIntoPart(this):r.insertAfterPart(t[a-1])),r.setValue(s),r.commit(),a++;a<t.length&&(t.length=a,this.clear(r&&r.endNode))}clear(e=this.startNode){a(this.startNode.parentNode,e.nextSibling,this.endNode)}}class O{constructor(e,t,r){if(this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=r}setValue(e){this.__pendingValue=e}commit(){for(;v(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=y,e(this)}if(this.__pendingValue===y)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=y}}class A extends j{constructor(e,t,r){super(e,t,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new k(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class k extends x{}let F=!1;(()=>{try{const e={get capture(){return F=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class z{constructor(e,t,r){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=r,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;v(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=y,e(this)}if(this.__pendingValue===y)return;const e=this.__pendingValue,t=this.value,r=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),a=null!=e&&(null==t||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),a&&(this.__options=D(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=y}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const D=e=>e&&(F?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */;function C(e){let t=R.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},R.set(e.type,t));let r=t.stringsArray.get(e.strings);if(void 0!==r)return r;const a=e.strings.join(s);return r=t.keyString.get(a),void 0===r&&(r=new o(e,e.getTemplateElement()),t.keyString.set(a,r)),t.stringsArray.set(e.strings,r),r}const R=new Map,I=new WeakMap;
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const N=new
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
class{handleAttributeExpressions(e,t,r,a){const s=t[0];if("."===s){return new A(e,t.slice(1),r).parts}if("@"===s)return[new z(e,t.slice(1),a.eventContext)];if("?"===s)return[new O(e,t.slice(1),r)];return new j(e,t,r).parts}handleTextExpression(e){return new $(e)}};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const T=(e,...t)=>new P(e,t,"html",N)
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */,L=(e,t)=>`${e}--${t}`;let U=!0;void 0===window.ShadyCSS?U=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),U=!1);const q=e=>t=>{const r=L(t.type,e);let a=R.get(r);void 0===a&&(a={stringsArray:new WeakMap,keyString:new Map},R.set(r,a));let i=a.stringsArray.get(t.strings);if(void 0!==i)return i;const n=t.strings.join(s);if(i=a.keyString.get(n),void 0===i){const r=t.getTemplateElement();U&&window.ShadyCSS.prepareTemplateDom(r,e),i=new o(t,r),a.keyString.set(n,i)}return a.stringsArray.set(t.strings,i),i},V=["html","svg"],M=new Set,H=(e,t,r)=>{M.add(e);const a=r?r.element:document.createElement("template"),s=t.querySelectorAll("style"),{length:i}=s;if(0===i)return void window.ShadyCSS.prepareTemplateStyles(a,e);const n=document.createElement("style");for(let e=0;e<i;e++){const t=s[e];t.parentNode.removeChild(t),n.textContent+=t.textContent}(e=>{V.forEach(t=>{const r=R.get(L(t,e));void 0!==r&&r.keyString.forEach(e=>{const{element:{content:t}}=e,r=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{r.add(e)}),h(e,r)})})})(e);const o=a.content;r?function(e,t,r=null){const{element:{content:a},parts:s}=e;if(null==r)return void a.appendChild(t);const i=document.createTreeWalker(a,133,null,!1);let n=f(s),o=0,c=-1;for(;i.nextNode();){c++;for(i.currentNode===r&&(o=p(t),r.parentNode.insertBefore(t,r));-1!==n&&s[n].index===c;){if(o>0){for(;-1!==n;)s[n].index+=o,n=f(s,n);return}n=f(s,n)}}}(r,n,o.firstChild):o.insertBefore(n,o.firstChild),window.ShadyCSS.prepareTemplateStyles(a,e);const c=o.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==c)t.insertBefore(c.cloneNode(!0),t.firstChild);else if(r){o.insertBefore(n,o.firstChild);const e=new Set;e.add(n),h(r,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const Q={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},B=(e,t)=>t!==e&&(t==t||e==e),G={attribute:!0,type:String,converter:Q,reflect:!1,hasChanged:B};class K extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,r)=>{const a=this._attributeNameForProperty(r,t);void 0!==a&&(this._attributeToPropertyMap.set(a,r),e.push(a))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=G){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const r="symbol"==typeof e?Symbol():"__"+e,a=this.getPropertyDescriptor(e,r,t);void 0!==a&&Object.defineProperty(this.prototype,e,a)}static getPropertyDescriptor(e,t,r){return{get(){return this[t]},set(a){const s=this[e];this[t]=a,this.requestUpdateInternal(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||G}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const r of t)this.createProperty(r,e[r])}}static _attributeNameForProperty(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,r=B){return r(e,t)}static _propertyValueFromAttribute(e,t){const r=t.type,a=t.converter||Q,s="function"==typeof a?a:a.fromAttribute;return s?s(e,r):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const r=t.type,a=t.converter;return(a&&a.toAttribute||Q.toAttribute)(e,r)}initialize(){this._updateState=0,this._updatePromise=new Promise(e=>this._enableUpdatingResolver=e),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,r){t!==r&&this._attributeToProperty(e,r)}_propertyToAttribute(e,t,r=G){const a=this.constructor,s=a._attributeNameForProperty(e,r);if(void 0!==s){const e=a._propertyValueToAttribute(t,r);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(s):this.setAttribute(s,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const r=this.constructor,a=r._attributeToPropertyMap.get(e);if(void 0!==a){const e=r.getPropertyOptions(a);this._updateState=16|this._updateState,this[a]=r._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,r){let a=!0;if(void 0!==e){const s=this.constructor;r=r||s.getPropertyOptions(e),s._valueHasChanged(this[e],t,r.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==r.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,r))):a=!1}!this._hasRequestedUpdate&&a&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}K.finalized=!0;
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
const J=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:r,elements:a}=t;return{kind:r,elements:a,finisher(t){window.customElements.define(e,t)}}})(e,t),W=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(r){r.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}};function Z(e){return(t,r)=>void 0!==r?((e,t,r)=>{t.constructor.createProperty(r,e)})(e,t,r):W(e,t)}
/**
    @license
    Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
    This code may only be used under the BSD style license found at
    http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
    http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
    found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
    part of the polymer project is also subject to an additional IP rights grant
    found at http://polymer.github.io/PATENTS.txt
    */const Y=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,X=Symbol();class ee{constructor(e,t){if(t!==X)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(Y?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const te=(e,...t)=>{const r=t.reduce((t,r,a)=>t+(e=>{if(e instanceof ee)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(r)+e[a+1],e[0]);return new ee(r,X)};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const re={};class ae extends K{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,r)=>e.reduceRight((e,r)=>Array.isArray(r)?t(r,e):(e.add(r),e),r),r=t(e,new Set),a=[];r.forEach(e=>a.unshift(e)),this._styles=a}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map(e=>{if(e instanceof CSSStyleSheet&&!Y){const t=Array.prototype.slice.call(e.cssRules).reduce((e,t)=>e+t.cssText,"");return new ee(String(t),X)}return e})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Y?this.renderRoot.adoptedStyleSheets=e.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==re&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){return re}}ae.finalized=!0,ae.render=(e,t,r)=>{if(!r||"object"!=typeof r||!r.scopeName)throw new Error("The `scopeName` option is required.");const s=r.scopeName,i=I.has(t),n=U&&11===t.nodeType&&!!t.host,o=n&&!M.has(s),c=o?document.createDocumentFragment():t;if(((e,t,r)=>{let s=I.get(t);void 0===s&&(a(t,t.firstChild),I.set(t,s=new $(Object.assign({templateFactory:C},r))),s.appendInto(t)),s.setValue(e),s.commit()})(e,c,Object.assign({templateFactory:q(s)},r)),o){const e=I.get(c);I.delete(c);const r=e.value instanceof _?e.value.template:void 0;H(s,c,r),a(t,t.firstChild),t.appendChild(c),I.set(t,e)}!i&&n&&window.ShadyCSS.styleElement(t.host)};var se="object"==typeof global&&global&&global.Object===Object&&global,ie="object"==typeof self&&self&&self.Object===Object&&self,ne=se||ie||Function("return this")(),oe=ne.Symbol,ce=Object.prototype,le=ce.hasOwnProperty,ue=ce.toString,de=oe?oe.toStringTag:void 0;var he=Object.prototype.toString;var pe=oe?oe.toStringTag:void 0;function fe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":pe&&pe in Object(e)?function(e){var t=le.call(e,de),r=e[de];try{e[de]=void 0;var a=!0}catch(e){}var s=ue.call(e);return a&&(t?e[de]=r:delete e[de]),s}(e):function(e){return he.call(e)}(e)}function me(e){return null!=e&&"object"==typeof e}function ve(e){return"symbol"==typeof e||me(e)&&"[object Symbol]"==fe(e)}function ye(e,t){for(var r=-1,a=null==e?0:e.length,s=Array(a);++r<a;)s[r]=t(e[r],r,e);return s}var ge=Array.isArray,_e=oe?oe.prototype:void 0,be=_e?_e.toString:void 0;function we(e){if("string"==typeof e)return e;if(ge(e))return ye(e,we)+"";if(ve(e))return be?be.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Pe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Ee=/^\s+|\s+$/g,Se=/^[-+]0x[0-9a-f]+$/i,je=/^0b[01]+$/i,xe=/^0o[0-7]+$/i,$e=parseInt;function Oe(e){return e?(e=function(e){if("number"==typeof e)return e;if(ve(e))return NaN;if(Pe(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Pe(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ee,"");var r=je.test(e);return r||xe.test(e)?$e(e.slice(2),r?2:8):Se.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Ae(e){return e}function ke(e){if(!Pe(e))return!1;var t=fe(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Fe,ze=ne["__core-js_shared__"],De=(Fe=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||""))?"Symbol(src)_1."+Fe:"";var Ce=Function.prototype.toString;function Re(e){if(null!=e){try{return Ce.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Ie=/^\[object .+?Constructor\]$/,Ne=Function.prototype,Te=Object.prototype,Le=Ne.toString,Ue=Te.hasOwnProperty,qe=RegExp("^"+Le.call(Ue).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ve(e){return!(!Pe(e)||(t=e,De&&De in t))&&(ke(e)?qe:Ie).test(Re(e));var t}function Me(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ve(r)?r:void 0}var He=Me(ne,"WeakMap"),Qe=Object.create,Be=function(){function e(){}return function(t){if(!Pe(t))return{};if(Qe)return Qe(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Ge(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Ke(e,t){var r=-1,a=e.length;for(t||(t=Array(a));++r<a;)t[r]=e[r];return t}var Je=Date.now;var We,Ze,Ye,Xe=function(){try{var e=Me(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),et=(We=Xe?function(e,t){return Xe(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Ae,Ze=0,Ye=0,function(){var e=Je(),t=16-(e-Ye);if(Ye=e,t>0){if(++Ze>=800)return arguments[0]}else Ze=0;return We.apply(void 0,arguments)});function tt(e,t){for(var r=-1,a=null==e?0:e.length;++r<a&&!1!==t(e[r],r,e););return e}function rt(e,t,r,a){for(var s=e.length,i=r+(a?1:-1);a?i--:++i<s;)if(t(e[i],i,e))return i;return-1}function at(e){return e!=e}function st(e,t,r){return t==t?function(e,t,r){for(var a=r-1,s=e.length;++a<s;)if(e[a]===t)return a;return-1}(e,t,r):rt(e,at,r)}var it=/^(?:0|[1-9]\d*)$/;function nt(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&it.test(e))&&e>-1&&e%1==0&&e<t}function ot(e,t,r){"__proto__"==t&&Xe?Xe(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ct(e,t){return e===t||e!=e&&t!=t}var lt=Object.prototype.hasOwnProperty;function ut(e,t,r){var a=e[t];lt.call(e,t)&&ct(a,r)&&(void 0!==r||t in e)||ot(e,t,r)}function dt(e,t,r,a){var s=!r;r||(r={});for(var i=-1,n=t.length;++i<n;){var o=t[i],c=a?a(r[o],e[o],o,r,e):void 0;void 0===c&&(c=e[o]),s?ot(r,o,c):ut(r,o,c)}return r}var ht=Math.max;function pt(e,t,r){return t=ht(void 0===t?e.length-1:t,0),function(){for(var a=arguments,s=-1,i=ht(a.length-t,0),n=Array(i);++s<i;)n[s]=a[t+s];s=-1;for(var o=Array(t+1);++s<t;)o[s]=a[s];return o[t]=r(n),Ge(e,this,o)}}function ft(e,t){return et(pt(e,t,Ae),e+"")}function mt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function vt(e){return null!=e&&mt(e.length)&&!ke(e)}function yt(e,t,r){if(!Pe(r))return!1;var a=typeof t;return!!("number"==a?vt(r)&&nt(t,r.length):"string"==a&&t in r)&&ct(r[t],e)}var gt=Object.prototype;function _t(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||gt)}function bt(e){return me(e)&&"[object Arguments]"==fe(e)}var wt=Object.prototype,Pt=wt.hasOwnProperty,Et=wt.propertyIsEnumerable,St=bt(function(){return arguments}())?bt:function(e){return me(e)&&Pt.call(e,"callee")&&!Et.call(e,"callee")};var jt="object"==typeof e&&e&&!e.nodeType&&e,xt=jt&&"object"==typeof module&&module&&!module.nodeType&&module,$t=xt&&xt.exports===jt?ne.Buffer:void 0,Ot=($t?$t.isBuffer:void 0)||function(){return!1},At={};function kt(e){return function(t){return e(t)}}At["[object Float32Array]"]=At["[object Float64Array]"]=At["[object Int8Array]"]=At["[object Int16Array]"]=At["[object Int32Array]"]=At["[object Uint8Array]"]=At["[object Uint8ClampedArray]"]=At["[object Uint16Array]"]=At["[object Uint32Array]"]=!0,At["[object Arguments]"]=At["[object Array]"]=At["[object ArrayBuffer]"]=At["[object Boolean]"]=At["[object DataView]"]=At["[object Date]"]=At["[object Error]"]=At["[object Function]"]=At["[object Map]"]=At["[object Number]"]=At["[object Object]"]=At["[object RegExp]"]=At["[object Set]"]=At["[object String]"]=At["[object WeakMap]"]=!1;var Ft="object"==typeof e&&e&&!e.nodeType&&e,zt=Ft&&"object"==typeof module&&module&&!module.nodeType&&module,Dt=zt&&zt.exports===Ft&&se.process,Ct=function(){try{var e=zt&&zt.require&&zt.require("util").types;return e||Dt&&Dt.binding&&Dt.binding("util")}catch(e){}}(),Rt=Ct&&Ct.isTypedArray,It=Rt?kt(Rt):function(e){return me(e)&&mt(e.length)&&!!At[fe(e)]},Nt=Object.prototype.hasOwnProperty;function Tt(e,t){var r=ge(e),a=!r&&St(e),s=!r&&!a&&Ot(e),i=!r&&!a&&!s&&It(e),n=r||a||s||i,o=n?function(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}(e.length,String):[],c=o.length;for(var l in e)!t&&!Nt.call(e,l)||n&&("length"==l||s&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||nt(l,c))||o.push(l);return o}function Lt(e,t){return function(r){return e(t(r))}}var Ut=Lt(Object.keys,Object),qt=Object.prototype.hasOwnProperty;function Vt(e){if(!_t(e))return Ut(e);var t=[];for(var r in Object(e))qt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Mt(e){return vt(e)?Tt(e):Vt(e)}var Ht=Object.prototype.hasOwnProperty;function Qt(e){if(!Pe(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=_t(e),r=[];for(var a in e)("constructor"!=a||!t&&Ht.call(e,a))&&r.push(a);return r}function Bt(e){return vt(e)?Tt(e,!0):Qt(e)}var Gt,Kt=(Gt=function(e,t){dt(t,Bt(t),e)},ft((function(e,t){var r=-1,a=t.length,s=a>1?t[a-1]:void 0,i=a>2?t[2]:void 0;for(s=Gt.length>3&&"function"==typeof s?(a--,s):void 0,i&&yt(t[0],t[1],i)&&(s=a<3?void 0:s,a=1),e=Object(e);++r<a;){var n=t[r];n&&Gt(e,n,r,s)}return e}))),Jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wt=/^\w*$/;function Zt(e,t){if(ge(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ve(e))||(Wt.test(e)||!Jt.test(e)||null!=t&&e in Object(t))}var Yt=Me(Object,"create");var Xt=Object.prototype.hasOwnProperty;var er=Object.prototype.hasOwnProperty;function tr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function rr(e,t){for(var r=e.length;r--;)if(ct(e[r][0],t))return r;return-1}tr.prototype.clear=function(){this.__data__=Yt?Yt(null):{},this.size=0},tr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},tr.prototype.get=function(e){var t=this.__data__;if(Yt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Xt.call(t,e)?t[e]:void 0},tr.prototype.has=function(e){var t=this.__data__;return Yt?void 0!==t[e]:er.call(t,e)},tr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Yt&&void 0===t?"__lodash_hash_undefined__":t,this};var ar=Array.prototype.splice;function sr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}sr.prototype.clear=function(){this.__data__=[],this.size=0},sr.prototype.delete=function(e){var t=this.__data__,r=rr(t,e);return!(r<0)&&(r==t.length-1?t.pop():ar.call(t,r,1),--this.size,!0)},sr.prototype.get=function(e){var t=this.__data__,r=rr(t,e);return r<0?void 0:t[r][1]},sr.prototype.has=function(e){return rr(this.__data__,e)>-1},sr.prototype.set=function(e,t){var r=this.__data__,a=rr(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this};var ir=Me(ne,"Map");function nr(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function or(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}or.prototype.clear=function(){this.size=0,this.__data__={hash:new tr,map:new(ir||sr),string:new tr}},or.prototype.delete=function(e){var t=nr(this,e).delete(e);return this.size-=t?1:0,t},or.prototype.get=function(e){return nr(this,e).get(e)},or.prototype.has=function(e){return nr(this,e).has(e)},or.prototype.set=function(e,t){var r=nr(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this};function cr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var a=arguments,s=t?t.apply(this,a):a[0],i=r.cache;if(i.has(s))return i.get(s);var n=e.apply(this,a);return r.cache=i.set(s,n)||i,n};return r.cache=new(cr.Cache||or),r}cr.Cache=or;var lr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ur=/\\(\\)?/g,dr=function(e){var t=cr(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(lr,(function(e,r,a,s){t.push(a?s.replace(ur,"$1"):r||e)})),t}));function hr(e,t){return ge(e)?e:Zt(e,t)?[e]:dr(function(e){return null==e?"":we(e)}(e))}function pr(e){if("string"==typeof e||ve(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fr(e,t){for(var r=0,a=(t=hr(t,e)).length;null!=e&&r<a;)e=e[pr(t[r++])];return r&&r==a?e:void 0}function mr(e,t){for(var r=-1,a=t.length,s=e.length;++r<a;)e[s+r]=t[r];return e}var vr=oe?oe.isConcatSpreadable:void 0;function yr(e){return ge(e)||St(e)||!!(vr&&e&&e[vr])}function gr(e,t,r,a,s){var i=-1,n=e.length;for(r||(r=yr),s||(s=[]);++i<n;){var o=e[i];t>0&&r(o)?t>1?gr(o,t-1,r,a,s):mr(s,o):a||(s[s.length]=o)}return s}function _r(e){return(null==e?0:e.length)?gr(e,1):[]}function br(e){return et(pt(e,void 0,_r),e+"")}var wr=Lt(Object.getPrototypeOf,Object),Pr=Function.prototype,Er=Object.prototype,Sr=Pr.toString,jr=Er.hasOwnProperty,xr=Sr.call(Object);function $r(e){var t=this.__data__=new sr(e);this.size=t.size}$r.prototype.clear=function(){this.__data__=new sr,this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},$r.prototype.get=function(e){return this.__data__.get(e)},$r.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.set=function(e,t){var r=this.__data__;if(r instanceof sr){var a=r.__data__;if(!ir||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new or(a)}return r.set(e,t),this.size=r.size,this};var Or="object"==typeof e&&e&&!e.nodeType&&e,Ar=Or&&"object"==typeof module&&module&&!module.nodeType&&module,kr=Ar&&Ar.exports===Or?ne.Buffer:void 0,Fr=kr?kr.allocUnsafe:void 0;function zr(e,t){for(var r=-1,a=null==e?0:e.length,s=0,i=[];++r<a;){var n=e[r];t(n,r,e)&&(i[s++]=n)}return i}function Dr(){return[]}var Cr=Object.prototype.propertyIsEnumerable,Rr=Object.getOwnPropertySymbols,Ir=Rr?function(e){return null==e?[]:(e=Object(e),zr(Rr(e),(function(t){return Cr.call(e,t)})))}:Dr;var Nr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)mr(t,Ir(e)),e=wr(e);return t}:Dr;function Tr(e,t,r){var a=t(e);return ge(e)?a:mr(a,r(e))}function Lr(e){return Tr(e,Mt,Ir)}function Ur(e){return Tr(e,Bt,Nr)}var qr=Me(ne,"DataView"),Vr=Me(ne,"Promise"),Mr=Me(ne,"Set"),Hr=Re(qr),Qr=Re(ir),Br=Re(Vr),Gr=Re(Mr),Kr=Re(He),Jr=fe;(qr&&"[object DataView]"!=Jr(new qr(new ArrayBuffer(1)))||ir&&"[object Map]"!=Jr(new ir)||Vr&&"[object Promise]"!=Jr(Vr.resolve())||Mr&&"[object Set]"!=Jr(new Mr)||He&&"[object WeakMap]"!=Jr(new He))&&(Jr=function(e){var t=fe(e),r="[object Object]"==t?e.constructor:void 0,a=r?Re(r):"";if(a)switch(a){case Hr:return"[object DataView]";case Qr:return"[object Map]";case Br:return"[object Promise]";case Gr:return"[object Set]";case Kr:return"[object WeakMap]"}return t});var Wr=Jr,Zr=Object.prototype.hasOwnProperty;var Yr=ne.Uint8Array;function Xr(e){var t=new e.constructor(e.byteLength);return new Yr(t).set(new Yr(e)),t}var ea=/\w*$/;var ta=oe?oe.prototype:void 0,ra=ta?ta.valueOf:void 0;function aa(e,t,r){var a,s,i,n=e.constructor;switch(t){case"[object ArrayBuffer]":return Xr(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return function(e,t){var r=t?Xr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?Xr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return(i=new(s=e).constructor(s.source,ea.exec(s))).lastIndex=s.lastIndex,i;case"[object Set]":return new n;case"[object Symbol]":return a=e,ra?Object(ra.call(a)):{}}}var sa=Ct&&Ct.isMap,ia=sa?kt(sa):function(e){return me(e)&&"[object Map]"==Wr(e)};var na=Ct&&Ct.isSet,oa=na?kt(na):function(e){return me(e)&&"[object Set]"==Wr(e)},ca={};function la(e,t,r,a,s,i){var n,o=1&t,c=2&t,l=4&t;if(r&&(n=s?r(e,a,s,i):r(e)),void 0!==n)return n;if(!Pe(e))return e;var u=ge(e);if(u){if(n=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Zr.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!o)return Ke(e,n)}else{var d=Wr(e),h="[object Function]"==d||"[object GeneratorFunction]"==d;if(Ot(e))return function(e,t){if(t)return e.slice();var r=e.length,a=Fr?Fr(r):new e.constructor(r);return e.copy(a),a}(e,o);if("[object Object]"==d||"[object Arguments]"==d||h&&!s){if(n=c||h?{}:function(e){return"function"!=typeof e.constructor||_t(e)?{}:Be(wr(e))}(e),!o)return c?function(e,t){return dt(e,Nr(e),t)}(e,function(e,t){return e&&dt(t,Bt(t),e)}(n,e)):function(e,t){return dt(e,Ir(e),t)}(e,function(e,t){return e&&dt(t,Mt(t),e)}(n,e))}else{if(!ca[d])return s?e:{};n=aa(e,d,o)}}i||(i=new $r);var p=i.get(e);if(p)return p;i.set(e,n),oa(e)?e.forEach((function(a){n.add(la(a,t,r,a,e,i))})):ia(e)&&e.forEach((function(a,s){n.set(s,la(a,t,r,s,e,i))}));var f=l?c?Ur:Lr:c?keysIn:Mt,m=u?void 0:f(e);return tt(m||e,(function(a,s){m&&(a=e[s=a]),ut(n,s,la(a,t,r,s,e,i))})),n}ca["[object Arguments]"]=ca["[object Array]"]=ca["[object ArrayBuffer]"]=ca["[object DataView]"]=ca["[object Boolean]"]=ca["[object Date]"]=ca["[object Float32Array]"]=ca["[object Float64Array]"]=ca["[object Int8Array]"]=ca["[object Int16Array]"]=ca["[object Int32Array]"]=ca["[object Map]"]=ca["[object Number]"]=ca["[object Object]"]=ca["[object RegExp]"]=ca["[object Set]"]=ca["[object String]"]=ca["[object Symbol]"]=ca["[object Uint8Array]"]=ca["[object Uint8ClampedArray]"]=ca["[object Uint16Array]"]=ca["[object Uint32Array]"]=!0,ca["[object Error]"]=ca["[object Function]"]=ca["[object WeakMap]"]=!1;function ua(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new or;++t<r;)this.add(e[t])}function da(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}function ha(e,t){return e.has(t)}ua.prototype.add=ua.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ua.prototype.has=function(e){return this.__data__.has(e)};function pa(e,t,r,a,s,i){var n=1&r,o=e.length,c=t.length;if(o!=c&&!(n&&c>o))return!1;var l=i.get(e);if(l&&i.get(t))return l==t;var u=-1,d=!0,h=2&r?new ua:void 0;for(i.set(e,t),i.set(t,e);++u<o;){var p=e[u],f=t[u];if(a)var m=n?a(f,p,u,t,e,i):a(p,f,u,e,t,i);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!da(t,(function(e,t){if(!ha(h,t)&&(p===e||s(p,e,r,a,i)))return h.push(t)}))){d=!1;break}}else if(p!==f&&!s(p,f,r,a,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function fa(e){var t=-1,r=Array(e.size);return e.forEach((function(e,a){r[++t]=[a,e]})),r}function ma(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var va=oe?oe.prototype:void 0,ya=va?va.valueOf:void 0;var ga=Object.prototype.hasOwnProperty;var _a=Object.prototype.hasOwnProperty;function ba(e,t,r,a,s,i){var n=ge(e),o=ge(t),c=n?"[object Array]":Wr(e),l=o?"[object Array]":Wr(t),u="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),d="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),h=c==l;if(h&&Ot(e)){if(!Ot(t))return!1;n=!0,u=!1}if(h&&!u)return i||(i=new $r),n||It(e)?pa(e,t,r,a,s,i):function(e,t,r,a,s,i,n){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Yr(e),new Yr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ct(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=fa;case"[object Set]":var c=1&a;if(o||(o=ma),e.size!=t.size&&!c)return!1;var l=n.get(e);if(l)return l==t;a|=2,n.set(e,t);var u=pa(o(e),o(t),a,s,i,n);return n.delete(e),u;case"[object Symbol]":if(ya)return ya.call(e)==ya.call(t)}return!1}(e,t,c,r,a,s,i);if(!(1&r)){var p=u&&_a.call(e,"__wrapped__"),f=d&&_a.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,v=f?t.value():t;return i||(i=new $r),s(m,v,r,a,i)}}return!!h&&(i||(i=new $r),function(e,t,r,a,s,i){var n=1&r,o=Lr(e),c=o.length;if(c!=Lr(t).length&&!n)return!1;for(var l=c;l--;){var u=o[l];if(!(n?u in t:ga.call(t,u)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var h=!0;i.set(e,t),i.set(t,e);for(var p=n;++l<c;){var f=e[u=o[l]],m=t[u];if(a)var v=n?a(m,f,u,t,e,i):a(f,m,u,e,t,i);if(!(void 0===v?f===m||s(f,m,r,a,i):v)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var y=e.constructor,g=t.constructor;y==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,a,s,i))}function wa(e,t,r,a,s){return e===t||(null==e||null==t||!me(e)&&!me(t)?e!=e&&t!=t:ba(e,t,r,a,wa,s))}function Pa(e){return e==e&&!Pe(e)}function Ea(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function Sa(e){var t=function(e){for(var t=Mt(e),r=t.length;r--;){var a=t[r],s=e[a];t[r]=[a,s,Pa(s)]}return t}(e);return 1==t.length&&t[0][2]?Ea(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,a){var s=r.length,i=s,n=!a;if(null==e)return!i;for(e=Object(e);s--;){var o=r[s];if(n&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++s<i;){var c=(o=r[s])[0],l=e[c],u=o[1];if(n&&o[2]){if(void 0===l&&!(c in e))return!1}else{var d=new $r;if(a)var h=a(l,u,c,e,t,d);if(!(void 0===h?wa(u,l,3,a,d):h))return!1}}return!0}(r,e,t)}}function ja(e,t){return null!=e&&t in Object(e)}function xa(e,t,r){for(var a=-1,s=(t=hr(t,e)).length,i=!1;++a<s;){var n=pr(t[a]);if(!(i=null!=e&&r(e,n)))break;e=e[n]}return i||++a!=s?i:!!(s=null==e?0:e.length)&&mt(s)&&nt(n,s)&&(ge(e)||St(e))}function $a(e,t){return null!=e&&xa(e,t,ja)}function Oa(e,t){return Zt(e)&&Pa(t)?Ea(pr(e),t):function(r){var a=function(e,t,r){var a=null==e?void 0:fr(e,t);return void 0===a?r:a}(r,e);return void 0===a&&a===t?$a(r,e):wa(t,a,3)}}function Aa(e){return Zt(e)?(t=pr(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return fr(t,e)}}(e);var t}function ka(e){return"function"==typeof e?e:null==e?Ae:"object"==typeof e?ge(e)?Oa(e[0],e[1]):Sa(e):Aa(e)}var Fa,za=function(e,t,r){for(var a=-1,s=Object(e),i=r(e),n=i.length;n--;){var o=i[Fa?n:++a];if(!1===t(s[o],o,s))break}return e};function Da(e,t){return e&&za(e,t,Mt)}var Ca=function(e,t){return function(r,a){if(null==r)return r;if(!vt(r))return e(r,a);for(var s=r.length,i=t?s:-1,n=Object(r);(t?i--:++i<s)&&!1!==a(n[i],i,n););return r}}(Da);function Ra(e,t){var r;return(ge(e)?tt:Ca)(e,"function"==typeof(r=t)?r:Ae)}function Ia(e,t){var r=[];return Ca(e,(function(e,a,s){t(e,a,s)&&r.push(e)})),r}function Na(e,t){return(ge(e)?zr:Ia)(e,ka(t))}var Ta=Math.max;var La,Ua=(La=function(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var s,i,n=null==r?0:(s=Oe(r),i=s%1,s==s?i?s-i:s:0);return n<0&&(n=Ta(a+n,0)),rt(e,ka(t),n)},function(e,t,r){var a=Object(e);if(!vt(e)){var s=ka(t);e=Mt(e),t=function(e){return s(a[e],e,a)}}var i=La(e,t,r);return i>-1?a[s?e[i]:i]:void 0});function qa(e,t){var r=-1,a=vt(e)?Array(e.length):[];return Ca(e,(function(e,s,i){a[++r]=t(e,s,i)})),a}var Va=Object.prototype.hasOwnProperty;function Ma(e,t){return null!=e&&Va.call(e,t)}function Ha(e,t){return null!=e&&xa(e,t,Ma)}function Qa(e){return null==e?[]:function(e,t){return ye(t,(function(t){return e[t]}))}(e,Mt(e))}function Ba(e,t){return t.length<2?e:fr(e,function(e,t,r){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++a<s;)i[a]=e[a+t];return i}(t,0,-1))}var Ga=Object.prototype.hasOwnProperty;function Ka(e){return void 0===e}function Ja(e,t){var r={};return t=ka(t),Da(e,(function(e,a,s){ot(r,a,t(e,a,s))})),r}function Wa(e,t){return null==(e=Ba(e,t=hr(t,e)))||delete e[pr((r=t,a=null==r?0:r.length,a?r[a-1]:void 0))];var r,a}function Za(e){return function(e){if(!me(e)||"[object Object]"!=fe(e))return!1;var t=wr(e);if(null===t)return!0;var r=jr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Sr.call(r)==xr}(e)?void 0:e}var Ya=br((function(e,t){var r={};if(null==e)return r;var a=!1;t=ye(t,(function(t){return t=hr(t,e),a||(a=t.length>1),t})),dt(e,Ur(e),r),a&&(r=la(r,7,Za));for(var s=t.length;s--;)Wa(r,t[s]);return r}));function Xa(e,t,r,a){if(!Pe(e))return e;for(var s=-1,i=(t=hr(t,e)).length,n=i-1,o=e;null!=o&&++s<i;){var c=pr(t[s]),l=r;if(s!=n){var u=o[c];void 0===(l=a?a(u,c,o):void 0)&&(l=Pe(u)?u:nt(t[s+1])?[]:{})}ut(o,c,l),o=o[c]}return e}function es(e,t,r){for(var a=-1,s=t.length,i={};++a<s;){var n=t[a],o=fr(e,n);r(o,n)&&Xa(i,hr(n,e),o)}return i}function ts(e,t){return function(e,t){if(null==e)return{};var r=ye(Ur(e),(function(e){return[e]}));return t=ka(t),es(e,r,(function(e,r){return t(e,r[0])}))}(e,function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}(ka(t)))}function rs(e,t){if(e!==t){var r=void 0!==e,a=null===e,s=e==e,i=ve(e),n=void 0!==t,o=null===t,c=t==t,l=ve(t);if(!o&&!l&&!i&&e>t||i&&n&&c&&!o&&!l||a&&n&&c||!r&&c||!s)return 1;if(!a&&!i&&!l&&e<t||l&&r&&s&&!a&&!i||o&&r&&s||!n&&s||!c)return-1}return 0}function as(e,t,r){var a=-1;return t=ye(t.length?t:[Ae],kt(ka)),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(qa(e,(function(e,r,s){return{criteria:ye(t,(function(t){return t(e)})),index:++a,value:e}})),(function(e,t){return function(e,t,r){for(var a=-1,s=e.criteria,i=t.criteria,n=s.length,o=r.length;++a<n;){var c=rs(s[a],i[a]);if(c)return a>=o?c:c*("desc"==r[a]?-1:1)}return e.index-t.index}(e,t,r)}))}var ss=br((function(e,t){return null==e?{}:function(e,t){return es(e,t,(function(t,r){return $a(e,r)}))}(e,t)}));function is(e,t,r,a){for(var s=r-1,i=e.length;++s<i;)if(a(e[s],t))return s;return-1}var ns=Array.prototype.splice;var os=ft((function(e,t){return e&&e.length&&t&&t.length?function(e,t,r,a){var s=a?is:st,i=-1,n=t.length,o=e;for(e===t&&(t=Ke(t)),r&&(o=ye(e,kt(r)));++i<n;)for(var c=0,l=t[i],u=r?r(l):l;(c=s(o,u,c,a))>-1;)o!==e&&ns.call(o,c,1),ns.call(e,c,1);return e}(e,t):e})),cs=ft((function(e,t){if(null==e)return[];var r=t.length;return r>1&&yt(e,t[0],t[1])?t=[]:r>2&&yt(t[0],t[1],t[2])&&(t=[t[0]]),as(e,gr(t,1),[])})),ls={add:"hinzufgen",cancel:"abbrechen",next:"weiter",save:"speichern",delete:"lschen"},us={no_group_selected:"Whle zuerst eine Gruppe aus",no_entity_selected:"Whle zuerst eine Entity aus",no_groups_defined:"Es gibt keine Gruppe",no_entities_for_group:"Es gibt keine Entities in dieser Gruppe",no_actions_for_entity:"Es gibt keine Aktionen fr diese Entity",no_entries_defined:"Es gibt keine Eintrge"},ds={group:"Gruppe",entity:"Entity",action:"Aktion",days:"Tage",time:"Zeit",options:"Optionen",day_type_daily:"jeden Tag",day_type_weekdays:"Werktags",day_type_custom:"benutzerdefiniert",shift_with_sun:"Zeit automatisch an Sonnenauf- bzw. Sonnenuntergang anpassen",brightness:"Helligkeit",temperature:"Temperatur",position:"Position"},hs={mon:"Mo",tue:"Di",wed:"Mi",thu:"Do",fri:"Fr",sat:"Sa",sun:"So"},ps={mon:"Montag",tue:"Dienstag",wed:"Mittwoch",thu:"Donnerstag",fri:"Freitag",sat:"Samstag",sun:"Sonntag"},fs={on:"An",every:"jeden",and:"und",at:"um",before:"vor",after:"nach",sunrise:"Sonnenaufgang",sunset:"Sonnenuntergang"},ms={turn_on:"anschalten",turn_off:"ausschalten",close_cover:"schlieen",open_cover:"ffnen",set_temperature:"Temperatur einstellen",set_to:"setzen auf",set_position:"Position setzen"},vs={climate:"Heizung",cover:"Beschattung",fan:"Lfter",light:"Licht",switch:"Schalter",vacuum:"Staubsauger"},ys={scheduler:"Zeitplaner",actions:ls,instructions:us,fields:ds,days_short:hs,days_long:ps,words:fs,services:ms,domains:vs},gs=Object.freeze({__proto__:null,scheduler:"Zeitplaner",actions:ls,instructions:us,fields:ds,days_short:hs,days_long:ps,words:fs,services:ms,domains:vs,default:ys}),_s={add:"add item",cancel:"cancel",next:"next",save:"save",delete:"delete"},bs={no_group_selected:"Select a group first",no_entity_selected:"Select an entity first",no_groups_defined:"There are no groups defined",no_entities_for_group:"There are no entities in this group",no_actions_for_entity:"There are no actions for this entity",no_entries_defined:"There are no items to show"},ws={group:"Group",entity:"Entity",action:"Action",days:"Days",time:"Time",options:"Options",day_type_daily:"every day",day_type_weekdays:"weekdays",day_type_custom:"custom",shift_with_sun:"automatically adjust time to sunrise/sunset",brightness:"Brightness",temperature:"Temperature",position:"Position"},Ps={mon:"mon",tue:"tue",wed:"wed",thu:"thu",fri:"fri",sat:"sat",sun:"sun"},Es={mon:"monday",tue:"tuesday",wed:"wednesday",thu:"thursday",fri:"friday",sat:"saturday",sun:"sunday"},Ss={on:"on",every:"every",and:"and",at:"at",before:"before",after:"after",sunrise:"sunrise",sunset:"sunset"},js={turn_on:"turn on",turn_off:"turn off",close_cover:"close",open_cover:"open",set_temperature:"set temperature",set_to:"set to",set_position:"set position"},xs={climate:"climate",cover:"covers",fan:"fans",light:"lights",switch:"switches",vacuum:"vacuum"},$s={scheduler:"Scheduler",actions:_s,instructions:bs,fields:ws,days_short:Ps,days_long:Es,words:Ss,services:js,domains:xs},Os=Object.freeze({__proto__:null,scheduler:"Scheduler",actions:_s,instructions:bs,fields:ws,days_short:Ps,days_long:Es,words:Ss,services:js,domains:xs,default:$s}),As={add:"Agregar",cancel:"cancelar",next:"siguiente",save:"guardar",delete:"borrar"},ks={no_group_selected:"Selecciona un grupo primero",no_entity_selected:"Selecciona una entidad primero",no_groups_defined:"No hay grupos definidos",no_entities_for_group:"No hay entidades en este grupo",no_actions_for_entity:"No hay acciones para esta entidad",no_entries_defined:"No hay dispositivos definidos"},Fs={group:"Grupo",entity:"Entidad",action:"Accin",days:"Das",time:"Hora",options:"Opciones",day_type_daily:"cada da",day_type_weekdays:"dias semanales",day_type_custom:"personalizado",shift_with_sun:"ajusta automaticamente la hora al amanecer/atardecer",brightness:"Brillo",temperature:"Temperatura",position:"Posicin"},zs={mon:"lun",tue:"mar",wed:"mie",thu:"jue",fri:"vie",sat:"sab",sun:"dom"},Ds={mon:"lunes",tue:"martes",wed:"mircoles",thu:"jueves",fri:"viernes",sat:"sbado",sun:"domingo"},Cs={on:"el",every:"cada",and:"y",at:"a las",before:"antes",after:"despus",sunrise:"amanecer",sunset:"atardecer"},Rs={turn_on:"encender",turn_off:"apagar",close_cover:"cerrar",open_cover:"abrir",set_temperature:"establecer temperatura",set_to:"establecer a",set_position:"posicin de ajuste"},Is={climate:"climatizacin",cover:"persiana",fan:"ventilador",light:"luces",switch:"interruptores",vacuum:"aspirador"},Ns={scheduler:"Programador",actions:As,instructions:ks,fields:Fs,days_short:zs,days_long:Ds,words:Cs,services:Rs,domains:Is},Ts=Object.freeze({__proto__:null,scheduler:"Programador",actions:As,instructions:ks,fields:Fs,days_short:zs,days_long:Ds,words:Cs,services:Rs,domains:Is,default:Ns}),Ls={add:"ajouter un item",cancel:"annuler",next:"suivant",save:"sauvegarder",delete:"effacer"},Us={no_group_selected:"Slectionner un groupe en premier",no_entity_selected:"Slectionner une entit en premier",no_groups_defined:"Il n'y a pas de groupe dfini",no_entities_for_group:"Il n'y a pas d'entit dans ce groupe",no_actions_for_entity:"Il n'y a pas d'action pour cette entit",no_entries_defined:"Il n'y a pas d'item  afficher"},qs={group:"Groupe",entity:"Entit",action:"Action",days:"Jours",time:"Temps",options:"Options",day_type_daily:"chaque jour",day_type_weekdays:"en semaine",day_type_custom:"sur mesure",shift_with_sun:"ajuster automatiquement l'heure au lever/coucher du soleil",brightness:"Luminosit",temperature:"Temprature",position:"Position"},Vs={mon:"lun",tue:"mar",wed:"mer",thu:"jeu",fri:"ven",sat:"sam",sun:"dim"},Ms={mon:"lundi",tue:"mardi",wed:"mercredi",thu:"jeudi",fri:"vendredi",sat:"samedi",sun:"dimanche"},Hs={on:"marche",every:"tout",and:"et",at:"",before:"avant",after:"aprs",sunrise:"lever du soleil",sunset:"coucher du soleil"},Qs={turn_on:"allumer",turn_off:"teindre",close_cover:"fermer",open_cover:"ouvrir",set_temperature:"rgler la temprature",set_to:"dfini ",set_position:"position dfinie"},Bs={climate:"climat",cover:"contrleur",fan:"ventilateur",light:"lumire",switch:"interrupteurs",vacuum:"aspirateur"},Gs={scheduler:"Planificateur",actions:Ls,instructions:Us,fields:qs,days_short:Vs,days_long:Ms,words:Hs,services:Qs,domains:Bs},Ks=Object.freeze({__proto__:null,scheduler:"Planificateur",actions:Ls,instructions:Us,fields:qs,days_short:Vs,days_long:Ms,words:Hs,services:Qs,domains:Bs,default:Gs}),Js={add:"j idzts",cancel:"mgse",next:"tovbb",save:"trls",delete:"delete"},Ws={no_group_selected:"Elbb egy csoportot szksges vlasztani",no_entity_selected:"Elbb egy entitst szksges vlasztani",no_groups_defined:"Nincsenek deffinilt csoportok",no_entities_for_group:"Ebben a csoportban nem tallhatk entitsok",no_actions_for_entity:"Ehhez az entitshoz nem tartoznak mveletek",no_entries_defined:"Nincs megjelenthet elem"},Zs={group:"Csoport",entity:"Entits",action:"Mvelet",days:"Napokon",time:"Idpontban",options:"Opcik",day_type_daily:"minden nap",day_type_weekdays:"munkanapokon",day_type_custom:"egyedi",shift_with_sun:"Az id automatikus igaztsa napkelthez/naplementhez",brightness:"Fnyer",temperature:"Hmrsklet",position:"Pozcit"},Ys={mon:"ht",tue:"ked",wed:"sze",thu:"cs",fri:"pn",sat:"szo",sun:"vas"},Xs={mon:"htf",tue:"kedd",wed:"szerda",thu:"cstrtk",fri:"pntek",sat:"szombat",sun:"vasrnap"},ei={on:"on",every:"minden",and:"s",at:"at",before:"eltt",after:"utn",sunrise:"napkelte",sunset:"naplemente"},ti={turn_on:"bekapcsols",turn_off:"kikapcsols",close_cover:"zrs",open_cover:"nyits",set_temperature:"hmrsklet",set_to:"belltva",set_position:"vltoztass pozcit"},ri={climate:"termosztt",cover:"redny",fan:"ventiltor",light:"lmpa",switch:"kapcsol",vacuum:"prszv"},ai={scheduler:"Idztsek",actions:Js,instructions:Ws,fields:Zs,days_short:Ys,days_long:Xs,words:ei,services:ti,domains:ri},si=Object.freeze({__proto__:null,scheduler:"Idztsek",actions:Js,instructions:Ws,fields:Zs,days_short:Ys,days_long:Xs,words:ei,services:ti,domains:ri,default:ai}),ii={add:"Nieuw item",cancel:"annuleren",next:"verder",save:"opslaan",delete:"verwijder"},ni={no_group_selected:"Selecteer eerst een groep",no_entity_selected:"Selecteer eerst een entiteit",no_groups_defined:"Er zijn geen groepen gedefinieerd",no_entities_for_group:"Deze groep heeft geen entiteiten",no_actions_for_entity:"Deze entiteit heeft geen acties",no_entries_defined:"Er zijn geen items aangemaakt"},oi={group:"Groep",entity:"Entiteit",action:"Actie",days:"Dagen",time:"Tijdstip",options:"Opties",day_type_daily:"Dagelijks",day_type_weekdays:"werkdagen",day_type_custom:"Anders",shift_with_sun:"Automatisch aanpassen aan zonsopgang/zonsondergang",brightness:"Helderheid",temperature:"Temperatuur",position:"Positie"},ci={mon:"ma",tue:"di",wed:"wo",thu:"do",fri:"vr",sat:"za",sun:"zo"},li={mon:"maandag",tue:"dinsdag",wed:"woensdag",thu:"donderdag",fri:"vrijdag",sat:"zaterdag",sun:"zondag"},ui={on:"op",every:"elke",and:"en",at:"om",before:"voor",after:"na",sunrise:"zonsopgang",sunset:"zonsondergang"},di={turn_on:"aanzetten",turn_off:"uitzetten",close_cover:"sluiten",open_cover:"openen",set_temperature:"temperatuur instellen",set_to:"Zet op",set_position:"positie instellen"},hi={climate:"verwarming",cover:"zonwering",fan:"ventilatie",light:"verlichting",switch:"schakelaars",vacuum:"stofzuiger"},pi={scheduler:"Tijdplanner",actions:ii,instructions:ni,fields:oi,days_short:ci,days_long:li,words:ui,services:di,domains:hi},fi=Object.freeze({__proto__:null,scheduler:"Tijdplanner",actions:ii,instructions:ni,fields:oi,days_short:ci,days_long:li,words:ui,services:di,domains:hi,default:pi}),mi={add:"legg til",cancel:"avbryt",next:"neste",save:"lagre",delete:"slett"},vi={no_group_selected:"Velg en gruppe frst",no_entity_selected:"Velg en entitet frst",no_groups_defined:"Ingen grupper definert",no_entities_for_group:"Det finnes ingen entiteter i denne gruppen",no_actions_for_entity:"Det finnes ingen handlinger for denne entiteten",no_entries_defined:"Det er ingen definerte tidsplaner  vise"},yi={group:"Gruppe",entity:"Entitet",action:"Handling",days:"Dager",time:"Tid",options:"Valg",day_type_daily:"hver dag",day_type_weekdays:"ukedager",day_type_custom:"egendefinert",shift_with_sun:"automatisk juster tid for soloppgang/solnedgang",brightness:"Lysstyrke",temperature:"Temperatur",position:"Posisjon"},gi={mon:"man",tue:"tir",wed:"ons",thu:"tor",fri:"fre",sat:"lr",sun:"sn"},_i={mon:"mandag",tue:"tirsdag",wed:"onsdag",thu:"torsdag",fri:"fredag",sat:"lrdag",sun:"sndag"},bi={on:"den",every:"hver",and:"og",at:"p",before:"fr",after:"etter",sunrise:"soloppgang",sunset:"solnedgang"},wi={turn_on:"sl p",turn_off:"sl av",close_cover:"lukk",open_cover:"pne",set_temperature:"sett temperatur",set_to:"sett til",set_position:"sett posisjon"},Pi={climate:"klima",cover:"cover",fan:"vifter",light:"lys",switch:"brytere",vacuum:"stvsugere"},Ei={scheduler:"Tidsplan",actions:mi,instructions:vi,fields:yi,days_short:gi,days_long:_i,words:bi,services:wi,domains:Pi},Si=Object.freeze({__proto__:null,scheduler:"Tidsplan",actions:mi,instructions:vi,fields:yi,days_short:gi,days_long:_i,words:bi,services:wi,domains:Pi,default:Ei}),ji={add:"dodaj",cancel:"anuluj",next:"dalej",save:"zapisz",delete:"usu"},xi={no_group_selected:"Najpierw wybierz grup",no_entity_selected:"Najpierw wybierz encj",no_groups_defined:"Nie ma zdefiniowanych grup",no_entities_for_group:"Nie ma encji w tej grupie",no_actions_for_entity:"Nie ma akcji dla tej encji",no_entries_defined:"Nie ma elementw do pokazania"},$i={group:"Grupa",entity:"Encja",action:"Akcja",days:"Dni",time:"Czas",options:"Opcje",day_type_daily:"codziennie",day_type_weekdays:"dni tygodnia",day_type_custom:"niestandardowy",shift_with_sun:"automatycznie dopasuj czas do wschodw/zachodw",brightness:"Jasno",temperature:"Temperatura",position:"Pozycj"},Oi={mon:"pon",tue:"wt",wed:"r",thu:"czw",fri:"pt",sat:"sob",sun:"niedz"},Ai={mon:"poniedziaek",tue:"wtorek",wed:"roda",thu:"czwartek",fri:"pitek",sat:"sobota",sun:"niedziela"},ki={on:"w",every:"kady",and:"oraz",at:"o",before:"przed",after:"po",sunrise:"wschd",sunset:"zachodw"},Fi={turn_on:"wcz",turn_off:"wycz",close_cover:"zamknij",open_cover:"otwrz",set_temperature:"Ustaw temperatur",set_to:"ustaw na",set_position:"Ustaw pozycj"},zi={climate:"termostat",cover:"roleta",fan:"wiatrak",light:"wiato",switch:"wcznik",vacuum:"odkurzacz"},Di={scheduler:"Harmonogram",actions:ji,instructions:xi,fields:$i,days_short:Oi,days_long:Ai,words:ki,services:Fi,domains:zi},Ci=Object.freeze({__proto__:null,scheduler:"Harmonogram",actions:ji,instructions:xi,fields:$i,days_short:Oi,days_long:Ai,words:ki,services:Fi,domains:zi,default:Di}),Ri={add:"adicionar item",cancel:"cancelar",next:"prximo",save:"gravar",delete:"apagar"},Ii={no_group_selected:"Selecione um grupo primeiro",no_entity_selected:"Selecione uma entidade primeiro",no_groups_defined:"No tem grupo definido",no_entities_for_group:"No tem entidade no grupo",no_actions_for_entity:"No h aes para esta entidade",no_entries_defined:"No tem item pra mostar"},Ni={group:"Grupo",entity:"Entidade",action:"Ao",days:"Dias",time:"Hora",options:"Opes",day_type_daily:"todos os dias",day_type_weekdays:"dias da semana",day_type_custom:"personalizado",shift_with_sun:"automaticamente ajusta hora pelo nascer do sol/pr do sol",brightness:"Brilho",temperature:"Temperatura",position:"Posio"},Ti={mon:"seg",tue:"ter",wed:"qua",thu:"qui",fri:"sex",sat:"sab",sun:"dom"},Li={mon:"segunda",tue:"tera",wed:"quarta",thu:"quinta",fri:"sexta",sat:"sabdo",sun:"domingo"},Ui={on:"on",every:"cada",and:"e",at:"s",before:"antes",after:"depois",sunrise:"nascer do sol",sunset:"pr do sol"},qi={turn_on:"ligar",turn_off:"desligar",close_cover:"fechar",open_cover:"abrir",set_temperature:"ajustar temperatura",set_to:"ajustar para",set_position:"ajustar posio"},Vi={climate:"ar condicionado",cover:"persiana",fan:"ventilador",light:"luz",switch:"interruptor",vacuum:"aspirador"},Mi={scheduler:"Agenda",actions:Ri,instructions:Ii,fields:Ni,days_short:Ti,days_long:Li,words:Ui,services:qi,domains:Vi},Hi=Object.freeze({__proto__:null,scheduler:"Agenda",actions:Ri,instructions:Ii,fields:Ni,days_short:Ti,days_long:Li,words:Ui,services:qi,domains:Vi,default:Mi}),Qi={add:"",cancel:"",next:"",save:"",delete:""},Bi={no_group_selected:"  ",no_entity_selected:"  ",no_groups_defined:"    ",no_entities_for_group:"    ",no_actions_for_entity:"    ",no_entries_defined:" "},Gi={group:"",entity:"",action:"",days:"",time:"",options:"",day_type_daily:"",day_type_weekdays:" ",day_type_custom:" ",shift_with_sun:"     / ",brightness:"",temperature:"",position:""},Ki={mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},Ji={mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},Wi={on:"",every:"",and:"",at:"",before:"",after:"",sunrise:"",sunset:""},Zi={turn_on:"",turn_off:"",close_cover:"",open_cover:"",set_temperature:" ",set_to:"",set_position:" "},Yi={climate:"",cover:"",fan:"",light:"",switch:"",vacuum:""},Xi={scheduler:"",actions:Qi,instructions:Bi,fields:Gi,days_short:Ki,days_long:Ji,words:Wi,services:Zi,domains:Yi},en={de:gs,en:Os,es:Ts,es_419:Ts,fr:Ks,hu:si,nb:Si,nl:fi,nn:Si,no:Si,pl:Ci,pt:Hi,pt_BR:Hi,ru:Object.freeze({__proto__:null,scheduler:"",actions:Qi,instructions:Bi,fields:Gi,days_short:Ki,days_long:Ji,words:Wi,services:Zi,domains:Yi,default:Xi})};function tn(e,t="",r=""){const a=rn();var s;try{s=e.split(".").reduce((e,t)=>e[t],en[a])}catch(t){s=e.split(".").reduce((e,t)=>e[t],en.en)}return void 0===s&&(s=e.split(".").reduce((e,t)=>e[t],en.en)),""!==t&&""!==r&&(s=s.replace(t,r)),s}function rn(){return(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_")}function an(e,t){let r=e>=0?Math.floor(e/60):Math.ceil(e/60),a=e-60*r;return a%t!=0&&(a=Math.round(a/t)*t),a>=60&&(r++,a-=60),r>=24&&(r-=24),60*r+a}function sn(e,t={}){let r=!!t.amPm&&t.amPm,a=!!t.absolute&&t.absolute,s=e>=0?Math.floor(e/60):Math.ceil(e/60),i=e-60*s,n="";r&&(n=s>=12?"PM":"AM",(s>12||12==s&&i>0)&&(s-=12));let o=String(Math.abs(s)).padStart(2,"0"),c=String(Math.abs(i)).padStart(2,"0"),l=s<0||i<0;return{hours:o,minutes:c,time:`${l&&!a?"-":""}${o}:${c}${r?" "+n:""}`,signed:l,amPm:n}}function nn(e,t={}){let r=t.stepSize?t.stepSize:1,a=!!t.signed&&t.signed,s=t.max?t.max:1440,i=an(e,r);return i<0&&!a?e+=1440:i>=1440&&(e-=1440),i<-s?-s:i>s?s:e}function on(e){let t,r,a;if(null!==(a=/^([0-9]{2}):([0-9]{2})$/.exec(e)))[t,r]=[Number(a[1]),Number(a[2])];else if(null!==(a=/^([0-9]{2})([0-9]{2})$/.exec(e)))[t,r]=[Number(a[1]),Number(a[2])];else{if(null!==(a=/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}[\+|\-][0-9]{2}:[0-9]{2}$/.exec(e))){let e=new Date(a[0]);return on(`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`)}console.log(`failed to parse timestamp '${e}'`)}return 60*t+r}const cn={light:{actions:[{service:"turn_on",icon:"lightbulb-on-outline",variable:{field:"brightness"}},{service:"turn_off",icon:"lightbulb-off-outline"}]},switch:{actions:[{service:"turn_on"},{service:"turn_off"}]},cover:{actions:[{service:"open_cover",name:tn("services.open_cover")},{service:"close_cover",name:tn("services.close_cover")},{service:"set_cover_position",name:tn("services.set_position"),variable:{field:"position"}}]},climate:{actions:[{service:"set_temperature",variable:{field:"temperature"},icon:"thermometer"},{service:"turn_off",icon:"thermometer-off"}]},fan:{actions:[{service:"turn_on",icon:"fan"},{service:"turn_off",icon:"fan-off"}]}};on("12:00");function ln(e){var t={automation:"robot",camera:"camera",climate:"home-thermometer-outline",cover:"window-shutter",fan:"fan",input_number:"sort-numeric-variant",input_select:"form-select",input_text:"form-textbox",input_time:"clock",light:"lightbulb-outline",media_player:"speaker",script:"script-text",switch:"flash",vacuum:"robot-vacuum"};return e in t?t[e]:"folder-outline"}function un(e){let t=null;return"climate"==e?t=tn("domains.climate"):"cover"==e?t=tn("domains.cover"):"fan"==e?t=tn("domains.fan"):"light"==e?t=tn("domains.light"):"switch"==e?t=tn("domains.switch"):"vacuum"==e&&(t=tn("domains.vacuum")),t||e}function dn(e){const t={brightness:{name:tn("fields.brightness"),unit:"",min:0,max:255,step:1,optional:!0,show_percentage:!0},temperature:{name:tn("fields.temperature"),unit:"C",min:10,max:30,step:1,optional:!1,show_percentage:!1},position:{name:tn("fields.position"),unit:"%",min:0,max:100,step:1,optional:!1,show_percentage:!1},default:{name:e,unit:"",min:0,max:255,step:1,optional:!1,show_percentage:!1}};return void 0!==t[e]?Object.assign({},t[e]):Object.assign({},t.default)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function hn(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var pn=hn((function(e,t){var r;r=function(){var e=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"\'","":"\'","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial"}'),t=JSON.parse('{"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue"},"vi":{"":"D","":"d"}}');function r(r,a){if("string"!=typeof r)throw new Error("slugify: string argument expected");var s=t[(a="string"==typeof a?{replacement:a}:a||{}).locale]||{},i=void 0===a.replacement?"-":a.replacement,n=r.split("").reduce((function(t,r){return t+(s[r]||e[r]||r).replace(a.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")}),"").trim().replace(new RegExp("[\\s"+i+"]+","g"),i);return a.lower&&(n=n.toLowerCase()),a.strict&&(n=n.replace(new RegExp("[^a-zA-Z0-9"+i+"]","g"),"").replace(new RegExp("[\\s"+i+"]+","g"),i)),n}return r.extend=function(t){for(var r in t)e[r]=t[r]},r},e.exports=r(),e.exports.default=r()}));const fn=/^D([0-7]+)T([0-9SR\-\+]+)([A0-9+]+)$/,mn=/^(A([0-9]+))+$/,vn=/^([0-9]{4})?(S[SR])([0-9]{4})?$/;function yn(e){if(-1===e.indexOf("."))return"";return String(e.split(".").shift())}function gn(e){let t=Mt(e);t=t.sort();let r={};return t.forEach(t=>r[t]=e[t]),pn(JSON.stringify(Qa(r)).replace(/\W/g," "),"_")}function _n(e){return e.match(/^switch.schedule_[0-9a-f]{6}$/)}function bn(e){return!e||!e.length||1==e.length&&0==e[0]?"daily":5!=e.length||e.includes(6)||e.includes(7)?"custom":"weekdays"}function wn(e){return"string"!=typeof e&&(e=String(e)),e.replace(/_/g," ")}function Pn(e){return"string"!=typeof e&&(e=String(e)),e.match(/^[a-z]+:[a-z0-9-]+$/i)?e:"hass:"+e}class En{constructor(){this.entities=[],this.groups=[],this.userConfig={groups:{},domains:{},entities:{},discover_existing:!0,standard_configuration:!0}}setUserConfig(e){Object.assign(this.userConfig,ss(e,["entities","groups","discover_existing","standard_configuration"])),this.userConfig.standard_configuration&&Object.assign(this.userConfig,{domains:cn}),e.domains&&Ra(e.domains,(e,t)=>{let r=Object.assign({},this.userConfig.domains);Object.assign(r,{[t]:e}),this.userConfig.domains=r}),this.userConfig.groups&&Ra(e.groups,this.AddGroup.bind(this))}AddGroup(e,t){if(this.FindGroup(t))return;let r=Object.assign({id:t,icon:"folder-outline",domains:[],entities:[],name:un(t)},ts(Object.assign({},e),Ka));this.groups.push(r)}FindGroup(e){let t=Ua(this.groups,{id:e});return t||null}AddEntityToGroup(e){let t=yn(e),r=Ua(this.groups,r=>r.domains.includes(t)||r.entities.includes(e));if(!r)if(r=this.FindGroup(t),r){let a=[...r.entities];a.push(e),this.groups.forEach((e,r)=>{e.id==t&&(this.groups[r].entities=a)})}else this.AddGroup({icon:ln(t),entities:[e]},t)}GetGroups(){let e=[...this.groups];return e=cs(e,"name"),e}AddEntity(e,t){if(this.FindEntity(t))return;let r=Object.assign({id:t,name:t.split(".").pop(),icon:ln(yn(t))},ts(Object.assign({},e),Ka));this.entities.push(r),this.AddEntityToGroup(t)}FindEntity(e){let t=Ua(this.entities,{id:e});return t||null}GetEntitiesForGroup(e){let t=[...this.entities];if(e){let r=this.FindGroup(e);if(!r)return[];t=t.filter(e=>{let t=yn(e.id);return(null==r?void 0:r.entities.includes(e.id))||(null==r?void 0:r.domains.includes(t))})}return t=cs(t,"name"),t}AddActionToEntity(e,t){if(!this.FindEntity(e))throw Error(`Entity '${e}' must be created before actions can be assigned`);if(this.FindAction(e,t.id))return;if(this.GetActionsForEntity(e).find(e=>!!e.hasOwnProperty("variable")&&!(!t.hasOwnProperty("service_data")||!t.service_data.hasOwnProperty(e.variable.field))))return;let r=[...this.GetActionsForEntity(e)];r.push(t),this.entities.forEach((t,a)=>{t.id==e&&(this.entities[a].actions=r)})}CreateAction(e){let t={id:gn(ss(e,["service","service_data"])),name:(a=e.service,"turn_on"==a?tn("services.turn_on"):"turn_off"==a?tn("services.turn_off"):"open_cover"==a?tn("services.open_cover"):"close_cover"==a?tn("services.close_cover"):"set_temperature"==a?tn("services.set_temperature"):"set_cover_position"==a?tn("services.set_position"):-1!==a.indexOf(".")?a.split(".").pop():a),icon:(r=e.service,"turn_on"==r?"toggle-switch-outline":"turn_off"==r?"toggle-switch-off-outline":"open_cover"==r?"window-shutter-open":"close_cover"==r?"window-shutter":"set_temperature"==r?"thermometer":"set_cover_position"==r?"window-shutter":"flash"),service:e.service};var r,a;return Ha(e,"service_data")&&!function(e){if(null==e)return!0;if(vt(e)&&(ge(e)||"string"==typeof e||"function"==typeof e.splice||Ot(e)||It(e)||St(e)))return!e.length;var t=Wr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(_t(e))return!Vt(e).length;for(var r in e)if(Ga.call(e,r))return!1;return!0}(e)&&Object.assign(t,ss(e,"service_data")),Ha(e,"icon")&&Object.assign(t,ss(e,"icon")),Ha(e,"name")&&Object.assign(t,ss(e,"name")),Ha(e,"variable")&&Object.assign(t,{variable:Object.assign(dn(e.variable.field),e.variable)}),t}FindAction(e,t){let r=this.GetActionsForEntity(e),a=Ua(r,{id:t});return a||null}GetActionsForEntity(e){let t=this.FindEntity(e);if(!t)return[];let r=[...t.actions];return r=cs(r,"name"),r}LoadEntities(e){if(Ra(e,t=>{let r=t.entity_id,a=yn(r);if(!_n(r)&&(a in this.userConfig.domains||r in this.userConfig.entities)){let s=[],i={actions:[],name:e[r].attributes.friendly_name,icon:e[r].attributes.icon},n=!1;if(a in this.userConfig.domains&&(Ha(this.userConfig.domains[a],"include")&&!this.userConfig.domains[a].include.includes(r)&&(n=!0),Ha(this.userConfig.domains[a],"exclude")&&this.userConfig.domains[a].exclude.includes(r)&&(n=!0),Object.assign(i,Ya(this.userConfig.domains[a],"actions")),Ha(this.userConfig.domains[a],"actions")&&!n)){let e=Ja(this.userConfig.domains[a].actions,e=>{if(yn((e=Object.assign({},e)).service)==a&&(e=Object.assign(e,{service:e.service.split(".").pop()})),"light"==a&&t.attributes.hasOwnProperty("supported_features")){!(1&t.attributes.supported_features)&&e.variable&&delete e.variable}else if("cover"==a&&t.attributes.hasOwnProperty("supported_features")){if(!(4&t.attributes.supported_features)&&e.variable)return null}return this.CreateAction(e)});e=Na(e,e=>e),Ra(e,e=>s.push(e))}if(r in this.userConfig.entities){if(Object.assign(i,Ya(this.userConfig.entities[r],"actions")),Ha(this.userConfig.entities[r],"actions")){let e=Ja(this.userConfig.entities[r].actions,e=>{if(yn((e=Object.assign({},e)).service)==a&&(e=Object.assign(e,{service:e.service.split(".").pop()})),"light"==a&&t.attributes.hasOwnProperty("supported_features")){!(1&t.attributes.supported_features)&&e.variable&&delete e.variable}else if("cover"==a&&t.attributes.hasOwnProperty("supported_features")){if(!(4&t.attributes.supported_features)&&e.variable)return null}return this.CreateAction(e)});e=Na(e,e=>e),Ra(e,e=>s.push(e))}n=!1}if(n)return;this.AddEntity(i,r),Ra(s,e=>this.AddActionToEntity(r,e))}}),this.userConfig.discover_existing){let a=Na(e,e=>_n(e.entity_id));r=e=>e.attributes.actions,a=(ge(t=a)?ye:qa)(t,ka(r)),a=_r(a),Ra(a,t=>{let r=Object.assign({},t),a=r.entity,s=r.service,i=Ya(r,["entity","service"]);yn(a)||(a=yn(s)+"."+a,s=s.split(".").pop());let n=this.CreateAction({service:s,service_data:i});if(!this.FindEntity(a)){if(!e[a])return;let t={actions:[],name:e[a].attributes.friendly_name,icon:e[a].attributes.icon};this.AddEntity(t,a)}this.AddActionToEntity(a,n)})}var t,r}}const Sn=te`
      /* list view */

      div.list-item {
        display: grid;
        grid-template-columns: min-content 1fr min-content;
        grid-template-rows: min-content min-content min-content min-content;
        grid-template-areas: "icon name switch"
                             "icon action switch"
                             "icon days switch"
                             "icon time switch";
        grid-gap: 2px 20px;
        background: none;
        cursor: pointer;
        padding: 10px 20px;
        position: relative;
        z-index: 1;
      }

      div.list-item:before  {
        content: " ";
        background: var(--list-item-background-color);
        opacity: 0.1;
        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: -1;
       }

      div.list-item:hover:before {
          background: var(--primary-color);
          border-radius: 4px;
      }

      div.list-item-icon {
        grid-area: icon;
        color: var(--state-icon-color);
      }

      div.list-item-icon ha-icon {
        width: 24px;
        height: 24px;
      }

      div.list-item-icon.enabled {
        color: var(--state-icon-active-color);
      }

      div.list-item-switch {
        grid-area: switch;
      }

      div.list-item-switch ha-switch {
        margin-top: 3px;
      }

      div.list-item-name {
        grid-area: name;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      div.list-item-action {
        grid-area: action;
        color: var(--secondary-text-color);
      }

      div.list-item-days {
        grid-area: days;
        color: var(--secondary-text-color);
      }

      div.list-item-time {
        grid-area: time;
        color: var(--secondary-text-color);
      }

      div.list-item-name:first-letter, div.list-item-action:first-letter, div.list-item-days:first-letter, div.list-item-time:first-letter {
        text-transform: capitalize;
      }

      div.disabled div.list-item-icon, div.disabled div.list-item-name, div.disabled div.list-item-action, div.disabled div.list-item-days, div.disabled div.list-item-time {
        color: var(--disabled-text-color);
      }

      /* add/edit view */
   
      div.header {
        color: var(--secondary-text-color);
        text-transform: uppercase;
        font-size: 12px;
        font-weight: 500;
        margin: 0px 0px 0px 0px;
      }

      div.card-section {
        padding: 10px 10px;
      }

      div.card-section.first {
        padding-top: 0px;
      }
      
      div.card-section.last {
        padding-bottom: 10px;
      }

      div.text-field {
        color: var(--disabled-text-color);
      }

      div.summary {
        display: grid;
        grid-template-columns: 1fr max-content 1fr;
        grid-template-areas: "entity arrow action";
        grid-auto-flow: column;
        grid-gap: 5px;
      }

      div.summary-entity { grid-area: entity; }
      div.summary-action { grid-area: action; }
      div.summary-text { grid-area: text; }
      div.summary-icon { grid-area: icon; }
      div.summary-arrow {
        grid-area: arrow;
        color: var(--secondary-text-color);
        display: flex;
        justify-content:center;
        align-items:center;
      }

      div.summary-entity, div.summary-action {
        color: var(--dark-primary-color);
        padding: 10px;
        font-size: 14px;
        font-weight: 500;
        --mdc-icon-size: 20px;
        position: relative;
        display: flex;
        justify-content:center;
        align-items:center;
        display: grid;
        grid-template-columns: min-content 1fr;
        grid-template-areas: "icon text";
        grid-auto-flow: column;
        grid-gap: 10px;
      }

       div.summary-entity:before, div.summary-action:before  {
        content: " ";
        background: var(--primary-color);
        opacity: 0.15;
        border-radius: 4px;
        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: 1;
       }

       div.summary-text::first-letter {
        text-transform: uppercase;
       }

      div#day-list-custom.closed {
        display: none;
      }
      
      div#day-list-custom {
        overflow: hidden;
        max-height: 100px; /* approximate max height */
        transition-property: all;
        transition-duration: 1s;
        transition-timing-function: cubic-bezier(0, 1, 0.5, 1);
      }

      mwc-button {
        margin: 2px 0px;
      }

      mwc-button.active {
        background: var(--primary-color);
        --mdc-theme-primary: var(--text-primary-color);
        border-radius: 4px;
      }
      
      div.option-item {
        padding: 2px 5px;
        display: flex;
        align-items: center;
      }

      div.option-item ha-paper-slider {
        flex-grow: 1;
        --paper-slider-pin-start-color: var(--primary-color);
      }

      div#level-value {
        min-width: 40px;
      }

      div.option-item .disabled {
        color: var(--disabled-text-color);
      }
      
      .padded-right {
        margin-right: 11px;
      }
`;var jn=hn((function(e,t){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var a=t.length-1,s=1;s<a;++s)t[s]=t[s].slice(1,-1);return t[a]=t[a].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function a(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function s(e){return e.toUpperCase()}function i(e){var a=t("[0-9]","[A-Fa-f]"),s=r(r("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+r("%[89A-Fa-f]"+a+"%"+a+a)+"|"+r("%"+a+a)),i="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",n=t("[\\:\\/\\?\\#\\[\\]\\@]",i),o=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=(r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),r(r(s+"|"+t(c,i,"[\\:]"))+"*"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),u=r(l+"\\."+l+"\\."+l+"\\."+l),d=r(a+"{1,4}"),h=r(r(d+"\\:"+d)+"|"+u),p=r(r(d+"\\:")+"{6}"+h),f=r("\\:\\:"+r(d+"\\:")+"{5}"+h),m=r(r(d)+"?\\:\\:"+r(d+"\\:")+"{4}"+h),v=r(r(r(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+r(d+"\\:")+"{3}"+h),y=r(r(r(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+r(d+"\\:")+"{2}"+h),g=r(r(r(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+h),_=r(r(r(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+h),b=r(r(r(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),w=r(r(r(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),P=r([p,f,m,v,y,g,_,b,w].join("|")),E=r(r(c+"|"+s)+"+"),S=(r("[vV]"+a+"+\\."+t(c,i,"[\\:]")+"+"),r(r(s+"|"+t(c,i))+"*"),r(s+"|"+t(c,i,"[\\:\\@]")));return r(r(s+"|"+t(c,i,"[\\@]"))+"+"),r(r(S+"|"+t("[\\/\\?]",o))+"*"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,i),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,i),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,i),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,i),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]",o),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,i),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,n),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+u+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+r(r("\\%25|\\%(?!"+a+"{2})")+"("+E+")")+"?\\]?$")}}var n=i(!1),o=i(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,s=!1,i=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function v(e){throw new RangeError(p[e])}function y(e,t){var r=e.split("@"),a="";r.length>1&&(a=r[0]+"@",e=r[1]);var s=function(e,t){for(var r=[],a=e.length;a--;)r[a]=t(e[a]);return r}((e=e.replace(h,".")).split("."),t).join(".");return a+s}function g(e){for(var t=[],r=0,a=e.length;r<a;){var s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<a){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),r--)}else t.push(s)}return t}var _=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},b=function(e,t,r){var a=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;a+=36)e=f(e/35);return f(a+36*e/(e+38))},w=function(e){var t,r=[],a=e.length,s=0,i=128,n=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var c=0;c<o;++c)e.charCodeAt(c)>=128&&v("not-basic"),r.push(e.charCodeAt(c));for(var u=o>0?o+1:0;u<a;){for(var d=s,h=1,p=36;;p+=36){u>=a&&v("invalid-input");var m=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((l-s)/h))&&v("overflow"),s+=m*h;var y=p<=n?1:p>=n+26?26:p-n;if(m<y)break;var g=36-y;h>f(l/g)&&v("overflow"),h*=g}var _=r.length+1;n=b(s-d,_,0==d),f(s/_)>l-i&&v("overflow"),i+=f(s/_),s%=_,r.splice(s++,0,i)}return String.fromCodePoint.apply(String,r)},P=function(e){var t=[],r=(e=g(e)).length,a=128,s=0,i=72,n=!0,o=!1,c=void 0;try{for(var u,d=e[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var h=u.value;h<128&&t.push(m(h))}}catch(e){o=!0,c=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw c}}var p=t.length,y=p;for(p&&t.push("-");y<r;){var w=l,P=!0,E=!1,S=void 0;try{for(var j,x=e[Symbol.iterator]();!(P=(j=x.next()).done);P=!0){var $=j.value;$>=a&&$<w&&(w=$)}}catch(e){E=!0,S=e}finally{try{!P&&x.return&&x.return()}finally{if(E)throw S}}var O=y+1;w-a>f((l-s)/O)&&v("overflow"),s+=(w-a)*O,a=w;var A=!0,k=!1,F=void 0;try{for(var z,D=e[Symbol.iterator]();!(A=(z=D.next()).done);A=!0){var C=z.value;if(C<a&&++s>l&&v("overflow"),C==a){for(var R=s,I=36;;I+=36){var N=I<=i?1:I>=i+26?26:I-i;if(R<N)break;var T=R-N,L=36-N;t.push(m(_(N+T%L,0))),R=f(T/L)}t.push(m(_(R,0))),i=b(s,O,y==p),s=0,++y}}}catch(e){k=!0,F=e}finally{try{!A&&D.return&&D.return()}finally{if(k)throw F}}++s,++a}return t.join("")},E=function(e){return y(e,(function(e){return d.test(e)?"xn--"+P(e):e}))},S=function(e){return y(e,(function(e){return u.test(e)?w(e.slice(4).toLowerCase()):e}))},j={};function x(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function $(e){for(var t="",r=0,a=e.length;r<a;){var s=parseInt(e.substr(r+1,2),16);if(s<128)t+=String.fromCharCode(s),r+=3;else if(s>=194&&s<224){if(a-r>=6){var i=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&s)<<6|63&i)}else t+=e.substr(r,6);r+=6}else if(s>=224){if(a-r>=9){var n=parseInt(e.substr(r+4,2),16),o=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&s)<<12|(63&n)<<6|63&o)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function O(e,t){function r(e){var r=$(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,x).replace(t.PCT_ENCODED,s)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,x).replace(t.PCT_ENCODED,s)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,x).replace(t.PCT_ENCODED,s)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,x).replace(t.PCT_ENCODED,s)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,x).replace(t.PCT_ENCODED,s)),e}function A(e){return e.replace(/^0*(.*)/,"$1")||"0"}function k(e,t){var r=e.match(t.IPV4ADDRESS)||[],a=c(r,2)[1];return a?a.split(".").map(A).join("."):e}function F(e,t){var r=e.match(t.IPV6ADDRESS)||[],a=c(r,3),s=a[1],i=a[2];if(s){for(var n=s.toLowerCase().split("::").reverse(),o=c(n,2),l=o[0],u=o[1],d=u?u.split(":").map(A):[],h=l.split(":").map(A),p=t.IPV4ADDRESS.test(h[h.length-1]),f=p?7:8,m=h.length-f,v=Array(f),y=0;y<f;++y)v[y]=d[y]||h[m+y]||"";p&&(v[f-1]=k(v[f-1],t));var g=v.reduce((function(e,t,r){if(!t||"0"===t){var a=e[e.length-1];a&&a.index+a.length===r?a.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],_=void 0;if(g&&g.length>1){var b=v.slice(0,g.index),w=v.slice(g.index+g.length);_=b.join(":")+"::"+w.join(":")}else _=v.join(":");return i&&(_+="%"+i),_}return e}var z=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,D=void 0==="".match(/(){0}/)[1];function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},a=!1!==t.iri?o:n;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var s=e.match(z);if(s){D?(r.scheme=s[1],r.userinfo=s[3],r.host=s[4],r.port=parseInt(s[5],10),r.path=s[6]||"",r.query=s[7],r.fragment=s[8],isNaN(r.port)&&(r.port=s[5])):(r.scheme=s[1]||void 0,r.userinfo=-1!==e.indexOf("@")?s[3]:void 0,r.host=-1!==e.indexOf("//")?s[4]:void 0,r.port=parseInt(s[5],10),r.path=s[6]||"",r.query=-1!==e.indexOf("?")?s[7]:void 0,r.fragment=-1!==e.indexOf("#")?s[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?s[4]:void 0)),r.host&&(r.host=F(k(r.host,a),a)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var i=j[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)O(r,a);else{if(r.host&&(t.domainHost||i&&i.domainHost))try{r.host=E(r.host.replace(a.PCT_ENCODED,$).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(r,n)}i&&i.parse&&i.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function R(e,t){var r=!1!==t.iri?o:n,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(F(k(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(a.push(":"),a.push(String(e.port))),a.length?a.join(""):void 0}var I=/^\.\.?\//,N=/^\/\.(\/|$)/,T=/^\/\.\.(\/|$)/,L=/^\/?(?:.|\n)*?(?=\/|$)/;function U(e){for(var t=[];e.length;)if(e.match(I))e=e.replace(I,"");else if(e.match(N))e=e.replace(N,"/");else if(e.match(T))e=e.replace(T,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(L);if(!r)throw new Error("Unexpected dot segment condition");var a=r[0];e=e.slice(a.length),t.push(a)}return t.join("")}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?o:n,a=[],s=j[(t.scheme||e.scheme||"").toLowerCase()];if(s&&s.serialize&&s.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||s&&s.domainHost)try{e.host=t.iri?S(e.host):E(e.host.replace(r.PCT_ENCODED,$).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}O(e,r),"suffix"!==t.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var i=R(e,t);if(void 0!==i&&("suffix"!==t.reference&&a.push("//"),a.push(i),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||s&&s.absolutePath||(c=U(c)),void 0===i&&(c=c.replace(/^\/\//,"/%2F")),a.push(c)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3],s={};return a||(e=C(q(e,r),r),t=C(q(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=U(t.path||""),s.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=U(t.path||""),s.query=t.query):(t.path?("/"===t.path.charAt(0)?s.path=U(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path:s.path="/"+t.path,s.path=U(s.path)),s.query=t.query):(s.path=e.path,void 0!==t.query?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function M(e,t){return e&&e.toString().replace(t&&t.iri?o.PCT_ENCODED:n.PCT_ENCODED,$)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},Q={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize};function B(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var G={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=B(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(B(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),a=c(r,2),s=a[0],i=a[1];e.path=s&&"/"!==s?s:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},K={scheme:"wss",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize},J={},W="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Z="[0-9A-Fa-f]",Y=r(r("%[EFef]"+Z+"%"+Z+Z+"%"+Z+Z)+"|"+r("%[89A-Fa-f]"+Z+"%"+Z+Z)+"|"+r("%"+Z+Z)),X=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),ee=new RegExp(W,"g"),te=new RegExp(Y,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',X),"g"),ae=new RegExp(t("[^]",W,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=ae;function ie(e){var t=$(e);return t.match(ee)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,a=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var s=!1,i={},n=r.query.split("&"),o=0,c=n.length;o<c;++o){var l=n[o].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),d=0,h=u.length;d<h;++d)a.push(u[d]);break;case"subject":r.subject=M(l[1],t);break;case"body":r.body=M(l[1],t);break;default:s=!0,i[M(l[0],t)]=M(l[1],t)}}s&&(r.headers=i)}r.query=void 0;for(var p=0,f=a.length;p<f;++p){var m=a[p].split("@");if(m[0]=M(m[0]),t.unicodeSupport)m[1]=M(m[1],t).toLowerCase();else try{m[1]=E(M(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[p]=m.join("@")}return r},serialize:function(e,t){var r,a=e,i=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var n=0,o=i.length;n<o;++n){var c=String(i[n]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace(te,ie).replace(te,s).replace(re,x),d=c.slice(l+1);try{d=t.iri?S(d):E(M(d,t).toLowerCase())}catch(e){a.error=a.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[n]=u+"@"+d}a.path=i.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var f in h)h[f]!==J[f]&&p.push(f.replace(te,ie).replace(te,s).replace(ae,x)+"="+h[f].replace(te,ie).replace(te,s).replace(se,x));return p.length&&(a.query=p.join("&")),a}},oe=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(oe),a=e;if(r){var s=t.scheme||a.scheme||"urn",i=r[1].toLowerCase(),n=r[2],o=s+":"+(t.nid||i),c=j[o];a.nid=i,a.nss=n,a.path=void 0,c&&(a=c.parse(a,t))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",a=e.nid,s=r+":"+(t.nid||a),i=j[s];i&&(e=i.serialize(e,t));var n=e,o=e.nss;return n.path=(a||t.nid)+":"+o,n}},le=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ue={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(le)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};j[H.scheme]=H,j[Q.scheme]=Q,j[G.scheme]=G,j[K.scheme]=K,j[ne.scheme]=ne,j[ce.scheme]=ce,j[ue.scheme]=ue,e.SCHEMES=j,e.pctEncChar=x,e.pctDecChars=$,e.parse=C,e.removeDotSegments=U,e.serialize=q,e.resolveComponents=V,e.resolve=function(e,t,r){var a=function(e,t){var r=e;if(t)for(var a in t)r[a]=t[a];return r}({scheme:"null"},r);return q(V(C(e,a),C(t,a),a,!0),a)},e.normalize=function(e,t){return"string"==typeof e?e=q(C(e,t),t):"object"===a(e)&&(e=C(q(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=q(C(e,r),r):"object"===a(e)&&(e=q(e,r)),"string"==typeof t?t=q(C(t,r),r):"object"===a(t)&&(t=q(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?o.ESCAPE:n.ESCAPE,x)},e.unescapeComponent=M,Object.defineProperty(e,"__esModule",{value:!0})}(t)})),xn=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,s,i;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(s=a;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=a;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=a;0!=s--;){var n=i[s];if(!e(t[n],r[n]))return!1}return!0}return t!=t&&r!=r},$n={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:On,checkDataTypes:function(e,t,r){switch(e.length){case 1:return On(e[0],t,r,!0);default:var a="",s=kn(e);for(var i in s.array&&s.object&&(a=s.null?"(":"(!"+t+" || ",a+="typeof "+t+' !== "object")',delete s.null,delete s.array,delete s.object),s.number&&delete s.integer,s)a+=(a?" && ":"")+On(i,t,r,!0);return a}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++){var s=t[a];(An[s]||"array"===e&&"array"===s)&&(r[r.length]=s)}if(r.length)return r}else{if(An[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:kn,getProperty:Dn,escapeQuotes:Cn,equal:xn,ucs2length:function(e){for(var t,r=0,a=e.length,s=0;s<a;)r++,(t=e.charCodeAt(s++))>=55296&&t<=56319&&s<a&&56320==(64512&(t=e.charCodeAt(s)))&&s++;return r},varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var a in e)if(a!=r&&t[a])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:Rn,getPathExpr:function(e,t,r,a){return Tn(e,r?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var a=Rn(r?"/"+Ln(t):Dn(t));return Tn(e,a)},getData:function(e,t,r){var a,s,i,n;if(""===e)return"rootData";if("/"==e[0]){if(!In.test(e))throw new Error("Invalid JSON-pointer: "+e);s=e,i="rootData"}else{if(!(n=e.match(Nn)))throw new Error("Invalid JSON-pointer: "+e);if(a=+n[1],"#"==(s=n[2])){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return r[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(i="data"+(t-a||""),!s)return i}for(var o=i,c=s.split("/"),l=0;l<c.length;l++){var u=c[l];u&&(i+=Dn(Un(u)),o+=" && "+i)}return o},unescapeFragment:function(e){return Un(decodeURIComponent(e))},unescapeJsonPointer:Un,escapeFragment:function(e){return encodeURIComponent(Ln(e))},escapeJsonPointer:Ln};function On(e,t,r,a){var s=a?" !== ":" === ",i=a?" || ":" && ",n=a?"!":"",o=a?"":"!";switch(e){case"null":return t+s+"null";case"array":return n+"Array.isArray("+t+")";case"object":return"("+n+t+i+"typeof "+t+s+'"object"'+i+o+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+s+'"number"'+i+o+"("+t+" % 1)"+i+t+s+t+(r?i+n+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+s+'"'+e+'"'+(r?i+n+"isFinite("+t+")":"")+")";default:return"typeof "+t+s+'"'+e+'"'}}var An=kn(["string","number","integer","boolean","null"]);function kn(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var Fn=/^[a-z$_][a-z$_0-9]*$/i,zn=/'|\\/g;function Dn(e){return"number"==typeof e?"["+e+"]":Fn.test(e)?"."+e:"['"+Cn(e)+"']"}function Cn(e){return e.replace(zn,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Rn(e){return"'"+Cn(e)+"'"}var In=/^\/(?:[^~]|~0|~1)*$/,Nn=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Tn(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function Ln(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function Un(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var qn=function(e){$n.copy(e,this)};var Vn=hn((function(e){var t=e.exports=function(e,r,a){"function"==typeof r&&(a=r,r={}),function e(r,a,s,i,n,o,c,l,u,d){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var h in a(i,n,o,c,l,u,d),i){var p=i[h];if(Array.isArray(p)){if(h in t.arrayKeywords)for(var f=0;f<p.length;f++)e(r,a,s,p[f],n+"/"+h+"/"+f,o,n,h,i,f)}else if(h in t.propsKeywords){if(p&&"object"==typeof p)for(var m in p)e(r,a,s,p[m],n+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),o,n,h,i,m)}else(h in t.keywords||r.allKeys&&!(h in t.skipKeywords))&&e(r,a,s,p,n+"/"+h,o,n,h,i)}s(i,n,o,c,l,u,d)}}(r,"function"==typeof(a=r.cb||a)?a:a.pre||function(){},a.post||function(){},e,"",e)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}})),Mn=Hn;function Hn(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return Hn.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof qn)return Wn(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var s,i,n,o=Qn.call(this,t,r);return o&&(s=o.schema,t=o.root,n=o.baseId),s instanceof qn?i=s.validate||e.call(this,s.schema,t,void 0,n):void 0!==s&&(i=Wn(s,this._opts.inlineRefs)?s:e.call(this,s,t,void 0,n)),i}function Qn(e,t){var r=jn.parse(t),a=Yn(r),s=Zn(this._getId(e.schema));if(0===Object.keys(e.schema).length||a!==s){var i=eo(a),n=this._refs[i];if("string"==typeof n)return Bn.call(this,e,n,r);if(n instanceof qn)n.validate||this._compile(n),e=n;else{if(!((n=this._schemas[i])instanceof qn))return;if(n.validate||this._compile(n),i==eo(t))return{schema:n,root:e,baseId:s};e=n}if(!e.schema)return;s=Zn(this._getId(e.schema))}return Kn.call(this,r,s,e.schema,e)}function Bn(e,t,r){var a=Qn.call(this,e,t);if(a){var s=a.schema,i=a.baseId;e=a.root;var n=this._getId(s);return n&&(i=to(i,n)),Kn.call(this,r,i,s,e)}}Hn.normalizeId=eo,Hn.fullPath=Zn,Hn.url=to,Hn.ids=function(e){var t=eo(this._getId(e)),r={"":t},a={"":Zn(t,!1)},s={},i=this;return Vn(e,{allKeys:!0},(function(e,t,n,o,c,l,u){if(""!==t){var d=i._getId(e),h=r[o],p=a[o]+"/"+c;if(void 0!==u&&(p+="/"+("number"==typeof u?u:$n.escapeFragment(u))),"string"==typeof d){d=h=eo(h?jn.resolve(h,d):d);var f=i._refs[d];if("string"==typeof f&&(f=i._refs[f]),f&&f.schema){if(!xn(e,f.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=eo(p))if("#"==d[0]){if(s[d]&&!xn(e,s[d]))throw new Error('id "'+d+'" resolves to more than one schema');s[d]=e}else i._refs[d]=p}r[t]=h,a[t]=p}})),s},Hn.inlineRef=Wn,Hn.schema=Qn;var Gn=$n.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Kn(e,t,r,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var s=e.fragment.split("/"),i=1;i<s.length;i++){var n=s[i];if(n){if(void 0===(r=r[n=$n.unescapeFragment(n)]))break;var o;if(!Gn[n]&&((o=this._getId(r))&&(t=to(t,o)),r.$ref)){var c=to(t,r.$ref),l=Qn.call(this,a,c);l&&(r=l.schema,a=l.root,t=l.baseId)}}}return void 0!==r&&r!==a.schema?{schema:r,root:a,baseId:t}:void 0}}var Jn=$n.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Wn(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&!e(r))return!1}else for(var s in t){if("$ref"==s)return!1;if("object"==typeof(r=t[s])&&!e(r))return!1}return!0}(e):t?function e(t){var r,a=0;if(Array.isArray(t)){for(var s=0;s<t.length;s++)if("object"==typeof(r=t[s])&&(a+=e(r)),a==1/0)return 1/0}else for(var i in t){if("$ref"==i)return 1/0;if(Jn[i])a++;else if("object"==typeof(r=t[i])&&(a+=e(r)+1),a==1/0)return 1/0}return a}(e)<=t:void 0)}function Zn(e,t){return!1!==t&&(e=eo(e)),Yn(jn.parse(e))}function Yn(e){return jn.serialize(e).split("#")[0]+"#"}var Xn=/#\/?$/;function eo(e){return e?e.replace(Xn,""):""}function to(e,t){return t=eo(t),jn.resolve(e,t)}var ro={Validation:so((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:so(ao)};function ao(e,t,r){this.message=r||ao.message(e,t),this.missingRef=Mn.url(e,t),this.missingSchema=Mn.normalizeId(Mn.fullPath(this.missingRef))}function so(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}ao.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var io=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,a="boolean"==typeof t.cycles&&t.cycles,s=t.cmp&&(r=t.cmp,function(e){return function(t,a){var s={key:t,value:e[t]},i={key:a,value:e[a]};return r(s,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,n;if(Array.isArray(t)){for(n="[",r=0;r<t.length;r++)r&&(n+=","),n+=e(t[r])||"null";return n+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=i.push(t)-1,c=Object.keys(t).sort(s&&s(t));for(n="",r=0;r<c.length;r++){var l=c[r],u=e(t[l]);u&&(n&&(n+=","),n+=JSON.stringify(l)+":"+u)}return i.splice(o,1),"{"+n+"}"}}(e)},no=function(e,t,r){var a="",s=!0===e.schema.$async,i=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),n=e.self._getId(e.schema);if(e.opts.strictKeywords){var o=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(o){var c="unknown keyword: "+o;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(a+=" var validate = ",s&&(e.async=!0,a+="async "),a+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",n&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+n+" */ ")),"boolean"==typeof e.schema||!i&&!e.schema.$ref){var l=e.level,u=e.dataLevel,d=e.schema["false schema"],h=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(u||""),v="valid"+l;if(!1===e.schema){e.isTop?f=!0:a+=" var "+v+" = false; ",(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";var y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=s?" return data; ":" validate.errors = null; return true; ":a+=" var "+v+" = true; ";return e.isTop&&(a+=" }; return validate; "),a}if(e.isTop){var g=e.isTop;l=e.level=0,u=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var _="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{l=e.level,m="data"+((u=e.dataLevel)||"");if(n&&(e.baseId=e.resolve.url(e.baseId,n)),s&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+l+" = errors;"}v="valid"+l,f=!e.opts.allErrors;var b="",w="",P=e.schema.type,E=Array.isArray(P);if(P&&e.opts.nullable&&!0===e.schema.nullable&&(E?-1==P.indexOf("null")&&(P=P.concat("null")):"null"!=P&&(P=[P,"null"],E=!0)),E&&1==P.length&&(P=P[0],E=!1),e.schema.$ref&&i){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(i=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(a+=" "+e.RULES.all.$comment.code(e,"$comment")),P){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,P);var j=e.RULES.types[P];if(S||E||!0===j||j&&!Z(j)){h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type";var x=E?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[x](P,m,e.opts.strictNumbers,!0)+") { ",S){var $="dataType"+l,O="coerced"+l;a+=" var "+$+" = typeof "+m+"; var "+O+" = undefined; ","array"==e.opts.coerceTypes&&(a+=" if ("+$+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+$+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+O+" = "+m+"; } "),a+=" if ("+O+" !== undefined) ; ";var A=S;if(A)for(var k,F=-1,z=A.length-1;F<z;)"string"==(k=A[F+=1])?a+=" else if ("+$+" == 'number' || "+$+" == 'boolean') "+O+" = '' + "+m+"; else if ("+m+" === null) "+O+" = ''; ":"number"==k||"integer"==k?(a+=" else if ("+$+" == 'boolean' || "+m+" === null || ("+$+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==k&&(a+=" && !("+m+" % 1)"),a+=")) "+O+" = +"+m+"; "):"boolean"==k?a+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+O+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+O+" = true; ":"null"==k?a+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+O+" = null; ":"array"==e.opts.coerceTypes&&"array"==k&&(a+=" else if ("+$+" == 'string' || "+$+" == 'number' || "+$+" == 'boolean' || "+m+" == null) "+O+" = ["+m+"]; ");a+=" else {   ",(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+P.join(","):""+P,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+P.join(","):""+P,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } if ("+O+" !== undefined) {  ";var D=u?"data"+(u-1||""):"parentData";a+=" "+m+" = "+O+"; ",u||(a+="if ("+D+" !== undefined)"),a+=" "+D+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+O+"; } "}else{(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+P.join(","):""+P,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+P.join(","):""+P,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!i)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(a+=" } if (errors === ",a+=g?"0":"errs_"+l,a+=") { ",w+="}");else{var C=e.RULES;if(C)for(var R=-1,I=C.length-1;R<I;)if(Z(j=C[R+=1])){if(j.type&&(a+=" if ("+e.util.checkDataType(j.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==j.type&&e.schema.properties){d=e.schema.properties;var N=Object.keys(d);if(N)for(var T,L=-1,U=N.length-1;L<U;){if(void 0!==(M=d[T=N[L+=1]]).default){var q=m+e.util.getProperty(T);if(e.compositeRule){if(e.opts.strictDefaults){_="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else a+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+q+" === null || "+q+" === '' "),a+=" ) "+q+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(M.default)+" ":a+=" "+JSON.stringify(M.default)+" ",a+="; "}}}else if("array"==j.type&&Array.isArray(e.schema.items)){var V=e.schema.items;if(V){F=-1;for(var M,H=V.length-1;F<H;)if(void 0!==(M=V[F+=1]).default){q=m+"["+F+"]";if(e.compositeRule){if(e.opts.strictDefaults){_="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else a+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+q+" === null || "+q+" === '' "),a+=" ) "+q+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(M.default)+" ":a+=" "+JSON.stringify(M.default)+" ",a+="; "}}}var Q=j.rules;if(Q)for(var B,G=-1,K=Q.length-1;G<K;)if(Y(B=Q[G+=1])){var J=B.code(e,B.keyword,j.type);J&&(a+=" "+J+" ",f&&(b+="}"))}if(f&&(a+=" "+b+" ",b=""),j.type&&(a+=" } ",P&&P===j.type&&!S)){a+=" else { ";var W;h=e.schemaPath+".type",p=e.errSchemaPath+"/type";(W=W||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+P.join(","):""+P,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+P.join(","):""+P,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";y=a;a=W.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}f&&(a+=" if (errors === ",a+=g?"0":"errs_"+l,a+=") { ",w+="}")}}function Z(e){for(var t=e.rules,r=0;r<t.length;r++)if(Y(t[r]))return!0}function Y(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,a=0;a<r.length;a++)if(void 0!==e.schema[r[a]])return!0}(t)}return f&&(a+=" "+w+" "),g?(s?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }; return validate;"):a+=" var "+v+" = errors === errs_"+l+";",a},oo=$n.ucs2length,co=ro.Validation,lo=function e(t,r,a,s){var i=this,n=this._opts,o=[void 0],c={},l=[],u={},d=[],h={},p=[];r=r||{schema:t,refVal:o,refs:c};var f=uo.call(this,t,r,s),m=this._compilations[f.index];if(f.compiling)return m.callValidate=function e(){var t=m.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var v=this._formats,y=this.RULES;try{var g=b(t,r,a,s);m.validate=g;var _=m.callValidate;return _&&(_.schema=g.schema,_.errors=null,_.refs=g.refs,_.refVal=g.refVal,_.root=g.root,_.$async=g.$async,n.sourceCode&&(_.source=g.source)),g}finally{ho.call(this,t,r,s)}function b(t,a,s,u){var h=!a||a&&a.schema==t;if(a.schema!=r.schema)return e.call(i,t,a,s,u);var f,m=!0===t.$async,g=no({isTop:!0,schema:t,isRoot:h,baseId:u,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:ro.MissingRef,RULES:y,validate:no,util:$n,resolve:Mn,resolveRef:w,usePattern:S,useDefault:j,useCustomRule:x,opts:n,formats:v,logger:i.logger,self:i});g=go(o,vo)+go(l,fo)+go(d,mo)+go(p,yo)+g,n.processCode&&(g=n.processCode(g,t));try{f=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",g)(i,y,v,r,o,d,p,xn,oo,co),o[0]=f}catch(e){throw i.logger.error("Error compiling schema, function code:",g),e}return f.schema=t,f.errors=null,f.refs=c,f.refVal=o,f.root=h?f:a,m&&(f.$async=!0),!0===n.sourceCode&&(f.source={code:g,patterns:l,defaults:d}),f}function w(t,s,l){s=Mn.url(t,s);var u,d,h=c[s];if(void 0!==h)return E(u=o[h],d="refVal["+h+"]");if(!l&&r.refs){var p=r.refs[s];if(void 0!==p)return E(u=r.refVal[p],d=P(s,u))}d=P(s);var f=Mn.call(i,b,r,s);if(void 0===f){var m=a&&a[s];m&&(f=Mn.inlineRef(m,n.inlineRefs)?m:e.call(i,m,r,a,t))}if(void 0!==f)return function(e,t){var r=c[e];o[r]=t}(s,f),E(f,d);!function(e){delete c[e]}(s)}function P(e,t){var r=o.length;return o[r]=t,c[e]=r,"refVal"+r}function E(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function S(e){var t=u[e];return void 0===t&&(t=u[e]=l.length,l[t]=e),"pattern"+t}function j(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return $n.toQuotedString(e);case"object":if(null===e)return"null";var t=io(e),r=h[t];return void 0===r&&(r=h[t]=d.length,d[r]=e),"default"+r}}function x(e,t,r,a){if(!1!==i._opts.validateSchema){var s=e.definition.dependencies;if(s&&!s.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+s.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var c="keyword schema is invalid: "+i.errorsText(o.errors);if("log"!=i._opts.validateSchema)throw new Error(c);i.logger.error(c)}}var l,u=e.definition.compile,d=e.definition.inline,h=e.definition.macro;if(u)l=u.call(i,t,r,a);else if(h)l=h.call(i,t,r,a),!1!==n.validateSchema&&i.validateSchema(l,!0);else if(d)l=d.call(i,a,e.keyword,t,r);else if(!(l=e.definition.validate))return;if(void 0===l)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=p.length;return p[f]=l,{code:"customRule"+f,validate:l}}};function uo(e,t,r){var a=po.call(this,e,t,r);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:r},{index:a,compiling:!1})}function ho(e,t,r){var a=po.call(this,e,t,r);a>=0&&this._compilations.splice(a,1)}function po(e,t,r){for(var a=0;a<this._compilations.length;a++){var s=this._compilations[a];if(s.schema==e&&s.root==t&&s.baseId==r)return a}return-1}function fo(e,t){return"var pattern"+e+" = new RegExp("+$n.toQuotedString(t[e])+");"}function mo(e){return"var default"+e+" = defaults["+e+"];"}function vo(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function yo(e){return"var customRule"+e+" = customRules["+e+"];"}function go(e,t){if(!e.length)return"";for(var r="",a=0;a<e.length;a++)r+=t(a,e);return r}var _o=hn((function(e){var t=e.exports=function(){this._cache={}};t.prototype.put=function(e,t){this._cache[e]=t},t.prototype.get=function(e){return this._cache[e]},t.prototype.del=function(e){delete this._cache[e]},t.prototype.clear=function(){this._cache={}}})),bo=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,wo=[0,31,28,31,30,31,30,31,31,30,31,30,31],Po=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Eo=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,So=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,jo=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,xo=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,$o=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Oo=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Ao=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,ko=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Fo=zo;function zo(e){return e="full"==e?"full":"fast",$n.copy(zo[e])}function Do(e){var t=e.match(bo);if(!t)return!1;var r=+t[1],a=+t[2],s=+t[3];return a>=1&&a<=12&&s>=1&&s<=(2==a&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:wo[a])}function Co(e,t){var r=e.match(Po);if(!r)return!1;var a=r[1],s=r[2],i=r[3],n=r[5];return(a<=23&&s<=59&&i<=59||23==a&&59==s&&60==i)&&(!t||n)}zo.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":jo,url:xo,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Eo,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:To,uuid:$o,"json-pointer":Oo,"json-pointer-uri-fragment":Ao,"relative-json-pointer":ko},zo.full={date:Do,time:Co,"date-time":function(e){var t=e.split(Ro);return 2==t.length&&Do(t[0])&&Co(t[1],!0)},uri:function(e){return Io.test(e)&&So.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":jo,url:xo,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Eo,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:To,uuid:$o,"json-pointer":Oo,"json-pointer-uri-fragment":Ao,"relative-json-pointer":ko};var Ro=/t|\s/i;var Io=/\/|:/;var No=/[^\\]\\Z/;function To(e){if(No.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}var Lo=function(e,t,r){var a,s=" ",i=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;h?(s+=" var schema"+i+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+i):a=o;var p="maximum"==t,f=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],v=e.opts.$data&&m&&m.$data,y=p?"<":">",g=p?">":"<",_=void 0;if(!h&&"number"!=typeof o&&void 0!==o)throw new Error(t+" must be number");if(!v&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(f+" must be number or boolean");if(v){var b=e.util.getData(m.$data,n,e.dataPathArr),w="exclusive"+i,P="exclType"+i,E="exclIsNumber"+i,S="' + "+($="op"+i)+" + '";s+=" var schemaExcl"+i+" = "+b+"; ",s+=" var "+w+"; var "+P+" = typeof "+(b="schemaExcl"+i)+"; if ("+P+" != 'boolean' && "+P+" != 'undefined' && "+P+" != 'number') { ";var j;_=f;(j=j||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(_||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var x=s;s=j.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+x+"]); ":s+=" validate.errors = ["+x+"]; return false; ":s+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else if ( ",h&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" "+P+" == 'number' ? ( ("+w+" = "+a+" === undefined || "+b+" "+y+"= "+a+") ? "+d+" "+g+"= "+b+" : "+d+" "+g+" "+a+" ) : ( ("+w+" = "+b+" === true) ? "+d+" "+g+"= "+a+" : "+d+" "+g+" "+a+" ) || "+d+" !== "+d+") { var op"+i+" = "+w+" ? '"+y+"' : '"+y+"='; ",void 0===o&&(_=f,l=e.errSchemaPath+"/"+f,a=b,h=v)}else{S=y;if((E="number"==typeof m)&&h){var $="'"+S+"'";s+=" if ( ",h&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" ( "+a+" === undefined || "+m+" "+y+"= "+a+" ? "+d+" "+g+"= "+m+" : "+d+" "+g+" "+a+" ) || "+d+" !== "+d+") { "}else{E&&void 0===o?(w=!0,_=f,l=e.errSchemaPath+"/"+f,a=m,g+="="):(E&&(a=Math[p?"min":"max"](m,o)),m===(!E||a)?(w=!0,_=f,l=e.errSchemaPath+"/"+f,g+="="):(w=!1,S+="="));$="'"+S+"'";s+=" if ( ",h&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" "+d+" "+g+" "+a+" || "+d+" !== "+d+") { "}}_=_||t,(j=j||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(_||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+$+", limit: "+a+", exclusive: "+w+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be "+S+" ",s+=h?"' + "+a:a+"'"),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";x=s;return s=j.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+x+"]); ":s+=" validate.errors = ["+x+"]; return false; ":s+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",u&&(s+=" else { "),s},Uo=function(e,t,r){var a,s=" ",i=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(s+=" var schema"+i+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+i):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");s+="if ( ",h&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" "+d+".length "+("maxItems"==t?">":"<")+" "+a+") { ";var p=t,f=f||[];f.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxItems"==t?"more":"fewer",s+=" than ",s+=h?"' + "+a+" + '":""+o,s+=" items' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var m=s;return s=f.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s},qo=function(e,t,r){var a,s=" ",i=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(s+=" var schema"+i+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+i):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");var p="maxLength"==t?">":"<";s+="if ( ",h&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?s+=" "+d+".length ":s+=" ucs2length("+d+") ",s+=" "+p+" "+a+") { ";var f=t,m=m||[];m.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT be ",s+="maxLength"==t?"longer":"shorter",s+=" than ",s+=h?"' + "+a+" + '":""+o,s+=" characters' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var v=s;return s=m.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s},Vo=function(e,t,r){var a,s=" ",i=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(s+=" var schema"+i+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+i):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");s+="if ( ",h&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+a+") { ";var p=t,f=f||[];f.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxProperties"==t?"more":"fewer",s+=" than ",s+=h?"' + "+a+" + '":""+o,s+=" properties' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var m=s;return s=f.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s},Mo={$ref:function(e,t,r){var a,s,i=" ",n=e.level,o=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h="valid"+n;if("#"==c||"#/"==c)e.isRoot?(a=e.async,s="validate"):(a=!0===e.root.schema.$async,s="root.refVal[0]");else{var p=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===p){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(g=g||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;i=g.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),u&&(i+=" if (true) { ")}}else if(p.inline){var v=e.util.copy(e);v.level++;var y="valid"+v.level;v.schema=p.schema,v.schemaPath="",v.errSchemaPath=c,i+=" "+e.validate(v).replace(/validate\.schema/g,p.code)+" ",u&&(i+=" if ("+y+") { ")}else a=!0===p.$async||e.async&&!1!==p.$async,s=p.code}if(s){var g;(g=g||[]).push(i),i="",e.opts.passContext?i+=" "+s+".call(this, ":i+=" "+s+"( ",i+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var _=i+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?e.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(i=g.pop(),a){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(i+=" var "+h+"; "),i+=" try { await "+_+"; ",u&&(i+=" "+h+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(i+=" "+h+" = false; "),i+=" } ",u&&(i+=" if ("+h+") { ")}else i+=" if (!"+_+") { if (vErrors === null) vErrors = "+s+".errors; else vErrors = vErrors.concat("+s+".errors); errors = vErrors.length; } ",u&&(i+=" else { ")}return i},allOf:function(e,t,r){var a=" ",s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var u="valid"+c.level,d=c.baseId,h=!0,p=s;if(p)for(var f,m=-1,v=p.length-1;m<v;)f=p[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:e.util.schemaHasRules(f,e.RULES.all))&&(h=!1,c.schema=f,c.schemaPath=i+"["+m+"]",c.errSchemaPath=n+"/"+m,a+="  "+e.validate(c)+" ",c.baseId=d,o&&(a+=" if ("+u+") { ",l+="}"));return o&&(a+=h?" if (true) { ":" "+l.slice(0,-1)+" "),a},anyOf:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+s,h="errs__"+s,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level;if(n.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var v=p.baseId;a+=" var "+h+" = errors; var "+d+" = false;  ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var g=n;if(g)for(var _,b=-1,w=g.length-1;b<w;)_=g[b+=1],p.schema=_,p.schemaPath=o+"["+b+"]",p.errSchemaPath=c+"/"+b,a+="  "+e.validate(p)+" ",p.baseId=v,a+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",f+="}";e.compositeRule=p.compositeRule=y,a+=" "+f+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else l&&(a+=" if (true) { ");return a},$comment:function(e,t,r){var a=" ",s=e.schema[t],i=e.errSchemaPath+"/"+t,n=(e.opts.allErrors,e.util.toQuotedString(s));return!0===e.opts.$comment?a+=" console.log("+n+");":"function"==typeof e.opts.$comment&&(a+=" self._opts.$comment("+n+", "+e.util.toQuotedString(i)+", validate.root.schema);"),a},const:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+s,h=e.opts.$data&&n&&n.$data;h&&(a+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; "),h||(a+=" var schema"+s+" = validate.schema"+o+";"),a+="var "+d+" = equal("+u+", schema"+s+"); if (!"+d+") {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+s+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to constant' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",l&&(a+=" else { "),a},contains:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+s,h="errs__"+s,p=e.util.copy(e);p.level++;var f="valid"+p.level,m="i"+s,v=p.dataLevel=e.dataLevel+1,y="data"+v,g=e.baseId,_=e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all);if(a+="var "+h+" = errors;var "+d+";",_){var b=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=n,p.schemaPath=o,p.errSchemaPath=c,a+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var w=u+"["+m+"]";p.dataPathArr[v]=m;var P=e.validate(p);p.baseId=g,e.util.varOccurences(P,y)<2?a+=" "+e.util.varReplace(P,y,w)+" ":a+=" var "+y+" = "+w+"; "+P+" ",a+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=b,a+="  if (!"+f+") {"}else a+=" if ("+u+".length == 0) {";var E=E||[];E.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should contain a valid item' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;return a=E.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { ",_&&(a+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(a+=" } "),a},dependencies:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+s,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m={},v={},y=e.opts.ownProperties;for(w in n)if("__proto__"!=w){var g=n[w],_=Array.isArray(g)?v:m;_[w]=g}a+="var "+d+" = errors;";var b=e.errorPath;for(var w in a+="var missing"+s+";",v)if((_=v[w]).length){if(a+=" if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),l){a+=" && ( ";var P=_;if(P)for(var E=-1,S=P.length-1;E<S;){k=P[E+=1],E&&(a+=" || "),a+=" ( ( "+(C=u+(D=e.util.getProperty(k)))+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(k)+"') "),a+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?k:D)+") ) "}a+=")) {  ";var j="missing"+s,x="' + "+j+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,j,!0):b+" + "+j);var $=$||[];$.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+x+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==_.length?a+="property "+e.util.escapeQuotes(_[0]):a+="properties "+e.util.escapeQuotes(_.join(", ")),a+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var O=a;a=$.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+O+"]); ":a+=" validate.errors = ["+O+"]; return false; ":a+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var A=_;if(A)for(var k,F=-1,z=A.length-1;F<z;){k=A[F+=1];var D=e.util.getProperty(k),C=(x=e.util.escapeQuotes(k),u+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,k,e.opts.jsonPointers)),a+=" if ( "+C+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(k)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+x+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==_.length?a+="property "+e.util.escapeQuotes(_[0]):a+="properties "+e.util.escapeQuotes(_.join(", ")),a+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",l&&(p+="}",a+=" else { ")}e.errorPath=b;var R=h.baseId;for(var w in m){g=m[w];(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all))&&(a+=" "+f+" = true; if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),a+=") { ",h.schema=g,h.schemaPath=o+e.util.getProperty(w),h.errSchemaPath=c+"/"+e.util.escapeFragment(w),a+="  "+e.validate(h)+" ",h.baseId=R,a+=" }  ",l&&(a+=" if ("+f+") { ",p+="}"))}return l&&(a+="   "+p+" if ("+d+" == errors) {"),a},enum:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+s,h=e.opts.$data&&n&&n.$data;h&&(a+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ");var p="i"+s,f="schema"+s;h||(a+=" var "+f+" = validate.schema"+o+";"),a+="var "+d+";",h&&(a+=" if (schema"+s+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+s+")) "+d+" = false; else {"),a+=d+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+d+" = true; break; }",h&&(a+="  }  "),a+=" if (!"+d+") {   ";var m=m||[];m.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+s+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=m.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",l&&(a+=" else { "),a},format:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||"");if(!1===e.opts.format)return l&&(a+=" if (true) { "),a;var d,h=e.opts.$data&&n&&n.$data;h?(a+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",d="schema"+s):d=n;var p=e.opts.unknownFormats,f=Array.isArray(p);if(h){a+=" var "+(m="format"+s)+" = formats["+d+"]; var "+(v="isObject"+s)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+s)+" = "+v+" && "+m+".type || 'string'; if ("+v+") { ",e.async&&(a+=" var async"+s+" = "+m+".async; "),a+=" "+m+" = "+m+".validate; } if (  ",h&&(a+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),a+=" (","ignore"!=p&&(a+=" ("+d+" && !"+m+" ",f&&(a+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),a+=") || "),a+=" ("+m+" && "+y+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?a+=" (async"+s+" ? await "+m+"("+u+") : "+m+"("+u+")) ":a+=" "+m+"("+u+") ",a+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=e.formats[n])){if("ignore"==p)return e.logger.warn('unknown format "'+n+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(a+=" if (true) { "),a;if(f&&p.indexOf(n)>=0)return l&&(a+=" if (true) { "),a;throw new Error('unknown format "'+n+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,y=(v="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(v){var g=!0===m.async;m=m.validate}if(y!=r)return l&&(a+=" if (true) { "),a;if(g){if(!e.async)throw new Error("async format in sync schema");a+=" if (!(await "+(_="formats"+e.util.getProperty(n)+".validate")+"("+u+"))) { "}else{a+=" if (! ";var _="formats"+e.util.getProperty(n);v&&(_+=".validate"),a+="function"==typeof m?" "+_+"("+u+") ":" "+_+".test("+u+") ",a+=") { "}}var b=b||[];b.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",a+=h?""+d:""+e.util.toQuotedString(n),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match format \"",a+=h?"' + "+d+" + '":""+e.util.escapeQuotes(n),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+o:""+e.util.toQuotedString(n),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var w=a;return a=b.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+w+"]); ":a+=" validate.errors = ["+w+"]; return false; ":a+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",l&&(a+=" else { "),a},if:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+s,h="errs__"+s,p=e.util.copy(e);p.level++;var f="valid"+p.level,m=e.schema.then,v=e.schema.else,y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),g=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),_=p.baseId;if(y||g){var b;p.createErrors=!1,p.schema=n,p.schemaPath=o,p.errSchemaPath=c,a+=" var "+h+" = errors; var "+d+" = true;  ";var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,a+="  "+e.validate(p)+" ",p.baseId=_,p.createErrors=!0,a+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=w,y?(a+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",a+="  "+e.validate(p)+" ",p.baseId=_,a+=" "+d+" = "+f+"; ",y&&g?a+=" var "+(b="ifClause"+s)+" = 'then'; ":b="'then'",a+=" } ",g&&(a+=" else { ")):a+=" if (!"+f+") { ",g&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",a+="  "+e.validate(p)+" ",p.baseId=_,a+=" "+d+" = "+f+"; ",y&&g?a+=" var "+(b="ifClause"+s)+" = 'else'; ":b="'else'",a+=" } "),a+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+b+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match \"' + "+b+" + '\" schema' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" }   ",l&&(a+=" else { ")}else l&&(a+=" if (true) { ");return a},items:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+s,h="errs__"+s,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v="i"+s,y=p.dataLevel=e.dataLevel+1,g="data"+y,_=e.baseId;if(a+="var "+h+" = errors;var "+d+";",Array.isArray(n)){var b=e.schema.additionalItems;if(!1===b){a+=" "+d+" = "+u+".length <= "+n.length+"; ";var w=c;c=e.errSchemaPath+"/additionalItems",a+="  if (!"+d+") {   ";var P=P||[];P.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n.length+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have more than "+n.length+" items' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;a=P.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c=w,l&&(f+="}",a+=" else { ")}var S=n;if(S)for(var j,x=-1,$=S.length-1;x<$;)if(j=S[x+=1],e.opts.strictKeywords?"object"==typeof j&&Object.keys(j).length>0:e.util.schemaHasRules(j,e.RULES.all)){a+=" "+m+" = true; if ("+u+".length > "+x+") { ";var O=u+"["+x+"]";p.schema=j,p.schemaPath=o+"["+x+"]",p.errSchemaPath=c+"/"+x,p.errorPath=e.util.getPathExpr(e.errorPath,x,e.opts.jsonPointers,!0),p.dataPathArr[y]=x;var A=e.validate(p);p.baseId=_,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,O)+" ":a+=" var "+g+" = "+O+"; "+A+" ",a+=" }  ",l&&(a+=" if ("+m+") { ",f+="}")}if("object"==typeof b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))){p.schema=b,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",a+=" "+m+" = true; if ("+u+".length > "+n.length+") {  for (var "+v+" = "+n.length+"; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);O=u+"["+v+"]";p.dataPathArr[y]=v;A=e.validate(p);p.baseId=_,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,O)+" ":a+=" var "+g+" = "+O+"; "+A+" ",l&&(a+=" if (!"+m+") break; "),a+=" } }  ",l&&(a+=" if ("+m+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){p.schema=n,p.schemaPath=o,p.errSchemaPath=c,a+="  for (var "+v+" = 0; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);O=u+"["+v+"]";p.dataPathArr[y]=v;A=e.validate(p);p.baseId=_,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,O)+" ":a+=" var "+g+" = "+O+"; "+A+" ",l&&(a+=" if (!"+m+") break; "),a+=" }"}return l&&(a+=" "+f+" if ("+h+" == errors) {"),a},maximum:Lo,minimum:Lo,maxItems:Uo,minItems:Uo,maxLength:qo,minLength:qo,maxProperties:Vo,minProperties:Vo,multipleOf:function(e,t,r){var a,s=" ",i=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(s+=" var schema"+i+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+i):a=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");s+="var division"+i+";if (",h&&(s+=" "+a+" !== undefined && ( typeof "+a+" != 'number' || "),s+=" (division"+i+" = "+d+" / "+a+", ",e.opts.multipleOfPrecision?s+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":s+=" division"+i+" !== parseInt(division"+i+") ",s+=" ) ",h&&(s+="  )  "),s+=" ) {   ";var p=p||[];p.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be multiple of ",s+=h?"' + "+a:a+"'"),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var f=s;return s=p.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+f+"]); ":s+=" validate.errors = ["+f+"]; return false; ":s+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s},not:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+s,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){h.schema=n,h.schemaPath=o,h.errSchemaPath=c,a+=" var "+d+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),a+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=m,a+=" if ("+p+") {   ";var v=v||[];v.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var y=a;a=v.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else a+="  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(a+=" if (false) { ");return a},oneOf:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+s,h="errs__"+s,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v=p.baseId,y="prevValid"+s,g="passingSchemas"+s;a+="var "+h+" = errors , "+y+" = false , "+d+" = false , "+g+" = null; ";var _=e.compositeRule;e.compositeRule=p.compositeRule=!0;var b=n;if(b)for(var w,P=-1,E=b.length-1;P<E;)w=b[P+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))?(p.schema=w,p.schemaPath=o+"["+P+"]",p.errSchemaPath=c+"/"+P,a+="  "+e.validate(p)+" ",p.baseId=v):a+=" var "+m+" = true; ",P&&(a+=" if ("+m+" && "+y+") { "+d+" = false; "+g+" = ["+g+", "+P+"]; } else { ",f+="}"),a+=" if ("+m+") { "+d+" = "+y+" = true; "+g+" = "+P+"; }";return e.compositeRule=p.compositeRule=_,a+=f+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+g+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(a+=" } "),a},pattern:function(e,t,r){var a,s=" ",i=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h=e.opts.$data&&o&&o.$data;h?(s+=" var schema"+i+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+i):a=o,s+="if ( ",h&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'string') || "),s+=" !"+(h?"(new RegExp("+a+"))":e.usePattern(o))+".test("+d+") ) {   ";var p=p||[];p.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",s+=h?""+a:""+e.util.toQuotedString(o),s+="  } ",!1!==e.opts.messages&&(s+=" , message: 'should match pattern \"",s+=h?"' + "+a+" + '":""+e.util.escapeQuotes(o),s+="\"' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+e.util.toQuotedString(o),s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var f=s;return s=p.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+f+"]); ":s+=" validate.errors = ["+f+"]; return false; ":s+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s},properties:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+s,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m="key"+s,v="idx"+s,y=h.dataLevel=e.dataLevel+1,g="data"+y,_="dataProperties"+s,b=Object.keys(n||{}).filter(D),w=e.schema.patternProperties||{},P=Object.keys(w).filter(D),E=e.schema.additionalProperties,S=b.length||P.length,j=!1===E,x="object"==typeof E&&Object.keys(E).length,$=e.opts.removeAdditional,O=j||x||$,A=e.opts.ownProperties,k=e.baseId,F=e.schema.required;if(F&&(!e.opts.$data||!F.$data)&&F.length<e.opts.loopRequired)var z=e.util.toHash(F);function D(e){return"__proto__"!==e}if(a+="var "+d+" = errors;var "+f+" = true;",A&&(a+=" var "+_+" = undefined;"),O){if(a+=A?" "+_+" = "+_+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+m+" = "+_+"["+v+"]; ":" for (var "+m+" in "+u+") { ",S){if(a+=" var isAdditional"+s+" = !(false ",b.length)if(b.length>8)a+=" || validate.schema"+o+".hasOwnProperty("+m+") ";else{var C=b;if(C)for(var R=-1,I=C.length-1;R<I;)J=C[R+=1],a+=" || "+m+" == "+e.util.toQuotedString(J)+" "}if(P.length){var N=P;if(N)for(var T=-1,L=N.length-1;T<L;)ie=N[T+=1],a+=" || "+e.usePattern(ie)+".test("+m+") "}a+=" ); if (isAdditional"+s+") { "}if("all"==$)a+=" delete "+u+"["+m+"]; ";else{var U=e.errorPath,q="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),j)if($)a+=" delete "+u+"["+m+"]; ";else{a+=" "+f+" = false; ";var V=c;c=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+q+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var M=a;a=re.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+M+"]); ":a+=" validate.errors = ["+M+"]; return false; ":a+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,l&&(a+=" break; ")}else if(x)if("failing"==$){a+=" var "+d+" = errors;  ";var H=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var Q=u+"["+m+"]";h.dataPathArr[y]=m;var B=e.validate(h);h.baseId=k,e.util.varOccurences(B,g)<2?a+=" "+e.util.varReplace(B,g,Q)+" ":a+=" var "+g+" = "+Q+"; "+B+" ",a+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=h.compositeRule=H}else{h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);Q=u+"["+m+"]";h.dataPathArr[y]=m;B=e.validate(h);h.baseId=k,e.util.varOccurences(B,g)<2?a+=" "+e.util.varReplace(B,g,Q)+" ":a+=" var "+g+" = "+Q+"; "+B+" ",l&&(a+=" if (!"+f+") break; ")}e.errorPath=U}S&&(a+=" } "),a+=" }  ",l&&(a+=" if ("+f+") { ",p+="}")}var G=e.opts.useDefaults&&!e.compositeRule;if(b.length){var K=b;if(K)for(var J,W=-1,Z=K.length-1;W<Z;){var Y=n[J=K[W+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){var X=e.util.getProperty(J),ee=(Q=u+X,G&&void 0!==Y.default);h.schema=Y,h.schemaPath=o+X,h.errSchemaPath=c+"/"+e.util.escapeFragment(J),h.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),h.dataPathArr[y]=e.util.toQuotedString(J);B=e.validate(h);if(h.baseId=k,e.util.varOccurences(B,g)<2){B=e.util.varReplace(B,g,Q);var te=Q}else{te=g;a+=" var "+g+" = "+Q+"; "}if(ee)a+=" "+B+" ";else{if(z&&z[J]){a+=" if ( "+te+" === undefined ",A&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+f+" = false; ";U=e.errorPath,V=c;var re,ae=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(U,J,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+ae+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+ae+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";M=a;a=re.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+M+"]); ":a+=" validate.errors = ["+M+"]; return false; ":a+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,e.errorPath=U,a+=" } else { "}else l?(a+=" if ( "+te+" === undefined ",A&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+f+" = true; } else { "):(a+=" if ("+te+" !== undefined ",A&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=" ) { ");a+=" "+B+" } "}}l&&(a+=" if ("+f+") { ",p+="}")}}if(P.length){var se=P;if(se)for(var ie,ne=-1,oe=se.length-1;ne<oe;){Y=w[ie=se[ne+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){h.schema=Y,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),a+=A?" "+_+" = "+_+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+m+" = "+_+"["+v+"]; ":" for (var "+m+" in "+u+") { ",a+=" if ("+e.usePattern(ie)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);Q=u+"["+m+"]";h.dataPathArr[y]=m;B=e.validate(h);h.baseId=k,e.util.varOccurences(B,g)<2?a+=" "+e.util.varReplace(B,g,Q)+" ":a+=" var "+g+" = "+Q+"; "+B+" ",l&&(a+=" if (!"+f+") break; "),a+=" } ",l&&(a+=" else "+f+" = true; "),a+=" }  ",l&&(a+=" if ("+f+") { ",p+="}")}}}return l&&(a+=" "+p+" if ("+d+" == errors) {"),a},propertyNames:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+s,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(a+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){h.schema=n,h.schemaPath=o,h.errSchemaPath=c;var f="key"+s,m="idx"+s,v="i"+s,y="' + "+f+" + '",g="data"+(h.dataLevel=e.dataLevel+1),_="dataProperties"+s,b=e.opts.ownProperties,w=e.baseId;b&&(a+=" var "+_+" = undefined; "),a+=b?" "+_+" = "+_+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+_+".length; "+m+"++) { var "+f+" = "+_+"["+m+"]; ":" for (var "+f+" in "+u+") { ",a+=" var startErrs"+s+" = errors; ";var P=f,E=e.compositeRule;e.compositeRule=h.compositeRule=!0;var S=e.validate(h);h.baseId=w,e.util.varOccurences(S,g)<2?a+=" "+e.util.varReplace(S,g,P)+" ":a+=" var "+g+" = "+P+"; "+S+" ",e.compositeRule=h.compositeRule=E,a+=" if (!"+p+") { for (var "+v+"=startErrs"+s+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(a+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),l&&(a+=" break; "),a+=" } }"}return l&&(a+="  if ("+d+" == errors) {"),a},required:function(e,t,r){var a=" ",s=e.level,i=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+s,h=e.opts.$data&&n&&n.$data;h&&(a+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ");var p="schema"+s;if(!h)if(n.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=n;if(m)for(var v,y=-1,g=m.length-1;y<g;){v=m[y+=1];var _=e.schema.properties[v];_&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))||(f[f.length]=v)}}else f=n;if(h||f.length){var b=e.errorPath,w=h||f.length>=e.opts.loopRequired,P=e.opts.ownProperties;if(l)if(a+=" var missing"+s+"; ",w){h||(a+=" var "+p+" = validate.schema"+o+"; ");var E="' + "+(A="schema"+s+"["+(x="i"+s)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,A,e.opts.jsonPointers)),a+=" var "+d+" = true; ",h&&(a+=" if (schema"+s+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+s+")) "+d+" = false; else {"),a+=" for (var "+x+" = 0; "+x+" < "+p+".length; "+x+"++) { "+d+" = "+u+"["+p+"["+x+"]] !== undefined ",P&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+x+"]) "),a+="; if (!"+d+") break; } ",h&&(a+="  }  "),a+="  if (!"+d+") {   ",(O=O||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;a=O.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else{a+=" if ( ";var j=f;if(j)for(var x=-1,$=j.length-1;x<$;){F=j[x+=1],x&&(a+=" || "),a+=" ( ( "+(R=u+(C=e.util.getProperty(F)))+" === undefined ",P&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:C)+") ) "}a+=") {  ";var O;E="' + "+(A="missing"+s)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,A,!0):b+" + "+A),(O=O||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";S=a;a=O.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else if(w){h||(a+=" var "+p+" = validate.schema"+o+"; ");var A;E="' + "+(A="schema"+s+"["+(x="i"+s)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,A,e.opts.jsonPointers)),h&&(a+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),a+=" for (var "+x+" = 0; "+x+" < "+p+".length; "+x+"++) { if ("+u+"["+p+"["+x+"]] === undefined ",P&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+x+"]) "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(a+="  }  ")}else{var k=f;if(k)for(var F,z=-1,D=k.length-1;z<D;){F=k[z+=1];var C=e.util.getProperty(F),R=(E=e.util.escapeQuotes(F),u+C);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,F,e.opts.jsonPointers)),a+=" if ( "+R+" === undefined ",P&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else l&&(a+=" if (true) {");return a},uniqueItems:function(e,t,r){var a,s=" ",i=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),h="valid"+i,p=e.opts.$data&&o&&o.$data;if(p?(s+=" var schema"+i+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+i):a=o,(o||p)&&!1!==e.opts.uniqueItems){p&&(s+=" var "+h+"; if ("+a+" === false || "+a+" === undefined) "+h+" = true; else if (typeof "+a+" != 'boolean') "+h+" = false; else { "),s+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))s+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{s+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var v="checkDataType"+(m?"s":"");s+=" if ("+e.util[v](f,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(s+=" if (typeof item == 'string') item = '\"' + item; "),s+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}s+=" } ",p&&(s+="  }  "),s+=" if (!"+h+") {   ";var y=y||[];y.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var g=s;s=y.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",u&&(s+=" else { ")}else u&&(s+=" if (true) { ");return s},validate:no},Ho=$n.toHash,Qo=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Bo=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var a,s=t[r].split("/"),i=e;for(a=1;a<s.length;a++)i=i[s[a]];for(a=0;a<Qo.length;a++){var n=Qo[a],o=i[n];o&&(i[n]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},Go=ro.MissingRef,Ko=function e(t,r,a){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(a=r,r=void 0);var i=n(t).then((function(){var e=s._addSchema(t,void 0,r);return e.validate||function e(t){try{return s._compile(t)}catch(e){if(e instanceof Go)return a(e);throw e}function a(a){var i=a.missingSchema;if(l(i))throw new Error("Schema "+i+" is loaded but "+a.missingRef+" cannot be resolved");var o=s._loadingSchemas[i];return o||(o=s._loadingSchemas[i]=s._opts.loadSchema(i)).then(c,c),o.then((function(e){if(!l(i))return n(e).then((function(){l(i)||s.addSchema(e,i,void 0,r)}))})).then((function(){return e(t)}));function c(){delete s._loadingSchemas[i]}function l(e){return s._refs[e]||s._schemas[e]}}}(e)}));a&&i.then((function(e){a(null,e)}),a);return i;function n(t){var r=t.$schema;return r&&!s.getSchema(r)?e.call(s,{$ref:r},!0):Promise.resolve()}};var Jo=function(e,t,r){var a,s,i=" ",n=e.level,o=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(o||""),p="valid"+n,f="errs__"+n,m=e.opts.$data&&c&&c.$data;m?(i+=" var schema"+n+" = "+e.util.getData(c.$data,o,e.dataPathArr)+"; ",s="schema"+n):s=c;var v,y,g,_,b,w="definition"+n,P=this.definition,E="";if(m&&P.$data){b="keywordValidate"+n;var S=P.validateSchema;i+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+b+" = "+w+".validate;"}else{if(!(_=e.useCustomRule(this,c,e.schema,e)))return;s="validate.schema"+l,b=_.code,v=P.compile,y=P.inline,g=P.macro}var j=b+".errors",x="i"+n,$="ruleErr"+n,O=P.async;if(O&&!e.async)throw new Error("async keyword in sync schema");if(y||g||(i+=j+" = null;"),i+="var "+f+" = errors;var "+p+";",m&&P.$data&&(E+="}",i+=" if ("+s+" === undefined) { "+p+" = true; } else { ",S&&(E+="}",i+=" "+p+" = "+w+".validateSchema("+s+"); if ("+p+") { ")),y)P.statements?i+=" "+_.validate+" ":i+=" "+p+" = "+_.validate+"; ";else if(g){var A=e.util.copy(e);E="";A.level++;var k="valid"+A.level;A.schema=_.validate,A.schemaPath="";var F=e.compositeRule;e.compositeRule=A.compositeRule=!0;var z=e.validate(A).replace(/validate\.schema/g,b);e.compositeRule=A.compositeRule=F,i+=" "+z}else{(I=I||[]).push(i),i="",i+="  "+b+".call( ",e.opts.passContext?i+="this":i+="self",v||!1===P.schema?i+=" , "+h+" ":i+=" , "+s+" , "+h+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var D=o?"data"+(o-1||""):"parentData",C=o?e.dataPathArr[o]:"parentDataProperty",R=i+=" , "+D+" , "+C+" , rootData )  ";i=I.pop(),!1===P.errors?(i+=" "+p+" = ",O&&(i+="await "),i+=R+"; "):i+=O?" var "+(j="customErrors"+n)+" = null; try { "+p+" = await "+R+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+j+" = e.errors; else throw e; } ":" "+j+" = null; "+p+" = "+R+"; "}if(P.modifying&&(i+=" if ("+D+") "+h+" = "+D+"["+C+"];"),i+=""+E,P.valid)d&&(i+=" if (true) { ");else{var I;i+=" if ( ",void 0===P.valid?(i+=" !",i+=g?""+k:""+p):i+=" "+!P.valid+" ",i+=") { ",a=this.keyword,(I=I||[]).push(i),i="",(I=I||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var N=i;i=I.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+N+"]); ":i+=" validate.errors = ["+N+"]; return false; ":i+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var T=i;i=I.pop(),y?P.errors?"full"!=P.errors&&(i+="  for (var "+x+"="+f+"; "+x+"<errors; "+x+"++) { var "+$+" = vErrors["+x+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+$+".schema = "+s+"; "+$+".data = "+h+"; "),i+=" } "):!1===P.errors?i+=" "+T+" ":(i+=" if ("+f+" == errors) { "+T+" } else {  for (var "+x+"="+f+"; "+x+"<errors; "+x+"++) { var "+$+" = vErrors["+x+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+$+".schema = "+s+"; "+$+".data = "+h+"; "),i+=" } } "):g?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===P.errors?i+=" "+T+" ":(i+=" if (Array.isArray("+j+")) { if (vErrors === null) vErrors = "+j+"; else vErrors = vErrors.concat("+j+"); errors = vErrors.length;  for (var "+x+"="+f+"; "+x+"<errors; "+x+"++) { var "+$+" = vErrors["+x+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+";  "+$+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(i+=" "+$+".schema = "+s+"; "+$+".data = "+h+"; "),i+=" } } else { "+T+" } "),i+=" } ",d&&(i+=" else { ")}return i},Wo={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Zo={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Wo.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Wo.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Yo=/^[a-z_$][a-z0-9_$-]*$/i,Xo=function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!Yo.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var a=t.type;if(Array.isArray(a))for(var s=0;s<a.length;s++)n(e,a[s],t);else n(e,a,t);var i=t.metaSchema;i&&(t.$data&&this._opts.$data&&(i={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(i,!0))}function n(e,t,a){for(var s,i=0;i<r.length;i++){var n=r[i];if(n.type==t){s=n;break}}s||(s={type:t,rules:[]},r.push(s));var o={keyword:e,definition:a,custom:!0,code:Jo,implements:a.implements};s.rules.push(o),r.custom[e]=o}return r.keywords[e]=r.all[e]=!0,this},ec=function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},tc=function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var a=t[r].rules,s=0;s<a.length;s++)if(a[s].keyword==e){a.splice(s,1);break}return this},rc=function e(t,r){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(Zo,!0);if(a(t))return!0;if(e.errors=a.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1};var ac={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},sc=cc;cc.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var s=r(t);!0!==r.$async&&(this.errors=r.errors);return s},cc.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},cc.prototype.addSchema=function(e,t,r,a){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,r,a);return this}var i=this._getId(e);if(void 0!==i&&"string"!=typeof i)throw new Error("schema id must be string");return fc(this,t=Mn.normalizeId(t||i)),this._schemas[t]=this._addSchema(e,r,a,!0),this},cc.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},cc.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(ic)?ic:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var s="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(s);this.logger.error(s)}return a},cc.prototype.getSchema=function(e){var t=lc(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=Mn.schema.call(e,{schema:{}},t);if(r){var a=r.schema,s=r.root,i=r.baseId,n=lo.call(e,a,s,void 0,i);return e._fragments[t]=new qn({ref:t,fragment:!0,schema:a,root:s,baseId:i,validate:n}),n}}(this,e)}},cc.prototype.removeSchema=function(e){if(e instanceof RegExp)return uc(this,this._schemas,e),uc(this,this._refs,e),this;switch(typeof e){case"undefined":return uc(this,this._schemas),uc(this,this._refs),this._cache.clear(),this;case"string":var t=lc(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,a=r?r(e):e;this._cache.del(a);var s=this._getId(e);s&&(s=Mn.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},cc.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},cc.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,s="",i=0;i<e.length;i++){var n=e[i];n&&(s+=a+n.dataPath+" "+n.message+r)}return s.slice(0,-r.length)},cc.prototype._addSchema=function(e,t,r,a){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var s=this._opts.serialize,i=s?s(e):e,n=this._cache.get(i);if(n)return n;a=a||!1!==this._opts.addUsedSchema;var o=Mn.normalizeId(this._getId(e));o&&a&&fc(this,o);var c,l=!1!==this._opts.validateSchema&&!t;l&&!(c=o&&o==Mn.normalizeId(e.$schema))&&this.validateSchema(e,!0);var u=Mn.ids.call(this,e),d=new qn({id:o,schema:e,localRefs:u,cacheKey:i,meta:r});"#"!=o[0]&&a&&(this._refs[o]=d);this._cache.put(i,d),l&&c&&this.validateSchema(e,!0);return d},cc.prototype._compile=function(e,t){if(e.compiling)return e.validate=s,s.schema=e.schema,s.errors=null,s.root=t||s,!0===e.schema.$async&&(s.$async=!0),s;var r,a;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{a=lo.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=a,e.refs=a.refs,e.refVal=a.refVal,e.root=a.root,a;function s(){var t=e.validate,r=t.apply(this,arguments);return s.errors=t.errors,r}},cc.prototype.compileAsync=Ko,cc.prototype.addKeyword=Xo,cc.prototype.getKeyword=ec,cc.prototype.removeKeyword=tc,cc.prototype.validateKeyword=rc,cc.ValidationError=ro.Validation,cc.MissingRefError=ro.MissingRef,cc.$dataMetaSchema=Bo;var ic="http://json-schema.org/draft-07/schema",nc=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],oc=["/properties"];function cc(e){if(!(this instanceof cc))return new cc(e);var t,r;e=this._opts=$n.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:mc,warn:mc,error:mc};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=Fo(e.format),this._cache=e.cache||new _o,this._loadingSchemas={},this._compilations=[],this.RULES=((t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}]).all=Ho(r=["type","$comment"]),t.types=Ho(["number","integer","string","array","object","boolean","null"]),t.forEach((function(e){e.rules=e.rules.map((function(e){var a;if("object"==typeof e){var s=Object.keys(e)[0];a=e[s],e=s,a.forEach((function(e){r.push(e),t.all[e]=!0}))}return r.push(e),t.all[e]={keyword:e,code:Mo[e],implements:a}})),t.all.$comment={keyword:"$comment",code:Mo.$comment},e.type&&(t.types[e.type]=e)})),t.keywords=Ho(r.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t),this._getId=function(e){switch(e.schemaId){case"auto":return pc;case"id":return dc;default:return hc}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=io),this._metaOpts=function(e){for(var t=$n.copy(e._opts),r=0;r<nc.length;r++)delete t[nc[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=ac,e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var r=Wo;e._opts.$data&&(r=Bo(r,oc));e.addMetaSchema(r,ic,!0),e._refs["http://json-schema.org/schema"]=ic}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function lc(e,t){return t=Mn.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function uc(e,t,r){for(var a in t){var s=t[a];s.meta||r&&!r.test(a)||(e._cache.del(s.cacheKey),delete t[a])}}function dc(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function hc(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function pc(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function fc(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function mc(){}const vc=new sc({allErrors:!0,jsonPointers:!0}),yc={type:"object",properties:{type:{type:"string"},style:{},discover_existing:{type:"boolean"},standard_configuration:{type:"boolean"},title:{type:["boolean","string"]},am_pm:{type:"boolean"},time_step:{type:"integer",minimum:1,maximum:60},domains:{type:"object",additionalProperties:{type:["object","null"],properties:{icon:{type:"string"},actions:{type:"array",items:{type:"object",properties:{icon:{type:"string"},name:{type:"string"},service:{type:"string"},service_data:{type:"object"},variable:{type:"object",properties:{field:{type:"string"},name:{type:"string"},unit:{type:"string"},min:{type:"number",minimum:0},max:{type:"number",minimum:1},step:{type:"number",minimum:.1},optional:{type:"boolean"},show_percentage:{type:"boolean"}},required:["field"],additionalProperties:!1}},required:["service"],additionalProperties:!1}},include:{type:"array",items:{type:"string"}},exclude:{type:"array",items:{type:"string"}}},additionalProperties:!1}},entities:{type:"object",additionalProperties:{type:["object","null"],properties:{name:{type:"string"},icon:{type:"string"},actions:{type:"array",items:{type:"object",properties:{icon:{type:"string"},name:{type:"string"},service:{type:"string"},service_data:{type:"object"},variable:{type:"object",properties:{field:{type:"string"},name:{type:"string"},unit:{type:"string"},min:{type:"integer"},max:{type:"integer"},step:{type:"integer"},optional:{type:"boolean"},show_percentage:{type:"boolean"}},required:["field"],additionalProperties:!1}},required:["service"],additionalProperties:!1}}},additionalProperties:!1}},groups:{type:"object",additionalProperties:{type:"object",properties:{name:{type:"string"},icon:{type:"string"},entities:{type:"array",items:{type:"string"}},domains:{type:"array",items:{type:"string"}}},additionalProperties:!1,oneOf:[{required:["entities"]},{required:["domains"]}]}}},additionalProperties:!1};const gc={group:"",entity:"",action:"",newItem:!1,actionConfirmed:!1,editItem:"",time:{value:on("12:00")},days:[],daysType:"daily",levelEnabled:!1,level:0},_c={sunrise:null,sunset:null,title:!0,am_pm:!1,time_step:10};let bc=class extends ae{constructor(){super(...arguments),this._val=0,this.event=null,this.formatAmPm="false",this.stepSize=10,this.sunrise=0,this.sunset=0,this.maxOffset=2}set value(e){let t=this.value;this._val=e,this.requestUpdate("value",t)}get value(){return an(this._val,this.stepSize)}updated(){let e=new CustomEvent("change",{detail:{event:this.event}});this.dispatchEvent(e)}firstUpdated(){"undefined"==this.event&&(this.event=null);let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=nn(this.value,e)}render(){return T`
      <div class="time-picker">
        <div class="hours-up">
          <mwc-button @click="${this.hoursUp}">
            <ha-icon icon="hass:chevron-up"></ha-icon>
          </mwc-button>
        </div>
        <div class="hours">${this.getHours()}</div>
        <div class="hours-down">
          <mwc-button @click="${this.hoursDown}">
            <ha-icon icon="hass:chevron-down"></ha-icon>
          </mwc-button>
        </div>
        <div class="separator">:</div>
        <div class="minutes-up">
          <mwc-button @click="${this.minutesUp}">
            <ha-icon icon="hass:chevron-up"></ha-icon>
          </mwc-button>
        </div>
        <div class="minutes">${this.getMinutes()}</div>
        <div class="minutes-down">
          <mwc-button @click="${this.minutesDown}">
            <ha-icon icon="hass:chevron-down"></ha-icon>
          </mwc-button>
        </div>
        ${this.getSuffix()}
        <div class="options">
          ${this.getSunModeToggle()}
        </div>
      </div>
    `}getHours(){return sn(this.value,{amPm:"true"==this.formatAmPm}).hours}getMinutes(){return sn(this.value,{amPm:"true"==this.formatAmPm}).minutes}hoursUp(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=nn(this._val+60,e)}hoursDown(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=nn(this._val-60,e)}minutesUp(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=nn(this._val+this.stepSize,e)}minutesDown(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=nn(this._val-this.stepSize,e)}getSunModeToggle(){if(isNaN(this.sunrise)||isNaN(this.sunset))return T``;let e=Math.abs(nn(this._val-this.sunrise,{stepSize:this.stepSize,signed:!0})),t=Math.abs(nn(this._val-this.sunset,{stepSize:this.stepSize,signed:!0}));return this.event||e<=60*this.maxOffset||t<=60*this.maxOffset?T`
          <mwc-button @click="${this.toggleMode}" class="${this.event?"active":""}">
            <ha-icon icon="hass:theme-light-dark"></ha-icon>
          </mwc-button>
      `:T`
          <mwc-button disabled="disabled">
            <ha-icon icon="hass:theme-light-dark"></ha-icon>
          </mwc-button>
      `}getAmPm(){return sn(this._val,{amPm:"true"==this.formatAmPm}).amPm}getBeforeAfter(){return this.value<0?tn("words.before"):tn("words.after")}getSuffix(){return this.event?T`
      <div class="suffix">
        <mwc-button @click="${this.toggleBeforeAfter}">
          ${this.getBeforeAfter()}
        </mwc-button>
        <mwc-button @click="${this.toggleSunriseSunset}">
          <ha-icon icon="hass:${"sunrise"==this.event?"weather-sunny":"weather-night"}"></ha-icon>
        </mwc-button>
      </div>
    `:"true"==this.formatAmPm?T`
      <div class="suffix">
        <mwc-button @click="${this.toggleAmPm}">
          ${this.getAmPm()}
        </mwc-button>
      </div>
    `:T``}toggleAmPm(){this._val<720?this.value=nn(this._val+720):this.value=nn(this._val-720)}toggleBeforeAfter(){this.value=-this._val}toggleSunriseSunset(){this.event="sunrise"==this.event?"sunset":"sunrise",this.value=this._val}toggleMode(){let e=this.value;if(this.event){let t="sunrise"==this.event?this.sunrise:this.sunset;this.event=null,this.value=e+t}else{let t;Math.abs(e-this.sunrise)<Math.abs(e-this.sunset)?(t=this.sunrise,this.event="sunrise"):(t=this.sunset,this.event="sunset"),this.value=e-t}}};bc.styles=te`
      div.time-picker {
        display: grid;
        grid-template-columns: min-content min-content min-content 1fr min-content;
        grid-template-rows: min-content min-content min-content;
        grid-template-areas: "hours-up   .         minutes-up   suffix options"
                             "hours      separator minutes      suffix options"
                             "hours-down .         minutes-down suffix options";
        grid-gap: 10px 0px;
        align-items: center;
      }

      div.hours-up { grid-area: hours-up; }
      div.hours { grid-area: hours; }
      div.hours-down { grid-area: hours-down; }
      div.separator { grid-area: separator; }
      div.minutes-up { grid-area: minutes-up; }
      div.minutes { grid-area: minutes; }
      div.minutes-down { grid-area: minutes-down; }
      div.suffix { grid-area: suffix; flex-grow: 1; }
      div.options { grid-area: options; }

      div.hours-up, div.hours-down, div.minutes-up, div.minutes-down {
        --mdc-icon-size: 42px;
      }

      div.hours, div.minutes {
        font-size: 42px;
        text-align: center;
      }

      div.separator {
        font-size: 36px;
      }

      div.suffix mwc-button {
        --mdc-typography-button-font-size: 16px;
        --mdc-icon-size: 32px;
      }

      mwc-button.active {
        background: var(--primary-color);
        --mdc-theme-primary: var(--text-primary-color);
        border-radius: 4px;
      }
  `,t([Z({type:Number})],bc.prototype,"value",null),t([Z({type:String})],bc.prototype,"event",void 0),t([Z({type:String})],bc.prototype,"formatAmPm",void 0),t([Z({type:Number})],bc.prototype,"stepSize",void 0),t([Z({type:Number})],bc.prototype,"sunrise",void 0),t([Z({type:Number})],bc.prototype,"sunset",void 0),bc=t([J("time-picker")],bc),window.customCards=window.customCards||[],window.customCards.push({type:"scheduler-card",name:"Scheduler Card",description:"Card to manage schedule entities made with scheduler-component."}),e.SchedulerCard=class extends ae{constructor(){super(...arguments),this._config=_c,this.Config=new En,this.entries=[],this.selection=Object.assign({},gc),this.await_update=!0}static get styles(){return Sn}set hass(e){this.await_update&&(this._hass||this.init(e),this.update_entries(e),this._hass=e)}init(e){if(!rn()||"null"==rn()&&e.selectedLanguage)try{localStorage.setItem("selectedLanguage",e.selectedLanguage)}catch(e){console.log("failed to set language: "+e)}else if(!rn()||"null"==rn()&&e.language)try{localStorage.setItem("selectedLanguage",e.language)}catch(e){console.log("failed to set language: "+e)}void 0!==e.states["sun.sun"]&&Object.assign(this._config,{sunrise:on(e.states["sun.sun"].attributes.next_rising),sunset:on(e.states["sun.sun"].attributes.next_setting)}),console.info(`%c   SCHEDULER-CARD   \n%c   Version: ${"1.3.3".padEnd(8," ")}\n%c   Language: ${rn().padEnd(7," ")}`,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray","color: white; font-weight: bold; background: dimgray"),this.Config.LoadEntities(e.states)}update_entries(e){let t=Na(e.states,e=>_n(e.entity_id)).map(e=>function(e,t){let r=e.attributes.entries.map(e=>{let t=fn.exec(e),r=mn.exec(t[3]),a={days:t[1].split("").map(Number),actions:r.map(Number).filter(e=>!isNaN(e))},s=vn.exec(t[2]);if(s){let e="SR"==s[2]?"sunrise":"sunset",t=s[1]?-on(s[1]):on(s[3]);Object.assign(a,{time:{value:t,event:e}})}else{let e=on(t[2]);Object.assign(a,{time:{value:e}})}return a}),a=e.attributes.actions.map(e=>{let r={},a=yn(e.entity)?e.entity:yn(e.service)+"."+e.entity,s=e.service,i=Ya(e,["service","entity"]);if(yn(a)==yn(s)&&(s=s.split(".").pop()),!t.FindEntity(a))return;Object.assign(r,{entity:a});let n=gn(i?Object.assign({service:s,service_data:i}):Object.assign({service:s}));if(!t.FindAction(a,n)){let e=t.GetActionsForEntity(a).find(e=>!!e.hasOwnProperty("variable")&&!!i.hasOwnProperty(e.variable.field));if(!e)return;{let t=e.variable.field;Object.assign(r,{level:Number(i[t])}),i=Ya(i,t),n=gn(i?Object.assign({service:s,service_data:i}):Object.assign({service:s}))}}return Object.assign(r,{action:n}),r});return{id:e.entity_id,enabled:"off"!=e.state,entries:r,actions:a}}(e,this.Config)).filter(e=>void 0!==e.actions[0]);t!=this.entries&&(this.entries=t,this.await_update=!1,this.requestUpdate())}awaitUpdate(){this.await_update=!0}render(){return this.selection.newItem||this.selection.editItem?this.selection.newItem&&!this.selection.actionConfirmed?T`
        <ha-card>
          ${this.getTitle()}
          <div class="card-section first">
            <div class="header">${tn("fields.group")}</div>
            <div class="option-list">
            ${this.getGroups()}
            </div>
          </div>
          <div class="card-section">
            <div class="header">${tn("fields.entity")}</div>
            <div class="option-list">
            ${this.getEntities()}
            </div>
          </div>
          <div class="card-section">
            <div class="header">${tn("fields.action")}</div>
            <div class="option-list">
            ${this.getActions()}
            </div>
          </div>
          <div class="card-section last">
            <mwc-button outlined @click="${()=>this.editItemCancel()}">${tn("actions.cancel")}</mwc-button>
            ${this.selection.action?T`<mwc-button outlined @click="${()=>this.newItemConfirm()}">${tn("actions.next")}</mwc-button>`:T`<mwc-button outlined disabled>${tn("actions.next")}</mwc-button>`}
          </div>
        </ha-card>
      `:T`
      <ha-card>
        ${this.getTitle()}
        ${this.showEditor()}
      </ha-card>
      `:T`
      <ha-card>
        ${this.getTitle()}
        <div class="card-section first">
        ${this.getEntries()}
        </div>
        <div class="card-section last">
          <mwc-button outlined @click="${()=>{this.newItem()}}">${tn("actions.add")}</mwc-button>
        </div>
      </ha-card>
      `}getTitle(){return"string"==typeof this._config.title?T`<div class="card-header">${this._config.title}</div>`:this._config.title?T`<div class="card-header">${tn("scheduler")}</div>`:T``}newItem(){this.selection=Kt(Object.assign({},gc),{newItem:!0}),this.requestUpdate()}editItemCancel(){this.selection=Object.assign({},gc),this.requestUpdate()}newItemConfirm(){this.selection=Kt(Object.assign({},gc),{newItem:!0,actionConfirmed:!0,entity:this.selection.entity,action:this.selection.action}),this.requestUpdate()}getEntries(){return this.entries&&this.entries.length?this.entries.map(e=>{if(!e.actions[0])return T``;let t=this.Config.FindEntity(e.actions[0].entity),r=this.Config.FindAction(e.actions[0].entity,e.actions[0].action);if(!t||!r)return T``;let a=wn(r.name);if(e.actions[0].hasOwnProperty("level")){let t=r.variable,s=e.actions[0].level,i=t.hasOwnProperty("unit")?t.unit:"";t.show_percentage&&(s=Math.round((s-t.min)/(t.max-t.min)*100),s<t.min?s=t.min:s>t.max&&(s=t.max),i="%"),a=`${tn("services.set_to")} ${s}${i}`}return T`
      <div class="list-item${e.enabled?"":" disabled"}" @click="${()=>this.editItem(e.id)}">
        <div class="list-item-icon">
          ${t.icon?T`<ha-icon icon="${Pn(t.icon)}"></ha-icon>`:""}
        </div>
        <div class="list-item-name">
          ${wn(t.name)}
        </div>
        <div class="list-item-action">
          ${a}
        </div>
        <div class="list-item-days">
          ${function(e){if("daily"==bn(e))return tn("fields.day_type_daily");if("weekdays"==bn(e))return`${tn("words.on")} ${tn("fields.day_type_weekdays")}`;{let r=Array();e.includes(1)&&r.push(tn("days_long.mon")),e.includes(2)&&r.push(tn("days_long.tue")),e.includes(3)&&r.push(tn("days_long.wed")),e.includes(4)&&r.push(tn("days_long.thu")),e.includes(5)&&r.push(tn("days_long.fri")),e.includes(6)&&r.push(tn("days_long.sat")),e.includes(7)&&r.push(tn("days_long.sun"));let a=r.join(", ");var t=a.lastIndexOf(", ");return t&&(a=a.slice(0,t)+a.slice(t).replace(", ",` ${tn("words.and")} `)),`${tn("words.every")} ${a}`}}(e.entries[0].days)}
        </div>
        <div class="list-item-time">
          ${function(e,t){let r=!!t.amPm&&t.amPm;if(!e.event)return`${tn("words.at")} ${sn(e.value,{amPm:r}).time}`;let a="unknown";if("sunrise"==e.event&&null!==t.sunrise){a=sn(nn(Number(t.sunrise)+e.value),{amPm:r}).time}else if("sunset"==e.event&&null!==t.sunset){a=sn(nn(Number(t.sunset)+e.value),{amPm:r}).time}return 0==Math.abs(e.value)?`${tn("words.at")} ${tn("words."+e.event)} (${a})`:`${sn(e.value,{absolute:!0}).time} ${sn(e.value).signed?tn("words.before"):tn("words.after")} ${tn("words."+e.event)} (${a})`}(e.entries[0].time,{amPm:this._config.am_pm,sunrise:this._config.sunrise,sunset:this._config.sunset})}
        </div>
        <div class="list-item-switch">
          ${e.enabled?T`<ha-switch checked="checked" @click="${t=>this.toggleDisable(e.id,t)}"></ha-switch>`:T`<ha-switch @click="${t=>this.toggleDisable(e.id,t)}"></ha-switch>`}
        </div>
      </div>
      `}):[T`
      <div class="text-field">
        ${tn("instructions.no_entries_defined")}
      </div>
    `]}toggleDisable(e,t){t.stopPropagation(),!t.target.checked?this._hass.callService("switch","turn_on",{entity_id:e}):this._hass.callService("switch","turn_off",{entity_id:e}),this.awaitUpdate()}editItem(e){let t=Ua(this.entries,{id:e});this.selection=Kt(Object.assign({},gc),{editItem:e,entity:t.actions[0].entity,action:t.actions[0].action,time:t.entries[0].time,days:t.entries[0].days,daysType:bn(t.entries[0].days)}),void 0!==t.actions[0].level&&Object.assign(this.selection,{levelEnabled:!0,level:t.actions[0].level}),this.requestUpdate()}getGroups(){let e=this.Config.GetGroups();return e.length?e.map(e=>T`
        <mwc-button class="${this.selection.group==e.id?" active":""}" @click="${()=>{this.selectGroup(e.id)}}">
          ${e.icon?T`<ha-icon icon="${Pn(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${wn(e.name)}
        </mwc-button>
      `):[T`<div class="text-field">${tn("instructions.no_groups_defined")}</div>`]}selectGroup(e){Object.assign(this.selection,{group:e,entity:null,action:null}),this.requestUpdate()}getEntities(){if(!this.selection.group)return[T`<div class="text-field">${tn("instructions.no_group_selected")}</div>`];let e=this.Config.GetEntitiesForGroup(this.selection.group);return e.length?e.map(e=>T`
        <mwc-button class="${this.selection.entity==e.id?" active":""}" @click="${()=>{this.selectEntity(e.id)}}">
          ${e.icon?T`<ha-icon icon="${Pn(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${wn(e.name)}
        </mwc-button>
      `):[T`<div class="text-field">${tn("instructions.no_entities_for_group")}</div>`]}selectEntity(e){Object.assign(this.selection,{entity:e,action:null}),this.requestUpdate()}getActions(){if(!this.selection.entity)return[T`<div class="text-field">${tn("instructions.no_entity_selected")}</div>`];let e=this.Config.GetActionsForEntity(this.selection.entity);return e.length?e.map(e=>T`
        <mwc-button class="${this.selection.action==e.id?" active":""}" @click="${()=>{this.selectAction(e.id)}}">
          ${e.icon?T`<ha-icon icon="${Pn(e.icon)}" class="padded-right"></ha-icon>`:""}
          ${wn(e.name)}
        </mwc-button>
      `):[T`<div class="text-field">${tn("instructions.no_actions_for_entity")}</div>`]}selectAction(e){Object.assign(this.selection,{action:e}),this.requestUpdate()}setConfig(e){let t={},r={};!function(e){if(!vc.validate(yc,e)){let e=vc.errors.map(e=>{let t="",r=e.dataPath.substr(1).split("/"),a=r.pop();return r.length&&(t+=`in '${r.join("->")}' `),"type"==e.keyword&&(t+="type of "),a?a&&(t+=(isNaN(+a)?`'${a}'`:`[item ${a}]`)+" "):t+="card ",t+=e.message,e.params.hasOwnProperty("additionalProperty")&&(t+=` '${e.params.additionalProperty}'`),t.charAt(0).toUpperCase()+t.slice(1)+"."});throw new Error("Invalid configuration provided. "+e.map((e,t)=>`(${t+1}) ${e}`).join(" "))}}(e);const a=["groups","domains","entities","discover_existing","standard_configuration"];t=Object.entries(e).filter(([e])=>a.includes(e)).reduce((e,[t,r])=>Object.assign(e,{[t]:r}),{}),r=Object.entries(e).filter(([e])=>Object.keys(this._config).includes(e)).reduce((e,[t,r])=>Object.assign(e,{[t]:r}),{}),Object.assign(this._config,r),this.Config.setUserConfig(t)}showEditor(){let e=this.Config.FindEntity(this.selection.entity),t=this.Config.FindAction(this.selection.entity,this.selection.action);return e&&t?T`
    <div class="card-section first">
      <div class="header">${tn("fields.action")}</div>
      <div class="summary">
        <div class="summary-entity">
          <div class="summary-icon">
            ${e.icon?T`<ha-icon icon="${Pn(e.icon)}"></ha-icon>`:""}
          </div>
          <div class="summary-text">
            ${wn(e.name)}
          </div>
        </div>
        <div class="summary-arrow">
          <ha-icon icon="hass:arrow-right"></ha-icon>
        </div>
        <div class="summary-action">
          <div class="summary-icon">
            ${t.icon?T`<ha-icon icon="${Pn(t.icon)}"></ha-icon>`:""}
          </div>
          <div class="summary-text">
            ${wn(t.name)}
          </div>
        </div>
      </div>
     </div>
     ${t.hasOwnProperty("variable")?this.getLevelPanel(t.variable):""}
    <div class="card-section">
      <div class="header">${tn("fields.days")}</div>
      <div class="day-list">
        <mwc-button class="day-item${"daily"==this.selection.daysType?" active":""}" index="daily" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("fields.day_type_daily")}</mwc-button>
        <mwc-button class="day-item${"weekdays"==this.selection.daysType?" active":""}" index="weekdays" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("fields.day_type_weekdays")}</mwc-button>
        <mwc-button class="day-item${"custom"==this.selection.daysType?" active":""}" index="custom" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("fields.day_type_custom")}</mwc-button>
      </div>
      <div class="day-list${"custom"==this.selection.daysType?"":" closed"}" id="day-list-custom">
        <mwc-button class="day-item${this.selection.days.includes(1)?" active":""}" index="1" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("days_short.mon")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(2)?" active":""}" index="2" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("days_short.tue")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(3)?" active":""}" index="3" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("days_short.wed")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(4)?" active":""}" index="4" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("days_short.thu")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(5)?" active":""}" index="5" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("days_short.fri")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(6)?" active":""}" index="6" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("days_short.sat")}</mwc-button>
        <mwc-button class="day-item${this.selection.days.includes(7)?" active":""}" index="7" @click="${e=>this.updateDays(e.target.getAttribute("index"))}">${tn("days_short.sun")}</mwc-button>
      </div>
    </div>
      
    <div class="card-section">
      <div class="header">${tn("fields.time")}</div>
      <time-picker value=${this.selection.time.value} event=${this.selection.time.event} stepSize="${this._config.time_step}" formatAmPm="${this._config.am_pm}" sunrise="${this._config.sunrise}" sunset="${this._config.sunset}" @change="${this.updateTime}"></timepicker>
    </div>

    <div class="card-section last">
      <mwc-button outlined @click="${()=>this.editItemCancel()}">${tn("actions.cancel")}</mwc-button>
      ${void 0===this.selection.editItem?"":T`<mwc-button outlined @click="${()=>this.editItemDelete()}">${tn("actions.delete")}</mwc-button>`}
      <mwc-button outlined @click="${()=>this.editItemSave()}">${tn("actions.save")}</mwc-button>
    </div>
    `:T``}getLevelPanel(e){let t=e.min,r=e.max,a=e.step,s=e.unit,i=this.selection.level;return e.show_percentage&&(i=(i-t)/(r-t)*100,a=1,t=0,r=100,s="%"),i=Math.round(i*a/a),i<t?i=t:i>r&&(i=r),e.optional||this.selection.levelEnabled||Object.assign(this.selection,{levelEnabled:!0}),T`
    <div class="card-section">
      <div class="header">${e.name}</div>
      <div class="option-item">
        ${e.optional?this.selection.levelEnabled?T`<paper-checkbox checked @change="${this._toggleEnableLevel}"></paper-checkbox>`:T`<paper-checkbox @change="${this._toggleEnableLevel}"></paper-checkbox>`:""}
        ${this.selection.levelEnabled?T`<ha-paper-slider id="level" pin min=${t} max=${r} step=${a} value=${i} @change=${this._updateLevel}></ha-paper-slider>`:T`<ha-paper-slider id="level" pin min=${t} max=${r} step=${a} value=${i} @change=${this._updateLevel} disabled></ha-paper-slider>`}
        <div id="level-value" class="${this.selection.levelEnabled?"":"disabled"}">${i}${s}</div>
      </div>
     </div>`}_toggleEnableLevel(e){let t=e.target.checked;this.shadowRoot.querySelector("#level").disabled=!t,this.selection.levelEnabled=t,t?this.shadowRoot.querySelector("#level-value").classList.remove("disabled"):this.shadowRoot.querySelector("#level-value").classList.add("disabled")}_updateLevel(e){let t=this.Config.FindAction(this.selection.entity,this.selection.action).variable;if(!t)return;let r=t.min,a=t.max,s=t.unit,i=t.step;t.show_percentage&&(s="%");let n=Number(e.target.value);n=Math.round(n*i/i),this.shadowRoot.querySelector("#level-value").innerHTML=`${n}${s}`,t.show_percentage&&(n=Math.round(n/100*(a-r)+r),s="%"),n<r?n=r:n>a&&(n=a),this.selection.level=n}updateDays(e){var t=Array("daily","weekdays","custom");t.includes(e)?this.selection.daysType=e:(this.selection.days.includes(Number(e))?os(this.selection.days,Number(e)):this.selection.days.push(Number(e)),this.selection.daysType="custom"),this.shadowRoot.querySelectorAll(".day-item").forEach(e=>{let r=String(e.getAttribute("index"));t.includes(r)?this.selection.daysType==r?e.classList.add("active"):e.classList.remove("active"):this.selection.days.includes(Number(r))?e.classList.add("active"):e.classList.remove("active")}),"custom"==this.selection.daysType?this.shadowRoot.querySelector("#day-list-custom").classList.remove("closed"):this.shadowRoot.querySelector("#day-list-custom").classList.add("closed")}updateTime(e){let t=e.target,r=Number(t.value),a=e.detail.event;this.selection.time=a?{event:a,value:r}:{value:r}}editItemSave(){var e=function(e,t){let r=t.FindAction(e.entity,e.action),a=ss(r,["service","service_data"]);if(Object.assign(a,{entity:e.entity}),yn(a.service)||(a.service=yn(a.entity)+"."+a.service),e.hasOwnProperty("levelEnabled")&&e.levelEnabled){let t=r.variable.field,s=e.level,i=a.hasOwnProperty("service_data")?a.service_data:{};Object.assign(a,{service_data:Object.assign(i,{[t]:s})})}let s={actions:[0]},i=e.time.value;return e.time.event?Object.assign(s,{event:e.time.event,offset:sn(i).time}):Object.assign(s,{time:sn(i).time}),"weekdays"==e.daysType?Object.assign(s,{days:[1,2,3,4,5]}):"custom"==e.daysType&&Object.assign(s,{days:e.days.sort().filter(e=>0!=e)}),{actions:[a],entries:[s]}}(this.selection,this.Config);this.selection.newItem?this._hass.callService("scheduler","add",e):this.selection.editItem&&this._hass.callService("scheduler","edit",Object.assign(e,{entity_id:this.selection.editItem})),this.selection=Object.assign({},gc),this.awaitUpdate()}editItemDelete(){let e=this.selection.editItem;this._hass.callService("scheduler","remove",{entity_id:e}),this.selection=Object.assign({},gc),this.awaitUpdate()}},t([Z()],e.SchedulerCard.prototype,"_hass",void 0),e.SchedulerCard=t([J("scheduler-card")],e.SchedulerCard)}({});
