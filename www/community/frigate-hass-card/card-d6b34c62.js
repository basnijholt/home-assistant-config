function e(e,t,n,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,n,s):a(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=globalThis,n=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),a=new WeakMap;let r=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(n&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=a.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&a.set(t,e))}return e}toString(){return this.cssText}};const s=e=>new r("string"==typeof e?e:e+"",void 0,i),o=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[i+1]),e[0]);return new r(n,e,i)},c=(e,i)=>{if(n)e.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const n of i){const i=document.createElement("style"),a=t.litNonce;void 0!==a&&i.setAttribute("nonce",a),i.textContent=n.cssText,e.appendChild(i)}},l=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return s(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:d,defineProperty:u,getOwnPropertyDescriptor:h,getOwnPropertyNames:g,getOwnPropertySymbols:p,getPrototypeOf:m}=Object,f=globalThis,_=f.trustedTypes,v=_?_.emptyScript:"",y=f.reactiveElementPolyfillSupport,b=(e,t)=>e,w={toAttribute(e,t){switch(t){case Boolean:e=e?v:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},x=(e,t)=>!d(e,t),M={attribute:!0,type:String,converter:w,reflect:!1,hasChanged:x};Symbol.metadata??=Symbol("metadata"),f.litPropertyMetadata??=new WeakMap;class C extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=M){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,t);void 0!==i&&u(this.prototype,e,i)}}static getPropertyDescriptor(e,t,n){const{get:i,set:a}=h(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return i?.call(this)},set(t){const r=i?.call(this);a.call(this,t),this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??M}static _$Ei(){if(this.hasOwnProperty(b("elementProperties")))return;const e=m(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(b("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(b("properties"))){const e=this.properties,t=[...g(e),...p(e)];for(const n of t)this.createProperty(n,e[n])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,n]of t)this.elementProperties.set(e,n)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const n=this._$Eu(e,t);void 0!==n&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(l(e))}else void 0!==e&&t.push(l(e));return t}static _$Eu(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return c(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EC(e,t){const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(void 0!==i&&!0===n.reflect){const a=(void 0!==n.converter?.toAttribute?n.converter:w).toAttribute(t,n.type);this._$Em=e,null==a?this.removeAttribute(i):this.setAttribute(i,a),this._$Em=null}}_$AK(e,t){const n=this.constructor,i=n._$Eh.get(e);if(void 0!==i&&this._$Em!==i){const e=n.getPropertyOptions(i),a="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:w;this._$Em=i,this[i]=a.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,n){if(void 0!==e){if(n??=this.constructor.getPropertyOptions(e),!(n.hasChanged??x)(this[e],t))return;this.P(e,t,n)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,n){this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,n]of e)!0!==n.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],n)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EC(e,this[e]))),this._$EU()}updated(e){}firstUpdated(e){}}C.elementStyles=[],C.shadowRootOptions={mode:"open"},C[b("elementProperties")]=new Map,C[b("finalized")]=new Map,y?.({ReactiveElement:C}),(f.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const S=globalThis,k=S.trustedTypes,$=k?k.createPolicy("lit-html",{createHTML:e=>e}):void 0,E="$lit$",A=`lit$${(Math.random()+"").slice(9)}$`,I="?"+A,T=`<${I}>`,z=document,j=()=>z.createComment(""),O=e=>null===e||"object"!=typeof e&&"function"!=typeof e,D=Array.isArray,R="[ \t\n\f\r]",P=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,L=/-->/g,N=/>/g,F=RegExp(`>|${R}(?:([^\\s"'>=/]+)(${R}*=${R}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),V=/'/g,H=/"/g,B=/^(?:script|style|textarea|title)$/i,U=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),q=Symbol.for("lit-noChange"),W=Symbol.for("lit-nothing"),Z=new WeakMap,Q=z.createTreeWalker(z,129);function Y(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==$?$.createHTML(t):t}const G=(e,t)=>{const n=e.length-1,i=[];let a,r=2===t?"<svg>":"",s=P;for(let t=0;t<n;t++){const n=e[t];let o,c,l=-1,d=0;for(;d<n.length&&(s.lastIndex=d,c=s.exec(n),null!==c);)d=s.lastIndex,s===P?"!--"===c[1]?s=L:void 0!==c[1]?s=N:void 0!==c[2]?(B.test(c[2])&&(a=RegExp("</"+c[2],"g")),s=F):void 0!==c[3]&&(s=F):s===F?">"===c[0]?(s=a??P,l=-1):void 0===c[1]?l=-2:(l=s.lastIndex-c[2].length,o=c[1],s=void 0===c[3]?F:'"'===c[3]?H:V):s===H||s===V?s=F:s===L||s===N?s=P:(s=F,a=void 0);const u=s===F&&e[t+1].startsWith("/>")?" ":"";r+=s===P?n+T:l>=0?(i.push(o),n.slice(0,l)+E+n.slice(l)+A+u):n+A+(-2===l?t:u)}return[Y(e,r+(e[n]||"<?>")+(2===t?"</svg>":"")),i]};class K{constructor({strings:e,_$litType$:t},n){let i;this.parts=[];let a=0,r=0;const s=e.length-1,o=this.parts,[c,l]=G(e,t);if(this.el=K.createElement(c,n),Q.currentNode=this.el.content,2===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=Q.nextNode())&&o.length<s;){if(1===i.nodeType){if(i.hasAttributes())for(const e of i.getAttributeNames())if(e.endsWith(E)){const t=l[r++],n=i.getAttribute(e).split(A),s=/([.?@])?(.*)/.exec(t);o.push({type:1,index:a,name:s[2],strings:n,ctor:"."===s[1]?ne:"?"===s[1]?ie:"@"===s[1]?ae:te}),i.removeAttribute(e)}else e.startsWith(A)&&(o.push({type:6,index:a}),i.removeAttribute(e));if(B.test(i.tagName)){const e=i.textContent.split(A),t=e.length-1;if(t>0){i.textContent=k?k.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],j()),Q.nextNode(),o.push({type:2,index:++a});i.append(e[t],j())}}}else if(8===i.nodeType)if(i.data===I)o.push({type:2,index:a});else{let e=-1;for(;-1!==(e=i.data.indexOf(A,e+1));)o.push({type:7,index:a}),e+=A.length-1}a++}}static createElement(e,t){const n=z.createElement("template");return n.innerHTML=e,n}}function J(e,t,n=e,i){if(t===q)return t;let a=void 0!==i?n._$Co?.[i]:n._$Cl;const r=O(t)?void 0:t._$litDirective$;return a?.constructor!==r&&(a?._$AO?.(!1),void 0===r?a=void 0:(a=new r(e),a._$AT(e,n,i)),void 0!==i?(n._$Co??=[])[i]=a:n._$Cl=a),void 0!==a&&(t=J(e,a._$AS(e,t.values),a,i)),t}let X=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,i=(e?.creationScope??z).importNode(t,!0);Q.currentNode=i;let a=Q.nextNode(),r=0,s=0,o=n[0];for(;void 0!==o;){if(r===o.index){let t;2===o.type?t=new ee(a,a.nextSibling,this,e):1===o.type?t=new o.ctor(a,o.name,o.strings,this,e):6===o.type&&(t=new re(a,this,e)),this._$AV.push(t),o=n[++s]}r!==o?.index&&(a=Q.nextNode(),r++)}return Q.currentNode=z,i}p(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}};class ee{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,i){this.type=2,this._$AH=W,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=J(this,e,t),O(e)?e===W||null==e||""===e?(this._$AH!==W&&this._$AR(),this._$AH=W):e!==this._$AH&&e!==q&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>D(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==W&&O(this._$AH)?this._$AA.nextSibling.data=e:this.T(z.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:n}=e,i="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=K.createElement(Y(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(t);else{const e=new X(i,this),n=e.u(this.options);e.p(t),this.T(n),this._$AH=e}}_$AC(e){let t=Z.get(e.strings);return void 0===t&&Z.set(e.strings,t=new K(e)),t}k(e){D(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,i=0;for(const a of e)i===t.length?t.push(n=new ee(this.S(j()),this.S(j()),this,this.options)):n=t[i],n._$AI(a),i++;i<t.length&&(this._$AR(n&&n._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class te{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,i,a){this.type=1,this._$AH=W,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=a,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=W}_$AI(e,t=this,n,i){const a=this.strings;let r=!1;if(void 0===a)e=J(this,e,t,0),r=!O(e)||e!==this._$AH&&e!==q,r&&(this._$AH=e);else{const i=e;let s,o;for(e=a[0],s=0;s<a.length-1;s++)o=J(this,i[n+s],t,s),o===q&&(o=this._$AH[s]),r||=!O(o)||o!==this._$AH[s],o===W?e=W:e!==W&&(e+=(o??"")+a[s+1]),this._$AH[s]=o}r&&!i&&this.j(e)}j(e){e===W?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ne extends te{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===W?void 0:e}}class ie extends te{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==W)}}class ae extends te{constructor(e,t,n,i,a){super(e,t,n,i,a),this.type=5}_$AI(e,t=this){if((e=J(this,e,t,0)??W)===q)return;const n=this._$AH,i=e===W&&n!==W||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,a=e!==W&&(n===W||i);i&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class re{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){J(this,e)}}const se=S.litHtmlPolyfillSupport;se?.(K,ee),(S.litHtmlVersions??=[]).push("3.1.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let oe=class extends C{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{const i=n?.renderBefore??t;let a=i._$litPart$;if(void 0===a){const e=n?.renderBefore??null;i._$litPart$=a=new ee(t.insertBefore(j(),e),e,void 0,n??{})}return a._$AI(e),a})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return q}};oe._$litElement$=!0,oe.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:oe});const ce=globalThis.litElementPolyfillSupport;ce?.({LitElement:oe}),(globalThis.litElementVersions??=[]).push("4.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const le=e=>(t,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,de={attribute:!0,type:String,converter:w,reflect:!1,hasChanged:x},ue=(e=de,t,n)=>{const{kind:i,metadata:a}=n;let r=globalThis.litPropertyMetadata.get(a);if(void 0===r&&globalThis.litPropertyMetadata.set(a,r=new Map),r.set(n.name,e),"accessor"===i){const{name:i}=n;return{set(n){const a=t.get.call(this);t.set.call(this,n),this.requestUpdate(i,a,e)},init(t){return void 0!==t&&this.P(i,void 0,e),t}}}if("setter"===i){const{name:i}=n;return function(n){const a=this[i];t.call(this,n),this.requestUpdate(i,a,e)}}throw Error("Unsupported decorator location: "+i)};function he(e){return(t,n)=>"object"==typeof n?ue(e,t,n):((e,t,n)=>{const i=t.hasOwnProperty(n);return t.constructor.createProperty(n,i?{...e,wrapped:!0}:e),i?Object.getOwnPropertyDescriptor(t,n):void 0})(e,t,n)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function ge(e){return he({...e,state:!0,attribute:!1})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pe={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},me=e=>(...t)=>({_$litDirective$:e,values:t});let fe=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _e=me(class extends fe{constructor(e){if(super(e),e.type!==pe.ATTRIBUTE||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!this.nt?.has(e)&&this.st.add(e);return this.render(t)}const n=e.element.classList;for(const e of this.st)e in t||(n.remove(e),this.st.delete(e));for(const e in t){const i=!!t[e];i===this.st.has(e)||this.nt?.has(e)||(i?(n.add(e),this.st.add(e)):(n.remove(e),this.st.delete(e)))}return q}}),ve=e=>e??W
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,ye=e=>null===e||"object"!=typeof e&&"function"!=typeof e,be=e=>void 0===e.strings,we={},xe=(e,t=we)=>e._$AH=t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Me=(e,t)=>{const n=e._$AN;if(void 0===n)return!1;for(const e of n)e._$AO?.(t,!1),Me(e,t);return!0},Ce=e=>{let t,n;do{if(void 0===(t=e._$AM))break;n=t._$AN,n.delete(e),e=t}while(0===n?.size)},Se=e=>{for(let t;t=e._$AM;e=t){let n=t._$AN;if(void 0===n)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),Ee(t)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ke(e){void 0!==this._$AN?(Ce(this),this._$AM=e,Se(this)):this._$AM=e}function $e(e,t=!1,n=0){const i=this._$AH,a=this._$AN;if(void 0!==a&&0!==a.size)if(t)if(Array.isArray(i))for(let e=n;e<i.length;e++)Me(i[e],!1),Ce(i[e]);else null!=i&&(Me(i,!1),Ce(i));else Me(this,e)}const Ee=e=>{e.type==pe.CHILD&&(e._$AP??=$e,e._$AQ??=ke)};class Ae extends fe{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),Se(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(Me(this,e),Ce(this))}setValue(e){if(be(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ie=()=>new Te;let Te=class{};const ze=new WeakMap,je=me(class extends Ae{render(e){return W}update(e,[t]){const n=t!==this.Y;return n&&void 0!==this.Y&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.Y=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),W}rt(e){if("function"==typeof this.Y){const t=this.ht??globalThis;let n=ze.get(t);void 0===n&&(n=new WeakMap,ze.set(t,n)),void 0!==n.get(this.Y)&&this.Y.call(this.ht,void 0),n.set(this.Y,e),void 0!==e&&this.Y.call(this.ht,e)}else this.Y.value=e}get lt(){return"function"==typeof this.Y?ze.get(this.ht??globalThis)?.get(this.Y):this.Y?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),Oe="important",De=" !"+Oe,Re=me(class extends fe{constructor(e){if(super(e),e.type!==pe.ATTRIBUTE||"style"!==e.name||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,n)=>{const i=e[n];return null==i?t:t+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`}),"")}update(e,[t]){const{style:n}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(t)),this.render(t);for(const e of this.ft)null==t[e]&&(this.ft.delete(e),e.includes("-")?n.removeProperty(e):n[e]=null);for(const e in t){const i=t[e];if(null!=i){this.ft.add(e);const t="string"==typeof i&&i.endsWith(De);e.includes("-")||t?n.setProperty(e,t?i.slice(0,-11):i,t?Oe:""):n[e]=i}}return q}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Pe(e,t,n,i=20,a=0){let r=[];if(a>=i)return r;const s=e=>{const r=e.assignedNodes().filter((e=>1===e.nodeType));return r.length>0?Pe(r[0].parentElement,t,n,i,a+1):[]},o=Array.from(e.children||[]);for(const e of o)t(e)||(n(e)&&r.push(e),null!=e.shadowRoot?r.push(...Pe(e.shadowRoot,t,n,i,a+1)):"SLOT"===e.tagName?r.push(...s(e)):r.push(...Pe(e,t,n,i,a+1)));return r}function Le(e){return e.hasAttribute("hidden")||e.hasAttribute("aria-hidden")&&"false"!==e.getAttribute("aria-hidden")||"none"===e.style.display||"0"===e.style.opacity||"hidden"===e.style.visibility||"collapse"===e.style.visibility}function Ne(e){return"-1"!==e.getAttribute("tabindex")&&!Le(e)&&!function(e){return e.hasAttribute("disabled")||e.hasAttribute("aria-disabled")&&"false"!==e.getAttribute("aria-disabled")}(e)&&(e.hasAttribute("tabindex")||(e instanceof HTMLAnchorElement||e instanceof HTMLAreaElement)&&e.hasAttribute("href")||e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||e instanceof HTMLIFrameElement)}const Fe=new Map;const Ve=document.createElement("template");Ve.innerHTML='\n\t<div id="start"></div>\n\t<div id="backup"></div>\n\t<slot></slot>\n\t<div id="end"></div>\n';class He extends HTMLElement{constructor(){super(),this.debounceId=Math.random().toString(),this._focused=!1;const e=this.attachShadow({mode:"open"});e.appendChild(Ve.content.cloneNode(!0)),this.$backup=e.querySelector("#backup"),this.$start=e.querySelector("#start"),this.$end=e.querySelector("#end"),this.focusLastElement=this.focusLastElement.bind(this),this.focusFirstElement=this.focusFirstElement.bind(this),this.onFocusIn=this.onFocusIn.bind(this),this.onFocusOut=this.onFocusOut.bind(this)}static get observedAttributes(){return["inactive"]}get inactive(){return this.hasAttribute("inactive")}set inactive(e){e?this.setAttribute("inactive",""):this.removeAttribute("inactive")}get focused(){return this._focused}connectedCallback(){this.$start.addEventListener("focus",this.focusLastElement),this.$end.addEventListener("focus",this.focusFirstElement),this.addEventListener("focusin",this.onFocusIn),this.addEventListener("focusout",this.onFocusOut),this.render()}disconnectedCallback(){this.$start.removeEventListener("focus",this.focusLastElement),this.$end.removeEventListener("focus",this.focusFirstElement),this.removeEventListener("focusin",this.onFocusIn),this.removeEventListener("focusout",this.onFocusOut)}attributeChangedCallback(){this.render()}focusFirstElement(){this.trapFocus()}focusLastElement(){this.trapFocus(!0)}getFocusableElements(){return Pe(this,Le,Ne)}trapFocus(e){if(this.inactive)return;let t=this.getFocusableElements();t.length>0?(e?t[t.length-1].focus():t[0].focus(),this.$backup.setAttribute("tabindex","-1")):(this.$backup.setAttribute("tabindex","0"),this.$backup.focus())}onFocusIn(){this.updateFocused(!0)}onFocusOut(){this.updateFocused(!1)}updateFocused(e){!function(e,t,n){const i=Fe.get(n);null!=i&&window.clearTimeout(i),Fe.set(n,window.setTimeout((()=>{e(),Fe.delete(n)}),t))}((()=>{this.focused!==e&&(this._focused=e,this.render())}),0,this.debounceId)}render(){this.$start.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.$end.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.focused?this.setAttribute("focused",""):this.removeAttribute("focused")}}function Be(e){return Number(e.getAttribute("data-dialog-count"))||0}function Ue(e,t){e.setAttribute("data-dialog-count",t.toString())}function qe(e=document.activeElement){return null!=e&&null!=e.shadowRoot&&null!=e.shadowRoot.activeElement?qe(e.shadowRoot.activeElement):e}window.customElements.define("focus-trap",He);const We=document.createElement("template");We.innerHTML='\n  <style>*{box-sizing:border-box}:host{padding:var(--dialog-container-padding,5vw 24px);z-index:var(--dialog-z-index,12345678);outline:none}#backdrop,:host{position:fixed;top:0;left:0;bottom:0;right:0}:host,:host([center]) #dialog{overflow-x:var(--dialog-overflow-x,hidden);overflow-y:var(--dialog-overflow-y,auto);overscroll-behavior:contain;-webkit-overflow-scrolling:touch}:host([center]){display:flex;align-items:center;justify-content:center;overflow:hidden}:host([center]) #dialog{max-height:var(--dialog-max-height,100%)}:host(:not(:defined)),:host(:not([open])){display:none}#backdrop{background:var(--dialog-backdrop-bg,rgba(0,0,0,.6));animation:fadeIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);z-index:-1}#dialog{animation:scaleIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);border-radius:var(--dialog-border-radius,12px);box-shadow:var(--dialog-box-shadow,0 2px 10px -5px rgba(0,0,0,.6));max-width:var(--dialog-max-width,700px);width:var(--dialog-width,100%);padding:var(--dialog-padding,24px);max-height:var(--dialog-max-height,unset);height:var(--dialog-height,auto);color:var(--dialog-color,currentColor);background:var(--dialog-bg,#fff);z-index:1;position:relative;display:flex;flex-direction:column;margin:0 auto;border:none}::slotted(article),article{flex-grow:1;overflow-y:auto;-webkit-overflow-scrolling:touch}::slotted(footer),::slotted(header),footer,header{flex-shrink:0}@keyframes scaleIn{0%{transform:scale(.9) translateY(30px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}</style>\n  <div id="backdrop" part="backdrop"></div>\n  <focus-trap id="dialog" part="dialog">\n    <slot></slot>\n  </focus-trap>\n';class Ze extends HTMLElement{constructor(){super(),this.$scrollContainer=document.documentElement,this.$previousActiveElement=null;const e=this.attachShadow({mode:"open"});e.appendChild(We.content.cloneNode(!0)),this.$dialog=e.querySelector("#dialog"),this.$backdrop=e.querySelector("#backdrop"),this.onBackdropClick=this.onBackdropClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.setAttribute("aria-modal","true"),this.$dialog.setAttribute("role","alertdialog")}static get observedAttributes(){return["open","center"]}get open(){return this.hasAttribute("open")}set open(e){e?this.setAttribute("open",""):this.removeAttribute("open")}get center(){return this.hasAttribute("center")}set center(e){e?this.setAttribute("center",""):this.removeAttribute("center")}connectedCallback(){this.$backdrop.addEventListener("click",this.onBackdropClick)}disconnectedCallback(){this.$backdrop.removeEventListener("click",this.onBackdropClick),this.open&&this.didClose()}show(){this.open=!0}close(e){this.result=e,this.open=!1}onBackdropClick(){this.assertClosing()&&this.close()}onKeyDown(e){if("Escape"===e.code)this.assertClosing()&&(this.close(),e.stopImmediatePropagation())}assertClosing(){return this.dispatchEvent(new CustomEvent("closing",{cancelable:!0}))}didOpen(){this.$previousActiveElement=qe(document.activeElement),requestAnimationFrame((()=>{this.$dialog.focusFirstElement()})),this.tabIndex=0,this.$scrollContainer.style.overflow="hidden",this.addEventListener("keydown",this.onKeyDown,{capture:!0,passive:!0}),Ue(this.$scrollContainer,Be(this.$scrollContainer)+1),this.dispatchEvent(new CustomEvent("open"))}didClose(){this.removeEventListener("keydown",this.onKeyDown,{capture:!0}),Ue(this.$scrollContainer,Math.max(0,Be(this.$scrollContainer)-1)),Be(this.$scrollContainer)<=0&&(this.$scrollContainer.style.overflow=""),this.tabIndex=-1,null!=this.$previousActiveElement&&(this.$previousActiveElement.focus(),this.$previousActiveElement=null),this.dispatchEvent(new CustomEvent("close",{detail:this.result}))}attributeChangedCallback(e,t,n){if("open"===e)this.open?this.didOpen():this.didClose()}}var Qe,Ye;function Ge(e){return e.substr(0,e.indexOf("."))}customElements.define("web-dialog",Ze),function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(Qe||(Qe={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(Ye||(Ye={}));var Ke,Je,Xe=["closed","locked","off"],et=function(e,t,n,i){i=i||{},n=null==n?{}:n;var a=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return a.detail=n,e.dispatchEvent(a),a},tt=function(e){et(window,"haptic",e)},nt=function(e,t){return function(e,t,n){void 0===n&&(n=!0);var i,a=Ge(t),r="group"===a?"homeassistant":a;switch(a){case"lock":i=n?"unlock":"lock";break;case"cover":i=n?"open_cover":"close_cover";break;default:i=n?"turn_on":"turn_off"}return e.callService(r,i,{entity_id:t})}(e,t,Xe.includes(e.states[t].state))},it=function(e,t,n,i){if(i||(i={action:"more-info"}),!i.confirmation||i.confirmation.exemptions&&i.confirmation.exemptions.some((function(e){return e.user===t.user.id}))||(tt("warning"),confirm(i.confirmation.text||"Are you sure you want to "+i.action+"?")))switch(i.action){case"more-info":(n.entity||n.camera_image)&&et(e,"hass-more-info",{entityId:n.entity?n.entity:n.camera_image});break;case"navigate":i.navigation_path&&function(e,t,n){void 0===n&&(n=!1),n?history.replaceState(null,"",t):history.pushState(null,"",t),et(window,"location-changed",{replace:n})}(0,i.navigation_path);break;case"url":i.url_path&&window.open(i.url_path);break;case"toggle":n.entity&&(nt(t,n.entity),tt("success"));break;case"perform-action":if(!i.perform_action)return void tt("failure");var a=i.perform_action.split(".",2);t.callService(a[0],a[1],i.data,i.target),tt("success");break;case"call-service":if(!i.service)return void tt("failure");var r=i.service.split(".",2);t.callService(r[0],r[1],i.data,i.target),tt("success");break;case"fire-dom-event":et(e,"ll-custom",i)}};!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),i={};for(const e of n)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Ke||(Ke={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Je||(Je={}));const at=Ke.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),rt=e=>{switch(typeof e){case"undefined":return at.undefined;case"string":return at.string;case"number":return isNaN(e)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(e)?at.array:null===e?at.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?at.promise:"undefined"!=typeof Map&&e instanceof Map?at.map:"undefined"!=typeof Set&&e instanceof Set?at.set:"undefined"!=typeof Date&&e instanceof Date?at.date:at.object;default:return at.unknown}},st=Ke.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ot extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},i=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(i);else if("invalid_return_type"===a.code)i(a.returnTypeError);else if("invalid_arguments"===a.code)i(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,i=0;for(;i<a.path.length;){const n=a.path[i];i===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],i++}}};return i(this),n}static assert(e){if(!(e instanceof ot))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ke.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ot.create=e=>new ot(e);const ct=(e,t)=>{let n;switch(e.code){case st.invalid_type:n=e.received===at.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case st.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Ke.jsonStringifyReplacer)}`;break;case st.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ke.joinValues(e.keys,", ")}`;break;case st.invalid_union:n="Invalid input";break;case st.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ke.joinValues(e.options)}`;break;case st.invalid_enum_value:n=`Invalid enum value. Expected ${Ke.joinValues(e.options)}, received '${e.received}'`;break;case st.invalid_arguments:n="Invalid function arguments";break;case st.invalid_return_type:n="Invalid function return type";break;case st.invalid_date:n="Invalid date";break;case st.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Ke.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case st.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case st.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case st.custom:n="Invalid input";break;case st.invalid_intersection_types:n="Intersection results could not be merged";break;case st.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case st.not_finite:n="Number must be finite";break;default:n=t.defaultError,Ke.assertNever(e)}return{message:n}};let lt=ct;function dt(){return lt}const ut=e=>{const{data:t,path:n,errorMaps:i,issueData:a}=e,r=[...n,...a.path||[]],s={...a,path:r};if(void 0!==a.message)return{...a,path:r,message:a.message};let o="";const c=i.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(s,{data:t,defaultError:o}).message;return{...a,path:r,message:o}};function ht(e,t){const n=dt(),i=ut({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===ct?void 0:ct].filter((e=>!!e))});e.common.issues.push(i)}class gt{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const i of t){if("aborted"===i.status)return pt;"dirty"===i.status&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,i=await e.value;n.push({key:t,value:i})}return gt.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const i of t){const{key:t,value:a}=i;if("aborted"===t.status)return pt;if("aborted"===a.status)return pt;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!i.alwaysSet||(n[t.value]=a.value)}return{status:e.value,value:n}}}const pt=Object.freeze({status:"aborted"}),mt=e=>({status:"dirty",value:e}),ft=e=>({status:"valid",value:e}),_t=e=>"aborted"===e.status,vt=e=>"dirty"===e.status,yt=e=>"valid"===e.status,bt=e=>"undefined"!=typeof Promise&&e instanceof Promise;function wt(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function xt(e,t,n,i,a){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?a.call(e,n):a?a.value=n:t.set(e,n),n}var Mt,Ct,St;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Mt||(Mt={}));class kt{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $t=(e,t)=>{if(yt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ot(e.common.issues);return this._error=t,this._error}}};function Et(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:i,description:a}=e;if(t&&(n||i))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{var r,s;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!==(r=null!=o?o:i)&&void 0!==r?r:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(s=null!=o?o:n)&&void 0!==s?s:a.defaultError}},description:a}}class At{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return rt(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:rt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new gt,ctx:{common:e.parent.common,data:e.data,parsedType:rt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(bt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const i={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rt(e)},a=this._parseSync({data:e,path:i.path,parent:i});return $t(i,a)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rt(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(bt(i)?i:Promise.resolve(i));return $t(n,a)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,i)=>{const a=e(t),r=()=>i.addIssue({code:st.custom,...n(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then((e=>!!e||(r(),!1))):!!a||(r(),!1)}))}refinement(e,t){return this._refinement(((n,i)=>!!e(n)||(i.addIssue("function"==typeof t?t(n,i):t),!1)))}_refinement(e){return new Sn({schema:this,typeName:Pn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return kn.create(this,this._def)}nullable(){return $n.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return sn.create(this,this._def)}promise(){return Cn.create(this,this._def)}or(e){return ln.create([this,e],this._def)}and(e){return gn.create(this,e,this._def)}transform(e){return new Sn({...Et(this._def),schema:this,typeName:Pn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new En({...Et(this._def),innerType:this,defaultValue:t,typeName:Pn.ZodDefault})}brand(){return new zn({typeName:Pn.ZodBranded,type:this,...Et(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new An({...Et(this._def),innerType:this,catchValue:t,typeName:Pn.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return jn.create(this,e)}readonly(){return On.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const It=/^c[^\s-]{8,}$/i,Tt=/^[0-9a-z]+$/,zt=/^[0-9A-HJKMNP-TV-Z]{26}$/,jt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ot=/^[a-z0-9_-]{21}$/i,Dt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Rt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Pt;const Lt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Nt=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Ft=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Vt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ht=new RegExp(`^${Vt}$`);function Bt(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Ut(e){let t=`${Vt}T${Bt(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function qt(e,t){return!("v4"!==t&&t||!Lt.test(e))||!("v6"!==t&&t||!Nt.test(e))}class Wt extends At{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==at.string){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.string,received:t.parsedType}),pt}const t=new gt;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),ht(n,{code:st.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),ht(n,{code:st.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const a=e.data.length>i.value,r=e.data.length<i.value;(a||r)&&(n=this._getOrReturnCtx(e,n),a?ht(n,{code:st.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):r&&ht(n,{code:st.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)Rt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"email",code:st.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)Pt||(Pt=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Pt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"emoji",code:st.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)jt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"uuid",code:st.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)Ot.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"nanoid",code:st.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)It.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"cuid",code:st.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)Tt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"cuid2",code:st.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)zt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"ulid",code:st.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(a){n=this._getOrReturnCtx(e,n),ht(n,{validation:"url",code:st.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"regex",code:st.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),ht(n,{code:st.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),ht(n,{code:st.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),ht(n,{code:st.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){Ut(i).test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{code:st.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else if("date"===i.kind){Ht.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{code:st.invalid_string,validation:"date",message:i.message}),t.dirty())}else if("time"===i.kind){new RegExp(`^${Bt(i)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{code:st.invalid_string,validation:"time",message:i.message}),t.dirty())}else"duration"===i.kind?Dt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"duration",code:st.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?qt(e.data,i.version)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"ip",code:st.invalid_string,message:i.message}),t.dirty()):"base64"===i.kind?Ft.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"base64",code:st.invalid_string,message:i.message}),t.dirty()):Ke.assertNever(i);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:st.invalid_string,...Mt.errToObj(n)})}_addCheck(e){return new Wt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Mt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Mt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Mt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Mt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Mt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Mt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Mt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Mt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Mt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Mt.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...Mt.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...Mt.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Mt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Mt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Mt.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Mt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Mt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Mt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Mt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Mt.errToObj(t)})}nonempty(e){return this.min(1,Mt.errToObj(e))}trim(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Zt(e,t){const n=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,a=n>i?n:i;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}Wt.create=e=>{var t;return new Wt({checks:[],typeName:Pn.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Et(e)})};class Qt extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==at.number){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.number,received:t.parsedType}),pt}let t;const n=new gt;for(const i of this._def.checks)if("int"===i.kind)Ke.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ht(t,{code:st.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty());else if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:st.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:st.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty())}else"multipleOf"===i.kind?0!==Zt(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:st.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ht(t,{code:st.not_finite,message:i.message}),n.dirty()):Ke.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Mt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Mt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Mt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Mt.toString(t))}setLimit(e,t,n,i){return new Qt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Mt.toString(i)}]})}_addCheck(e){return new Qt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Mt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Mt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Mt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Mt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Mt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Mt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Mt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Mt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Mt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Ke.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Qt.create=e=>new Qt({checks:[],typeName:Pn.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Et(e)});class Yt extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==at.bigint){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.bigint,received:t.parsedType}),pt}let t;const n=new gt;for(const i of this._def.checks)if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:st.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:st.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:st.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Ke.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Mt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Mt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Mt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Mt.toString(t))}setLimit(e,t,n,i){return new Yt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Mt.toString(i)}]})}_addCheck(e){return new Yt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Mt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Mt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Mt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Mt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Mt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Yt.create=e=>{var t;return new Yt({checks:[],typeName:Pn.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Et(e)})};class Gt extends At{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==at.boolean){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.boolean,received:t.parsedType}),pt}return ft(e.data)}}Gt.create=e=>new Gt({typeName:Pn.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Et(e)});class Kt extends At{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==at.date){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.date,received:t.parsedType}),pt}if(isNaN(e.data.getTime())){return ht(this._getOrReturnCtx(e),{code:st.invalid_date}),pt}const t=new gt;let n;for(const i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),ht(n,{code:st.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),t.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),ht(n,{code:st.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),t.dirty()):Ke.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Kt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Mt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Mt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Kt.create=e=>new Kt({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Pn.ZodDate,...Et(e)});class Jt extends At{_parse(e){if(this._getType(e)!==at.symbol){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.symbol,received:t.parsedType}),pt}return ft(e.data)}}Jt.create=e=>new Jt({typeName:Pn.ZodSymbol,...Et(e)});class Xt extends At{_parse(e){if(this._getType(e)!==at.undefined){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.undefined,received:t.parsedType}),pt}return ft(e.data)}}Xt.create=e=>new Xt({typeName:Pn.ZodUndefined,...Et(e)});class en extends At{_parse(e){if(this._getType(e)!==at.null){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.null,received:t.parsedType}),pt}return ft(e.data)}}en.create=e=>new en({typeName:Pn.ZodNull,...Et(e)});class tn extends At{constructor(){super(...arguments),this._any=!0}_parse(e){return ft(e.data)}}tn.create=e=>new tn({typeName:Pn.ZodAny,...Et(e)});class nn extends At{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ft(e.data)}}nn.create=e=>new nn({typeName:Pn.ZodUnknown,...Et(e)});class an extends At{_parse(e){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.never,received:t.parsedType}),pt}}an.create=e=>new an({typeName:Pn.ZodNever,...Et(e)});class rn extends At{_parse(e){if(this._getType(e)!==at.undefined){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.void,received:t.parsedType}),pt}return ft(e.data)}}rn.create=e=>new rn({typeName:Pn.ZodVoid,...Et(e)});class sn extends At{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==at.array)return ht(t,{code:st.invalid_type,expected:at.array,received:t.parsedType}),pt;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(e||a)&&(ht(t,{code:e?st.too_big:st.too_small,minimum:a?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(ht(t,{code:st.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(ht(t,{code:st.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>i.type._parseAsync(new kt(t,e,t.path,n))))).then((e=>gt.mergeArray(n,e)));const a=[...t.data].map(((e,n)=>i.type._parseSync(new kt(t,e,t.path,n))));return gt.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new sn({...this._def,minLength:{value:e,message:Mt.toString(t)}})}max(e,t){return new sn({...this._def,maxLength:{value:e,message:Mt.toString(t)}})}length(e,t){return new sn({...this._def,exactLength:{value:e,message:Mt.toString(t)}})}nonempty(e){return this.min(1,e)}}function on(e){if(e instanceof cn){const t={};for(const n in e.shape){const i=e.shape[n];t[n]=kn.create(on(i))}return new cn({...e._def,shape:()=>t})}return e instanceof sn?new sn({...e._def,type:on(e.element)}):e instanceof kn?kn.create(on(e.unwrap())):e instanceof $n?$n.create(on(e.unwrap())):e instanceof pn?pn.create(e.items.map((e=>on(e)))):e}sn.create=(e,t)=>new sn({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Pn.ZodArray,...Et(t)});class cn extends At{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Ke.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==at.object){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.object,received:t.parsedType}),pt}const{status:t,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),r=[];if(!(this._def.catchall instanceof an&&"strip"===this._def.unknownKeys))for(const e in n.data)a.includes(e)||r.push(e);const s=[];for(const e of a){const t=i[e],a=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new kt(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof an){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of r)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)r.length>0&&(ht(n,{code:st.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const i=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new kt(n,i,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const n=await t.key,i=await t.value;e.push({key:n,value:i,alwaysSet:t.alwaysSet})}return e})).then((e=>gt.mergeObjectSync(t,e))):gt.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return Mt.errToObj,new cn({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var i,a,r,s;const o=null!==(r=null===(a=(i=this._def).errorMap)||void 0===a?void 0:a.call(i,t,n).message)&&void 0!==r?r:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=Mt.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new cn({...this._def,unknownKeys:"strip"})}passthrough(){return new cn({...this._def,unknownKeys:"passthrough"})}extend(e){return new cn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new cn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Pn.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new cn({...this._def,catchall:e})}pick(e){const t={};return Ke.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new cn({...this._def,shape:()=>t})}omit(e){const t={};return Ke.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new cn({...this._def,shape:()=>t})}deepPartial(){return on(this)}partial(e){const t={};return Ke.objectKeys(this.shape).forEach((n=>{const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()})),new cn({...this._def,shape:()=>t})}required(e){const t={};return Ke.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof kn;)e=e._def.innerType;t[n]=e}})),new cn({...this._def,shape:()=>t})}keyof(){return wn(Ke.objectKeys(this.shape))}}cn.create=(e,t)=>new cn({shape:()=>e,unknownKeys:"strip",catchall:an.create(),typeName:Pn.ZodObject,...Et(t)}),cn.strictCreate=(e,t)=>new cn({shape:()=>e,unknownKeys:"strict",catchall:an.create(),typeName:Pn.ZodObject,...Et(t)}),cn.lazycreate=(e,t)=>new cn({shape:e,unknownKeys:"strip",catchall:an.create(),typeName:Pn.ZodObject,...Et(t)});class ln extends At{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new ot(e.ctx.common.issues)));return ht(t,{code:st.invalid_union,unionErrors:n}),pt}));{let e;const i=[];for(const a of n){const n={...t,common:{...t.common,issues:[]},parent:null},r=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:n}),n.common.issues.length&&i.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=i.map((e=>new ot(e)));return ht(t,{code:st.invalid_union,unionErrors:a}),pt}}get options(){return this._def.options}}ln.create=(e,t)=>new ln({options:e,typeName:Pn.ZodUnion,...Et(t)});const dn=e=>e instanceof yn?dn(e.schema):e instanceof Sn?dn(e.innerType()):e instanceof bn?[e.value]:e instanceof xn?e.options:e instanceof Mn?Ke.objectValues(e.enum):e instanceof En?dn(e._def.innerType):e instanceof Xt?[void 0]:e instanceof en?[null]:e instanceof kn?[void 0,...dn(e.unwrap())]:e instanceof $n?[null,...dn(e.unwrap())]:e instanceof zn||e instanceof On?dn(e.unwrap()):e instanceof An?dn(e._def.innerType):[];class un extends At{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.object)return ht(t,{code:st.invalid_type,expected:at.object,received:t.parsedType}),pt;const n=this.discriminator,i=t.data[n],a=this.optionsMap.get(i);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(ht(t,{code:st.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),pt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const i=new Map;for(const n of t){const t=dn(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of t){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,n)}}return new un({typeName:Pn.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Et(n)})}}function hn(e,t){const n=rt(e),i=rt(t);if(e===t)return{valid:!0,data:e};if(n===at.object&&i===at.object){const n=Ke.objectKeys(t),i=Ke.objectKeys(e).filter((e=>-1!==n.indexOf(e))),a={...e,...t};for(const n of i){const i=hn(e[n],t[n]);if(!i.valid)return{valid:!1};a[n]=i.data}return{valid:!0,data:a}}if(n===at.array&&i===at.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let i=0;i<e.length;i++){const a=hn(e[i],t[i]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===at.date&&i===at.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class gn extends At{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(e,i)=>{if(_t(e)||_t(i))return pt;const a=hn(e.value,i.value);return a.valid?((vt(e)||vt(i))&&t.dirty(),{status:t.value,value:a.data}):(ht(n,{code:st.invalid_intersection_types}),pt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>i(e,t))):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}gn.create=(e,t,n)=>new gn({left:e,right:t,typeName:Pn.ZodIntersection,...Et(n)});class pn extends At{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.array)return ht(n,{code:st.invalid_type,expected:at.array,received:n.parsedType}),pt;if(n.data.length<this._def.items.length)return ht(n,{code:st.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pt;!this._def.rest&&n.data.length>this._def.items.length&&(ht(n,{code:st.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map(((e,t)=>{const i=this._def.items[t]||this._def.rest;return i?i._parse(new kt(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(i).then((e=>gt.mergeArray(t,e))):gt.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new pn({...this._def,rest:e})}}pn.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pn({items:e,typeName:Pn.ZodTuple,rest:null,...Et(t)})};class mn extends At{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.object)return ht(n,{code:st.invalid_type,expected:at.object,received:n.parsedType}),pt;const i=[],a=this._def.keyType,r=this._def.valueType;for(const e in n.data)i.push({key:a._parse(new kt(n,e,n.path,e)),value:r._parse(new kt(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?gt.mergeObjectAsync(t,i):gt.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return new mn(t instanceof At?{keyType:e,valueType:t,typeName:Pn.ZodRecord,...Et(n)}:{keyType:Wt.create(),valueType:e,typeName:Pn.ZodRecord,...Et(t)})}}class fn extends At{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.map)return ht(n,{code:st.invalid_type,expected:at.map,received:n.parsedType}),pt;const i=this._def.keyType,a=this._def.valueType,r=[...n.data.entries()].map((([e,t],r)=>({key:i._parse(new kt(n,e,n.path,[r,"key"])),value:a._parse(new kt(n,t,n.path,[r,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of r){const i=await n.key,a=await n.value;if("aborted"===i.status||"aborted"===a.status)return pt;"dirty"!==i.status&&"dirty"!==a.status||t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of r){const i=n.key,a=n.value;if("aborted"===i.status||"aborted"===a.status)return pt;"dirty"!==i.status&&"dirty"!==a.status||t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}}}fn.create=(e,t,n)=>new fn({valueType:t,keyType:e,typeName:Pn.ZodMap,...Et(n)});class _n extends At{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.set)return ht(n,{code:st.invalid_type,expected:at.set,received:n.parsedType}),pt;const i=this._def;null!==i.minSize&&n.data.size<i.minSize.value&&(ht(n,{code:st.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&n.data.size>i.maxSize.value&&(ht(n,{code:st.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const a=this._def.valueType;function r(e){const n=new Set;for(const i of e){if("aborted"===i.status)return pt;"dirty"===i.status&&t.dirty(),n.add(i.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map(((e,t)=>a._parse(new kt(n,e,n.path,t))));return n.common.async?Promise.all(s).then((e=>r(e))):r(s)}min(e,t){return new _n({...this._def,minSize:{value:e,message:Mt.toString(t)}})}max(e,t){return new _n({...this._def,maxSize:{value:e,message:Mt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}_n.create=(e,t)=>new _n({valueType:e,minSize:null,maxSize:null,typeName:Pn.ZodSet,...Et(t)});class vn extends At{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.function)return ht(t,{code:st.invalid_type,expected:at.function,received:t.parsedType}),pt;function n(e,n){return ut({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,dt(),ct].filter((e=>!!e)),issueData:{code:st.invalid_arguments,argumentsError:n}})}function i(e,n){return ut({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,dt(),ct].filter((e=>!!e)),issueData:{code:st.invalid_return_type,returnTypeError:n}})}const a={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof Cn){const e=this;return ft((async function(...t){const s=new ot([]),o=await e._def.args.parseAsync(t,a).catch((e=>{throw s.addIssue(n(t,e)),s})),c=await Reflect.apply(r,this,o),l=await e._def.returns._def.type.parseAsync(c,a).catch((e=>{throw s.addIssue(i(c,e)),s}));return l}))}{const e=this;return ft((function(...t){const s=e._def.args.safeParse(t,a);if(!s.success)throw new ot([n(t,s.error)]);const o=Reflect.apply(r,this,s.data),c=e._def.returns.safeParse(o,a);if(!c.success)throw new ot([i(o,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new vn({...this._def,args:pn.create(e).rest(nn.create())})}returns(e){return new vn({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new vn({args:e||pn.create([]).rest(nn.create()),returns:t||nn.create(),typeName:Pn.ZodFunction,...Et(n)})}}class yn extends At{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}yn.create=(e,t)=>new yn({getter:e,typeName:Pn.ZodLazy,...Et(t)});class bn extends At{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ht(t,{received:t.data,code:st.invalid_literal,expected:this._def.value}),pt}return{status:"valid",value:e.data}}get value(){return this._def.value}}function wn(e,t){return new xn({values:e,typeName:Pn.ZodEnum,...Et(t)})}bn.create=(e,t)=>new bn({value:e,typeName:Pn.ZodLiteral,...Et(t)});class xn extends At{constructor(){super(...arguments),Ct.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return ht(t,{expected:Ke.joinValues(n),received:t.parsedType,code:st.invalid_type}),pt}if(wt(this,Ct,"f")||xt(this,Ct,new Set(this._def.values),"f"),!wt(this,Ct,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ht(t,{received:t.data,code:st.invalid_enum_value,options:n}),pt}return ft(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return xn.create(e,{...this._def,...t})}exclude(e,t=this._def){return xn.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Ct=new WeakMap,xn.create=wn;class Mn extends At{constructor(){super(...arguments),St.set(this,void 0)}_parse(e){const t=Ke.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==at.string&&n.parsedType!==at.number){const e=Ke.objectValues(t);return ht(n,{expected:Ke.joinValues(e),received:n.parsedType,code:st.invalid_type}),pt}if(wt(this,St,"f")||xt(this,St,new Set(Ke.getValidEnumValues(this._def.values)),"f"),!wt(this,St,"f").has(e.data)){const e=Ke.objectValues(t);return ht(n,{received:n.data,code:st.invalid_enum_value,options:e}),pt}return ft(e.data)}get enum(){return this._def.values}}St=new WeakMap,Mn.create=(e,t)=>new Mn({values:e,typeName:Pn.ZodNativeEnum,...Et(t)});class Cn extends At{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.promise&&!1===t.common.async)return ht(t,{code:st.invalid_type,expected:at.promise,received:t.parsedType}),pt;const n=t.parsedType===at.promise?t.data:Promise.resolve(t.data);return ft(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Cn.create=(e,t)=>new Cn({type:e,typeName:Pn.ZodPromise,...Et(t)});class Sn extends At{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:e=>{ht(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===i.type){const e=i.transform(n.data,a);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return pt;const i=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===i.status?pt:"dirty"===i.status||"dirty"===t.value?mt(i.value):i}));{if("aborted"===t.value)return pt;const i=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===i.status?pt:"dirty"===i.status||"dirty"===t.value?mt(i.value):i}}if("refinement"===i.type){const e=e=>{const t=i.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===i.status?pt:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?pt:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===i.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!yt(e))return e;const r=i.transform(e.value,a);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>yt(e)?Promise.resolve(i.transform(e.value,a)).then((e=>({status:t.value,value:e}))):e))}Ke.assertNever(i)}}Sn.create=(e,t,n)=>new Sn({schema:e,typeName:Pn.ZodEffects,effect:t,...Et(n)}),Sn.createWithPreprocess=(e,t,n)=>new Sn({schema:t,effect:{type:"preprocess",transform:e},typeName:Pn.ZodEffects,...Et(n)});class kn extends At{_parse(e){return this._getType(e)===at.undefined?ft(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}kn.create=(e,t)=>new kn({innerType:e,typeName:Pn.ZodOptional,...Et(t)});class $n extends At{_parse(e){return this._getType(e)===at.null?ft(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$n.create=(e,t)=>new $n({innerType:e,typeName:Pn.ZodNullable,...Et(t)});class En extends At{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===at.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}En.create=(e,t)=>new En({innerType:e,typeName:Pn.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Et(t)});class An extends At{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return bt(i)?i.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ot(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new ot(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}An.create=(e,t)=>new An({innerType:e,typeName:Pn.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Et(t)});class In extends At{_parse(e){if(this._getType(e)!==at.nan){const t=this._getOrReturnCtx(e);return ht(t,{code:st.invalid_type,expected:at.nan,received:t.parsedType}),pt}return{status:"valid",value:e.data}}}In.create=e=>new In({typeName:Pn.ZodNaN,...Et(e)});const Tn=Symbol("zod_brand");class zn extends At{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class jn extends At{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?pt:"dirty"===e.status?(t.dirty(),mt(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?pt:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new jn({in:e,out:t,typeName:Pn.ZodPipeline})}}class On extends At{_parse(e){const t=this._def.innerType._parse(e),n=e=>(yt(e)&&(e.value=Object.freeze(e.value)),e);return bt(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function Dn(e,t={},n){return e?tn.create().superRefine(((i,a)=>{var r,s;if(!e(i)){const e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,o=null===(s=null!==(r=e.fatal)&&void 0!==r?r:n)||void 0===s||s,c="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...c,fatal:o})}})):tn.create()}On.create=(e,t)=>new On({innerType:e,typeName:Pn.ZodReadonly,...Et(t)});const Rn={object:cn.lazycreate};var Pn;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Pn||(Pn={}));const Ln=Wt.create,Nn=Qt.create,Fn=In.create,Vn=Yt.create,Hn=Gt.create,Bn=Kt.create,Un=Jt.create,qn=Xt.create,Wn=en.create,Zn=tn.create,Qn=nn.create,Yn=an.create,Gn=rn.create,Kn=sn.create,Jn=cn.create,Xn=cn.strictCreate,ei=ln.create,ti=un.create,ni=gn.create,ii=pn.create,ai=mn.create,ri=fn.create,si=_n.create,oi=vn.create,ci=yn.create,li=bn.create,di=xn.create,ui=Mn.create,hi=Cn.create,gi=Sn.create,pi=kn.create,mi=$n.create,fi=Sn.createWithPreprocess,_i=jn.create,vi={string:e=>Wt.create({...e,coerce:!0}),number:e=>Qt.create({...e,coerce:!0}),boolean:e=>Gt.create({...e,coerce:!0}),bigint:e=>Yt.create({...e,coerce:!0}),date:e=>Kt.create({...e,coerce:!0})},yi=pt;var bi=Object.freeze({__proto__:null,defaultErrorMap:ct,setErrorMap:function(e){lt=e},getErrorMap:dt,makeIssue:ut,EMPTY_PATH:[],addIssueToContext:ht,ParseStatus:gt,INVALID:pt,DIRTY:mt,OK:ft,isAborted:_t,isDirty:vt,isValid:yt,isAsync:bt,get util(){return Ke},get objectUtil(){return Je},ZodParsedType:at,getParsedType:rt,ZodType:At,datetimeRegex:Ut,ZodString:Wt,ZodNumber:Qt,ZodBigInt:Yt,ZodBoolean:Gt,ZodDate:Kt,ZodSymbol:Jt,ZodUndefined:Xt,ZodNull:en,ZodAny:tn,ZodUnknown:nn,ZodNever:an,ZodVoid:rn,ZodArray:sn,ZodObject:cn,ZodUnion:ln,ZodDiscriminatedUnion:un,ZodIntersection:gn,ZodTuple:pn,ZodRecord:mn,ZodMap:fn,ZodSet:_n,ZodFunction:vn,ZodLazy:yn,ZodLiteral:bn,ZodEnum:xn,ZodNativeEnum:Mn,ZodPromise:Cn,ZodEffects:Sn,ZodTransformer:Sn,ZodOptional:kn,ZodNullable:$n,ZodDefault:En,ZodCatch:An,ZodNaN:In,BRAND:Tn,ZodBranded:zn,ZodPipeline:jn,ZodReadonly:On,custom:Dn,Schema:At,ZodSchema:At,late:Rn,get ZodFirstPartyTypeKind(){return Pn},coerce:vi,any:Zn,array:Kn,bigint:Vn,boolean:Hn,date:Bn,discriminatedUnion:ti,effect:gi,enum:di,function:oi,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Dn((t=>t instanceof e),t),intersection:ni,lazy:ci,literal:li,map:ri,nan:Fn,nativeEnum:ui,never:Yn,null:Wn,nullable:mi,number:Nn,object:Jn,oboolean:()=>Hn().optional(),onumber:()=>Nn().optional(),optional:pi,ostring:()=>Ln().optional(),pipeline:_i,preprocess:fi,promise:hi,record:ai,set:si,strictObject:Xn,string:Ln,symbol:Un,transformer:gi,tuple:ii,undefined:qn,union:ei,unknown:Qn,void:Gn,NEVER:yi,ZodIssueCode:st,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:ot});const wi="https://card.camera/#/troubleshooting",xi=`${wi}?id=stream-does-not-load`,Mi="cameras",Ci=`${Mi}.#.always_error_if_entity_unavailable`,Si=`${Mi}.#.camera_entity`,ki=`${Mi}.#.frigate.camera_name`,$i=`${Mi}.#.capabilities.disable`,Ei=`${Mi}.#.capabilities.disable_except`,Ai=`${Mi}.#.cast.method`,Ii=`${Mi}.#.cast.dashboard.dashboard_path`,Ti=`${Mi}.#.cast.dashboard.view_path`,zi=`${Mi}.#.dimensions.aspect_ratio`,ji=`${Mi}.#.frigate.client_id`,Oi=`${Mi}.#.frigate.labels`,Di=`${Mi}.#.frigate.url`,Ri=`${Mi}.#.frigate.zones`,Pi=`${Mi}.#.go2rtc.modes`,Li=`${Mi}.#.go2rtc.stream`,Ni=`${Mi}.#.icon`,Fi=`${Mi}.#.id`,Vi=`${Mi}.#.image.entity`,Hi=`${Mi}.#.image.entity_parameters`,Bi=`${Mi}.#.image.mode`,Ui=`${Mi}.#.image.refresh_seconds`,qi=`${Mi}.#.image.url`,Wi=`${Mi}.#.motioneye.images.directory_pattern`,Zi=`${Mi}.#.motioneye.images.file_pattern`,Qi=`${Mi}.#.motioneye.movies.directory_pattern`,Yi=`${Mi}.#.motioneye.movies.file_pattern`,Gi=`${Mi}.#.motioneye.url`,Ki=`${Mi}.#.title`,Ji=`${Mi}.#.webrtc_card.entity`,Xi=`${Mi}.#.webrtc_card.url`,ea=`${Mi}.#.live_provider`,ta=`${Mi}.#.dependencies.cameras`,na=`${Mi}.#.dependencies.all_cameras`,ia=`${Mi}.#.dimensions.layout.fit`,aa=`${Mi}.#.dimensions.layout.pan.x`,ra=`${Mi}.#.dimensions.layout.pan.y`,sa=`${Mi}.#.dimensions.layout.position.x`,oa=`${Mi}.#.dimensions.layout.position.y`,ca=`${Mi}.#.dimensions.layout.view_box.top`,la=`${Mi}.#.dimensions.layout.view_box.bottom`,da=`${Mi}.#.dimensions.layout.view_box.left`,ua=`${Mi}.#.dimensions.layout.view_box.right`,ha=`${Mi}.#.dimensions.layout.zoom`,ga=`${Mi}.#.proxy.dynamic`,pa=`${Mi}.#.proxy.media`,ma=`${Mi}.#.proxy.ssl_ciphers`,fa=`${Mi}.#.proxy.ssl_verification`,_a=`${Mi}.#.reolink.media_resolution`,va=`${Mi}.#.reolink.url`,ya=`${Mi}.#.triggers.motion`,ba=`${Mi}.#.triggers.occupancy`,wa=`${Mi}.#.triggers.entities`,xa=`${Mi}.#.triggers.events`,Ma="cameras_global",Ca=`${Ma}.image`,Sa=`${Ma}.live_provider`,ka=`${Ma}.jsmpeg`,$a=`${Ma}.webrtc_card`,Ea=`${Ma}.triggers.occupancy`,Aa=`${Ma}.image.refresh_seconds`,Ia=`${Ma}.dimensions.layout`,Ta=`${Ma}.ptz`,za="elements",ja="view",Oa=`${ja}.camera_select`,Da=`${ja}.default`,Ra=`${ja}.dim`,Pa=`${ja}.interaction_seconds`,La=`${ja}.keyboard_shortcuts`,Na=`${ja}.keyboard_shortcuts.enabled`,Fa=`${La}.ptz_left`,Va=`${La}.ptz_right`,Ha=`${La}.ptz_up`,Ba=`${La}.ptz_down`,Ua=`${La}.ptz_zoom_in`,qa=`${La}.ptz_zoom_out`,Wa=`${La}.ptz_home`,Za=`${ja}.default_cycle_camera`,Qa=`${ja}.default_reset`,Ya=`${Qa}.interaction_mode`,Ga=`${Qa}.every_seconds`,Ka=`${Qa}.entities`,Ja=`${Qa}.after_interaction`,Xa=`${ja}.theme.themes`,er=`${ja}.triggers`,tr=`${er}.show_trigger_status`,nr=`${er}.filter_selected_camera`,ir=`${er}.untrigger_seconds`,ar=`${er}.actions`,rr=`${ar}.trigger`,sr=`${ar}.untrigger`,or=`${ar}.interaction_mode`,cr="media_gallery",lr=`${cr}.controls.filter.mode`,dr=`${cr}.controls.thumbnails.show_details`,ur=`${cr}.controls.thumbnails.show_download_control`,hr=`${cr}.controls.thumbnails.show_favorite_control`,gr=`${cr}.controls.thumbnails.show_timeline_control`,pr=`${cr}.controls.thumbnails.size`,mr="media_viewer",fr=`${mr}.auto_play`,_r=`${mr}.auto_pause`,vr=`${mr}.auto_mute`,yr=`${mr}.auto_unmute`,br=`${mr}.display.mode`,wr=`${mr}.display.grid_columns`,xr=`${mr}.display.grid_max_columns`,Mr=`${mr}.display.grid_selected_width_factor`,Cr=`${mr}.draggable`,Sr=`${mr}.lazy_load`,kr=`${mr}.snapshot_click_plays_clip`,$r=`${mr}.transition_effect`,Er=`${mr}.controls.builtin`,Ar=`${mr}.controls.next_previous.style`,Ir=`${mr}.controls.next_previous.size`,Tr=`${mr}.controls.thumbnails.mode`,zr=`${mr}.controls.thumbnails.show_details`,jr=`${mr}.controls.thumbnails.show_download_control`,Or=`${mr}.controls.thumbnails.show_favorite_control`,Dr=`${mr}.controls.thumbnails.show_timeline_control`,Rr=`${mr}.controls.thumbnails.size`,Pr=`${mr}.controls.timeline.clustering_threshold`,Lr=`${mr}.controls.timeline.events_media_type`,Nr=`${mr}.controls.timeline.mode`,Fr=`${mr}.controls.timeline.pan_mode`,Vr=`${mr}.controls.timeline.show_recordings`,Hr=`${mr}.controls.timeline.style`,Br=`${mr}.controls.timeline.window_seconds`,Ur=`${mr}.zoomable`,qr="live",Wr=`${qr}.auto_play`,Zr=`${qr}.auto_pause`,Qr=`${qr}.auto_mute`,Yr=`${qr}.auto_unmute`,Gr=`${qr}.controls.builtin`,Kr=`${qr}.controls.next_previous.style`,Jr=`${qr}.controls.next_previous.size`,Xr=`${qr}.controls.ptz.hide_home`,es=`${qr}.controls.ptz.hide_pan_tilt`,ts=`${qr}.controls.ptz.hide_zoom`,ns=`${qr}.controls.ptz.mode`,is=`${qr}.controls.ptz.orientation`,as=`${qr}.controls.ptz.position`,rs=`${qr}.controls.thumbnails.media_type`,ss=`${qr}.controls.thumbnails.events_media_type`,os=`${qr}.controls.thumbnails.mode`,cs=`${qr}.controls.thumbnails.size`,ls=`${qr}.controls.thumbnails.show_details`,ds=`${qr}.controls.thumbnails.show_download_control`,us=`${qr}.controls.thumbnails.show_favorite_control`,hs=`${qr}.controls.thumbnails.show_timeline_control`,gs=`${qr}.controls.timeline.clustering_threshold`,ps=`${qr}.controls.timeline.events_media_type`,ms=`${qr}.controls.timeline.mode`,fs=`${qr}.controls.timeline.pan_mode`,_s=`${qr}.controls.timeline.show_recordings`,vs=`${qr}.controls.timeline.style`,ys=`${qr}.controls.timeline.window_seconds`,bs=`${qr}.display.mode`,ws=`${qr}.display.grid_columns`,xs=`${qr}.display.grid_max_columns`,Ms=`${qr}.display.grid_selected_width_factor`,Cs=`${qr}.draggable`,Ss=`${qr}.lazy_load`,ks=`${qr}.lazy_unload`,$s=`${qr}.preload`,Es=`${qr}.transition_effect`,As=`${qr}.show_image_during_load`,Is=`${qr}.microphone.disconnect_seconds`,Ts=`${qr}.microphone.mute_after_microphone_mute_seconds`,zs=`${qr}.microphone.always_connected`,js=`${qr}.zoomable`,Os="image",Ds=`${Os}.entity`,Rs=`${Os}.entity_parameters`,Ps=`${Os}.mode`,Ls=`${Os}.refresh_seconds`,Ns=`${Os}.url`,Fs="timeline",Vs=`${Fs}.window_seconds`,Hs=`${Fs}.clustering_threshold`,Bs=`${Fs}.events_media_type`,Us=`${Fs}.show_recordings`,qs=`${Fs}.style`,Ws=`${Fs}.controls.thumbnails.mode`,Zs=`${Fs}.controls.thumbnails.size`,Qs=`${Fs}.controls.thumbnails.show_details`,Ys=`${Fs}.controls.thumbnails.show_download_control`,Gs=`${Fs}.controls.thumbnails.show_favorite_control`,Ks=`${Fs}.controls.thumbnails.show_timeline_control`,Js="menu",Xs=`${Js}.alignment`,eo=`${Js}.position`,to=`${Js}.style`,no=`${Js}.button_size`,io=`${Js}.buttons`,ao=`${io}.frigate`,ro=`${io}.camera_ui`,so=`${io}.fullscreen`,oo=`${io}.play`,co=`${io}.mute`,lo=`${io}.media_player`,uo=`${io}.timeline`,ho="status_bar",go=`${ho}.position`,po=`${ho}.style`,mo=`${ho}.popup_seconds`,fo=`${ho}.height`,_o=`${ho}.items`,vo="dimensions",yo=`${vo}.aspect_ratio`,bo=`${vo}.aspect_ratio_mode`,wo=`${vo}.height`,xo="overrides",Mo="performance",Co=`${Mo}.features.animated_progress_indicator`,So=`${Mo}.features.card_loading_indicator`,ko=`${Mo}.features.media_chunk_size`,$o=`${Mo}.features.max_simultaneous_engine_requests`,Eo=`${Mo}.profile`,Ao=`${Mo}.style.box_shadow`,Io=`${Mo}.style.border_radius`,To="profiles",zo=1e3,jo="__IMAGE_VIEW_ZOOM__";class Oo extends Error{constructor(e,t){super(e),this.context=t}}const Do=["clips","favorite-events","favorite-recordings","live","menu","ptz","recordings","seek","snapshots","substream","trigger"],Ro=bi.object({url:bi.string(),mime_type:bi.string()}),Po=bi.object({path:bi.string()});function Lo(e){if(e instanceof bi.ZodDefault)return Lo(e.removeDefault());if(e instanceof bi.ZodObject){const t={};for(const n in e.shape){const i=e.shape[n];t[n]=bi.ZodOptional.create(Lo(i))}return new bi.ZodObject({...e._def,shape:()=>t})}return e instanceof bi.ZodArray?bi.ZodArray.create(Lo(e.element)).min(e._def.minLength?.value,e._def.minLength?.message).max(e._def.maxLength?.value,e._def.maxLength?.message).length(e._def.exactLength?.value,e._def.exactLength?.message):e instanceof bi.ZodOptional?bi.ZodOptional.create(Lo(e.unwrap())):e instanceof bi.ZodNullable?bi.ZodNullable.create(Lo(e.unwrap())):e instanceof bi.ZodTuple?bi.ZodTuple.create(e.items.map((e=>Lo(e)))):e}function No(e){const t=e.format();return Object.keys(t).filter((e=>!e.startsWith("_")))}const Fo=e=>{const t=new Set;if(e.issues.length)for(const n of e.issues)if("invalid_union"===n.code){const e=n.unionErrors;for(const n of e)Fo(n).forEach(t.add,t)}else t.add(Vo(n.path));return t},Vo=e=>{let t="";for(let n=0;n<e.length;n++){const i=e[n];"number"==typeof i?t+="["+i+"]":t?t+=" -> "+i:t=i}return t},Ho=bi.object({key:bi.string(),ctrl:bi.boolean().optional(),shift:bi.boolean().optional(),alt:bi.boolean().optional(),meta:bi.boolean().optional()}),Bo={enabled:!0,ptz_left:{key:"ArrowLeft"},ptz_right:{key:"ArrowRight"},ptz_up:{key:"ArrowUp"},ptz_down:{key:"ArrowDown"},ptz_zoom_in:{key:"+"},ptz_zoom_out:{key:"-"},ptz_home:{key:"h"}},Uo=bi.object({enabled:bi.boolean().default(Bo.enabled),ptz_left:Ho.nullable().default(Bo.ptz_left),ptz_right:Ho.nullable().default(Bo.ptz_right),ptz_up:Ho.nullable().default(Bo.ptz_up),ptz_down:Ho.nullable().default(Bo.ptz_down),ptz_zoom_in:Ho.nullable().default(Bo.ptz_zoom_in),ptz_zoom_out:Ho.nullable().default(Bo.ptz_zoom_out),ptz_home:Ho.nullable().default(Bo.ptz_home)}),qo=[...["left","right","up","down","zoom_in","zoom_out"],"preset"],Wo=20,Zo=20,Qo=100,Yo=Qo,Go=["diagnostics","live","clip","clips","snapshot","snapshots","recording","recordings","image","timeline"],Ko="live",Jo=["unselected","hidden"],Xo=["selected","visible"],ec=[...Xo,"microphone"],tc=[...Jo,"microphone"],nc=["start","stop"],ic=["events","clips","snapshots"],ac=/^[-\w]+$/,rc=1,sc=10,oc=bi.object({x:bi.number().min(0).max(100).optional(),y:bi.number().min(0).max(100).optional()}),cc=bi.number().min(1).max(10),lc=bi.enum(["single","grid"]),dc=bi.object({mode:lc.optional(),grid_selected_width_factor:bi.number().min(0).optional(),grid_max_columns:bi.number().min(0).optional(),grid_columns:bi.number().min(0).optional()}).optional(),uc=bi.object({confirmation:bi.boolean().or(bi.object({text:bi.string().optional(),exemptions:bi.object({user:bi.string()}).array().optional()})).optional()}),hc=uc.extend({action:bi.literal("toggle")}),gc=bi.object({entity_id:bi.string().optional(),device_id:bi.string().optional(),area_id:bi.string().optional()}),pc=uc.extend({action:bi.literal("perform-action"),perform_action:bi.string(),data:bi.object({}).passthrough().optional(),target:gc.optional()}),mc=uc.extend({action:bi.literal("call-service"),service:bi.string(),data:bi.object({}).passthrough().optional(),target:gc.optional()}),fc=uc.extend({action:bi.literal("navigate"),navigation_path:bi.string()}),_c=uc.extend({action:bi.literal("url"),url_path:bi.string()}),vc=uc.extend({action:bi.literal("more-info")}),yc=uc.extend({action:bi.literal("fire-dom-event")}).passthrough(),bc=uc.extend({action:bi.literal("none")}),wc=yc.extend({action:bi.literal("custom:frigate-card-action").transform((()=>"fire-dom-event")).or(bi.literal("fire-dom-event")),card_id:bi.string().regex(ac,"card_id parameter can only contain [a-z][A-Z][0-9_]-").optional()}),xc=wc.extend({frigate_card_action:bi.enum(Go)}),Mc=wc.extend({frigate_card_action:bi.enum(["camera_ui","default","download","expand","fullscreen","live_substream_off","live_substream_on","menu_toggle","microphone_connect","microphone_disconnect","microphone_mute","microphone_unmute","mute","pause","play","screenshot","unmute"])}),Cc=wc.extend({frigate_card_action:bi.literal("camera_select"),camera:bi.string().optional(),triggered:bi.boolean().optional()}),Sc=wc.extend({frigate_card_action:bi.literal("live_substream_select"),camera:bi.string()}),kc=wc.extend({frigate_card_action:bi.literal("media_player"),media_player:bi.string(),media_player_action:bi.enum(["play","stop"])}),$c=wc.extend({frigate_card_action:bi.literal("display_mode_select"),display_mode:lc}),Ec=wc.extend({frigate_card_action:bi.literal("ptz"),camera:bi.string().optional(),ptz_action:bi.enum(qo).optional(),ptz_phase:bi.enum(nc).optional(),ptz_preset:bi.string().optional()}),Ac=wc.extend({frigate_card_action:bi.literal("ptz_digital"),target_id:bi.string().optional(),absolute:bi.object({zoom:cc.optional(),pan:oc.optional()}).optional(),ptz_action:bi.enum(qo).optional(),ptz_phase:bi.enum(nc).optional()}),Ic=wc.extend({frigate_card_action:bi.literal("ptz_multi"),target_id:bi.string().optional(),ptz_action:bi.enum(qo).optional(),ptz_phase:bi.enum(nc).optional(),ptz_preset:bi.string().optional()}),Tc=wc.extend({frigate_card_action:bi.literal("ptz_controls"),enabled:bi.boolean()}),zc=bi.object({ms:bi.number().optional(),s:bi.number().optional(),m:bi.number().optional(),h:bi.number().optional()}),jc=wc.extend({frigate_card_action:bi.literal("sleep"),duration:zc.optional().default({s:1})}),Oc=wc.extend({frigate_card_action:bi.literal("status_bar"),status_bar_action:bi.enum(["add","remove","reset"]),items:bi.lazy((()=>ul)).array().optional()}),Dc=wc.extend({frigate_card_action:bi.literal("log"),message:bi.string(),level:bi.enum(["debug","info","warn","error"]).default("info")}),Rc=bi.union([Cc,Mc,Sc,Dc,kc,Ec,Ac,Ic,Tc,xc,$c,jc,Oc]),Pc=bi.union([hc,mc,pc,fc,_c,vc,bc,yc,Rc]),Lc=bi.object({tap_action:Pc.or(Pc.array()).optional(),hold_action:Pc.or(Pc.array()).optional(),double_tap_action:Pc.or(Pc.array()).optional(),start_tap_action:Pc.or(Pc.array()).optional(),end_tap_action:Pc.or(Pc.array()).optional()}).passthrough(),Nc=bi.object({actions:Lc.optional()}),Fc=Lc.extend({style:bi.record(bi.string().nullable().or(bi.undefined()).or(bi.number())).optional(),title:bi.string().nullable().optional()}),Vc=Fc.extend({type:bi.literal("state-badge"),entity:bi.string()}),Hc=Fc.extend({type:bi.literal("state-icon"),entity:bi.string(),icon:bi.string().optional(),state_color:bi.boolean().default(!0)}),Bc=Fc.extend({type:bi.literal("state-label"),entity:bi.string(),attribute:bi.string().optional(),prefix:bi.string().optional(),suffix:bi.string().optional()}),Uc=Fc.extend({type:bi.literal("service-button"),title:bi.string(),service:bi.string(),service_data:bi.object({}).passthrough().optional()}),qc=Fc.extend({type:bi.literal("icon"),icon:bi.string(),entity:bi.string().optional()}),Wc=Fc.extend({type:bi.literal("image"),entity:bi.string().optional(),image:bi.string().optional(),camera_image:bi.string().optional(),camera_view:bi.string().optional(),state_image:bi.object({}).passthrough().optional(),filter:bi.string().optional(),state_filter:bi.object({}).passthrough().optional(),aspect_ratio:bi.string().optional()}),Zc=bi.object({condition:bi.literal("state").optional(),entity:bi.string(),state:bi.string().or(bi.string().array()).optional(),state_not:bi.string().or(bi.string().array()).optional()}),Qc=bi.object({condition:bi.literal("numeric_state"),entity:bi.string(),above:bi.number().optional(),below:bi.number().optional()}),Yc=bi.object({condition:bi.literal("screen"),media_query:bi.string()}),Gc=bi.object({condition:bi.literal("user"),users:bi.string().array().min(1)}),Kc=bi.discriminatedUnion("condition",[Zc,Qc,Yc,Gc]),Jc=bi.object({type:bi.literal("conditional"),conditions:Kc.array(),elements:bi.lazy((()=>Sl))}),Xc=bi.object({type:bi.string().superRefine(((e,t)=>{e.match(/^custom:(?!frigate-card).+/)||t.addIssue({code:bi.ZodIssueCode.custom,message:"Frigate-card custom elements must match specific schemas",fatal:!0})}))}).passthrough(),el=bi.object({enabled:bi.boolean().default(!0).optional(),priority:bi.number().min(0).max(Qo).default(50).optional(),alignment:bi.enum(["matching","opposing"]).default("matching").optional(),icon:bi.string().optional(),permanent:bi.boolean().default(!1).optional()}),tl=el.merge(qc).extend({type:bi.literal("custom:frigate-card-menu-icon")}),nl=el.merge(Hc).extend({type:bi.literal("custom:frigate-card-menu-state-icon")}).merge(el),il=Fc.extend({entity:bi.string().optional(),icon:bi.string().optional(),state_color:bi.boolean().default(!0),selected:bi.boolean().default(!1),subtitle:bi.string().optional(),enabled:bi.boolean().default(!0)}),al=el.merge(qc).extend({type:bi.literal("custom:frigate-card-menu-submenu"),items:il.array()}),rl=el.merge(Hc).extend({type:bi.literal("custom:frigate-card-menu-submenu-select"),options:bi.record(il.deepPartial()).optional()}),sl=bi.object({enabled:bi.boolean().default(!0).optional(),priority:bi.number().min(0).max(100).default(50).optional()}),ol=sl.extend({sufficient:bi.boolean().default(!1).optional(),exclusive:bi.boolean().default(!1).optional(),expand:bi.boolean().default(!1).optional(),actions:Lc.optional()}),cl=ol.extend({type:bi.literal("custom:frigate-card-status-bar-icon"),icon:bi.string()}),ll=ol.extend({type:bi.literal("custom:frigate-card-status-bar-image"),image:bi.string()}),dl=ol.extend({type:bi.literal("custom:frigate-card-status-bar-string"),string:bi.string()}),ul=bi.union([cl,ll,dl]),hl=bi.object({condition:bi.literal("view"),views:bi.string().array()}),gl=bi.object({condition:bi.literal("fullscreen"),fullscreen:bi.boolean()}),pl=bi.object({condition:bi.literal("expand"),expand:bi.boolean()}),ml=bi.object({condition:bi.literal("camera"),cameras:bi.string().array()}),fl=bi.object({condition:bi.literal("media_loaded"),media_loaded:bi.boolean()}),_l=bi.object({condition:bi.literal("display_mode"),display_mode:lc}),vl=bi.object({condition:bi.literal("triggered"),triggered:bi.string().array()}),yl=bi.object({condition:bi.literal("interaction"),interaction:bi.boolean()}),bl=bi.object({condition:bi.literal("microphone"),connected:bi.boolean().optional(),muted:bi.boolean().optional()}),wl=bi.object({condition:bi.literal("key"),key:bi.string(),state:bi.enum(["down","up"]).optional(),ctrl:bi.boolean().optional(),shift:bi.boolean().optional(),alt:bi.boolean().optional(),meta:bi.boolean().optional()}),xl=bi.object({condition:bi.literal("user_agent"),user_agent:bi.string().optional(),user_agent_re:bi.string().refine((e=>{try{new RegExp(e)}catch{return!1}return!0}),{message:"Invalid regular expression"}).optional(),companion:bi.boolean().optional()}),Ml=bi.discriminatedUnion("condition",[Zc,Qc,Yc,Gc,hl,gl,pl,ml,fl,_l,vl,yl,bl,wl,xl]),Cl=bi.object({type:bi.literal("custom:frigate-card-conditional"),conditions:Ml.array(),elements:bi.lazy((()=>Sl))}),Sl=bi.union([Jc,Xc,Cl,qc,Wc,tl,nl,al,rl,Uc,Vc,Hc,Bc,cl,ll,dl]).array().optional(),kl=bi.object({fit:bi.enum(["contain","cover","fill"]).optional(),position:bi.object({x:bi.number().min(0).max(100).optional(),y:bi.number().min(0).max(100).optional()}).optional(),view_box:bi.object({bottom:bi.number().min(0).max(100).optional().default(0),left:bi.number().min(0).max(100).optional().default(0),right:bi.number().min(0).max(100).optional().default(0),top:bi.number().min(0).max(100).optional().default(0)}).optional(),pan:oc.optional(),zoom:cc.optional()}),$l=bi.number().array().length(2).or(bi.string().regex(/^\s*\d+\.?\d*\s*[:/]\s*\d+\.?\d*\s*$/).transform((e=>e.split(/[:\/]/).map((e=>Number(e)))))),El={r2c_delay_between_calls_seconds:.5,c2r_delay_between_calls_seconds:.2},Al=function(e){return t=>{if(!t||"object"!=typeof t||!t.service)return t;const n={...t};return Object.keys(t).forEach((i=>{const a=i.match(/^data_(.+)$/),r=a?.[1];r&&!(`${e}${r}`in t)&&(n[`${e}${r}`]={action:"perform-action",perform_action:t.service,data:t[i]},delete n[i],delete n.service)})),n}},Il=bi.preprocess(Al("actions_"),bi.object({actions_left:pc.optional(),actions_left_start:pc.optional(),actions_left_stop:pc.optional(),actions_right:pc.optional(),actions_right_start:pc.optional(),actions_right_stop:pc.optional(),actions_up:pc.optional(),actions_up_start:pc.optional(),actions_up_stop:pc.optional(),actions_down:pc.optional(),actions_down_start:pc.optional(),actions_down_stop:pc.optional(),actions_zoom_in:pc.optional(),actions_zoom_in_start:pc.optional(),actions_zoom_in_stop:pc.optional(),actions_zoom_out:pc.optional(),actions_zoom_out_start:pc.optional(),actions_zoom_out_stop:pc.optional(),r2c_delay_between_calls_seconds:bi.number().default(El.r2c_delay_between_calls_seconds),c2r_delay_between_calls_seconds:bi.number().default(El.c2r_delay_between_calls_seconds),presets:bi.preprocess(Al(""),bi.union([bi.record(pc),bi.object({service:bi.string().optional()})])).optional(),service:bi.string().optional()}).passthrough()),Tl={orientation:"horizontal",mode:"auto",hide_pan_tilt:!1,hide_zoom:!1,hide_home:!1,position:"bottom-right"},zl=bi.object({mode:bi.enum(["off","auto","on"]).default(Tl.mode),position:bi.enum(["top-left","top-right","bottom-left","bottom-right"]).default(Tl.position),orientation:bi.enum(["vertical","horizontal"]).default(Tl.orientation),hide_pan_tilt:bi.boolean().default(Tl.hide_pan_tilt),hide_zoom:bi.boolean().default(Tl.hide_zoom),hide_home:bi.boolean().default(Tl.hide_home),style:bi.object({}).passthrough().optional()}),jl={mode:"auto",refresh_seconds:1,zoomable:!0},Ol=bi.object({mode:bi.enum(["auto","camera","entity","screensaver","url"]).default(jl.mode),refresh_seconds:bi.number().min(0).default(jl.refresh_seconds),url:bi.string().optional(),entity:bi.string().optional(),entity_parameters:bi.string().optional()}),Dl=Ol.extend({zoomable:bi.boolean().default(jl.zoomable)}).merge(Nc).default(jl),Rl=75,Pl=300,Ll={size:100,show_details:!0,show_favorite_control:!0,show_timeline_control:!0,show_download_control:!0},Nl=bi.object({size:bi.number().min(75).max(300).default(Ll.size),show_details:bi.boolean().default(Ll.show_details),show_favorite_control:bi.boolean().default(Ll.show_favorite_control),show_timeline_control:bi.boolean().default(Ll.show_timeline_control),show_download_control:bi.boolean().default(Ll.show_download_control)}),Fl={...Ll,mode:"right"},Vl=Nl.extend({mode:bi.enum(["none","above","below","left","right"]).default(Fl.mode)}),Hl=bi.enum(["all","clips","snapshots"]),Bl={clustering_threshold:3,events_media_type:"all",window_seconds:3600,show_recordings:!0,style:"stack",pan_mode:"pan"},Ul=bi.enum(["pan","seek","seek-in-media","seek-in-camera"]),ql=bi.object({clustering_threshold:bi.number().optional().default(Bl.clustering_threshold),events_media_type:Hl.optional().default(Bl.events_media_type),window_seconds:bi.number().min(60).max(86400).optional().default(Bl.window_seconds),show_recordings:bi.boolean().optional().default(Bl.show_recordings),style:bi.enum(["stack","ribbon"]).optional().default(Bl.style),pan_mode:Ul.optional().default(Bl.pan_mode)}),Wl={...Bl,mode:"none",style:"ribbon"},Zl=ql.extend({mode:bi.enum(["none","above","below"]).default(Wl.mode),style:ql.shape.style.default(Wl.style)}),Ql={...Bl,controls:{thumbnails:Fl}},Yl=ql.extend({controls:bi.object({thumbnails:Vl.default(Ql.controls.thumbnails)}).default(Ql.controls)}).default(Ql),Gl=bi.object({style:bi.enum(["none","chevrons","icons","thumbnails"]),size:bi.number().min(20)}),Kl=bi.enum(["none","slide"]),Jl={always_connected:!1,disconnect_seconds:90,mute_after_microphone_mute_seconds:60},Xl=bi.object({always_connected:bi.boolean().default(Jl.always_connected),disconnect_seconds:bi.number().min(0).default(Jl.disconnect_seconds),mute_after_microphone_mute_seconds:bi.number().min(0).default(Jl.mute_after_microphone_mute_seconds)}).default(Jl),ed=bi.object({url:bi.string().transform((e=>e.replace(/\/+$/,""))).optional(),host:bi.string().optional(),modes:bi.enum(["webrtc","mse","mp4","mjpeg"]).array().optional(),stream:bi.string().optional()}),td=bi.object({entity:bi.string().optional(),url:bi.string().optional()}).passthrough(),nd=bi.object({options:bi.object({audio:bi.boolean().optional(),video:bi.boolean().optional(),pauseWhenHidden:bi.boolean().optional(),disableGl:bi.boolean().optional(),disableWebAssembly:bi.boolean().optional(),preserveDrawingBuffer:bi.boolean().optional(),progressive:bi.boolean().optional(),throttled:bi.boolean().optional(),chunkSize:bi.number().optional(),maxAudioLag:bi.number().optional(),videoBufferSize:bi.number().optional(),audioBufferSize:bi.number().optional()}).optional()}),id={...Fl,media_type:"events",events_media_type:"all"},ad={auto_play:[...Xo],auto_pause:[],auto_mute:[...tc],auto_unmute:["microphone"],preload:!1,lazy_load:!0,lazy_unload:[],draggable:!0,zoomable:!0,transition_effect:"slide",show_image_during_load:!0,mode:"single",controls:{builtin:!0,next_previous:{size:48,style:"chevrons"},ptz:Tl,thumbnails:id,timeline:Wl},microphone:{...Jl}},rd=Vl.extend({media_type:bi.enum(["events","recordings"]).default(ad.controls.thumbnails.media_type),events_media_type:Hl.default(ad.controls.thumbnails.events_media_type)}),sd=bi.object({auto_pause:bi.enum(Jo).array().default(ad.auto_pause),auto_play:bi.enum(Xo).array().default(ad.auto_play),auto_mute:bi.enum(tc).array().default(ad.auto_mute),auto_unmute:bi.enum(ec).array().default(ad.auto_unmute),controls:bi.object({builtin:bi.boolean().default(ad.controls.builtin),next_previous:Gl.extend({style:bi.enum(["none","chevrons","icons"]).default(ad.controls.next_previous.style),size:Gl.shape.size.default(ad.controls.next_previous.size)}).default(ad.controls.next_previous),ptz:zl.default(ad.controls.ptz),thumbnails:rd.default(ad.controls.thumbnails),timeline:Zl.default(ad.controls.timeline)}).default(ad.controls),display:dc,draggable:bi.boolean().default(ad.draggable),lazy_load:bi.boolean().default(ad.lazy_load),lazy_unload:bi.enum(Jo).array().default(ad.lazy_unload),microphone:Xl.default(ad.microphone),preload:bi.boolean().default(ad.preload),show_image_during_load:bi.boolean().default(ad.show_image_during_load),transition_effect:Kl.default(ad.transition_effect),zoomable:bi.boolean().default(ad.zoomable)}).merge(Nc).default(ad),od=bi.object({live:sd}),cd=bi.object({method:bi.enum(["standard","dashboard"]).default("standard").optional(),dashboard:bi.object({dashboard_path:bi.string().optional(),view_path:bi.string().optional()}).optional()}),ld={dependencies:{all_cameras:!1,cameras:[]},engine:"auto",frigate:{client_id:"frigate"},live_provider:"auto",motioneye:{images:{directory_pattern:"%Y-%m-%d",file_pattern:"%H-%M-%S"},movies:{directory_pattern:"%Y-%m-%d",file_pattern:"%H-%M-%S"}},reolink:{media_resolution:"low"},ptz:El,triggers:{motion:!1,occupancy:!1,events:[...ic],entities:[]},proxy:{media:"auto",dynamic:!0,ssl_verification:"auto",ssl_ciphers:"auto"},always_error_if_entity_unavailable:!1},dd=bi.object({media:bi.boolean().or(bi.literal("auto")).default(ld.proxy.media),dynamic:bi.boolean().default(ld.proxy.dynamic),ssl_verification:bi.boolean().or(bi.literal("auto")).default(ld.proxy.ssl_verification),ssl_ciphers:bi.enum(["default","insecure","intermediate","modern"]).or(bi.literal("auto")).default(ld.proxy.ssl_ciphers)}),ud=bi.object({camera_entity:bi.string().optional(),icon:bi.string().optional(),title:bi.string().optional(),capabilities:bi.object({disable:bi.enum(Do).array().optional(),disable_except:bi.enum(Do).array().optional()}).optional(),id:bi.string().optional(),dependencies:bi.object({all_cameras:bi.boolean().default(ld.dependencies.all_cameras),cameras:bi.string().array().default(ld.dependencies.cameras)}).default(ld.dependencies),triggers:bi.object({motion:bi.boolean().default(ld.triggers.motion),occupancy:bi.boolean().default(ld.triggers.occupancy),entities:bi.string().array().default(ld.triggers.entities),events:bi.enum(ic).array().default(ld.triggers.events)}).default(ld.triggers),engine:bi.enum(["auto","frigate","generic","motioneye","reolink"]).default("auto"),frigate:bi.object({url:bi.string().optional(),client_id:bi.string().default(ld.frigate.client_id),camera_name:bi.string().optional(),labels:bi.string().array().optional(),zones:bi.string().array().optional()}).default(ld.frigate),motioneye:bi.object({url:bi.string().optional(),images:bi.object({directory_pattern:bi.string().includes("%").default(ld.motioneye.images.directory_pattern),file_pattern:bi.string().includes("%").default(ld.motioneye.images.file_pattern)}).default(ld.motioneye.images),movies:bi.object({directory_pattern:bi.string().includes("%").default(ld.motioneye.movies.directory_pattern),file_pattern:bi.string().includes("%").default(ld.motioneye.movies.file_pattern)}).default(ld.motioneye.movies)}).default(ld.motioneye),reolink:bi.object({url:bi.string().optional(),media_resolution:bi.enum(["high","low"]).default(ld.reolink.media_resolution)}).default(ld.reolink),live_provider:bi.enum(["auto","image","ha","jsmpeg","go2rtc","webrtc-card"]).default(ld.live_provider),go2rtc:ed.optional(),image:Ol.optional().default(jl),jsmpeg:nd.optional(),webrtc_card:td.optional(),cast:cd.optional(),ptz:Il.default(ld.ptz),dimensions:bi.object({aspect_ratio:$l.optional(),layout:kl.optional()}).optional(),proxy:dd.default(ld.proxy),always_error_if_entity_unavailable:bi.boolean().default(ld.always_error_if_entity_unavailable)}).default(ld),hd=ud.array().min(1),gd={default:Ko,camera_select:"current",interaction_seconds:300,default_reset:{every_seconds:0,after_interaction:!1,entities:[],interaction_mode:"inactive"},default_cycle_camera:!1,dim:!1,theme:{themes:["traditional"]},triggers:{show_trigger_status:!1,filter_selected_camera:!0,actions:{trigger:"update",untrigger:"none"},untrigger_seconds:0},keyboard_shortcuts:Bo},pd=bi.enum(["all","inactive","active"]).default("inactive"),md=bi.object({actions:bi.object({interaction_mode:pd,trigger:bi.enum(["default","live","media","none","update"]).default(gd.triggers.actions.trigger),untrigger:bi.enum(["default","none"]).default(gd.triggers.actions.untrigger)}).default(gd.triggers.actions),filter_selected_camera:bi.boolean().default(gd.triggers.filter_selected_camera),show_trigger_status:bi.boolean().default(gd.triggers.show_trigger_status),untrigger_seconds:bi.number().default(gd.triggers.untrigger_seconds)}),fd=bi.enum(["ha","dark","light","traditional"]),_d=bi.object({themes:fd.array().default(gd.theme.themes),overrides:bi.record(bi.string()).optional()}),vd=bi.object({default:bi.enum(Go).default(gd.default),camera_select:bi.enum([...Go,"current"]).default(gd.camera_select),interaction_seconds:bi.number().default(gd.interaction_seconds),default_cycle_camera:bi.boolean().default(gd.default_cycle_camera),default_reset:bi.object({after_interaction:bi.boolean().default(gd.default_reset.after_interaction),every_seconds:bi.number().default(gd.default_reset.every_seconds),entities:bi.string().array().default(gd.default_reset.entities),interaction_mode:pd.default(gd.default_reset.interaction_mode)}).default(gd.default_reset),render_entities:bi.string().array().optional(),theme:_d.default(gd.theme),dim:bi.boolean().default(gd.dim),triggers:md.default(gd.triggers),keyboard_shortcuts:Uo.default(gd.keyboard_shortcuts)}).merge(Nc).default(gd),yd=["left","right","top","bottom"],bd=yd,wd={priority:50,enabled:!0},xd={priority:50,enabled:!1},Md={alignment:"left",button_size:40,buttons:{camera_ui:wd,cameras:wd,clips:wd,ptz_home:xd,display_mode:wd,download:wd,expand:xd,frigate:wd,fullscreen:wd,image:xd,live:wd,media_player:wd,microphone:{...xd,type:"momentary"},mute:xd,play:xd,ptz_controls:xd,recordings:xd,screenshot:xd,snapshots:wd,substreams:wd,timeline:wd},position:"top",style:"hidden"},Cd=el.extend({enabled:el.shape.enabled.default(wd.enabled),priority:el.shape.priority.default(wd.priority)}),Sd=el.extend({enabled:el.shape.enabled.default(xd.enabled),priority:el.shape.priority.default(xd.priority)}),kd=bi.object({style:bi.enum(["none","hidden","overlay","hover","hover-card","outside"]).default(Md.style),position:bi.enum(yd).default(Md.position),alignment:bi.enum(bd).default(Md.alignment),buttons:bi.object({camera_ui:Cd.default(Md.buttons.camera_ui),cameras:Cd.default(Md.buttons.cameras),clips:Cd.default(Md.buttons.clips),ptz_home:Sd.default(Md.buttons.ptz_home),display_mode:Cd.default(Md.buttons.display_mode),download:Cd.default(Md.buttons.download),expand:Sd.default(Md.buttons.expand),frigate:Cd.default(Md.buttons.frigate),fullscreen:Cd.default(Md.buttons.fullscreen),image:Sd.default(Md.buttons.image),live:Cd.default(Md.buttons.live),media_player:Cd.default(Md.buttons.media_player),microphone:Sd.extend({type:bi.enum(["momentary","toggle"]).default(Md.buttons.microphone.type)}).default(Md.buttons.microphone),mute:Sd.default(Md.buttons.mute),play:Sd.default(Md.buttons.play),ptz_controls:Sd.default(Md.buttons.ptz_controls),recordings:Sd.default(Md.buttons.recordings),screenshot:Sd.default(Md.buttons.screenshot),snapshots:Cd.default(Md.buttons.snapshots),substreams:Cd.default(Md.buttons.substreams),timeline:Cd.default(Md.buttons.timeline)}).default(Md.buttons),button_size:bi.number().min(20).default(Md.button_size)}).default(Md),$d={priority:50,enabled:!0},Ed={height:40,items:{engine:$d,resolution:$d,technology:$d,title:$d},position:"bottom",style:"popup",popup_seconds:3},Ad=bi.object({position:bi.enum(["top","bottom"]).default(Ed.position),style:bi.enum(["none","overlay","hover","hover-card","outside","popup"]).default(Ed.style),popup_seconds:bi.number().min(0).max(60).default(Ed.popup_seconds),height:bi.number().min(20).default(Ed.height),items:bi.object({engine:sl.default(Ed.items.engine),technology:sl.default(Ed.items.technology),resolution:sl.default(Ed.items.resolution),title:sl.default(Ed.items.title)}).default(Ed.items)}).default(Ed),Id={auto_play:[...Xo],auto_pause:[...Jo],auto_mute:[...Jo],auto_unmute:[],lazy_load:!0,draggable:!0,zoomable:!0,transition_effect:"slide",snapshot_click_plays_clip:!0,display_mode:"single",controls:{builtin:!0,next_previous:{size:48,style:"thumbnails"},thumbnails:Fl,timeline:Wl,ptz:{...Tl,mode:"off"}}},Td=Gl.extend({style:bi.enum(["none","thumbnails","chevrons"]).default(Id.controls.next_previous.style),size:Gl.shape.size.default(Id.controls.next_previous.size)}),zd=bi.object({auto_play:bi.enum(Xo).array().default(Id.auto_play),auto_pause:bi.enum(Jo).array().default(Id.auto_pause),auto_mute:bi.enum(Jo).array().default(Id.auto_mute),auto_unmute:bi.enum(Xo).array().default(Id.auto_unmute),lazy_load:bi.boolean().default(Id.lazy_load),draggable:bi.boolean().default(Id.draggable),zoomable:bi.boolean().default(Id.zoomable),transition_effect:Kl.default(Id.transition_effect),snapshot_click_plays_clip:bi.boolean().default(Id.snapshot_click_plays_clip),display:dc,controls:bi.object({builtin:bi.boolean().default(Id.controls.builtin),next_previous:Td.default(Id.controls.next_previous),ptz:zl.extend({mode:bi.enum(["off","on"]).default(Id.controls.ptz.mode)}).default(Id.controls.ptz),thumbnails:Vl.default(Id.controls.thumbnails),timeline:Zl.default(Id.controls.timeline)}).default(Id.controls)}).merge(Nc).default(Id),jd={...Fl,show_details:!1},Od={controls:{thumbnails:jd,filter:{mode:"right"}}},Dd=Vl.extend({show_details:bi.boolean().default(jd.show_details)}),Rd=bi.object({controls:bi.object({thumbnails:Dd.default(Od.controls.thumbnails),filter:bi.object({mode:bi.enum(["none","left","right"]).default(Od.controls.filter.mode)}).default(Od.controls.filter)}).default(Od.controls)}).merge(Nc).default(Od),Pd={aspect_ratio_mode:"dynamic",aspect_ratio:[16,9],height:"auto"},Ld=bi.object({aspect_ratio_mode:bi.enum(["dynamic","static","unconstrained"]).default(Pd.aspect_ratio_mode),aspect_ratio:$l.default(Pd.aspect_ratio),height:bi.string().default(Pd.height)}).default(Pd),Nd=bi.object({conditions:Ml.array(),merge:bi.object({}).passthrough().optional(),set:bi.object({}).passthrough().optional(),delete:bi.string().array().optional()}).array().optional(),Fd=Pc.array(),Vd=bi.object({conditions:Ml.array(),actions:Fd.optional(),actions_not:Fd.optional()}).refine((e=>e.actions?.length||e.actions_not?.length),"Automations must include at least one action").array(),Hd={features:{animated_progress_indicator:!0,card_loading_indicator:!0,media_chunk_size:50},style:{border_radius:!0,box_shadow:!0}},Bd=bi.object({features:bi.object({animated_progress_indicator:bi.boolean().default(Hd.features.animated_progress_indicator),card_loading_indicator:bi.boolean().default(Hd.features.card_loading_indicator),media_chunk_size:bi.number().min(0).max(1e3).default(Hd.features.media_chunk_size),max_simultaneous_engine_requests:bi.number().min(1).optional()}).default(Hd.features),style:bi.object({border_radius:bi.boolean().default(Hd.style.border_radius),box_shadow:bi.boolean().default(Hd.style.box_shadow)}).default(Hd.style)}).default(Hd),Ud={logging:!1},qd=bi.object({logging:bi.boolean().default(Ud.logging)}).default(Ud),Wd=bi.enum(["casting","low-performance","scrubbing"]).array().optional(),Zd=bi.object({cameras:Lo(hd),cameras_global:ud,view:vd,menu:kd,status_bar:Ad,live:sd,media_gallery:Rd,media_viewer:zd,image:Dl,elements:Sl,dimensions:Ld,timeline:Yl,performance:Bd,debug:qd,automations:Vd.optional(),profiles:Wd,overrides:Nd,card_mod:bi.unknown(),card_id:bi.string().regex(ac).optional(),type:bi.string()}),Qd={cameras:ld,view:gd,menu:Md,status_bar:Ed,live:ad,media_gallery:Od,media_viewer:Id,image:jl,timeline:Ql,performance:Hd,debug:Ud};function Yd(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function Gd(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Kd(e,t){const n=Yd(e);return isNaN(t)?Gd(e,NaN):t?(n.setDate(n.getDate()+t),n):n}function Jd(e,t){const n=Yd(e);if(isNaN(t))return Gd(e,NaN);if(!t)return n;const i=n.getDate(),a=Gd(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);return i>=a.getDate()?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}function Xd(e,t){const{years:n=0,months:i=0,weeks:a=0,days:r=0,hours:s=0,minutes:o=0,seconds:c=0}=t,l=Yd(e),d=i||n?Jd(l,i+12*n):l,u=1e3*(c+60*(o+60*s));return Gd(e,(r||a?Kd(d,r+7*a):d).getTime()+u)}const eu=6048e5,tu=864e5,nu=6e4,iu=36e5,au=1e3;let ru={};function su(){return ru}function ou(e,t){const n=su(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Yd(e),r=a.getDay(),s=(r<i?7:0)+r-i;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function cu(e){return ou(e,{weekStartsOn:1})}function lu(e){const t=Yd(e),n=t.getFullYear(),i=Gd(e,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const a=cu(i),r=Gd(e,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const s=cu(r);return t.getTime()>=a.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function du(e){const t=Yd(e);return t.setHours(0,0,0,0),t}function uu(e){const t=Yd(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function hu(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const n=Yd(e);return!isNaN(Number(n))}function gu(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return 0===n?0:n}}function pu(e,t){return+Yd(e)-+Yd(t)}function mu(e,t,n){const i=pu(e,t)/1e3;return gu(n?.roundingMethod)(i)}const fu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function _u(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const vu={date:_u({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:_u({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:_u({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},yu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function bu(e){return(t,n)=>{let i;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=n?.width?String(n.width):t;i=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=n?.width?String(n.width):e.defaultWidth;i=e.values[a]||e.values[t]}return i[e.argumentCallback?e.argumentCallback(t):t]}}function wu(e){return(t,n={})=>{const i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],r=t.match(a);if(!r)return null;const s=r[0],o=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(s))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(s)));let l;l=e.valueCallback?e.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;return{value:l,rest:t.slice(s.length)}}}var xu;const Mu={code:"en-US",formatDistance:(e,t,n)=>{let i;const a=fu[e];return i="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:vu,formatRelative:(e,t,n,i)=>yu[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:bu({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:bu({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:bu({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:bu({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:bu({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(xu={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(xu.matchPattern);if(!n)return null;const i=n[0],a=e.match(xu.parsePattern);if(!a)return null;let r=xu.valueCallback?xu.valueCallback(a[0]):a[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(i.length)}}),era:wu({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:wu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:wu({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:wu({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:wu({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Cu(e){const t=Yd(e),n=function(e,t){const n=du(e),i=du(t),a=+n-uu(n),r=+i-uu(i);return Math.round((a-r)/tu)}(t,function(e){const t=Yd(e),n=Gd(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(t));return n+1}function Su(e){const t=Yd(e),n=+cu(t)-+function(e){const t=lu(e),n=Gd(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),cu(n)}(t);return Math.round(n/eu)+1}function ku(e,t){const n=Yd(e),i=n.getFullYear(),a=su(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,s=Gd(e,0);s.setFullYear(i+1,0,r),s.setHours(0,0,0,0);const o=ou(s,t),c=Gd(e,0);c.setFullYear(i,0,r),c.setHours(0,0,0,0);const l=ou(c,t);return n.getTime()>=o.getTime()?i+1:n.getTime()>=l.getTime()?i:i-1}function $u(e,t){const n=Yd(e),i=+ou(n,t)-+function(e,t){const n=su(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=ku(e,t),r=Gd(e,0);return r.setFullYear(a,0,i),r.setHours(0,0,0,0),ou(r,t)}(n,t);return Math.round(i/eu)+1}function Eu(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Au={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return Eu("yy"===t?i%100:i,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Eu(n+1,2)},d:(e,t)=>Eu(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Eu(e.getHours()%12||12,t.length),H:(e,t)=>Eu(e.getHours(),t.length),m:(e,t)=>Eu(e.getMinutes(),t.length),s:(e,t)=>Eu(e.getSeconds(),t.length),S(e,t){const n=t.length,i=e.getMilliseconds();return Eu(Math.trunc(i*Math.pow(10,n-3)),t.length)}},Iu="midnight",Tu="noon",zu="morning",ju="afternoon",Ou="evening",Du="night",Ru={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),i=t>0?t:1-t;return n.ordinalNumber(i,{unit:"year"})}return Au.y(e,t)},Y:function(e,t,n,i){const a=ku(e,i),r=a>0?a:1-a;if("YY"===t){return Eu(r%100,2)}return"Yo"===t?n.ordinalNumber(r,{unit:"year"}):Eu(r,t.length)},R:function(e,t){return Eu(lu(e),t.length)},u:function(e,t){return Eu(e.getFullYear(),t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Eu(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Eu(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return Au.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Eu(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const a=$u(e,i);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):Eu(a,t.length)},I:function(e,t,n){const i=Su(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):Eu(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Au.d(e,t)},D:function(e,t,n){const i=Cu(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):Eu(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const a=e.getDay(),r=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return Eu(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const a=e.getDay(),r=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return Eu(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),a=0===i?7:i;switch(t){case"i":return String(a);case"ii":return Eu(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let a;switch(a=12===i?Tu:0===i?Iu:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let a;switch(a=i>=17?Ou:i>=12?ju:i>=4?zu:Du,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Au.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Au.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):Eu(i,t.length)},k:function(e,t,n){let i=e.getHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):Eu(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Au.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Au.s(e,t)},S:function(e,t){return Au.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return Lu(i);case"XXXX":case"XX":return Nu(i);default:return Nu(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return Lu(i);case"xxxx":case"xx":return Nu(i);default:return Nu(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Pu(i,":");default:return"GMT"+Nu(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Pu(i,":");default:return"GMT"+Nu(i,":")}},t:function(e,t,n){return Eu(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return Eu(e.getTime(),t.length)}};function Pu(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),r=i%60;return 0===r?n+String(a):n+String(a)+t+Eu(r,2)}function Lu(e,t){if(e%60==0){return(e>0?"-":"+")+Eu(Math.abs(e)/60,2)}return Nu(e,t)}function Nu(e,t=""){const n=e>0?"-":"+",i=Math.abs(e);return n+Eu(Math.trunc(i/60),2)+t+Eu(i%60,2)}const Fu=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Vu=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Hu={p:Vu,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return Fu(e,t);let r;switch(i){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Fu(i,t)).replace("{{time}}",Vu(a,t))}},Bu=/^D+$/,Uu=/^Y+$/,qu=["D","DD","YY","YYYY"];function Wu(e){return Bu.test(e)}function Zu(e){return Uu.test(e)}function Qu(e,t,n){const i=function(e,t,n){const i="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(i),qu.includes(e))throw new RangeError(i)}const Yu=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ku=/^'([^]*?)'?$/,Ju=/''/g,Xu=/[a-zA-Z]/;function eh(e,t,n){const i=su(),a=n?.locale??i.locale??Mu,r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=Yd(e);if(!hu(o))throw new RangeError("Invalid time value");let c=t.match(Gu).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,Hu[t])(e,a.formatLong)}return e})).join("").match(Yu).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:th(e)};if(Ru[t])return{isToken:!0,value:e};if(t.match(Xu))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const l={firstWeekContainsDate:r,weekStartsOn:s,locale:a};return c.map((i=>{if(!i.isToken)return i.value;const r=i.value;(!n?.useAdditionalWeekYearTokens&&Zu(r)||!n?.useAdditionalDayOfYearTokens&&Wu(r))&&Qu(r,t,String(e));return(0,Ru[r[0]])(o,r,a.localize,l)})).join("")}function th(e){const t=e.match(Ku);return t?t[1].replace(Ju,"'"):e}function nh(e,t){const{years:n=0,months:i=0,weeks:a=0,days:r=0,hours:s=0,minutes:o=0,seconds:c=0}=t,l=function(e,t){return Jd(e,-t)}(e,i+12*n),d=function(e,t){return Kd(e,-t)}(l,r+7*a),u=1e3*(c+60*(o+60*s));return Gd(e,d.getTime()-u)}function ih(e,t){return e===t||e!=e&&t!=t}function ah(e,t){for(var n=e.length;n--;)if(ih(e[n][0],t))return n;return-1}var rh=Array.prototype.splice;function sh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}sh.prototype.clear=function(){this.__data__=[],this.size=0},sh.prototype.delete=function(e){var t=this.__data__,n=ah(t,e);return!(n<0)&&(n==t.length-1?t.pop():rh.call(t,n,1),--this.size,!0)},sh.prototype.get=function(e){var t=this.__data__,n=ah(t,e);return n<0?void 0:t[n][1]},sh.prototype.has=function(e){return ah(this.__data__,e)>-1},sh.prototype.set=function(e,t){var n=this.__data__,i=ah(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var oh="object"==typeof global&&global&&global.Object===Object&&global,ch="object"==typeof self&&self&&self.Object===Object&&self,lh=oh||ch||Function("return this")(),dh=lh.Symbol,uh=Object.prototype,hh=uh.hasOwnProperty,gh=uh.toString,ph=dh?dh.toStringTag:void 0;var mh=Object.prototype.toString;var fh="[object Null]",_h="[object Undefined]",vh=dh?dh.toStringTag:void 0;function yh(e){return null==e?void 0===e?_h:fh:vh&&vh in Object(e)?function(e){var t=hh.call(e,ph),n=e[ph];try{e[ph]=void 0;var i=!0}catch(e){}var a=gh.call(e);return i&&(t?e[ph]=n:delete e[ph]),a}(e):function(e){return mh.call(e)}(e)}function bh(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var wh="[object AsyncFunction]",xh="[object Function]",Mh="[object GeneratorFunction]",Ch="[object Proxy]";function Sh(e){if(!bh(e))return!1;var t=yh(e);return t==xh||t==Mh||t==wh||t==Ch}var kh,$h=lh["__core-js_shared__"],Eh=(kh=/[^.]+$/.exec($h&&$h.keys&&$h.keys.IE_PROTO||""))?"Symbol(src)_1."+kh:"";var Ah=Function.prototype.toString;function Ih(e){if(null!=e){try{return Ah.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Th=/^\[object .+?Constructor\]$/,zh=Function.prototype,jh=Object.prototype,Oh=zh.toString,Dh=jh.hasOwnProperty,Rh=RegExp("^"+Oh.call(Dh).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ph(e){return!(!bh(e)||(t=e,Eh&&Eh in t))&&(Sh(e)?Rh:Th).test(Ih(e));var t}function Lh(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ph(n)?n:void 0}var Nh=Lh(lh,"Map"),Fh=Lh(Object,"create");var Vh=Object.prototype.hasOwnProperty;var Hh=Object.prototype.hasOwnProperty;function Bh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Uh(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function qh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Bh.prototype.clear=function(){this.__data__=Fh?Fh(null):{},this.size=0},Bh.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Bh.prototype.get=function(e){var t=this.__data__;if(Fh){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Vh.call(t,e)?t[e]:void 0},Bh.prototype.has=function(e){var t=this.__data__;return Fh?void 0!==t[e]:Hh.call(t,e)},Bh.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fh&&void 0===t?"__lodash_hash_undefined__":t,this},qh.prototype.clear=function(){this.size=0,this.__data__={hash:new Bh,map:new(Nh||sh),string:new Bh}},qh.prototype.delete=function(e){var t=Uh(this,e).delete(e);return this.size-=t?1:0,t},qh.prototype.get=function(e){return Uh(this,e).get(e)},qh.prototype.has=function(e){return Uh(this,e).has(e)},qh.prototype.set=function(e,t){var n=Uh(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};function Wh(e){var t=this.__data__=new sh(e);this.size=t.size}Wh.prototype.clear=function(){this.__data__=new sh,this.size=0},Wh.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Wh.prototype.get=function(e){return this.__data__.get(e)},Wh.prototype.has=function(e){return this.__data__.has(e)},Wh.prototype.set=function(e,t){var n=this.__data__;if(n instanceof sh){var i=n.__data__;if(!Nh||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new qh(i)}return n.set(e,t),this.size=n.size,this};function Zh(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qh;++t<n;)this.add(e[t])}function Qh(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function Yh(e,t){return e.has(t)}Zh.prototype.add=Zh.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Zh.prototype.has=function(e){return this.__data__.has(e)};var Gh=1,Kh=2;function Jh(e,t,n,i,a,r){var s=n&Gh,o=e.length,c=t.length;if(o!=c&&!(s&&c>o))return!1;var l=r.get(e),d=r.get(t);if(l&&d)return l==t&&d==e;var u=-1,h=!0,g=n&Kh?new Zh:void 0;for(r.set(e,t),r.set(t,e);++u<o;){var p=e[u],m=t[u];if(i)var f=s?i(m,p,u,t,e,r):i(p,m,u,e,t,r);if(void 0!==f){if(f)continue;h=!1;break}if(g){if(!Qh(t,(function(e,t){if(!Yh(g,t)&&(p===e||a(p,e,n,i,r)))return g.push(t)}))){h=!1;break}}else if(p!==m&&!a(p,m,n,i,r)){h=!1;break}}return r.delete(e),r.delete(t),h}var Xh=lh.Uint8Array;function eg(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function tg(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var ng=1,ig=2,ag="[object Boolean]",rg="[object Date]",sg="[object Error]",og="[object Map]",cg="[object Number]",lg="[object RegExp]",dg="[object Set]",ug="[object String]",hg="[object Symbol]",gg="[object ArrayBuffer]",pg="[object DataView]",mg=dh?dh.prototype:void 0,fg=mg?mg.valueOf:void 0;function _g(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}var vg=Array.isArray;function yg(e,t,n){var i=t(e);return vg(e)?i:_g(i,n(e))}function bg(){return[]}var wg=Object.prototype.propertyIsEnumerable,xg=Object.getOwnPropertySymbols,Mg=xg?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,a=0,r=[];++n<i;){var s=e[n];t(s,n,e)&&(r[a++]=s)}return r}(xg(e),(function(t){return wg.call(e,t)})))}:bg;function Cg(e){return null!=e&&"object"==typeof e}function Sg(e){return Cg(e)&&"[object Arguments]"==yh(e)}var kg=Object.prototype,$g=kg.hasOwnProperty,Eg=kg.propertyIsEnumerable,Ag=Sg(function(){return arguments}())?Sg:function(e){return Cg(e)&&$g.call(e,"callee")&&!Eg.call(e,"callee")};var Ig="object"==typeof exports&&exports&&!exports.nodeType&&exports,Tg=Ig&&"object"==typeof module&&module&&!module.nodeType&&module,zg=Tg&&Tg.exports===Ig?lh.Buffer:void 0,jg=(zg?zg.isBuffer:void 0)||function(){return!1},Og=9007199254740991,Dg=/^(?:0|[1-9]\d*)$/;function Rg(e,t){var n=typeof e;return!!(t=null==t?Og:t)&&("number"==n||"symbol"!=n&&Dg.test(e))&&e>-1&&e%1==0&&e<t}var Pg=9007199254740991;function Lg(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Pg}var Ng={};function Fg(e){return function(t){return e(t)}}Ng["[object Float32Array]"]=Ng["[object Float64Array]"]=Ng["[object Int8Array]"]=Ng["[object Int16Array]"]=Ng["[object Int32Array]"]=Ng["[object Uint8Array]"]=Ng["[object Uint8ClampedArray]"]=Ng["[object Uint16Array]"]=Ng["[object Uint32Array]"]=!0,Ng["[object Arguments]"]=Ng["[object Array]"]=Ng["[object ArrayBuffer]"]=Ng["[object Boolean]"]=Ng["[object DataView]"]=Ng["[object Date]"]=Ng["[object Error]"]=Ng["[object Function]"]=Ng["[object Map]"]=Ng["[object Number]"]=Ng["[object Object]"]=Ng["[object RegExp]"]=Ng["[object Set]"]=Ng["[object String]"]=Ng["[object WeakMap]"]=!1;var Vg="object"==typeof exports&&exports&&!exports.nodeType&&exports,Hg=Vg&&"object"==typeof module&&module&&!module.nodeType&&module,Bg=Hg&&Hg.exports===Vg&&oh.process,Ug=function(){try{var e=Hg&&Hg.require&&Hg.require("util").types;return e||Bg&&Bg.binding&&Bg.binding("util")}catch(e){}}(),qg=Ug,Wg=qg&&qg.isTypedArray,Zg=Wg?Fg(Wg):function(e){return Cg(e)&&Lg(e.length)&&!!Ng[yh(e)]},Qg=Object.prototype.hasOwnProperty;function Yg(e,t){var n=vg(e),i=!n&&Ag(e),a=!n&&!i&&jg(e),r=!n&&!i&&!a&&Zg(e),s=n||i||a||r,o=s?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],c=o.length;for(var l in e)!t&&!Qg.call(e,l)||s&&("length"==l||a&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Rg(l,c))||o.push(l);return o}var Gg=Object.prototype;function Kg(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Gg)}function Jg(e,t){return function(n){return e(t(n))}}var Xg=Jg(Object.keys,Object),ep=Object.prototype.hasOwnProperty;function tp(e){return null!=e&&Lg(e.length)&&!Sh(e)}function np(e){return tp(e)?Yg(e):function(e){if(!Kg(e))return Xg(e);var t=[];for(var n in Object(e))ep.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function ip(e){return yg(e,np,Mg)}var ap=1,rp=Object.prototype.hasOwnProperty;var sp=Lh(lh,"DataView"),op=Lh(lh,"Promise"),cp=Lh(lh,"Set"),lp=Lh(lh,"WeakMap"),dp="[object Map]",up="[object Promise]",hp="[object Set]",gp="[object WeakMap]",pp="[object DataView]",mp=Ih(sp),fp=Ih(Nh),_p=Ih(op),vp=Ih(cp),yp=Ih(lp),bp=yh;(sp&&bp(new sp(new ArrayBuffer(1)))!=pp||Nh&&bp(new Nh)!=dp||op&&bp(op.resolve())!=up||cp&&bp(new cp)!=hp||lp&&bp(new lp)!=gp)&&(bp=function(e){var t=yh(e),n="[object Object]"==t?e.constructor:void 0,i=n?Ih(n):"";if(i)switch(i){case mp:return pp;case fp:return dp;case _p:return up;case vp:return hp;case yp:return gp}return t});var wp=bp,xp=1,Mp="[object Arguments]",Cp="[object Array]",Sp="[object Object]",kp=Object.prototype.hasOwnProperty;function $p(e,t,n,i,a,r){var s=vg(e),o=vg(t),c=s?Cp:wp(e),l=o?Cp:wp(t),d=(c=c==Mp?Sp:c)==Sp,u=(l=l==Mp?Sp:l)==Sp,h=c==l;if(h&&jg(e)){if(!jg(t))return!1;s=!0,d=!1}if(h&&!d)return r||(r=new Wh),s||Zg(e)?Jh(e,t,n,i,a,r):function(e,t,n,i,a,r,s){switch(n){case pg:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gg:return!(e.byteLength!=t.byteLength||!r(new Xh(e),new Xh(t)));case ag:case rg:case cg:return ih(+e,+t);case sg:return e.name==t.name&&e.message==t.message;case lg:case ug:return e==t+"";case og:var o=eg;case dg:var c=i&ng;if(o||(o=tg),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;i|=ig,s.set(e,t);var d=Jh(o(e),o(t),i,a,r,s);return s.delete(e),d;case hg:if(fg)return fg.call(e)==fg.call(t)}return!1}(e,t,c,n,i,a,r);if(!(n&xp)){var g=d&&kp.call(e,"__wrapped__"),p=u&&kp.call(t,"__wrapped__");if(g||p){var m=g?e.value():e,f=p?t.value():t;return r||(r=new Wh),a(m,f,n,i,r)}}return!!h&&(r||(r=new Wh),function(e,t,n,i,a,r){var s=n&ap,o=ip(e),c=o.length;if(c!=ip(t).length&&!s)return!1;for(var l=c;l--;){var d=o[l];if(!(s?d in t:rp.call(t,d)))return!1}var u=r.get(e),h=r.get(t);if(u&&h)return u==t&&h==e;var g=!0;r.set(e,t),r.set(t,e);for(var p=s;++l<c;){var m=e[d=o[l]],f=t[d];if(i)var _=s?i(f,m,d,t,e,r):i(m,f,d,e,t,r);if(!(void 0===_?m===f||a(m,f,n,i,r):_)){g=!1;break}p||(p="constructor"==d)}if(g&&!p){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(g=!1)}return r.delete(e),r.delete(t),g}(e,t,n,i,a,r))}function Ep(e,t,n,i,a){return e===t||(null==e||null==t||!Cg(e)&&!Cg(t)?e!=e&&t!=t:$p(e,t,n,i,Ep,a))}var Ap=function(){try{var e=Lh(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ip=Ap;function Tp(e,t,n){"__proto__"==t&&Ip?Ip(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function zp(e,t,n){(void 0!==n&&!ih(e[t],n)||void 0===n&&!(t in e))&&Tp(e,t,n)}var jp,Op=function(e,t,n){for(var i=-1,a=Object(e),r=n(e),s=r.length;s--;){var o=r[jp?s:++i];if(!1===t(a[o],o,a))break}return e},Dp="object"==typeof exports&&exports&&!exports.nodeType&&exports,Rp=Dp&&"object"==typeof module&&module&&!module.nodeType&&module,Pp=Rp&&Rp.exports===Dp?lh.Buffer:void 0,Lp=Pp?Pp.allocUnsafe:void 0;function Np(e,t){if(t)return e.slice();var n=e.length,i=Lp?Lp(n):new e.constructor(n);return e.copy(i),i}function Fp(e){var t=new e.constructor(e.byteLength);return new Xh(t).set(new Xh(e)),t}function Vp(e,t){var n=t?Fp(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Hp(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}var Bp=Object.create,Up=function(){function e(){}return function(t){if(!bh(t))return{};if(Bp)return Bp(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),qp=Jg(Object.getPrototypeOf,Object);function Wp(e){return"function"!=typeof e.constructor||Kg(e)?{}:Up(qp(e))}var Zp="[object Object]",Qp=Function.prototype,Yp=Object.prototype,Gp=Qp.toString,Kp=Yp.hasOwnProperty,Jp=Gp.call(Object);function Xp(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var em=Object.prototype.hasOwnProperty;function tm(e,t,n){var i=e[t];em.call(e,t)&&ih(i,n)&&(void 0!==n||t in e)||Tp(e,t,n)}function nm(e,t,n,i){var a=!n;n||(n={});for(var r=-1,s=t.length;++r<s;){var o=t[r],c=i?i(n[o],e[o],o,n,e):void 0;void 0===c&&(c=e[o]),a?Tp(n,o,c):tm(n,o,c)}return n}var im=Object.prototype.hasOwnProperty;function am(e){if(!bh(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Kg(e),n=[];for(var i in e)("constructor"!=i||!t&&im.call(e,i))&&n.push(i);return n}function rm(e){return tp(e)?Yg(e,!0):am(e)}function sm(e,t,n,i,a,r,s){var o=Xp(e,n),c=Xp(t,n),l=s.get(c);if(l)zp(e,n,l);else{var d,u=r?r(o,c,n+"",e,t,s):void 0,h=void 0===u;if(h){var g=vg(c),p=!g&&jg(c),m=!g&&!p&&Zg(c);u=c,g||p||m?vg(o)?u=o:Cg(d=o)&&tp(d)?u=Hp(o):p?(h=!1,u=Np(c,!0)):m?(h=!1,u=Vp(c,!0)):u=[]:function(e){if(!Cg(e)||yh(e)!=Zp)return!1;var t=qp(e);if(null===t)return!0;var n=Kp.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Gp.call(n)==Jp}(c)||Ag(c)?(u=o,Ag(o)?u=function(e){return nm(e,rm(e))}(o):bh(o)&&!Sh(o)||(u=Wp(c))):h=!1}h&&(s.set(c,u),a(u,c,i,r,s),s.delete(c)),zp(e,n,u)}}function om(e,t,n,i,a){e!==t&&Op(t,(function(r,s){if(a||(a=new Wh),bh(r))sm(e,t,s,n,om,i,a);else{var o=i?i(Xp(e,s),r,s+"",e,t,a):void 0;void 0===o&&(o=r),zp(e,s,o)}}),rm)}function cm(e){return e}var lm=Math.max;var dm=Ip?function(e,t){return Ip(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:cm,um=dm,hm=Date.now;var gm,pm,mm,fm=(gm=um,pm=0,mm=0,function(){var e=hm(),t=16-(e-mm);if(mm=e,t>0){if(++pm>=800)return arguments[0]}else pm=0;return gm.apply(void 0,arguments)});function _m(e,t){return fm(function(e,t,n){return t=lm(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,r=lm(i.length-t,0),s=Array(r);++a<r;)s[a]=i[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=i[a];return o[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,o)}}(e,t,cm),e+"")}function vm(e,t,n){if(!bh(n))return!1;var i=typeof t;return!!("number"==i?tp(n)&&Rg(t,n.length):"string"==i&&t in n)&&ih(n[t],e)}function ym(e){return _m((function(t,n){var i=-1,a=n.length,r=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(a--,r):void 0,s&&vm(n[0],n[1],s)&&(r=a<3?void 0:r,a=1),t=Object(t);++i<a;){var o=n[i];o&&e(t,o,i,r)}return t}))}var bm=ym((function(e,t,n,i){om(e,t,n,i)})),wm=/\s/;var xm=/^\s+/;function Mm(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&wm.test(e.charAt(t)););return t}(e)+1).replace(xm,""):e}var Cm="[object Symbol]";function Sm(e){return"symbol"==typeof e||Cg(e)&&yh(e)==Cm}var km=NaN,$m=/^[-+]0x[0-9a-f]+$/i,Em=/^0b[01]+$/i,Am=/^0o[0-7]+$/i,Im=parseInt;function Tm(e){if("number"==typeof e)return e;if(Sm(e))return km;if(bh(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=bh(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Mm(e);var n=Em.test(e);return n||Am.test(e)?Im(e.slice(2),n?2:8):$m.test(e)?km:+e}var zm=1/0,jm=17976931348623157e292;function Om(e){var t=function(e){return e?(e=Tm(e))===zm||e===-zm?(e<0?-1:1)*jm:e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}function Dm(e,t){for(var n=-1,i=null==e?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}var Rm=1/0,Pm=dh?dh.prototype:void 0,Lm=Pm?Pm.toString:void 0;function Nm(e){if("string"==typeof e)return e;if(vg(e))return Dm(e,Nm)+"";if(Sm(e))return Lm?Lm.call(e):"";var t=e+"";return"0"==t&&1/e==-Rm?"-0":t}function Fm(e){return null==e?"":Nm(e)}var Vm=lh.isFinite,Hm=Math.min;var Bm=function(e){var t=Math[e];return function(e,n){if(e=Tm(e),(n=null==n?0:Hm(Om(n),292))&&Vm(e)){var i=(Fm(e)+"e").split("e");return+((i=(Fm(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}("round"),Um=Bm;function qm(e){return e!=e}function Wm(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}(e,t,n):function(e,t,n,i){for(var a=e.length,r=n+(i?1:-1);i?r--:++r<a;)if(t(e[r],r,e))return r;return-1}(e,qm,n)}(e,t,0)>-1}function Zm(e,t,n){for(var i=-1,a=null==e?0:e.length;++i<a;)if(n(t,e[i]))return!0;return!1}var Qm=cp&&1/tg(new cp([,-0]))[1]==1/0?function(e){return new cp(e)}:function(){},Ym=200;function Gm(e,t,n){var i=-1,a=Wm,r=e.length,s=!0,o=[],c=o;if(n)s=!1,a=Zm;else if(r>=Ym){var l=t?null:Qm(e);if(l)return tg(l);s=!1,a=Yh,c=new Zh}else c=t?[]:o;e:for(;++i<r;){var d=e[i],u=t?t(d):d;if(d=n||0!==d?d:0,s&&u==u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),o.push(d)}else a(c,u,n)||(c!==o&&c.push(u),o.push(d))}return o}function Km(e,t,n){e.dispatchEvent(new CustomEvent(`frigate-card:${t}`,{bubbles:!0,composed:!0,detail:n}))}function Jm(e){if(!e)return;return e.split(/[_\s]+/).map((e=>e[0].toUpperCase()+e.substring(1))).join(" ")}function Xm(e,t,n){const i=e[t];return e.splice(t,1),e.splice(n,0,i),e}const ef=e=>Array.isArray(e)?e:[e],tf=e=>e instanceof Set?e:new Set(ef(e));function nf(e,t,n){return!function(e,t,n){var i=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===i?Ep(e,t,void 0,n):!!i}(e,t,n)}function af(e,t=console.warn){e instanceof Oo&&e.context?t(e,e.context):t("object"==typeof e&&"message"in e?e.message:e)}const rf=()=>window.matchMedia("(hover: hover) and (pointer: fine)").matches,sf=(e,t)=>eh(e,"yyyy-MM-dd HH:mm"+(t?":ss":"")),of=e=>eh(e,"yyyy-MM-dd"),cf=(e,t)=>{window.requestIdleCallback?window.requestIdleCallback(e,{...t&&{timeout:t}}):e()};function lf(e,t){const n=function(e,t,n){const i=pu(e,t)/iu;return gu(n?.roundingMethod)(i)}(t,e),i=function(e,t,n){const i=pu(e,t)/nu;return gu(n?.roundingMethod)(i)}(t,e)-60*n;let a="";return n&&(a+=`${n}h `),i&&(a+=`${i}m `),a+=`${mu(t,e)-60*n*60-60*i}s`,a}const df=async(e,t)=>await Promise.all(Array.from(e).map((e=>t(e)))),uf=e=>new Date(`${e}T00:00:00`),hf=async e=>{await new Promise((t=>setTimeout(t,1e3*e)))},gf=e=>!isNaN(e.getTime()),pf=(e,t,n,i)=>{t?e.setAttribute(n,i??""):e.removeAttribute(n)},mf=e=>!!e,ff=e=>e instanceof HTMLElement,_f=e=>(e instanceof HTMLSlotElement?e.assignedElements({flatten:!0}):[...e.children]).filter(ff),vf=e=>e?.ratio&&2===e.ratio.length?`${e.ratio[0]} / ${e.ratio[1]}`:e?.defaultStatic?"16 / 9":"auto",yf=e=>({"aspect-ratio":vf(e)}),bf=e=>{if(Array.isArray(e))return e.filter((e=>void 0!==e)).map((e=>bf(e)));if("object"==typeof e&&null!==e){const t={};for(const n in e)t[n]=bf(e[n]);return t}return e},wf=(e,t,n)=>Um(e,n)===Um(t,n);function xf(e){if(!e)return null;const t=Rc.safeParse(e);return t.success?t.data:null}function Mf(e,t){return{action:"fire-dom-event",frigate_card_action:e,...t?.cardID&&{card_id:t.cardID}}}function Cf(e,t,n){return{action:"fire-dom-event",frigate_card_action:e,camera:t,...n?.cardID&&{card_id:n.cardID}}}function Sf(e,t,n){return{action:"fire-dom-event",frigate_card_action:"media_player",media_player:e,media_player_action:t,...n?.cardID&&{card_id:n.cardID}}}function kf(e){return{action:"fire-dom-event",frigate_card_action:"ptz_multi",...e?.cardID&&{card_id:e.cardID},...e?.ptzAction&&{ptz_action:e.ptzAction},...e?.ptzPhase&&{ptz_phase:e.ptzPhase},...e?.ptzPreset&&{ptz_preset:e.ptzPreset},...e?.targetID&&{target_id:e.targetID}}}function $f(e,t){return e&&t?"tap"===e&&t.tap_action?t.tap_action:"hold"===e&&t.hold_action?t.hold_action:"double_tap"===e&&t.double_tap_action?t.double_tap_action:"end_tap"===e&&t.end_tap_action?t.end_tap_action:"start_tap"===e&&t.start_tap_action?t.start_tap_action:null:null}const Ef=e=>ef(e).some((e=>function(e){return void 0!==e&&"none"!==e.action}(e))),Af=e=>{e.stopPropagation()};class If{constructor(){this._timer=null,this._repeated=!1}stop(){this._timer&&(this._repeated?window.clearInterval(this._timer):window.clearTimeout(this._timer),this._timer=null)}isRunning(){return null!==this._timer}start(e,t){this.stop(),this._timer=window.setTimeout((()=>{this._timer=null,t()}),1e3*e),this._repeated=!1}startRepeated(e,t){this.stop(),this._timer=window.setInterval((()=>{t()}),1e3*e),this._repeated=!0}}class Tf extends HTMLElement{constructor(){super(...arguments),this.holdTime=.4,this.holdTimer=new If,this.doubleClickTimer=new If,this.held=!1,this.started=!1}connectedCallback(){["touchcancel","mouseout","mouseup","touchmove","mousewheel","wheel","scroll"].forEach((e=>{document.addEventListener(e,(()=>{this.holdTimer.stop()}),{passive:!0})}))}bind(e,t){if(e.actionHandlerOptions)return void(e.actionHandlerOptions=t);e.actionHandlerOptions=t,e.addEventListener("contextmenu",(e=>{const t=e||window.event;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1}));const n=()=>{this.held=!1,this.holdTimer.start(this.holdTime,(()=>{this.held=!0})),this.started||(this.started=!0,et(e,"action",{action:"start_tap"}))},i=t=>{this.holdTimer.stop(),this.started&&(this.started=!1,et(e,"action",{action:"end_tap"}))},a=t=>{const n=e.actionHandlerOptions;n?.allowPropagation||Af(t),["touchend","touchcancel"].includes(t.type)&&!this.held||(i(),n?.hasHold&&this.held?et(e,"action",{action:"hold"}):n?.hasDoubleClick?"click"===t.type&&t.detail<2||!this.doubleClickTimer.isRunning()?this.doubleClickTimer.start(.25,(()=>et(e,"action",{action:"tap"}))):(this.doubleClickTimer.stop(),et(e,"action",{action:"double_tap"})):et(e,"action",{action:"tap"}))};e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("mousedown",n,{passive:!0}),e.addEventListener("click",a),e.addEventListener("keyup",(e=>{"Enter"===e.key&&a(e)})),e.addEventListener("mouseleave",i)}}customElements.define("action-handler-frigate-card",Tf);const zf=(e,t)=>{const n=(()=>{const e=document.body;if(e.querySelector("action-handler-frigate-card"))return e.querySelector("action-handler-frigate-card");const t=document.createElement("action-handler-frigate-card");return e.appendChild(t),t})();n&&n.bind(e,t)},jf=me(class extends fe{update(e,[t]){return zf(e.element,t),q}render(e){}});var Of=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)_g(t,Mg(e)),e=qp(e);return t}:bg;function Df(e){return yg(e,rm,Of)}var Rf=Object.prototype.hasOwnProperty;var Pf=/\w*$/;var Lf=dh?dh.prototype:void 0,Nf=Lf?Lf.valueOf:void 0;var Ff="[object Boolean]",Vf="[object Date]",Hf="[object Map]",Bf="[object Number]",Uf="[object RegExp]",qf="[object Set]",Wf="[object String]",Zf="[object Symbol]",Qf="[object ArrayBuffer]",Yf="[object DataView]",Gf="[object Float32Array]",Kf="[object Float64Array]",Jf="[object Int8Array]",Xf="[object Int16Array]",e_="[object Int32Array]",t_="[object Uint8Array]",n_="[object Uint8ClampedArray]",i_="[object Uint16Array]",a_="[object Uint32Array]";function r_(e,t,n){var i,a,r,s=e.constructor;switch(t){case Qf:return Fp(e);case Ff:case Vf:return new s(+e);case Yf:return function(e,t){var n=t?Fp(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Gf:case Kf:case Jf:case Xf:case e_:case t_:case n_:case i_:case a_:return Vp(e,n);case Hf:return new s;case Bf:case Wf:return new s(e);case Uf:return(r=new(a=e).constructor(a.source,Pf.exec(a))).lastIndex=a.lastIndex,r;case qf:return new s;case Zf:return i=e,Nf?Object(Nf.call(i)):{}}}var s_=qg&&qg.isMap,o_=s_?Fg(s_):function(e){return Cg(e)&&"[object Map]"==wp(e)};var c_=qg&&qg.isSet,l_=c_?Fg(c_):function(e){return Cg(e)&&"[object Set]"==wp(e)},d_=1,u_=2,h_=4,g_="[object Arguments]",p_="[object Function]",m_="[object GeneratorFunction]",f_="[object Object]",__={};function v_(e,t,n,i,a,r){var s,o=t&d_,c=t&u_,l=t&h_;if(n&&(s=a?n(e,i,a,r):n(e)),void 0!==s)return s;if(!bh(e))return e;var d=vg(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Rf.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!o)return Hp(e,s)}else{var u=wp(e),h=u==p_||u==m_;if(jg(e))return Np(e,o);if(u==f_||u==g_||h&&!a){if(s=c||h?{}:Wp(e),!o)return c?function(e,t){return nm(e,Of(e),t)}(e,function(e,t){return e&&nm(t,rm(t),e)}(s,e)):function(e,t){return nm(e,Mg(e),t)}(e,function(e,t){return e&&nm(t,np(t),e)}(s,e))}else{if(!__[u])return a?e:{};s=r_(e,u,o)}}r||(r=new Wh);var g=r.get(e);if(g)return g;r.set(e,s),l_(e)?e.forEach((function(i){s.add(v_(i,t,n,i,e,r))})):o_(e)&&e.forEach((function(i,a){s.set(a,v_(i,t,n,a,e,r))}));var p=d?void 0:(l?c?Df:ip:c?rm:np)(e);return function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););}(p||e,(function(i,a){p&&(i=e[a=i]),tm(s,a,v_(i,t,n,a,e,r))})),s}__[g_]=__["[object Array]"]=__["[object ArrayBuffer]"]=__["[object DataView]"]=__["[object Boolean]"]=__["[object Date]"]=__["[object Float32Array]"]=__["[object Float64Array]"]=__["[object Int8Array]"]=__["[object Int16Array]"]=__["[object Int32Array]"]=__["[object Map]"]=__["[object Number]"]=__[f_]=__["[object RegExp]"]=__["[object Set]"]=__["[object String]"]=__["[object Symbol]"]=__["[object Uint8Array]"]=__["[object Uint8ClampedArray]"]=__["[object Uint16Array]"]=__["[object Uint32Array]"]=!0,__["[object Error]"]=__[p_]=__["[object WeakMap]"]=!1;function y_(e){return v_(e,5)}var b_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var x_={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,i,r,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new a(i,r||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,i,a=[];if(0===this._eventsCount)return a;for(i in e=this._events)t.call(e,i)&&a.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,r=i.length,s=new Array(r);a<r;a++)s[a]=i[a].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,a,r,s){var o=n?n+e:e;if(!this._events[o])return!1;var c,l,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,a),!0;case 5:return d.fn.call(d.context,t,i,a,r),!0;case 6:return d.fn.call(d.context,t,i,a,r,s),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var h,g=d.length;for(l=0;l<g;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,i);break;case 4:d[l].fn.call(d[l].context,t,i,a);break;default:if(!c)for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];d[l].fn.apply(d[l].context,c)}}return!0},o.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,i,a){var r=n?n+e:e;if(!this._events[r])return this;if(!t)return s(this,r),this;var o=this._events[r];if(o.fn)o.fn!==t||a&&!o.once||i&&o.context!==i||s(this,r);else{for(var c=0,l=[],d=o.length;c<d;c++)(o[c].fn!==t||a&&!o[c].once||i&&o[c].context!==i)&&l.push(o[c]);l.length?this._events[r]=1===l.length?l[0]:l:s(this,r)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(x_);var M_=w_(x_.exports);class C_ extends Error{constructor(e){super(e),this.name="TimeoutError"}}class S_ extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const k_=e=>void 0===globalThis.DOMException?new S_(e):new DOMException(e),$_=e=>{const t=void 0===e.reason?k_("This operation was aborted."):e.reason;return t instanceof Error?t:k_(t)};class E_{#e=[];enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this.#e[this.size-1].priority>=t.priority)return void this.#e.push(n);const i=function(e,t,n){let i=0,a=e.length;for(;a>0;){const r=Math.trunc(a/2);let s=i+r;n(e[s],t)<=0?(i=++s,a-=r+1):a=r}return i}(this.#e,n,((e,t)=>t.priority-e.priority));this.#e.splice(i,0,n)}dequeue(){const e=this.#e.shift();return e?.run}filter(e){return this.#e.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this.#e.length}}class A_ extends M_{#t;#n;#i=0;#a;#r;#s=0;#o;#c;#e;#l;#d=0;#u;#h;#g;timeout;constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:E_,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#t=e.carryoverConcurrencyCount,this.#n=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#a=e.intervalCap,this.#r=e.interval,this.#e=new e.queueClass,this.#l=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#g=!0===e.throwOnTimeout,this.#h=!1===e.autoStart}get#p(){return this.#n||this.#i<this.#a}get#m(){return this.#d<this.#u}#f(){this.#d--,this.#_(),this.emit("next")}#v(){this.#y(),this.#b(),this.#c=void 0}get#w(){const e=Date.now();if(void 0===this.#o){const t=this.#s-e;if(!(t<0))return void 0===this.#c&&(this.#c=setTimeout((()=>{this.#v()}),t)),!0;this.#i=this.#t?this.#d:0}return!1}#_(){if(0===this.#e.size)return this.#o&&clearInterval(this.#o),this.#o=void 0,this.emit("empty"),0===this.#d&&this.emit("idle"),!1;if(!this.#h){const e=!this.#w;if(this.#p&&this.#m){const t=this.#e.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#b(),!0)}}return!1}#b(){this.#n||void 0!==this.#o||(this.#o=setInterval((()=>{this.#y()}),this.#r),this.#s=Date.now()+this.#r)}#y(){0===this.#i&&0===this.#d&&this.#o&&(clearInterval(this.#o),this.#o=void 0),this.#i=this.#t?this.#d:0,this.#x()}#x(){for(;this.#_(););}get concurrency(){return this.#u}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#u=e,this.#x()}async#M(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(e.reason)}),{once:!0})}))}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#g,...t},new Promise(((n,i)=>{this.#e.enqueue((async()=>{this.#d++,this.#i++;try{t.signal?.throwIfAborted();let i=e({signal:t.signal});t.timeout&&(i=function(e,t){const{milliseconds:n,fallback:i,message:a,customTimers:r={setTimeout:setTimeout,clearTimeout:clearTimeout}}=t;let s;const o=new Promise(((o,c)=>{if("number"!=typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(t.signal){const{signal:e}=t;e.aborted&&c($_(e)),e.addEventListener("abort",(()=>{c($_(e))}))}if(n===Number.POSITIVE_INFINITY)return void e.then(o,c);const l=new C_;s=r.setTimeout.call(void 0,(()=>{if(i)try{o(i())}catch(e){c(e)}else"function"==typeof e.cancel&&e.cancel(),!1===a?o():a instanceof Error?c(a):(l.message=a??`Promise timed out after ${n} milliseconds`,c(l))}),n),(async()=>{try{o(await e)}catch(e){c(e)}})()})),c=o.finally((()=>{c.clear()}));return c.clear=()=>{r.clearTimeout.call(void 0,s),s=void 0},c}(Promise.resolve(i),{milliseconds:t.timeout})),t.signal&&(i=Promise.race([i,this.#M(t.signal)]));const a=await i;n(a),this.emit("completed",a)}catch(e){if(e instanceof C_&&!t.throwOnTimeout)return void n();i(e),this.emit("error",e)}finally{this.#f()}}),t),this.emit("add"),this.#_()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this.#h?(this.#h=!1,this.#x(),this):this}pause(){this.#h=!0}clear(){this.#e=new this.#l}async onEmpty(){0!==this.#e.size&&await this.#C("empty")}async onSizeLessThan(e){this.#e.size<e||await this.#C("next",(()=>this.#e.size<e))}async onIdle(){0===this.#d&&0===this.#e.size||await this.#C("idle")}async#C(e,t){return new Promise((n=>{const i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)}))}get size(){return this.#e.size}sizeBy(e){return this.#e.filter(e).length}get pending(){return this.#d}get isPaused(){return this.#h}}var I_={frigate_card:"Frigate card",frigate_card_description:"A Lovelace card for use with Frigate",live:"Live",no_media:"No media to display",recordings:"Recordings",version:"Version"},T_={cameras:{always_error_if_entity_unavailable:"Always treat entity unavailability as error",camera_entity:"Camera Entity",capabilities:{capabilities:{clips:"Clips","favorite-events":"Favorite Events","favorite-recordings":"Favorite Recordings",live:"Live",menu:"Menu",ptz:"PTZ",recordings:"Recordings",seek:"Seeking",snapshots:"Snapshots",substream:"Substream"},disable:"Disable",disable_except:"Disable except",editor_label:"Camera capabilities"},cast:{dashboard:{dashboard_path:"Dashboard path",view_path:"View path"},editor_label:"Cast options",method:"Cast method",methods:{dashboard:"Dashboard",standard:"Standard"}},dependencies:{all_cameras:"Show events for all cameras with this camera",cameras:"Show events for specific cameras with this camera",editor_label:"Dependency options"},dimensions:{aspect_ratio:"Static aspect ratio",editor_label:"Camera dimensions",layout:{editor_label:"Camera Layout",fit:"Layout fit",fits:{contain:"Media is contained/letterboxed",cover:"Media expands proportionally to cover the card",fill:"Media is stretched to fill the card"},pan:{x:"Pan horizontal percentage",y:"Pan vertical percentage"},position:{editor_label:"Layout Cover Position",x:"Horizontal placement percentage",y:"Vertical placement percentage"},view_box:{bottom:"Bottom inset percentage",editor_label:"Layout View Box",left:"Left inset percentage",right:"Right inset percentage",top:"Top inset percentage"},zoom:"Zoom factor"}},engines:{editor_label:"Camera engine options"},frigate:{camera_name:"Frigate camera name (Autodetected from entity)",client_id:"Frigate client id (For >1 Frigate server)",editor_label:"Frigate options",labels:"Frigate labels/object filters",url:"Frigate server URL",zones:"Frigate zones"},go2rtc:{editor_label:"go2rtc Options",modes:{editor_label:"go2rtc Modes",mjpeg:"Motion JPEG (MJPEG)",mp4:"MPEG-4 (MP4)",mse:"Media Source Extensions (MSE)",webrtc:"Web Real-Time Communication (WebRTC)"},stream:"go2rtc stream name"},icon:"Icon for this camera (Autodetected from entity)",id:"Unique id for this camera in this card",image:{editor_label:"Image Options",refresh_seconds:"Number of seconds after which to refresh live image (0=never)",url:"Image URL to use instead of camera entity snapshot"},live_provider:"Live view provider for this camera",live_provider_options:{editor_label:"Live provider options"},live_providers:{auto:"Automatic",go2rtc:"go2rtc",ha:"Home Assistant video stream (i.e. HLS, LL-HLS, WebRTC via HA)",image:"Home Assistant images",jsmpeg:"JSMpeg","webrtc-card":"WebRTC Card (i.e. AlexxIT's WebRTC Card)"},motioneye:{editor_label:"MotionEye options",images:{directory_pattern:"Images directory pattern",file_pattern:"Images file pattern"},movies:{directory_pattern:"Movies directory pattern",file_pattern:"Movies file pattern"},url:"MotionEye UI URL"},proxy:{dynamic:"Dynamic proxying",editor_label:"Camera proxying",media:{auto:"Media proxying automatically configured",editor_label:"Media proxying",false:"Media proxying disabled",true:"Media proxying enabled"},ssl_ciphers:{auto:"SSL ciphers automatically configured",default:"Default SSL ciphers",editor_label:"SSL ciphers",insecure:"Insecure SSL ciphers",intermediate:"Intermediate SSL ciphers",modern:"Modern SSL ciphers"},ssl_verification:{auto:"SSL verification automatically configured",editor_label:"SSL verification",false:"SSL verification disabled",true:"SSL verification enabled"}},reolink:{editor_label:"Reolink options",media_resolution:{editor_label:"Media Resolution",high:"High Resolution",low:"Low Resolution"},url:"Reolink UI URL"},title:"Title for this camera (Autodetected from entity)",triggers:{editor_label:"Trigger options",entities:"Trigger from other entities",events:{clips:"Events with new clips",editor_label:"Trigger Events",events:"All events",snapshots:"Events with new snapshots"},motion:"Trigger by auto-detecting the motion sensor",occupancy:"Trigger by auto-detecting the occupancy sensor"},webrtc_card:{editor_label:"WebRTC Card Options",entity:"WebRTC Card Camera Entity (Not a Frigate camera)",url:"WebRTC Card Camera URL"}},common:{controls:{builtin:"Built-in video controls",filter:{editor_label:"Media Filter",mode:"Filter mode",modes:{left:"Media filter in a drawer to the left",none:"No media filter",right:"Media filter in a drawer to the right"}},next_previous:{editor_label:"Next & Previous",size:"Next & previous control size in pixels",style:"Next & previous control style",styles:{chevrons:"Chevrons",icons:"Icons",none:"None",thumbnails:"Thumbnails"}},thumbnails:{editor_label:"Thumbnails",events_media_type:"Whether to show event thumbnails of clips or snapshots",events_media_types:{clips:"Clip thumbnails",snapshots:"Snapshot thumbnails"},media_type:"Whether to show thumnails of events or recordings",media_types:{events:"Events",recordings:"Recordings"},mode:"Thumbnails mode",modes:{above:"Thumbnails above",below:"Thumbnails below",left:"Thumbnails in a drawer to the left",none:"No thumbnails",right:"Thumbnails in a drawer to the right"},show_details:"Show details with thumbnails",show_download_control:"Show download control on thumbnails",show_favorite_control:"Show favorite control on thumbnails",show_timeline_control:"Show timeline control on thumbnails",size:"Thumbnails size in pixels"},timeline:{editor_label:"Mini Timeline",mode:"Mode",modes:{above:"Above",below:"Below",none:"None"},pan_mode:"Default pan mode",pan_modes:{pan:"Pan",seek:"Pan seeks across all media","seek-in-camera":"Pan seeks within selected camera only","seek-in-media":"Pan seeks within selected media item only"}}},display:{editor_label:"Display",grid_columns:"Exact number of grid columns",grid_max_columns:"Maximum number of grid columns",grid_selected_width_factor:"Increase selected media width by this factor",mode:"Mode"},image:{entity:"Entity for use with entity mode",entity_parameters:"Query parameters added to the entity-based picture URLs (e.g. width=1920&height=1080)",mode:"Image mode",modes:{camera:"Home Assistant camera snapshot of camera entity",entity:"Entity with entity_picture attribute",screensaver:"Embedded Frigate logo",url:"Arbitrary image specified by URL"},refresh_seconds:"Number of seconds after which to refresh (0=never)",url:"Static image URL"},media_action_conditions:{all:"All opportunities",hidden:"On browser/tab hiding",microphone_mute:"On microphone mute",microphone_unmute:"On microphone unmute",never:"Never",selected:"On selection",unselected:"On unselection",visible:"On browser/tab visibility"},timeline:{clustering_threshold:"The count of events at which they are clustered (0=no clustering)",events_media_type:"The events media the timeline displays",events_media_types:{all:"All event media types",clips:"Clips",snapshots:"Snapshots"},show_recordings:"Show recordings",style:"Timeline style",styles:{ribbon:"Events on a single ribbon",stack:"Stacked & clustered events"},window_seconds:"The default length of the timeline view in seconds"}},dimensions:{aspect_ratio:"Default aspect ratio (e.g. '16:9')",aspect_ratio_mode:"Aspect ratio mode",aspect_ratio_modes:{dynamic:"Aspect ratio adjusts to media",static:"Static aspect ratio",unconstrained:"Unconstrained aspect ratio"},height:"Card height in CSS units (e.g. '500px')"},live:{auto_mute:"Automatically mute live cameras",auto_pause:"Automatically pause live cameras",auto_play:"Automatically play live cameras",auto_unmute:"Automatically unmute live cameras",controls:{editor_label:"Live Controls",ptz:{editor_label:"PTZ",hide_home:"Hide home control",hide_pan_tilt:"Hide pan & tilt control",hide_zoom:"Hide zoom control",mode:"Mode",modes:{off:"Off",on:"On"},orientation:"Orientation",orientations:{horizontal:"Horizontal",vertical:"Vertical"},position:"Position",positions:{"bottom-left":"Bottom left","bottom-right":"Bottom right","top-left":"Top left","top-right":"Top right"}}},draggable:"Live cameras view can be dragged/swiped",lazy_load:"Live cameras are lazily loaded",lazy_unload:"Live cameras are lazily unloaded",microphone:{always_connected:"Always keep the microphone connected",disconnect_seconds:"Seconds after which to disconnect microphone (0=never)",editor_label:"Microphone",enabled:"Microphone enabled",mute_after_microphone_mute_seconds:"Seconds after microphone mute to mute inbound audio"},preload:"Preload live view in the background",show_image_during_load:"Show still image while the live stream is loading",transition_effect:"Live camera transition effect",zoomable:"Live cameras can be zoomed/panned"},media_viewer:{auto_mute:"Automatically mute media",auto_pause:"Automatically pause media",auto_play:"Automatically play media",auto_unmute:"Automatically unmute media",controls:{editor_label:"Media Viewer Controls"},draggable:"Media Viewer can be dragged/swiped",lazy_load:"Media Viewer media is lazily loaded in carousel",snapshot_click_plays_clip:"Clicking on a snapshot plays a related clip",transition_effect:"Media Viewer transition effect",transition_effects:{none:"No transition",slide:"Slide transition"},zoomable:"Media Viewer can be zoomed/panned"},menu:{alignment:"Menu alignment",alignments:{bottom:"Aligned to the bottom",left:"Aligned to the left",right:"Aligned to the right",top:"Aligned to the top"},button_size:"Menu button size in pixels",buttons:{alignment:"Button alignment",alignments:{matching:"Matching the menu alignment",opposing:"Opposing the menu alignment"},camera_ui:"Camera user interface",cameras:"Cameras",clips:"Clips",display_mode:"Display mode",download:"Download",enabled:"Button enabled",expand:"Expand",frigate:"Frigate menu / Default view",fullscreen:"Fullscreen",icon:"Icon",image:"Image",live:"Live",media_player:"Send to media player",microphone:"Microphone",mute:"Mute / Unmute",permanent:"Show when the menu is hidden",play:"Play / Pause",priority:"Priority",ptz_controls:"Show PTZ controls",ptz_home:"PTZ Home",recordings:"Recordings",screenshot:"Screenshot",snapshots:"Snapshots",substreams:"Substream(s)",timeline:"Timeline",type:"Button type",types:{momentary:"Momentary",toggle:"Toggle"}},position:"Menu position",positions:{bottom:"Positioned on the bottom",left:"Positioned on the left",right:"Positioned on the right",top:"Positioned on the top"},style:"Menu style",styles:{hidden:"Hidden menu",hover:"Hover menu","hover-card":"Hover menu (card-wide)",none:"No menu",outside:"Outside menu",overlay:"Overlay menu"}},overrides:{info:"This card configuration has manually specified overrides configured which may override values shown in the visual editor, please consult the code editor to view/modify these overrides"},performance:{features:{animated_progress_indicator:"Animated Progress Indicator",card_loading_indicator:"Card Loading Indicator",editor_label:"Feature Options",max_simultaneous_engine_requests:"Max simultaneous camera engine requests",media_chunk_size:"Media chunk size"},style:{border_radius:"Curves",box_shadow:"Shadows",editor_label:"Style Options"},warning:"This card is in low profile mode so defaults have changed to optimize performance"},profiles:{casting:"Casting",editor_label:"Configuration profiles","low-performance":"Low performance",scrubbing:"Video scrubbing"},status_bar:{height:"Status bar height in pixels",items:{enabled:"Item enabled",engine:"Camera engine",live_provider:"Live provider",priority:"Item priority",resolution:"Resolution",technology:"Technology",title:"Title"},popup_seconds:"Status bar popup seconds",position:"Status bar position",positions:{bottom:"Positioned on the bottom",top:"Positioned on the top"},style:"Status bar style",styles:{hover:"Hover status bar","hover-card":"Hover status bar (card-wide)",none:"No status bar",outside:"Outside status bar",overlay:"Overlay status bar",popup:"Popup status bar"}},view:{camera_select:"View for newly selected cameras",default:"Default view",default_cycle_camera:"Cycle through cameras when default view updates",default_reset:{after_interaction:"Reset to the default view after user interaction ends",editor_label:"Default view reset behavior",entities:"Reset to the default view on entity state change",every_seconds:"Reset to default view every X seconds (0=never)",interaction_mode:"How default reset behaves when the card has human interaction",interaction_modes:{active:"Only allow reset when card has active human interaction",all:"Reset regardless of human interaction",inactive:"Only reset when card has no human interaction"}},dim:"Dim when no interaction",interaction_seconds:"Seconds after user action to remain interacted with (0=never)",keyboard_shortcuts:{editor_label:"Keyboard shortcuts",enabled:"Keyboard shortcuts enabled",ptz_down:"PTZ Down",ptz_home:"PTZ Home",ptz_left:"PTZ Left",ptz_right:"PTZ Right",ptz_up:"PTZ Up",ptz_zoom_in:"PTZ Zoom In",ptz_zoom_out:"PTZ Zoom Out"},theme:{themes:{dark:"Dark",ha:"Home Assistant",editor_label:"Themes",light:"Light",traditional:"Traditional"}},triggers:{actions:{editor_label:"Trigger actions",interaction_mode:"How to handle actions when the card has human interaction",interaction_modes:{active:"Only trigger actions when card has human interaction",all:"Trigger actions regardless of human interaction",inactive:"Only trigger actions when card has no human interaction"},trigger:"Trigger action",triggers:{default:"Change to or update default view",live:"Change to or update live view",media:"Change to the relevant media view for new media",none:"No action"},untrigger:"Untrigger action",untriggers:{default:"Change to default view/camera",none:"No action"}},editor_label:"Trigger behavior",filter_selected_camera:"Only trigger on selected camera",show_trigger_status:"Show pulsing border when triggered",untrigger_seconds:"Seconds after inactive state change to untrigger"},views:{clip:"Most recent clip",clips:"Clips gallery",current:"Current view",image:"Static image",live:"Live view",recording:"Most recent recording",recordings:"Recordings gallery",snapshot:"Most recent snapshot",snapshots:"Snapshots gallery",timeline:"Timeline view"}}},z_={grid:"Show media viewer for each camera in a grid",single:"Show single media viewer"},j_={add_new_camera:"Add new camera",button:"Button",camera:"Camera",cameras:"Cameras",cameras_secondary:"What cameras to render on this card",delete:"Delete",dimensions:"Card dimensions",dimensions_secondary:"Card dimensions & shape options",image:"Image",image_secondary:"Static image view options",live:"Live",live_secondary:"Live camera view options",media_gallery:"Media gallery",media_gallery_secondary:"Media gallery options",media_viewer:"Media viewer",media_viewer_secondary:"Viewer for static media (clips, snapshots or recordings)",menu:"Menu",menu_secondary:"Menu look & feel options",move_down:"Move down",move_up:"Move up",overrides:"Overrides are active",overrides_secondary:"Dynamic configuration overrides detected",performance:"Performance",performance_secondary:"Card performance options",profiles:"Configuration profiles",profiles_secondary:"Choose pre-configured sets of defaults",status_bar:"Status bar",status_bar_secondary:"Status bar look & feel options",timeline:"Timeline",timeline_secondary:"Event timeline options",upgrade:"Upgrade",upgrade_available:"An automatic card configuration upgrade is available",view:"View",view_secondary:"What the card should show and how to show it"},O_={ptz:{down:"Down",home:"Home",left:"Left",right:"Right",up:"Up",zoom_in:"Zoom In",zoom_out:"Zoom Out"}},D_={awaiting_live:"Waiting for live stream to load ...",awaiting_media:"Waiting for media to load",camera_initialization:"Camera initialization failed",camera_initialization_reolink:"Could not initialize Reolink camera",could_not_render_elements:"Could not render picture elements",could_not_resolve:"Could not resolve media URL",diagnostics:"Card diagnostics. Please review for confidential information prior to sharing",download_no_media:"No media to download",download_sign_failed:"Could not sign media URL for download",duplicate_camera_id:"Duplicate Frigate camera id for the following camera, use the 'id' parameter to uniquely identify cameras",empty_response:"Received empty response from Home Assistant for request",failed_response:"Failed to receive response from Home Assistant for request",failed_retain:"Could not retain event",failed_sign:"Could not sign Home Assistant URL",image_load_error:"The image could not be loaded",invalid_configuration:"Invalid configuration",invalid_configuration_no_hint:"No location hint available (bad or missing type?)",invalid_configuration_override:"Invalid override configuration",invalid_elements_config:"Invalid picture elements configuration",invalid_response:"Received invalid response from Home Assistant for request",jsmpeg_no_player:"Could not start JSMPEG player",live_camera_no_endpoint:"Could not get camera endpoint for this live provider (incomplete configuration?)",live_camera_not_found:"The configured camera_entity was not found",live_camera_unavailable:"Camera unavailable",no_camera_engine:"Could not determine suitable engine for camera",no_camera_entity:"Could not find camera entity",no_camera_entity_for_triggers:"A camera entity is required in order to autodetect triggers",no_camera_id:"Could not determine camera id for the following camera, may need to set 'id' parameter manually",no_camera_name:"Could not determine a Frigate camera name for camera (or one of its dependents), please specify either 'camera_entity' or 'camera_name'",no_dashboard_or_view:"Both 'dashboard_path' and 'view_path' parameters are required for the 'dashboard' cast method",no_live_camera:"The camera_entity parameter must be set and valid for this live provider",no_supported_camera:"The selected camera does not support this view",no_supported_cameras:"No cameras support this view",reconnecting:"Reconnecting",stream_not_loading:"The video stream has not yet loaded. This is could for any number of reasons. If configured (and by default), there will be an image refreshing every second until the stream loads correctly",too_many_automations:"Too many nested automation calls, please check your configuration for loops",troubleshooting:"Check troubleshooting",unknown:"Unknown error",upgrade_available:"An automated card configuration upgrade is available, please visit the visual card editor",webrtc_card_reported_error:"WebRTC Card reported an error",webrtc_card_waiting:"Waiting for WebRTC Card to load ..."},R_={camera:"Camera",duration:"Duration",in_progress:"In Progress",score:"Score",seek:"Seek",start:"Start",tag:"Tag",what:"What",where:"Where"},P_={assign:"Assign",modifiers:{alt:"Alt",ctrl:"Ctrl",meta:"Meta",shift:"Shift"},unassign:"Unassign"},L_={all:"All",camera:"Camera",favorite:"Favorite",media_type:"Media Type",media_types:{clips:"Clips",recordings:"Recordings",snapshots:"Snapshots"},not_favorite:"Not Favorite",select_camera:"Select camera...",select_favorite:"Select favorite...",select_media_type:"Select media type...",select_tag:"Select tag...",select_what:"Select what...",select_when:"Select when...",select_where:"Select where...",tag:"Tag",what:"What",when:"When",whens:{custom:"Custom",past_month:"Past Month",past_week:"Past Week",today:"Today",yesterday:"Yesterday"},where:"Where"},N_={unseekable:"Seek time not found in media"},F_={camera:"Camera",duration:"Duration",events:"Events",in_progress:"In Progress",seek:"Seek",start:"Start"},V_={download:"Download media",no_thumbnail:"No thumbnail available",retain_indefinitely:"Media will be indefinitely retained",timeline:"See media in timeline"},H_={select_date:"Choose date"},B_={common:I_,config:T_,display_modes:z_,editor:j_,elements:O_,error:D_,event:R_,key_assigner:P_,media_filter:L_,media_viewer:N_,recording:F_,thumbnail:V_,timeline:H_},U_=Object.freeze({__proto__:null,common:I_,config:T_,default:B_,display_modes:z_,editor:j_,elements:O_,error:D_,event:R_,key_assigner:P_,media_filter:L_,media_viewer:N_,recording:F_,thumbnail:V_,timeline:H_});const q_="en",W_={[q_]:U_};let Z_;function Q_(e){const t=e=>e.replace("-","_"),n=e?.language??e?.selectedLanguage;if(n)return t(n);const i=localStorage.getItem("selectedLanguage");if(i){const e=JSON.parse(i);if(e)return t(e)}for(const e of navigator.languages){const n=t(e);if(n&&n in W_)return n}return q_}function Y_(e,t="",n=""){let i="";try{i=e.split(".").reduce(((e,t)=>e[t]),W_[Z_??q_])}catch(e){}return i||(i=e.split(".").reduce(((e,t)=>e[t]),W_[q_])),""!==t&&""!==n&&(i=i.replace(t,n)),i}function G_(e){return"string"==typeof e?.id&&e.id||"string"==typeof e?.camera_entity&&e.camera_entity||"object"==typeof e?.webrtc_card&&e.webrtc_card&&("string"==typeof e.webrtc_card.entity&&e.webrtc_card.entity||"string"==typeof e.webrtc_card.url&&e.webrtc_card.url)||"object"==typeof e?.go2rtc&&e.go2rtc&&"string"==typeof e.go2rtc.url&&"string"==typeof e.go2rtc.stream&&`${e.go2rtc.url}#${e.go2rtc.stream}`||"object"==typeof e?.frigate&&e.frigate&&"string"==typeof e?.frigate.camera_name&&e.frigate.camera_name||""}const K_=(e,...t)=>{e?.debug?.logging&&console.debug(...t)},J_=(e,t,n)=>"preset"===t?(n?.preset?e.ptz.presets?.[n.preset]:null)??null:n?.phase?e.ptz[`actions_${t}_${n.phase}`]??null:e.ptz[`actions_${t}`]??null,X_=(e,t,n)=>!!J_(e,t,n),ev=(e,t)=>{const n=X_(e,t,{phase:"start"})&&X_(e,t,{phase:"stop"}),i=X_(e,t);return n||i?[...n?["continuous"]:[],...i?["relative"]:[]]:null},tv=e=>{const t=ev(e,"left"),n=ev(e,"right"),i=ev(e,"up"),a=ev(e,"down"),r=ev(e,"zoom_in"),s=ev(e,"zoom_out"),o=e.ptz.presets?Object.keys(e.ptz.presets):void 0;return t?.length||n?.length||i?.length||a?.length||r?.length||s?.length||o?.length?{...t?{left:t}:{},...n?{right:n}:{},...i?{up:i}:{},...a?{down:a}:{},...r?{zoomIn:r}:{},...s?{zoomOut:s}:{},...o?{presets:o}:{}}:null};class nv{constructor(e,t){this._capabilities=e;for(const e of t?.disable??[])this._disable(e);for(const e of Do)t?.disableExcept?.length&&!t.disableExcept.includes(e)&&this._disable(e)}_disable(e){delete this._capabilities[e]}matches(e){let t=!0;return"string"==typeof e&&(t&&=this.has(e)),"object"==typeof e&&e.allCapabilities&&(t&&=e.allCapabilities.every((e=>this.has(e)))),"object"==typeof e&&e.anyCapabilities&&(t&&=e.anyCapabilities.some((e=>this.has(e)))),t}has(e){return!!this._capabilities[e]}getPTZCapabilities(){return this._capabilities.ptz??null}hasPTZCapability(){return!!(this._capabilities.ptz?.down?.length||this._capabilities.ptz?.up?.length||this._capabilities.ptz?.left?.length||this._capabilities.ptz?.right?.length||this._capabilities.ptz?.zoomIn?.length||this._capabilities.ptz?.zoomOut?.length||this._capabilities.ptz?.presets?.length)}getRawCapabilities(){return this._capabilities}}function iv(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(a);++i<a;)r[i]=e[i+t];return r}var av=Math.ceil,rv=Math.max;var sv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ov=/^\w*$/;function cv(e,t){if(vg(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Sm(e))||(ov.test(e)||!sv.test(e)||null!=t&&e in Object(t))}var lv="Expected a function";function dv(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(lv);var n=function(){var i=arguments,a=t?t.apply(this,i):i[0],r=n.cache;if(r.has(a))return r.get(a);var s=e.apply(this,i);return n.cache=r.set(a,s)||r,s};return n.cache=new(dv.Cache||qh),n}dv.Cache=qh;var uv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hv=/\\(\\)?/g,gv=function(e){var t=dv(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(uv,(function(e,n,i,a){t.push(i?a.replace(hv,"$1"):n||e)})),t})),pv=gv;function mv(e,t){return vg(e)?e:cv(e,t)?[e]:pv(Fm(e))}var fv=1/0;function _v(e){if("string"==typeof e||Sm(e))return e;var t=e+"";return"0"==t&&1/e==-fv?"-0":t}function vv(e,t){for(var n=0,i=(t=mv(t,e)).length;null!=e&&n<i;)e=e[_v(t[n++])];return n&&n==i?e:void 0}var yv=1,bv=2;function wv(e){return e==e&&!bh(e)}function xv(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Mv(e){var t=function(e){for(var t=np(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,wv(a)]}return t}(e);return 1==t.length&&t[0][2]?xv(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,i){var a=n.length,r=a,s=!i;if(null==e)return!r;for(e=Object(e);a--;){var o=n[a];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<r;){var c=(o=n[a])[0],l=e[c],d=o[1];if(s&&o[2]){if(void 0===l&&!(c in e))return!1}else{var u=new Wh;if(i)var h=i(l,d,c,e,t,u);if(!(void 0===h?Ep(d,l,yv|bv,i,u):h))return!1}}return!0}(n,e,t)}}function Cv(e,t,n){var i=null==e?void 0:vv(e,t);return void 0===i?n:i}function Sv(e,t){return null!=e&&t in Object(e)}function kv(e,t){return null!=e&&function(e,t,n){for(var i=-1,a=(t=mv(t,e)).length,r=!1;++i<a;){var s=_v(t[i]);if(!(r=null!=e&&n(e,s)))break;e=e[s]}return r||++i!=a?r:!!(a=null==e?0:e.length)&&Lg(a)&&Rg(s,a)&&(vg(e)||Ag(e))}(e,t,Sv)}var $v=1,Ev=2;function Av(e){return cv(e)?(t=_v(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return vv(t,e)}}(e);var t}function Iv(e){return"function"==typeof e?e:null==e?cm:"object"==typeof e?vg(e)?(t=e[0],n=e[1],cv(t)&&wv(n)?xv(_v(t),n):function(e){var i=Cv(e,t);return void 0===i&&i===n?kv(e,t):Ep(n,i,$v|Ev)}):Mv(e):Av(e);var t,n}var Tv=function(e,t){return function(n,i){if(null==n)return n;if(!tp(n))return e(n,i);for(var a=n.length,r=t?a:-1,s=Object(n);(t?r--:++r<a)&&!1!==i(s[r],r,s););return n}}((function(e,t){return e&&Op(e,t,np)})),zv=Tv;function jv(e,t){if(e!==t){var n=void 0!==e,i=null===e,a=e==e,r=Sm(e),s=void 0!==t,o=null===t,c=t==t,l=Sm(t);if(!o&&!l&&!r&&e>t||r&&s&&c&&!o&&!l||i&&s&&c||!n&&c||!a)return 1;if(!i&&!r&&!l&&e<t||l&&n&&a&&!i&&!r||o&&n&&a||!s&&a||!c)return-1}return 0}function Ov(e,t,n){t=t.length?Dm(t,(function(e){return vg(e)?function(t){return vv(t,1===e.length?e[0]:e)}:e})):[cm];var i=-1;t=Dm(t,Fg(Iv));var a=function(e,t){var n=-1,i=tp(e)?Array(e.length):[];return zv(e,(function(e,a,r){i[++n]=t(e,a,r)})),i}(e,(function(e,n,a){return{criteria:Dm(t,(function(t){return t(e)})),index:++i,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(a,(function(e,t){return function(e,t,n){for(var i=-1,a=e.criteria,r=t.criteria,s=a.length,o=n.length;++i<s;){var c=jv(a[i],r[i]);if(c)return i>=o?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}))}function Dv(e,t,n,i){return null==e?[]:(vg(t)||(t=null==t?[]:[t]),vg(n=i?void 0:n)||(n=null==n?[]:[n]),Ov(e,t,n))}async function Rv(e,t,n,i=!1){let a;try{a=await e.callWS(n)}catch(e){if(!(e instanceof Error))throw new Oo(Y_("error.failed_response"),{request:n,response:e});throw e}if(!a)throw new Oo(Y_("error.empty_response"),{request:n});const r=i?t.safeParse(JSON.parse(a)):t.safeParse(a);if(!r.success)throw new Oo(Y_("error.invalid_response"),{request:n,response:a,invalid_keys:No(r.error)});return r.data}const Pv=bi.lazy((()=>bi.object({title:bi.string(),media_class:bi.string(),media_content_type:bi.string(),media_content_id:bi.string(),can_play:bi.boolean(),can_expand:bi.boolean(),children_media_class:bi.string().nullable().optional(),thumbnail:bi.string().nullable(),children:bi.array(Pv).nullable().optional()}))),Lv="video",Nv="image",Fv=60,Vv=e=>Dv(e,(e=>e._metadata?.startDate),"desc");class Hv{async walkBrowseMedias(e,t,n){return t&&t.length?(await df(t,(async t=>await this._walkBrowseMedia(e,t,n)))).flat():[]}async _walkBrowseMedia(e,t,n){let i=[];for(const a of function(e,t,n){t=(n?vm(e,t,n):void 0===t)?1:rv(Om(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,r=0,s=Array(av(i/t));a<i;)s[r++]=iv(e,a,a+=t);return s}(t.targets,t.concurrency??1/0)){const r=await df(a,(async i=>await this._browseMedia(e,i,{cache:n?.cache,metadataGenerator:t.metadataGenerator})));for(const e of r)for(const n of e.children??[])t.matcher(n)&&i.push(n);if(t.sorter&&(i=t.sorter(i)),t.earlyExit&&t.earlyExit(i))break}const a=t.advance?t.advance(i):null;return a?.length?await this.walkBrowseMedias(e,a,n):i}async _browseMedia(e,t,n){const i="object"==typeof t?t.media_content_id:t,a=n?.cache?n.cache.get(i):null;if(a)return a;const r={type:"media_source/browse_media",media_content_id:i},s=await Rv(e,Pv,r);if(n?.metadataGenerator)for(const e of s.children??[])e._metadata=n.metadataGenerator(e,"object"==typeof t?t:void 0)??void 0;return n?.cache&&n.cache.set(i,s,Xd(new Date,{seconds:60})),s}}function Bv(e,t){return Ep(e,t)}function Uv(e,t){return e&&e.length?function(e,t){for(var n=-1,i=e.length,a=0,r=[];++n<i;){var s=e[n],o=t?t(s):s;if(!n||!ih(o,c)){var c=o;r[a++]=0===s?0:s}}return r}(e,Iv(t)):[]}class qv{constructor(e){this._ranges=e??[]}hasCoverage(e){return this._ranges.some((t=>Zv(t,e)))}add(e){this._ranges.push(e),this._ranges=Yv(this._ranges)}clear(){this._ranges=[]}}class Wv{constructor(e){this._ranges=e??[]}hasCoverage(e){const t=new Date;return this._ranges.some((n=>t<n.expires&&Zv(n,e)))}add(e){this._ranges.push(e),this._expireOldRanges()}_expireOldRanges(){const e=new Date;this._ranges=this._ranges.filter((t=>e<t.expires))}clear(){this._ranges=[]}}const Zv=(e,t)=>t.start>=e.start&&t.end<=e.end,Qv=(e,t)=>e.start>=t.start&&e.start<=t.end||e.end>=t.start&&e.end<=t.end||e.start<=t.start&&e.end>=t.end,Yv=(e,t=0)=>{const n=[];e=Dv(e,(e=>e.start),"asc");let i=null;for(const a of e){const e=a.start instanceof Date?a.start.getTime():a.start;if(!i){i={...a};continue}(i.end instanceof Date?i.end.getTime():i.end)+1e3*t>=e?a.end>i.end&&(i.end=a.end):(n.push(i),i={...a})}return i&&n.push(i),n};class Gv{constructor(){this._data=[]}get(e){const t=new Date;for(const n of this._data)if((!n.expires||t<=n.expires)&&this._contains(e,n.request))return n.response;return null}clear(){this._data=[]}has(e){return!!this.get(e)}set(e,t,n){this._data.push({request:e,response:t,expires:n}),this._expireOldRequests()}_contains(e,t){return Bv(e,t)}_expireOldRequests(){const e=new Date;this._data=this._data.filter((t=>!t.expires||e<t.expires))}}class Kv extends Gv{}class Jv{constructor(e,t){this._ranges=new qv,this._data=[],this._timeFunc=e,this._idFunc=t}add(e,t){this._ranges.add(e),this._data=Uv(Dv(this._data.concat(t),this._timeFunc,"asc"),this._idFunc)}hasCoverage(e){return this._ranges.hasCoverage(e)}get(e){if(!this.hasCoverage(e))return null;const t=[];for(const n of this._data){const i=this._timeFunc(n);if(i>=e.start.getTime()){if(i>e.end.getTime())break;t.push(n)}}return t}getSize(){return this._data.length}expireMatches(e){this._data=this._data.filter((t=>!e(t)))}}class Xv{constructor(){this._segments=new Map}add(e,t,n){let i=this._segments.get(e);i||(i=new Jv((e=>1e3*e.start_time),(e=>e.id)),this._segments.set(e,i)),i.add(t,n)}clear(){this._segments.clear()}hasCoverage(e,t){return!!this._segments.get(e)?.hasCoverage(t)}get(e,t){return this._segments.get(e)?.get(t)??null}getSize(e){return this._segments.get(e)?.getSize()??null}getCameraIDs(){return[...this._segments.keys()]}expireMatches(e,t){this._segments.get(e)?.expireMatches(t)}}class ey extends Oo{}class ty extends Oo{}var ny,iy,ay;!function(e){e.Event="event-query",e.Recording="recording-query",e.RecordingSegments="recording-segments-query",e.MediaMetadata="media-metadata"}(ny||(ny={})),function(e){e.Event="event-results",e.Recording="recording-results",e.RecordingSegments="recording-segments-results",e.MediaMetadata="media-metadata-results"}(iy||(iy={})),function(e){e.Frigate="frigate",e.Generic="generic",e.MotionEye="motioneye",e.Reolink="reolink"}(ay||(ay={}));const ry=e=>e?.camera_entity??e?.webrtc_card?.entity??null;class sy{constructor(e){this._entityRegistryManager=e}async createEngine(e,t){let n;switch(e){case ay.Generic:const{GenericCameraManagerEngine:e}=await import("./engine-generic-005afbb1.js").then((function(e){return e.e}));n=new e(t.stateWatcher,t.eventCallback);break;case ay.Frigate:const{FrigateCameraManagerEngine:i}=await import("./engine-frigate-b70b5b8e.js");n=new i(this._entityRegistryManager,t.stateWatcher,new Xv,new Kv,t.eventCallback);break;case ay.MotionEye:const{MotionEyeCameraManagerEngine:a}=await import("./engine-motioneye-a6370ae9.js");n=new a(this._entityRegistryManager,t.stateWatcher,new Hv,t.resolvedMediaCache,new Kv,t.eventCallback);break;case ay.Reolink:const{ReolinkCameraManagerEngine:r}=await import("./engine-reolink-ca99bed0.js");n=new r(this._entityRegistryManager,t.stateWatcher,new Hv,t.resolvedMediaCache,new Kv,t.eventCallback)}return n}async getEngineForCamera(e,t){let n=null;if("frigate"===t.engine)n=ay.Frigate;else if("motioneye"===t.engine)n=ay.MotionEye;else if("generic"===t.engine)n=ay.Generic;else if("reolink"===t.engine)n=ay.Reolink;else{const i=ry(t);if(i){const a=await this._entityRegistryManager.getEntity(e,i);if(!a){if(e.states[i])return ay.Generic;throw new ey(Y_("error.no_camera_entity"),t)}switch(a?.platform){case"frigate":n=ay.Frigate;break;case"motioneye":n=ay.MotionEye;break;case"reolink":n=ay.Reolink;break;default:n=ay.Generic}}else t.frigate.camera_name?n=ay.Frigate:(t.webrtc_card?.url||t.go2rtc?.url&&t.go2rtc?.stream)&&(n=ay.Generic)}return n}}class oy{constructor(){this._cameras=new Map,this._enginesByType=new Map}addCamera(e){this._cameras.set(e.getID(),e),this._enginesByType.set(e.getEngine().getEngineType(),e.getEngine())}async setCameras(e){for(const t of e){const e=this._cameras.get(t.getID());e!==t&&(this.addCamera(t),await(e?.destroy()))}for(const t of this._cameras.values())e.includes(t)||(await t.destroy(),this._cameras.delete(t.getID()))}async reset(){await df(this._cameras.values(),(e=>e.destroy())),this._cameras.clear(),this._enginesByType.clear()}getCamera(e){return this._cameras.get(e)??null}getCameras(){return this._cameras}getCameraConfig(e){return this._cameras.get(e)?.getConfig()??null}hasCameraID(e){return this._cameras.has(e)}getCameraCount(){return this._cameras.size}getDefaultCameraID(){return this._cameras.keys().next().value??null}*getCameraConfigs(e){for(const[t,n]of this.getCameraConfigEntries(e))yield n}*getCameraConfigEntries(e){for(const t of e??this._cameras.keys()){const e=this.getCameraConfig(t);e&&(yield[t,e])}}getCameraIDs(){return new Set(this._cameras.keys())}getCameraIDsWithCapability(e){const t=new Set;for(const n of this._cameras.values())n.getCapabilities()?.matches(e)&&t.add(n.getID());return t}getCameraConfigForMedia(e){return this.getCameraConfig(e.getCameraID())}getEngineOfType(e){return this._enginesByType.get(e)??null}getEngineForCameraID(e){return this._cameras.get(e)?.getEngine()??null}getEnginesForCameraIDs(e){const t=new Map;for(const n of e){const e=this.getEngineForCameraID(n);e&&(t.has(e)||t.set(e,new Set),t.get(e)?.add(n))}return t.size?t:null}getEngineForMedia(e){return this.getEngineForCameraID(e.getCameraID())}getAllDependentCameras(e,t){const n=new Set,i=new Set,a=e=>{n.add(e);const r=this.getCamera(e),s=r?.getConfig();if(r&&s){t&&!r.getCapabilities()?.matches(t)||i.add(e);const o=new Set;s.dependencies.cameras.forEach((e=>o.add(e))),s.dependencies.all_cameras&&this.getCameraIDs().forEach((e=>o.add(e)));for(const e of o)n.has(e)||a(e)}};return a(e),i}}const cy=e=>{return Dv((n=e=>e.getID()??e,(t=e)&&t.length?Gm(t,Iv(n)):[]),(e=>e.getStartTime()??e.getID()),"asc");var t,n};class ly{static isEventQuery(e){return e.type===ny.Event}static isRecordingQuery(e){return e.type===ny.Recording}static isRecordingSegmentsQuery(e){return e.type===ny.RecordingSegments}static isMediaMetadataQuery(e){return e.type===ny.MediaMetadata}}class dy{static isEventQueryResult(e){return e.type===iy.Event}static isRecordingQueryResult(e){return e.type===iy.Recording}static isRecordingSegmentsQueryResult(e){return e.type===iy.RecordingSegments}static isMediaMetadataQueryResult(e){return e.type===iy.MediaMetadata}}class uy{constructor(e,t){this._requestLimit=new A_,this._api=e,this._engineFactory=t?.factory??new sy(this._api.getEntityRegistryManager()),this._store=t?.store??new oy}async initializeCamerasFromConfig(){const e=this._api.getConfigManager().getConfig(),t=this._api.getHASSManager().getHASS();if(!e||!t)return!1;this._requestLimit.concurrency=e.performance.features.max_simultaneous_engine_requests??1/0;const n=e.cameras.map((t=>{return n={},i=y_(e?.cameras_global),bm(n,i,t,((e,t)=>Array.isArray(t)?t:void 0));var n,i}));try{await this._initializeCameras(n)}catch(e){return this._api.getMessageManager().setErrorIfHigherPriority(e,Y_("error.camera_initialization")),!1}return!0}async destroy(){await this._store.reset()}async _getEnginesForCameras(e){const t=new Map,n=new Map,i=this._api.getHASSManager().getHASS();
/* istanbul ignore if: the if path cannot be reached -- @preserve */
if(!i)return t;const a=await(async e=>await df(e,(e=>this._engineFactory.getEngineForCamera(i,e))))(e);for(const[i,r]of e.entries()){const e=a[i],s=e?n.get(e)??await this._engineFactory.createEngine(e,{eventCallback:e=>this._api.getTriggersManager().handleCameraEvent(e),stateWatcher:this._api.getHASSManager().getStateWatcher(),resolvedMediaCache:this._api.getResolvedMediaCache()}):null;if(!s||!e)throw new ey(Y_("error.no_camera_engine"),y_(r));n.set(e,s),t.set(r,s)}return t}async _initializeCameras(e){const t=new Date,n=this._api.getHASSManager().getHASS();
/* istanbul ignore if: the if path cannot be reached -- @preserve */
if(!n)return;e.some((e=>(e=>e.triggers.motion||e.triggers.occupancy)(e)))&&await this._api.getEntityRegistryManager().fetchEntityList(n);const i=await this._getEnginesForCameras(e),a=await df(i.entries(),(async([e,t])=>await t.createCamera(n,e))),r=async()=>{a.forEach((e=>e.destroy()))},s=new Set;for(const e of a){const t=G_(e.getConfig());if(!t)throw await r(),new ey(Y_("error.no_camera_id"),e.getConfig());if(s.has(t))throw await r(),new ey(Y_("error.duplicate_camera_id"),e.getConfig());e.setID(t),s.add(t)}await this._store.setCameras(a),K_(this._api.getConfigManager().getCardWideConfig(),"Frigate Card CameraManager initialized (Cameras: ",this._store.getCameras(),`, Duration: ${((new Date).getTime()-t.getTime())/1e3}s,`,")")}isInitialized(){return this._store.getCameraCount()>0}getStore(){return this._store}generateDefaultEventQueries(e,t){return this._generateDefaultQueries(e,{type:ny.Event,...t})}generateDefaultRecordingQueries(e,t){return this._generateDefaultQueries(e,{type:ny.Recording,...t})}generateDefaultRecordingSegmentsQueries(e,t){return this._generateDefaultQueries(e,{type:ny.RecordingSegments,...t})}_generateDefaultQueries(e,t){const n=[],i=tf(e),a=this._store.getEnginesForCameraIDs(i);if(!a)return null;for(const[e,i]of a){let a=null;
/* istanbul ignore else: the else path cannot be reached -- @preserve */ly.isEventQuery(t)?a=e.generateDefaultEventQuery(this._store,i,t):ly.isRecordingQuery(t)?a=e.generateDefaultRecordingQuery(this._store,i,t):ly.isRecordingSegmentsQuery(t)&&(a=e.generateDefaultRecordingSegmentsQuery(this._store,i,t));for(const e of a??[])n.push(e)}return n.length?n:null}async getMediaMetadata(){const e=new Set,t=new Set,n=new Set,i=new Set,a={type:ny.MediaMetadata,cameraIDs:this._store.getCameraIDs()},r=await this._handleQuery(a);for(const a of r.values())a.metadata.tags&&a.metadata.tags.forEach(e.add,e),a.metadata.what&&a.metadata.what.forEach(t.add,t),a.metadata.where&&a.metadata.where.forEach(n.add,n),a.metadata.days&&a.metadata.days.forEach(i.add,i);return t.size||n.size||i.size||e.size?{...e.size&&{tags:e},...t.size&&{what:t},...n.size&&{where:n},...i.size&&{days:i}}:null}async getEvents(e,t){return await this._handleQuery(e,t)}async getRecordings(e,t){return await this._handleQuery(e,t)}async getRecordingSegments(e,t){return await this._handleQuery(e,t)}async executeMediaQueries(e,t){return this._convertQueryResultsToMedia(await this._handleQuery(e,t))}async extendMediaQueries(e,t,n,i){if(!this._api.getHASSManager().getHASS())return null;const a=e=>{let n=null;for(const i of t){const t=i.getStartTime();t&&(!n||"earliest"===e&&t<n||"latest"===e&&t>n)&&(n=t)}return n},r=this._api.getConfigManager().getCardWideConfig()?.performance?.features.media_chunk_size??50,s=[],o=[];for(const t of e){const e={...t};
/* istanbul ignore else: the else path cannot be reached -- @preserve */if("later"===n){const t=a("latest");t&&(e.start=t,delete e.end)}else if("earlier"===n){const t=a("earliest");t&&(e.end=t,delete e.start)}e.limit=r,o.push({...t,limit:(t.limit??0)+r}),s.push(e)}const c=this._convertQueryResultsToMedia(await this._handleQuery(s,i));if(!c.length)return null;const l=cy(t.concat(c));return l.length===t.length?null:{queries:o,results:l}}async getMediaDownloadPath(e){const t=this._store.getCameraConfigForMedia(e),n=this._store.getEngineForMedia(e),i=this._api.getHASSManager().getHASS();return t&&n&&i?await n.getMediaDownloadPath(i,t,e):null}getMediaCapabilities(e){const t=this._store.getEngineForMedia(e);return t?t.getMediaCapabilities(e):null}async favoriteMedia(e,t){const n=this._store.getCameraConfigForMedia(e),i=this._store.getEngineForMedia(e),a=this._api.getHASSManager().getHASS();if(!n||!i||!a)return;const r=new Date;await this._requestLimit.add((()=>i.favoriteMedia(a,n,e,t))),K_(this._api.getConfigManager().getCardWideConfig(),"Frigate Card CameraManager favorite request (",`Duration: ${((new Date).getTime()-r.getTime())/1e3}s,`,"Media:",e.getID(),", Favorite:",t,")")}areMediaQueriesResultsFresh(e,t){const n=new Date;for(const i of e){const e=this._store.getEnginesForCameraIDs(i.cameraIDs);for(const[a,r]of e??[]){const e=a.getQueryResultMaxAge({...i,cameraIDs:r});if(null!==e&&Xd(t,{seconds:e})<n)return!1}}return!0}async getMediaSeekTime(e,t){const n=e.getStartTime(),i=e.getEndTime(),a=this._store.getEngineForMedia(e),r=this._api.getHASSManager().getHASS();return!r||!a||!n||!i||t<n||t>i?null:await this._requestLimit.add((()=>a.getMediaSeekTime(r,this._store,e,t)))??null}async _handleQuery(e,t){const n=ef(e),i=new Map,a=new Date,r=this._api.getHASSManager().getHASS();if(!r)return i;const s=async(e,n)=>{let a=null;
/* istanbul ignore else: the else path cannot be reached -- @preserve */ly.isEventQuery(n)?a=await e.getEvents(r,this._store,n,t):ly.isRecordingQuery(n)?a=await e.getRecordings(r,this._store,n,t):ly.isRecordingSegmentsQuery(n)?a=await e.getRecordingSegments(r,this._store,n,t):ly.isMediaMetadataQuery(n)&&(a=await e.getMediaMetadata(r,this._store,n,t)),a?.forEach(((e,t)=>i.set(t,e)))},o=async e=>{const t=this._store.getEnginesForCameraIDs(e.cameraIDs);t&&await Promise.all(Array.from(t.keys()).map((n=>this._requestLimit.add((()=>s(n,{...e,cameraIDs:t.get(n)}))))))};await Promise.all(n.map((e=>o(e))));const c=(l=Array.from(i.values()).map((e=>Number(e.cached??0))))&&l.length?function(e,t){for(var n,i=-1,a=e.length;++i<a;){var r=t(e[i]);void 0!==r&&(n=void 0===n?r:n+r)}return n}(l,cm):0;var l;return K_(this._api.getConfigManager().getCardWideConfig(),"Frigate Card CameraManager request [Input queries:",n.length,", Cached output queries:",c,", Total output queries:",i.size,", Duration:",((new Date).getTime()-a.getTime())/1e3+"s,",", Queries:",n,", Results:",i,", Options:",t??{},"]"),i}_convertQueryResultsToMedia(e){const t=[],n=this._api.getHASSManager().getHASS();if(!n)return t;for(const[i,a]of e.entries()){const e=this._store.getEngineOfType(a.engine);if(e){let r=null;
/* istanbul ignore else: the else path cannot be reached -- @preserve */ly.isEventQuery(i)&&dy.isEventQueryResult(a)?r=e.generateMediaFromEvents(n,this._store,i,a):ly.isRecordingQuery(i)&&dy.isRecordingQueryResult(a)&&(r=e.generateMediaFromRecordings(n,this._store,i,a)),r&&t.push(...r)}}return cy(t)}getCameraEndpoints(e,t){const n=this._store.getCameraConfig(e),i=this._store.getEngineForCameraID(e);return n&&i?i.getCameraEndpoints(n,t):null}getCameraMetadata(e){const t=this._store.getCameraConfig(e),n=this._store.getEngineForCameraID(e),i=this._api.getHASSManager().getHASS();return t&&n&&i?n.getCameraMetadata(i,t):null}getCameraCapabilities(e){return this._store.getCamera(e)?.getCapabilities()??null}getAggregateCameraCapabilities(e){const t=[...e??this._store.getCameraIDs()].map((e=>this._store.getCamera(e))).filter(mf);return new nv({live:t.some((e=>e.getCapabilities()?.has("live"))),clips:t.some((e=>e.getCapabilities()?.has("clips"))),recordings:t.some((e=>e.getCapabilities()?.has("recordings"))),snapshots:t.some((e=>e.getCapabilities()?.has("snapshots"))),"favorite-events":t.some((e=>e.getCapabilities()?.has("favorite-events"))),"favorite-recordings":t.some((e=>e.getCapabilities()?.has("favorite-recordings"))),seek:t.some((e=>e.getCapabilities()?.has("seek"))),menu:t.some((e=>e.getCapabilities()?.has("menu")))})}async executePTZAction(e,t,n){const i=this._store.getCameraConfig(e);if(!i)return;const a=J_(i,t,n);if(a)return await this._api.getActionsManager().executeActions(a);const r=this._api.getHASSManager().getHASS(),s=this._store.getEngineForCameraID(e);return s&&r?await this._requestLimit.add((()=>s.executePTZAction(r,i,t,n))):void 0}}class hy{constructor(e){this._cache=new Map,this._keyCallback=e}has(e){return this._cache.has(e)}getMatches(e){return[...this._cache.values()].filter(e)}get(e){return this._cache.get(e)??null}add(e){const t=e=>this._cache.set(this._keyCallback(e),e);Array.isArray(e)?e.forEach(t):t(e)}}const gy=bi.object({id:bi.string(),model:bi.string().nullable(),config_entries:bi.string().array(),manufacturer:bi.string().nullable()}).array();class py{constructor(e){this._fetchedDeviceList=!1,this._cache=e}async getDevice(e,t){return this._cache.has(t)?this._cache.get(t):(await this._fetchDeviceList(e),this._cache.get(t)??null)}async getMatchingDevices(e,t){return await this._fetchDeviceList(e),this._cache.getMatches(t)}async _fetchDeviceList(e){if(this._fetchedDeviceList)return;let t=null;try{t=await Rv(e,gy,{type:"config/device_registry/list"})}catch(e){return void af(e)}this._cache.add(t),this._fetchedDeviceList=!0}}const my=bi.object({config_entry_id:bi.string().nullable(),device_id:bi.string().nullable(),disabled_by:bi.string().nullable(),entity_id:bi.string(),hidden_by:bi.string().nullable(),platform:bi.string(),translation_key:bi.string().nullable(),unique_id:bi.string().or(bi.number()).optional()}),fy=my.array();class _y{constructor(e){this._fetchedEntityList=!1,this._cache=e}async getEntity(e,t){const n=this._cache.get(t);if(n)return n;let i=null;try{i=await Rv(e,my,{type:"config/entity_registry/get",entity_id:t})}catch(e){return af(e),null}return this._cache.add(i),i}async getMatchingEntities(e,t){return await this.fetchEntityList(e),this._cache.getMatches(t)}async getEntities(e,t){const n=new Map;return await Promise.all(t.map((async t=>{const i=await this.getEntity(e,t);i&&n.set(t,i)}))),n}async fetchEntityList(e){if(this._fetchedEntityList)return;let t=null;try{t=await Rv(e,fy,{type:"config/entity_registry/list"})}catch(e){return void af(e)}this._cache.add(t),this._fetchedEntityList=!0}}class vy extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,n)&&(yield e)}}for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const i="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,a]=n;!1===this._deleteIfExpired(i,a)&&(yield[i,a.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,a]=n;if(!this.cache.has(i)){!1===this._deleteIfExpired(i,a)&&(yield[i,a.value])}}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class yy{constructor(){this._cache=new vy({maxSize:1e3})}has(e){return this._cache.has(e)}get(e){return this._cache.get(e)}set(e,t){this._cache.set(e,t)}}const by=async(e,t,n)=>{const i=n?n.get(t):void 0;if(i)return i;const a={type:"media_source/resolve_media",media_content_id:t};let r=null;try{r=await Rv(e,Ro,a)}catch(e){af(e)}return n&&r&&n.set(t,r),r};class wy{constructor(e,t,n){this._context=e,this._action=t,this._config=n}async execute(e){}async stop(){}}class xy extends wy{}class My extends xy{async execute(e){const t=this._action.camera??(this._action.triggered?e.getTriggersManager().getMostRecentlyTriggeredCameraID():null),n=e.getViewManager().getView(),i=e.getConfigManager().getConfig();if(t&&n){const a=i?.view.camera_select??"current",r="current"===a?n.view:a;await e.getViewManager().setViewByParametersWithNewQuery({params:{view:r,camera:t},failSafe:!0})}}}class Cy extends xy{async execute(e){e.getCameraURLManager().openURL()}}class Sy extends xy{async execute(e){await e.getViewManager().setViewDefaultWithNewQuery()}}class ky extends xy{async execute(e){await e.getViewManager().setViewByParametersWithNewQuery({params:{displayMode:this._action.display_mode}})}}class $y extends xy{async execute(e){await e.getDownloadManager().downloadViewerMedia()}}class Ey extends xy{async execute(e){e.getExpandManager().toggleExpanded()}}class Ay extends xy{async execute(e){e.getFullscreenManager().toggleFullscreen()}}class Iy extends wy{async execute(e){const t=e.getHASSManager().getHASS();t&&it(e.getCardElementManager().getElement(),t,this._config??{},this._action)}}class Ty extends xy{async execute(e){console[this._action.level](this._action.message)}}const zy=(e,t)=>e.context?.live?.overrides?.get(t??e.camera)??t??e.camera,jy=e=>zy(e)!==e.camera,Oy=(e,t)=>{const n=e.context?.live?.overrides??new Map;n.set(e.camera,t),e.mergeInContext({live:{overrides:n}})};class Dy extends xy{async execute(e){const t=this._action.media_player,n=e.getMediaPlayerManager(),i=e.getViewManager().getView(),a=i?.queryResults?.getSelectedResult()??null;"stop"===this._action.media_player_action?await n.stop(t):i?.is("live")?await n.playLive(t,zy(i)):i?.isViewerView()&&a&&await n.playMedia(t,a)}}class Ry extends xy{async execute(e){e.getCardElementManager().toggleMenu()}}class Py extends xy{async execute(e){await e.getMicrophoneManager().connect()}}class Ly extends xy{async execute(e){e.getMicrophoneManager().disconnect()}}class Ny extends xy{async execute(e){e.getMicrophoneManager().mute()}}class Fy extends xy{async execute(e){await e.getMicrophoneManager().unmute()}}class Vy extends xy{async execute(e){await(e.getMediaLoadedInfoManager().get()?.player?.mute())}}class Hy extends xy{async execute(e){await(e.getMediaLoadedInfoManager().get()?.player?.pause())}}class By extends xy{async execute(e){await(e.getMediaLoadedInfoManager().get()?.player?.play())}}const Uy=(e,t)=>{if(e.isViewerView()){const n=e.queryResults?.getSelectedResult()?.getID()??null;return"ptz"!==t?.type&&n?{targetID:n,type:"digital"}:null}if(e.is("live")){const n=zy(e);let i="digital";return"digital"!==t?.type&&t?.cameraManager&&(qy(t.cameraManager,n)&&(i="ptz"),"ptz"!==i&&"ptz"===t?.type)?null:{targetID:n,type:i}}return e.is("image")?{targetID:jo,type:"digital"}:null},qy=(e,t)=>!!e.getStore().getCamera(t)?.getCapabilities()?.hasPTZCapability();var Wy=ym((function(e,t,n){om(e,t,n)}));const Zy=(e,t)=>{t?.[e]?.inProgressAction?.stop()},Qy=(e,t,n,i)=>{Wy(t,{[n]:{[e]:{inProgressAction:i}}})};class Yy extends xy{constructor(){super(...arguments),this._timer=new If}async stop(){this._timer.stop()}async execute(e){const t=e.getViewManager().getView();if(!t)return;const n=this._action.camera??Uy(t,{type:"ptz",cameraManager:e.getCameraManager()})?.targetID??null,i=n?e.getCameraManager().getCameraCapabilities(n)?.getPTZCapabilities():null,a=n?e.getCameraManager().getStore().getCameraConfig(n)?.ptz:null;if(!n||!i||!a)return;if(!this._action.ptz_action)return void(i.presets&&i.presets.length>=1&&await e.getCameraManager().executePTZAction(n,"preset",{phase:this._action.ptz_phase,preset:i.presets[0]}));const r=(e=>{switch(e){case"left":case"right":case"up":case"down":return e;case"zoom_in":return"zoomIn";case"zoom_out":return"zoomOut"}return null})(this._action.ptz_action);if(r&&i[r]?.includes(this._action.ptz_phase?"continuous":"relative")||"preset"===this._action.ptz_action)return await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{phase:this._action.ptz_phase,preset:this._action.ptz_preset});if("start"===this._action.ptz_phase){Zy(n,this._context.ptz),Qy(n,this._context,"ptz",this);const t=async()=>{this._action.ptz_action&&await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{preset:this._action.ptz_preset}),this._timer.start(a.r2c_delay_between_calls_seconds,t)};await t()}else"stop"===this._action.ptz_phase?Zy(n,this._context.ptz):(await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{preset:this._action.ptz_preset,phase:"start"}),this._timer.start(a.c2r_delay_between_calls_seconds,(async()=>{this._action.ptz_action&&await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{preset:this._action.ptz_preset,phase:"stop"})})))}}class Gy extends xy{async execute(e){e.getViewManager().setViewWithMergedContext({ptzControls:{enabled:this._action.enabled}})}}function Ky(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=Tm(n))==n?n:0),void 0!==t&&(t=(t=Tm(t))==t?t:0),function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}(Tm(e),t,n)}const Jy=50,Xy=50,eb=1,tb=4,nb=e=>void 0===e?.pan?.x&&void 0===e?.pan?.y&&void 0===e?.zoom;class ib{constructor(e){this._context=e}modify(e){e.mergeInContext(this._context)}}const ab=(e,t)=>({zoom:{[e]:{observed:t?.observed??void 0,requested:t?.requested??null}}}),rb=(e,t,n)=>{t&&n&&t.setViewByParameters({modifiers:[new ib(ab(n,{observed:e.detail}))]})};class sb extends xy{constructor(){super(...arguments),this._timer=new If}async _stepChange(e,t){e.getViewManager().setViewWithMergedContext(ab(t,{requested:this._convertActionToZoomSettings(e.getViewManager().getView()?.context?.zoom?.[t]?.observed)}))}async stop(){this._timer.stop()}async execute(e){const t=e.getViewManager().getView();if(!t)return;const n=this._action.target_id??Uy(t,{type:"digital",cameraManager:e.getCameraManager()})?.targetID;return n?this._action.absolute||!this._action.ptz_phase?await this._stepChange(e,n):
/* istanbul ignore else: the else path cannot be reached -- @preserve */
void("start"===this._action.ptz_phase?(Zy(n,this._context.ptzDigital),Qy(n,this._context,"ptzDigital",this),await this._stepChange(e,n),this._timer.startRepeated(.1,(()=>this._stepChange(e,n)))):"stop"===this._action.ptz_phase&&(Zy(n,this._context.ptzDigital),delete this._context.ptzDigital?.[n])):void 0}_convertActionToZoomSettings(e){if(!this._action.absolute&&!this._action.ptz_action)return{};if(this._action.absolute)return this._action.absolute;const t=e?.zoom??1,n=e?.pan?.x??50,i=e?.pan?.y??50,a="zoom_in"===this._action.ptz_action?.1:"zoom_out"===this._action.ptz_action?-.1:0,r="left"===this._action.ptz_action?-5:"right"===this._action.ptz_action?5:0,s="up"===this._action.ptz_action?-5:"down"===this._action.ptz_action?5:0;return{zoom:Ky(t+a,1,10),pan:{x:Ky(n+r,0,100),y:Ky(i+s,0,100)}}}}class ob extends xy{async execute(e){const t=e.getViewManager().getView();let n=null,i=null;if(this._action.target_id)n=this._action.target_id,i=qy(e.getCameraManager(),n)?"ptz":"digital";else if(t){const a=Uy(t,{cameraManager:e.getCameraManager()});n=a?.targetID??null,i=a?.type??null}n&&null!==i&&("ptz"===i?this._toPTZAction(n):this._toPTZDigitalAction(n)).execute(e)}_toPTZAction(e){return new Yy(this._context,(t={cardID:this._action.card_id,cameraID:e,ptzAction:this._action.ptz_action,ptzPhase:this._action.ptz_phase,ptzPreset:this._action.ptz_preset},{action:"fire-dom-event",frigate_card_action:"ptz",...t?.cardID&&{card_id:t.cardID},...t?.ptzAction&&{ptz_action:t.ptzAction},...t?.ptzPhase&&{ptz_phase:t.ptzPhase},...t?.ptzPreset&&{ptz_preset:t.ptzPreset},...t?.cameraID&&{camera:t.cameraID}}),this._config);var t}_toPTZDigitalAction(e){return new sb(this._context,(t={cardID:this._action.card_id,ptzPhase:this._action.ptz_phase,ptzAction:this._action.ptz_action,targetID:e},{action:"fire-dom-event",frigate_card_action:"ptz_digital",...t?.cardID&&{card_id:t.cardID},...t?.ptzAction&&{ptz_action:t.ptzAction},...t?.ptzPhase&&{ptz_phase:t.ptzPhase},...t?.absolute&&{absolute:t.absolute},...t?.targetID&&{target_id:t.targetID}}),this._config);var t}}class cb extends xy{async execute(e){await e.getDownloadManager().downloadScreenshot()}}class lb extends xy{async execute(e){var t;await hf((t=this._action.duration,3600*(t.h??0)+60*(t.m??0)+(t.s??0)+(t.ms??0)/1e3))}}class db extends xy{async execute(e){switch(this._action.status_bar_action){case"reset":e.getStatusBarItemManager().removeAllDynamicStatusBarItems();break;case"add":this._action.items?.forEach((t=>e.getStatusBarItemManager().addDynamicStatusBarItem(t)));break;case"remove":this._action.items?.forEach((t=>e.getStatusBarItemManager().removeDynamicStatusBarItem(t)))}}}class ub{modify(e){(e=>{const t=e.context?.live?.overrides;t&&t.has(e.camera)&&e.context?.live?.overrides?.delete(e.camera)})(e)}}class hb extends xy{async execute(e){e.getViewManager().setViewByParameters({modifiers:[new ub]})}}class gb{constructor(e){this._api=e}modify(e){const t=[...this._api.getCameraManager().getStore().getAllDependentCameras(e.camera,"substream")];if(t.length<=1)return;const n=zy(e),i=t.indexOf(n),a=i<0?0:(i+1)%t.length;Oy(e,t[a])}}class pb extends xy{async execute(e){e.getViewManager().setViewByParameters({modifiers:[new gb(e)]})}}class mb{constructor(e){this._substreamID=e}modify(e){Oy(e,this._substreamID)}}class fb extends xy{async execute(e){e.getViewManager().setViewByParameters({modifiers:[new mb(this._action.camera)]})}}class _b extends xy{async execute(e){await(e.getMediaLoadedInfoManager().get()?.player?.unmute())}}class vb extends xy{async execute(e){await e.getViewManager().setViewByParametersWithNewQuery({params:{view:this._action.frigate_card_action}})}}class yb{createAction(e,t,n){const i=xf(t);if("fire-dom-event"!==t.action||!i)return new Iy(e,t,n?.config);if(i.card_id&&i.card_id!==n?.cardID)return null;switch(i.frigate_card_action){case"default":return new Sy(e,i,n?.config);case"clip":case"clips":case"image":case"live":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":case"diagnostics":return new vb(e,i,n?.config);case"sleep":return new lb(e,i,n?.config);case"download":return new $y(e,i,n?.config);case"camera_ui":return new Cy(e,i,n?.config);case"expand":return new Ey(e,i,n?.config);case"fullscreen":return new Ay(e,i,n?.config);case"menu_toggle":return new Ry(e,i,n?.config);case"camera_select":return new My(e,i,n?.config);case"live_substream_select":return new fb(e,i,n?.config);case"live_substream_off":return new hb(e,i,n?.config);case"live_substream_on":return new pb(e,i,n?.config);case"media_player":return new Dy(e,i,n?.config);case"microphone_connect":return new Py(e,i,n?.config);case"microphone_disconnect":return new Ly(e,i,n?.config);case"microphone_mute":return new Ny(e,i,n?.config);case"microphone_unmute":return new Fy(e,i,n?.config);case"mute":return new Vy(e,i,n?.config);case"unmute":return new _b(e,i,n?.config);case"play":return new By(e,i,n?.config);case"pause":return new Hy(e,i,n?.config);case"screenshot":return new cb(e,i,n?.config);case"display_mode_select":return new ky(e,i,n?.config);case"ptz":return new Yy(e,i,n?.config);case"ptz_digital":return new sb(e,i,n?.config);case"ptz_multi":return new ob(e,i,n?.config);case"ptz_controls":return new Gy(e,i,n?.config);case"log":return new Ty(e,i,n?.config);case"status_bar":return new db(e,i,n?.config)}
/* istanbul ignore next: this path cannot be reached -- @preserve */
/* istanbul ignore next: this path cannot be reached -- @preserve */
return console.warn(`Frigate card received unknown card action: ${i.frigate_card_action}`),null}}class bb{constructor(e,t,n){this._actions=[],this._factory=new yb,this._stopped=!1,this._context=e;for(const i of ef(t)){const t=this._factory.createAction(e,i,n);t&&this._actions.push(t)}}async execute(e){for(const t of this._actions){if(this._stopped)break;await t.execute(e)}}async stop(){this._stopped=!0}}const wb=bi.object({action:bi.enum(["tap","double_tap","hold","start_tap","end_tap"])}),xb=bi.object({detail:wb});class Mb{constructor(e){this._actionsInFlight=[],this._actionContext={},this.handleInteractionEvent=e=>{const t=xb.safeParse(e);if(!t.success)return;const n=t.data.detail.action,i=this.getMergedActions(),a=$f(n,i);i&&n&&a&&this.executeActions(a,i)},this.handleCustomActionEvent=e=>{"detail"in e&&this.executeActions(e.detail)},this.handleActionExecutionRequestEvent=async e=>{await this.executeActions(e.detail.action,e.detail.config)},this._api=e}getMergedActions(){const e=this._api.getViewManager().getView();if(this._api.getMessageManager().hasMessage())return{};const t=this._api.getConfigManager().getConfig();let n;if(e?.is("live"))n=t?.live.actions;else if(e?.isGalleryView())n=t?.media_gallery?.actions;else if(e?.isViewerView())n=t?.media_viewer.actions;else{if(!e?.is("image"))return{};n=t?.image?.actions}return{...t?.view.actions,...n}}uninitialize(){this._actionsInFlight.forEach((e=>e.stop()))}async executeActions(e,t){const n=new bb(this._actionContext,e,{config:t,cardID:this._api.getConfigManager().getConfig()?.card_id});this._actionsInFlight.push(n),await n.execute(this._api),this._actionsInFlight=this._actionsInFlight.filter((e=>e!==n))}}class Cb{constructor(e){this._automations=[],this._priorEvaluations=new Map,this._nestedAutomationExecutions=0,this._api=e}deleteAutomations(e){this._automations=this._automations.filter((t=>t.tag!==e))}addAutomations(e){this._automations.push(...e)}execute(){if(!this._api.getHASSManager().hasHASS()||!this._api.getInitializationManager().isInitializedMandatory()||this._api.getMessageManager().hasErrorMessage())return;const e=[];for(const t of this._automations){const n=this._api.getConditionsManager().evaluateConditions(t.conditions),i=n?t.actions:t.actions_not,a=this._priorEvaluations.get(t);this._priorEvaluations.set(t,n),n!==a&&i&&e.push(...i)}if(!e.length)return;(async e=>{++this._nestedAutomationExecutions,this._nestedAutomationExecutions>10?this._api.getMessageManager().setMessageIfHigherPriority({type:"error",message:Y_("error.too_many_automations")}):(await this._api.getActionsManager().executeActions(e),--this._nestedAutomationExecutions)})(e)}}class Sb{constructor(e){this._api=e}openURL(){const e=this.getCameraURL();e&&window.open(e)}hasCameraURL(){return!!this.getCameraURL()}getCameraURL(){const e=this._api.getViewManager().getView(),t=e?.queryResults?.getSelectedResult()??null,n=e?.camera?this._api.getCameraManager().getCameraEndpoints(e.camera,{view:e.view,...t&&{media:t}})??null:null;return n?.ui?.endpoint??null}}const kb=()=>!!navigator.userAgent.match(/CrKey\//);async function $b(e,t,n){const i={type:"auth/sign_path",path:t,expires:n},a=await Rv(e,Po,i);return a?e.hassUrl(a.path):null}function Eb(e,t,n,i){if(!e||!n||!n.length)return[];const a=[];for(const r of n){const n=t?.states[r],s=e.states[r];if((i?.stateOnly&&n?.state!==s?.state||!i?.stateOnly&&n!==s)&&(a.push({entityID:r,oldState:n,newState:s}),i?.firstOnly))break}return a}function Ab(e,t,n,i){return!!Eb(e,t,n,{...i,firstOnly:!0}).length}function Ib(e,t){return t?e?.states[t]?.attributes?.friendly_name??null:null}const Tb=async()=>{if(["ha-button-menu","ha-button","ha-camera-stream","ha-card","ha-circular-progress","ha-combo-box","ha-hls-player","ha-icon-button","ha-icon","ha-menu-button","ha-selector","ha-state-icon","ha-web-rtc-player","mwc-button","mwc-list-item","state-badge"].every((e=>customElements.get(e))))return!0;const e=await window.loadCardHelpers();await e.createCardElement({type:"picture-glance",entities:[],camera_image:"dummy-to-load-editor-components"}),await customElements.whenDefined("hui-picture-glance-card");const t=customElements.get("hui-picture-glance-card");if(!t)return!1;const n=new t;return await n.constructor.getConfigElement(),!0},zb=e=>!!e&&["on","open"].includes(e),jb=(e,t)=>{if(!e)return[];const n=Object.keys(e.states).filter((e=>!t||e.substr(0,e.indexOf("."))===t));return n.sort(),n};function Ob(e){return!!e?.startsWith("/")}function Db(e,t){return Ob(t)?e.hassUrl(t):t??null}const Rb=(e,t)=>!!((e.attributes.supported_features??0)&t);class Pb{constructor(){this._initialized=new Set}async initializeMultipleIfNecessary(e){return(await df(Object.entries(e),(async([e,t])=>await this.initializeIfNecessary(e,t)))).every(Boolean)}async initializeIfNecessary(e,t){return!!this._initialized.has(e)||(t?!!await t()&&(this._initialized.add(e),!0):(this._initialized.add(e),!0))}uninitialize(e){this._initialized.delete(e)}isInitialized(e){return this._initialized.has(e)}isInitializedMultiple(e){return e.every((e=>this.isInitialized(e)))}}var Lb;!function(e){e.LANGUAGES="languages",e.SIDE_LOAD_ELEMENTS="side-load-elements",e.CAMERAS="cameras",e.MICROPHONE_CONNECT="microphone-connect",e.VIEW="view"}(Lb||(Lb={}));class Nb{constructor(e,t){this._initializationQueue=new A_({concurrency:1}),this._everInitialized=!1,this._api=e,this._initializer=t??new Pb}wasEverInitialized(){return this._everInitialized}isInitializedMandatory(){return!!this._api.getConfigManager().getConfig()&&this._initializer.isInitializedMultiple([Lb.LANGUAGES,Lb.SIDE_LOAD_ELEMENTS,Lb.CAMERAS,...this._api.getMicrophoneManager().shouldConnectOnInitialization()?[Lb.MICROPHONE_CONNECT]:[],Lb.VIEW])}async initializeMandatory(){await this._initializationQueue.add((()=>this._initializeMandatory()))}async _initializeMandatory(){const e=this._api.getHASSManager().getHASS();if(!e||this.isInitializedMandatory())return;if(!await this._initializer.initializeMultipleIfNecessary({[Lb.LANGUAGES]:async()=>await(async e=>{const t=Q_(e);return"ca"===t?W_[t]=await import("./lang-ca-9c5fcf92.js"):"it"===t?W_[t]=await import("./lang-it-aef4aac7.js"):"pt"===t?W_[t]=await import("./lang-pt-PT-7bb0eb5c.js"):"pt_BR"===t?W_[t]=await import("./lang-pt-BR-6e910479.js"):"fr"===t&&(W_[t]=await import("./lang-fr-a67967ae.js")),t&&(Z_=t),!0})(e),[Lb.SIDE_LOAD_ELEMENTS]:async()=>await Tb()}))return;this._api.getConfigManager().getConfig()&&await this._initializer.initializeMultipleIfNecessary({[Lb.CAMERAS]:async()=>(this._api.createCameraManager(),await this._api.getCameraManager().initializeCamerasFromConfig()),...this._api.getMicrophoneManager().shouldConnectOnInitialization()&&{[Lb.MICROPHONE_CONNECT]:async()=>(this._api.createMicrophoneManager(),await this._api.getMicrophoneManager().connect())}})&&!this._api.getMessageManager().hasMessage()&&await this._initializer.initializeIfNecessary(Lb.VIEW,this._api.getViewManager().initialize)&&(this._everInitialized=!0,this._api.getCardElementManager().update())}uninitialize(e){this._initializer.uninitialize(e)}}class Fb{constructor(e,t,n,i){this.update=()=>{this._element.requestUpdate()},this._api=e,this._element=t,this._scrollCallback=n,this._menuToggleCallback=i}getElement(){return this._element}scrollReset(){this._scrollCallback()}toggleMenu(){this._menuToggleCallback()}hasUpdated(){return this._element.hasUpdated}elementConnected(){this._api.getInteractionManager().initialize(),this._api.getFullscreenManager().initialize(),this._api.getExpandManager().initialize(),this._api.getMediaLoadedInfoManager().initialize(),this._api.getMicrophoneManager().initialize(),this._api.getKeyboardStateManager().initialize(),this._api.getDefaultManager().initialize(),this._api.getMediaPlayerManager().initialize(),this._api.getHASSManager().getStateWatcher()?.subscribe(this.update,[...this._api.getConfigManager().getConfig()?.view.render_entities??[],...this._api.getMediaPlayerManager().getMediaPlayers()??[]]),pf(this._element,(e=>{const t=e.getRootNode();return!!(t&&t instanceof ShadowRoot&&"HUI-PANEL-VIEW"===t.host.tagName)})(this._element),"panel"),pf(this._element,kb(),"casted"),this._api.getFullscreenManager().connect(),this._element.addEventListener("mousemove",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("wheel",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("ll-custom",this._api.getActionsManager().handleCustomActionEvent),this._element.addEventListener("action",this._api.getActionsManager().handleInteractionEvent),this._element.addEventListener("action",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("frigate-card:action:execution-request",this._api.getActionsManager().handleActionExecutionRequestEvent),window.addEventListener("location-changed",this._api.getQueryStringManager().requestExecution),window.addEventListener("popstate",this._api.getQueryStringManager().requestExecution),this._api.getConditionsManager()?.setState({user_agent:navigator.userAgent}),this._api.getQueryStringManager().requestExecution(),this._element.requestUpdate()}elementDisconnected(){pf(this._element,!1,"panel"),pf(this._element,!1,"tabindex"),pf(this._element,!1,"casted"),this._api.getMediaLoadedInfoManager().clear(),this._api.getFullscreenManager().disconnect(),this._api.getKeyboardStateManager().uninitialize(),this._api.getActionsManager().uninitialize(),this._api.getDefaultManager().uninitialize(),this._api.getHASSManager().getStateWatcher()?.unsubscribe(this.update),this._api.getInitializationManager().uninitialize(Lb.CAMERAS),this._api.getCameraManager().destroy(),this._element.removeEventListener("mousemove",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("wheel",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("ll-custom",this._api.getActionsManager().handleCustomActionEvent),this._element.removeEventListener("action",this._api.getActionsManager().handleInteractionEvent),this._element.removeEventListener("action",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("frigate-card:action:execution-request",this._api.getActionsManager().handleActionExecutionRequestEvent),window.removeEventListener("location-changed",this._api.getQueryStringManager().requestExecution),window.removeEventListener("popstate",this._api.getQueryStringManager().requestExecution)}}function Vb(e,t,n){return null==e?e:function(e,t,n,i){if(!bh(e))return e;for(var a=-1,r=(t=mv(t,e)).length,s=r-1,o=e;null!=o&&++a<r;){var c=_v(t[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var d=o[c];void 0===(l=i?i(d,c,o):void 0)&&(l=bh(d)?d:Rg(t[a+1])?[]:{})}tm(o,c,l),o=o[c]}return e}(e,t,n)}function Hb(e,t){return null==(e=function(e,t){return t.length<2?e:vv(e,iv(t,0,-1))}(e,t=mv(t,e)))||delete e[_v((n=t,i=null==n?0:n.length,i?n[i-1]:void 0))];var n,i}const Bb=(e,t,n)=>{Vb(e,t,n)},Ub=(e,t,n)=>Cv(e,t,n),qb=(e,t)=>{!function(e,t){null==e||Hb(e,t)}(e,t)},Wb=e=>y_(e),Zb=(e,t)=>e.replace("#",`[${t.toString()}]`),Qb=function(e){let t=!1;for(let n=0;n<ow.length;n++)t=ow[n](e)||t;return t},Yb=function(e){return Qb(Wb(e))},Gb=function(e,t,n){return function(i){return((e,t,n,i)=>{const a=Ub(e,t);if(void 0===a)return!1;const r=i?.transform?i.transform(a):a;return!(t===n&&Bv(a,r)||(null===r?i?.keepOriginal||(qb(e,t),0):void 0===r||(i?.keepOriginal||qb(e,t),Bb(e,n,r),0)))})(i,e,t,n)}},Kb=function(e,t,n){return function(i){let a=Gb(e,t,n)(i);return a=ew(xo,Gb(e,t,n),(e=>e.overrides))(i)||a,a}},Jb=function(e,t){return Kb(e,e,{transform:t})},Xb=function(e){return Kb(e,e,{transform:e=>null})},ew=function(e,t,n){return function(i){let a=!1;const r=Ub(i,e);return Array.isArray(r)&&r.forEach((e=>{const i=n?n(e):e;i&&"object"==typeof i&&(a=t(i)||a)})),a}},tw=(e,t)=>{const n=i=>{let a=!1;if(i&&"object"==typeof i){const r=t?t(i):i;r&&(a=e(r)||a),Array.isArray(i)?i.forEach((e=>{a=n(e)||a})):Object.keys(i).forEach((e=>{a=n(i[e])||a}))}return a};return n},nw=e=>!("object"!=typeof e||!e||void 0===e.mediaLoaded)&&(e.media_loaded=e.mediaLoaded,delete e.mediaLoaded,!0),iw=e=>{if("object"!=typeof e||!e||"object"!=typeof e.conditions||!e.conditions)return!1;const t=e.conditions,n=[];if(void 0!==t.view&&n.push({condition:"view",views:t.view}),void 0!==t.fullscreen&&n.push({condition:"fullscreen",fullscreen:t.fullscreen}),void 0!==t.expand&&n.push({condition:"expand",expand:t.expand}),void 0!==t.camera&&n.push({condition:"camera",cameras:t.camera}),void 0!==t.media_loaded&&n.push({condition:"media_loaded",media_loaded:t.media_loaded}),void 0!==t.state&&Array.isArray(t.state))for(const e of t.state)"object"!=typeof e||!e||void 0===e.state&&void 0===e.state_not&&void 0===e.entity||n.push({condition:"state",...e.state&&{state:e.state},...e.state_not&&{state_not:e.state_not},...e.entity&&{entity:e.entity}});return void 0!==t.media_query&&n.push({condition:"screen",media_query:t.media_query}),!!n.length&&(e.conditions=n,!0)},aw=e=>!("object"!=typeof e||!e||"call-service"!==e.action||"string"!=typeof e.service)&&(e.action="perform-action",e.perform_action=e.service,delete e.service,!0),rw=e=>!("object"!=typeof e||!e||"call-service"!==e.action||void 0===e.service||void 0===e.service_data||void 0!==e.data)&&(e.data=e.service_data,delete e.service_data,!0),sw=e=>!("object"!=typeof e||!e||"custom:frigate-card-action"!==e.action||"frigate_ui"!==e.frigate_card_action)&&(e.frigate_card_action="camera_ui",!0),ow=[ew(xo,nw,(e=>e.conditions)),e=>tw(nw,(e=>e.conditions))("object"==typeof e&&e?e[za]:{}),Kb("event_gallery",cr),Kb("menu.buttons.frigate_ui",ro),e=>tw(sw)("object"==typeof e&&e?e:{}),ew(Mi,Jb("live_provider",(e=>"frigate-jsmpeg"===e?"jsmpeg":e))),Kb("live.jsmpeg",ka),Kb("live.image",Ca),Kb("live.webrtc_card",$a),ew(Mi,Kb("frigate.zone","frigate.zones",{transform:e=>ef(e)})),ew(Mi,Kb("frigate.label","frigate.labels",{transform:e=>ef(e)})),e=>tw(rw)("object"==typeof e&&e?e:{}),function(e){if("object"!=typeof e||!e||!(za in e)||!Array.isArray(e[za]))return!1;let t=!1;const n=n=>{if(!t){if(!Cv(e,"live.controls.ptz")){const{type:t,...i}=n;Vb(e,"live.controls.ptz",i)}t=!0}},i=e=>{const t=[];for(const a of e)if("custom:frigate-card-ptz"===a.type)n(a);else if("conditional"!==a.type&&"custom:frigate-card-conditional"!==a.type||!Array.isArray(a.elements))t.push(a);else{const e=i(a.elements);e.length&&(a.elements=e,t.push(a))}return t},a=i(e[za]);return t&&(a.length?e[za]=a:delete e[za]),t},Kb("view.timeout_seconds",Pa),Jb("live.lazy_unload",(e=>"all"===e?["unselected","hidden"]:"never"===e?null:ef(e))),Jb("live.auto_play",(e=>"all"===e?null:"never"===e?[]:ef(e))),Jb("live.auto_pause",(e=>"all"===e?["unselected","hidden"]:"never"===e?null:ef(e))),Jb("live.auto_mute",(e=>"all"===e?null:"never"===e?[]:ef(e))),Jb("live.auto_unmute",(e=>"all"===e?["selected","visible","microphone"]:"never"===e?null:ef(e))),Jb("media_viewer.auto_play",(e=>"all"===e?null:"never"===e?[]:ef(e))),Jb("media_viewer.auto_pause",(e=>"all"===e?null:"never"===e?[]:ef(e))),Jb("media_viewer.auto_mute",(e=>"all"===e?null:"never"===e?[]:ef(e))),Jb("media_viewer.auto_unmute",(e=>"all"===e?["selected","visible"]:"never"===e?null:ef(e))),Kb("live.controls.thumbnails.media",ss),Kb("timeline.media",Bs),Kb("live.controls.timeline.media",ps),Kb("media_viewer.controls.timeline.media",Lr),Kb("view.scan",er),Kb("view.triggers.enabled",rr,{transform:e=>!0===e?"live":null,keepOriginal:!0}),Kb("view.triggers.enabled",nr,{transform:e=>!0!==e&&null}),Kb("view.triggers.untrigger_reset",sr,{transform:e=>e?"default":null}),Kb("live.layout",Ia),Xb("media_viewer.layout"),Xb("image.layout"),ew(xo,iw),e=>tw(iw)("object"==typeof e&&e?e[za]:{}),e=>tw(iw)("object"==typeof e&&e?e.automations:{}),ew(Mi,Kb("hide","capabilities",{transform:e=>!0===e?{disable_except:["substream"]}:null})),Kb("performance.profile",To,{transform:e=>"low"===e?["low-performance"]:null}),ew(xo,Gb("overrides","merge")),Kb("live.controls.ptz",Ta,{transform:e=>{if("object"!=typeof e||!e)return;const t=["data_left","data_right","data_up","data_down","data_zoom_in","data_zoom_out","service"],n=["actions_left","actions_right","actions_up","actions_down","actions_zoom_in","actions_zoom_out"],i=[...t,...n,"data_home","actions_home"];if(!Object.keys(e).some((e=>i.includes(e))))return;const a={};t.filter((t=>t in e)).reduce(((t,n)=>(t[n]=e[n],t)),a),n.filter((t=>t in e)).reduce(((t,n)=>("object"==typeof e[n]&&"tap_action"in e[n]&&(t[n]=e[n].tap_action),t)),a);const r=()=>{a.presets="presets"in e&&"object"==typeof e.presets&&e.presets?e.presets:{}};return"actions_home"in e&&"object"==typeof e.actions_home&&e.actions_home&&"tap_action"in e.actions_home?(r(),a.presets.home=e.actions_home.tap_action):"data_home"in e&&"object"==typeof e.data_home&&e.data_home&&"string"==typeof e.service&&(r(),a.presets.service=e.service,a.presets.data_home=e.data_home),a},keepOriginal:!0}),Jb("live.controls.ptz",(e=>{if("object"!=typeof e||!e)return e;const t=["mode","position","orientation","hide_pan_tilt","hide_zoom","hide_home","style"],n=Object.keys(e);return n.some((e=>!t.includes(e)))?n.filter((e=>t.includes(e))).reduce(((t,n)=>(t[n]=e[n],t)),{}):void 0})),Kb("view.update_cycle_camera",Za),Kb("view.update_force",Ya,{transform:e=>!0===e?"all":null}),Kb("view.update_seconds",Ga),Kb("view.update_entities",Ka),Gb("live.controls.title",ho,{transform:e=>"object"==typeof e&&e&&"string"==typeof e.mode?"none"===e.mode?{style:"none"}:e.mode.includes("bottom")?{position:"bottom"}:e.mode.includes("top")?{position:"top"}:null:null}),Xb("live.controls.title"),Xb("media_viewer.controls.title"),e=>tw(aw)("object"==typeof e&&e?e:{}),Kb("dimensions.max_height",wo),Xb("dimensions.min_height"),Kb("view.dark_mode",Ra,{transform:e=>"on"===e})],cw=e=>!!e.match(/Home ?Assistant/);class lw extends Oo{}class dw extends Event{constructor(e,t){super("frigate-card:conditions:evaluate",t),this.conditions=e}}function uw(e,t,n){let i=Wb(t),a=!1;if(n?.configOverrides)for(const t of n.configOverrides)e.evaluateConditions(t.conditions,n?.stateOverrides)&&(t.delete?.forEach((e=>{qb(i,e)})),Object.keys(t.set??{}).forEach((e=>{Bb(i,e,t.set?.[e])})),Object.keys(t.merge??{}).forEach((e=>{Bb(i,e,Wy({},Ub(i,e),t.merge?.[e]))})),a=!0);if(!a)return t;if(n?.configOverrides?.some((e=>e.delete?.length))&&(i=bf(i)),n?.schema){const e=n.schema.safeParse(i);if(!e.success)throw new lw(Y_("error.invalid_configuration_override"),[e.error.errors,i]);return e.data}return i}class hw{constructor(e,t){this._state={},this._epoch=this._createEpoch(),this._hasHAStateConditions=!1,this._mediaQueries=[],this._mediaQueryTrigger=()=>this._triggerChange(),this._api=e,this._listeners=[()=>this._api.getConfigManager().computeOverrideConfig(),()=>this._api.getAutomationsManager().execute(),...t?[t]:[]]}removeConditions(){this._mediaQueries.forEach((e=>e.removeEventListener("change",this._mediaQueryTrigger))),this._mediaQueries=[]}setConditionsFromConfig(){this.removeConditions();const e=(()=>{const e=this._api.getConfigManager().getConfig(),t=[];e?.overrides?.forEach((e=>t.push(...e.conditions))),e?.automations?.forEach((e=>t.push(...e.conditions)));const n=e=>{const i=Cl.safeParse(e);i.success?(t.push(...i.data.conditions),i.data.elements?.forEach(n)):e&&"object"==typeof e&&Object.keys(e).forEach((t=>n(e[t])))};return e?.elements?.forEach(n),t})();this._hasHAStateConditions=e.some((e=>!e.condition||["state","numeric_state","user"].includes(e.condition))),e.forEach((e=>{if("screen"===e.condition){const t=window.matchMedia(e.media_query);t.addEventListener("change",this._mediaQueryTrigger),this._mediaQueries.push(t)}}))}setState(e){Object.keys(e).every((t=>Bv(e[t],this._state[t])))||(this._state={...this._state,...e},this._triggerChange())}getState(){return this._state}hasHAStateConditions(){return this._hasHAStateConditions}getEpoch(){return this._epoch}evaluateConditions(e,t){return e.every((e=>this._evaluateCondition(e,t)))}_evaluateCondition(e,t){const n={...this._state,...t};switch(e.condition){case void 0:case"state":return!!n.state&&(!e.state&&!e.state_not||e.entity in n.state&&(!e.state||(Array.isArray(e.state)?e.state.includes(n.state[e.entity].state):e.state===n.state[e.entity].state))&&(!e.state_not||(Array.isArray(e.state_not)?!e.state_not.includes(n.state[e.entity].state):e.state_not!==n.state[e.entity].state)));case"view":return!!n?.view&&e.views.includes(n.view);case"fullscreen":return void 0!==n.fullscreen&&e.fullscreen===n.fullscreen;case"expand":return void 0!==n.expand&&e.expand===n.expand;case"camera":return!!n.camera&&e.cameras.includes(n.camera);case"numeric_state":return!!n.state&&e.entity in n.state&&void 0!==n.state[e.entity].state&&(void 0===e.above||Number(n.state[e.entity].state)>e.above)&&(void 0===e.below||Number(n.state[e.entity].state)<e.below);case"user":return!!n.user&&e.users.includes(n.user.id);case"media_loaded":return void 0!==n.media_loaded&&e.media_loaded===n.media_loaded;case"screen":return window.matchMedia(e.media_query).matches;case"display_mode":return!!n.displayMode&&e.display_mode===n.displayMode;case"triggered":return e.triggered.some((e=>n.triggered?.has(e)));case"interaction":return void 0!==n.interaction&&e.interaction===n.interaction;case"microphone":return!(void 0!==e.connected&&n.microphone?.connected!==e.connected||void 0!==e.muted&&n.microphone?.muted!==e.muted);case"key":return!(!n.keys||!(e.key in n.keys)||(e.state??"down")!==n.keys[e.key].state||void 0!==e.ctrl&&e.ctrl!==!!n.keys[e.key].ctrl||void 0!==e.alt&&e.alt!==!!n.keys[e.key].alt||void 0!==e.meta&&e.meta!==!!n.keys[e.key].meta||void 0!==e.shift&&e.shift!==!!n.keys[e.key].shift);case"user_agent":return!!n.user_agent&&(!e.user_agent||e.user_agent===n.user_agent)&&(void 0===e.companion||e.companion===cw(n.user_agent))&&(void 0===e.user_agent_re||new RegExp(e.user_agent_re).test(n.user_agent))}}_createEpoch(){return{manager:this}}_triggerChange(){this._epoch=this._createEpoch(),this._listeners.forEach((e=>e()))}}const gw={casting:{[Gr]:!1,[Er]:!1,[to]:"none",[`${oo}.enabled`]:!0,[`${co}.enabled`]:!0,[`${so}.enabled`]:!1,[`${lo}.enabled`]:!1,[Yr]:["selected","visible"],[bo]:"static",[yo]:"16:9",[Aa]:1,[As]:!0},"low-performance":{[os]:"none",[Tr]:"none",[Ws]:"none",[_s]:!1,[Vr]:!1,[Us]:!1,[Qr]:[],[fr]:[],[_r]:[],[vr]:[],[ks]:["unselected","hidden"],[Cs]:!1,[Cr]:!1,[Es]:"none",[$r]:"none",[As]:!1,[Ar]:"chevrons",[po]:"none",[to]:"outside",[`${ao}.enabled`]:!1,[`${uo}.enabled`]:!1,[`${uo}.enabled`]:!1,[`${lo}.enabled`]:!1,[ur]:!1,[hr]:!1,[gr]:!1,[dr]:!1,[ds]:!1,[us]:!1,[hs]:!1,[ls]:!1,[jr]:!1,[Or]:!1,[Dr]:!1,[zr]:!1,[Ys]:!1,[Gs]:!1,[Ks]:!1,[Qs]:!1,[Co]:!1,[So]:!1,[ko]:10,[Io]:!1,[Ao]:!1,[kr]:!1,[Ea]:!1,[Sa]:"image",[Aa]:10,[rr]:"none",[$o]:1},scrubbing:{[ms]:"below",[vs]:"ribbon",[fs]:"seek",[Nr]:"below",[Hr]:"ribbon",[Fr]:"seek"}},pw=(e,t,n)=>{const i=Lo(Zd).safeParse(e);if(!i.success)return t;const a=i.data;for(const e of n??[])e in gw&&Object.entries(gw[e]).forEach((([e,n])=>{return r=n,void(void 0===Ub(a,i=e)&&Bb(t,i,r));var i,r}));return t},mw=e=>{switch(e){case"ptz_left":return"left";case"ptz_right":return"right";case"ptz_up":return"up";case"ptz_down":return"down";case"ptz_zoom_in":return"zoom_in";case"ptz_zoom_out":return"zoom_out"}
/* istanbul ignore next: No (current) way to reach this code -- @preserve */return null},fw=(e,t)=>{if(!t.enabled)return[];const n=[];for(const i of["ptz_down","ptz_left","ptz_right","ptz_up","ptz_zoom_in","ptz_zoom_out"]){const a=t[i],r=mw(i);a&&r&&(n.push({conditions:[{condition:"key",key:a.key,state:"down",shift:a.shift,ctrl:a.ctrl,alt:a.alt,meta:a.meta}],actions:[kf({ptzAction:r,ptzPhase:"start"})],tag:e}),n.push({conditions:[{condition:"key",key:a.key,state:"up"}],actions:[kf({ptzAction:r,ptzPhase:"stop"})],tag:e}))}const i=t.ptz_home;return i&&n.push({conditions:[{condition:"key",key:i.key,state:"down",shift:i.shift,ctrl:i.ctrl,alt:i.alt,meta:i.meta}],actions:[kf()],tag:e}),n};class _w{constructor(e){this._config=null,this._overriddenConfig=null,this._rawConfig=null,this._cardWideConfig=null,this._api=e}hasConfig(){return!!this.getConfig()}getConfig(){return this._overriddenConfig??this._config}getCardWideConfig(){return this._cardWideConfig}getNonOverriddenConfig(){return this._config}getRawConfig(){return this._rawConfig}setConfig(e){if(!e)throw new Error(Y_("error.invalid_configuration"));const t=Zd.safeParse(e);if(!t.success){const n=Yb(e),i=Fo(t.error);let a="";throw n&&(a=`${Y_("error.upgrade_available")}. `),new Error(a+`${Y_("error.invalid_configuration")}: `+(i&&i.size?JSON.stringify([...i],null," "):Y_("error.invalid_configuration_no_hint")))}const n=pw(e,t.data,t.data.profiles);var i;(this._rawConfig=e,Bv(this._config,n))||(this._config=n,this._cardWideConfig={performance:n.performance,debug:n.debug},this._api.getConditionsManager().setConditionsFromConfig(),this._api.getConditionsManager().setState({view:void 0,displayMode:void 0,camera:void 0}),this._api.getMediaLoadedInfoManager().clear(),this._api.getInitializationManager().uninitialize(Lb.VIEW),this._api.getViewManager().reset(),this._api.getMessageManager().reset(),this._api.getStatusBarItemManager().removeAllDynamicStatusBarItems(),((e,t)=>{e.getAutomationsManager().deleteAutomations(t);const n=e.getConfigManager().getConfig()?.view.keyboard_shortcuts;if(!n)return;const i=fw(t,n);i.length&&e.getAutomationsManager().addAutomations(i)})(this._api,this),(i=this._api).getAutomationsManager().deleteAutomations(),i.getAutomationsManager().addAutomations(i.getConfigManager().getNonOverriddenConfig()?.automations??[]),this.computeOverrideConfig(),this._api.getCardElementManager().update())}computeOverrideConfig(){const e=this._api.getConditionsManager();if(!this._config)return;let t=null;try{t=uw(e,this._config,{configOverrides:this._config.overrides,schema:Zd})}catch(e){return void this._api.getMessageManager().setErrorIfHigherPriority(e)}if(Bv(t,this._overriddenConfig))return;const n=this._overriddenConfig;this._overriddenConfig=t,this._api.getStyleManager().updateFromConfig(),!n||Bv(n?.cameras,this._overriddenConfig?.cameras)&&Bv(n?.cameras_global,this._overriddenConfig?.cameras_global)||(this._api.getInitializationManager().uninitialize(Lb.CAMERAS),this._api.getCameraManager().destroy()),n&&n?.live.microphone.always_connected!==this._overriddenConfig?.live.microphone.always_connected&&this._api.getInitializationManager().uninitialize(Lb.MICROPHONE_CONNECT),this._initializeBackground(n)}async _initializeBackground(e){await this._api.getDefaultManager().initializeIfNecessary(e),await this._api.getMediaPlayerManager().initializeIfNecessary(e),this._api.getCardElementManager().update()}}class vw{constructor(e){this._timer=new If,this._stateChangeHandler=()=>{this._setToDefaultIfAllowed()},this._api=e}async initializeIfNecessary(e){Bv(e?.view.default_reset,this._api.getConfigManager().getConfig()?.view.default_reset)||await this.initialize()}async initialize(){this.uninitialize();const e=this._api.getConfigManager().getConfig()?.view.default_reset;e?.entities.length&&this._api.getHASSManager().getStateWatcher().subscribe(this._stateChangeHandler,e.entities);const t=this._api.getConfigManager().getConfig()?.view.default_reset.every_seconds;return t&&this._timer.startRepeated(t,(()=>this._setToDefaultIfAllowed())),this._api.getConfigManager().getConfig()?.view.default_reset.after_interaction&&this._api.getAutomationsManager().addAutomations([{actions:[Mf("default")],conditions:[{condition:"interaction",interaction:!1}],tag:this}]),!0}uninitialize(){this._timer.stop(),this._api.getHASSManager().getStateWatcher().unsubscribe(this._stateChangeHandler),this._api.getAutomationsManager().deleteAutomations(this)}_setToDefaultIfAllowed(){this._isAutomatedUpdateAllowed()&&this._api.getViewManager().setViewDefault()}_isAutomatedUpdateAllowed(){const e=this._api.getConfigManager().getConfig()?.view.default_reset.interaction_mode;return!!e&&((e,t)=>{switch(e){case"all":return!0;case"active":return t;case"inactive":return!t}})(e,this._api.getInteractionManager().hasInteraction())}}const yw=(e,t="download")=>{const n=new URL(e).origin===window.location.origin,i=e.startsWith("data:");if(cw(navigator.userAgent)||!n&&!i)window.open(e,"_blank");else{const n=document.createElement("a");n.setAttribute("download",t),n.href=e,n.click(),n.remove()}},bw=async(e,t,n)=>{const i=await t.getMediaDownloadPath(n);if(!i)throw new Oo(Y_("error.download_no_media"));let a=i.endpoint;if(i.sign){let t;try{t=await $b(e,i.endpoint)}catch(e){af(e)}if(!t)throw new Oo(Y_("error.download_sign_failed"));a=t}yw(a)},ww=e=>{const t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight;const n=t.getContext("2d");return n?(n.drawImage(e,0,0,t.width,t.height),t.toDataURL("image/jpeg")):null};class xw{constructor(e){this._api=e}async downloadViewerMedia(){const e=this._api.getViewManager().getView()?.queryResults?.getSelectedResult(),t=this._api.getHASSManager().getHASS();if(!e||!t)return!1;try{await bw(t,this._api.getCameraManager(),e)}catch(e){return this._api.getMessageManager().setErrorIfHigherPriority(e),!1}return!0}async downloadScreenshot(){const e=await(this._api.getMediaLoadedInfoManager().get()?.player?.getScreenshotURL());e&&yw(e,(e=>{if(e?.is("live")||e?.is("image"))return`${e.view}-${e.camera}-${eh(new Date,"yyyy-MM-dd-HH-mm-ss")}.jpg`;if(e?.isViewerView()){const t=e.queryResults?.getSelectedResult(),n=t?.getID()??null;return`${e.view}-${e.camera}${n?`-${n}`:""}.jpg`}return"screenshot.jpg"})(this._api.getViewManager().getView()))}}class Mw{constructor(e){this._expanded=!1,this._api=e}initialize(){this._setConditionState()}isExpanded(){return this._expanded}toggleExpanded(){this.setExpanded(!this._expanded)}setExpanded(e){e&&this._api.getFullscreenManager().isInFullscreen()&&this._api.getFullscreenManager().stopFullscreen(),this._expanded=e,this._setConditionState(),this._api.getCardElementManager().update()}_setConditionState(){this._api.getConditionsManager()?.setState({expand:this._expanded})}}const Cw=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Sw=(()=>{if("undefined"==typeof document)return!1;const e=Cw[0],t={};for(const n of Cw){const i=n?.[1];if(i in document){for(const[i,a]of n.entries())t[e[i]]=a;return t}}return!1})(),kw={change:Sw.fullscreenchange,error:Sw.fullscreenerror};let $w={request:(e=document.documentElement,t)=>new Promise(((n,i)=>{const a=()=>{$w.off("change",a),n()};$w.on("change",a);const r=e[Sw.requestFullscreen](t);r instanceof Promise&&r.then(a).catch(i)})),exit:()=>new Promise(((e,t)=>{if(!$w.isFullscreen)return void e();const n=()=>{$w.off("change",n),e()};$w.on("change",n);const i=document[Sw.exitFullscreen]();i instanceof Promise&&i.then(n).catch(t)})),toggle:(e,t)=>$w.isFullscreen?$w.exit():$w.request(e,t),onchange(e){$w.on("change",e)},onerror(e){$w.on("error",e)},on(e,t){const n=kw[e];n&&document.addEventListener(n,t,!1)},off(e,t){const n=kw[e];n&&document.removeEventListener(n,t,!1)},raw:Sw};Object.defineProperties($w,{isFullscreen:{get:()=>Boolean(document[Sw.fullscreenElement])},element:{enumerable:!0,get:()=>document[Sw.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[Sw.fullscreenEnabled])}}),Sw||($w={isEnabled:!1});var Ew=$w;class Aw{constructor(e){this._fullscreenHandler=()=>{this._api.getExpandManager().setExpanded(!1),this._setConditionState(),this._api.getCardElementManager().update()},this._api=e}initialize(){this._setConditionState()}connect(){Ew.isEnabled&&Ew.on("change",this._fullscreenHandler)}disconnect(){Ew.isEnabled&&Ew.off("change",this._fullscreenHandler)}isInFullscreen(){return Ew.isEnabled&&Ew.isFullscreen}toggleFullscreen(){Ew.toggle(this._api.getCardElementManager().getElement())}stopFullscreen(){Ew.exit()}_setConditionState(){this._api.getConditionsManager()?.setState({fullscreen:this.isInFullscreen()})}}class Iw{constructor(){this._watcherCallbacks=new Map}setHASS(e,t){if(e)for(const[n,i]of this._watcherCallbacks.entries()){const a=Eb(t,e,i,{stateOnly:!0,firstOnly:!0});a.length&&n(a[0])}}subscribe(e,t){return!!t.length&&(this._watcherCallbacks.has(e)?this._watcherCallbacks.get(e)?.push(...t):this._watcherCallbacks.set(e,t),!0)}unsubscribe(e){this._watcherCallbacks.delete(e)}}class Tw{constructor(e){this._hass=null,this._stateWatcher=new Iw,this._api=e}getHASS(){return this._hass}hasHASS(){return!!this._hass}getStateWatcher(){return this._stateWatcher}setHASS(e){if(((e,t)=>e?.connected!==t?.connected)(this._hass,e)&&(e?.connected?this._api.getMessageManager().resetType("connection"):this._api.getMessageManager().setMessageIfHigherPriority({message:Y_("error.reconnecting"),icon:"mdi:lan-disconnect",type:"connection",dotdotdot:!0})),!e)return;const t=this._hass;this._hass=e,this._api.getConditionsManager().hasHAStateConditions()&&this._api.getConditionsManager().setState({state:this._hass.states,user:this._hass.user}),this._api.getStyleManager().applyTheme(),this._stateWatcher.setHASS(t,e)}}var zw=function(){return lh.Date.now()},jw="Expected a function",Ow=Math.max,Dw=Math.min;function Rw(e,t,n){var i,a,r,s,o,c,l=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError(jw);function g(t){var n=i,r=a;return i=a=void 0,l=t,s=e.apply(r,n)}function p(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=r}function m(){var e=zw();if(p(e))return f(e);o=setTimeout(m,function(e){var n=t-(e-c);return u?Dw(n,r-(e-l)):n}(e))}function f(e){return o=void 0,h&&i?g(e):(i=a=void 0,s)}function _(){var e=zw(),n=p(e);if(i=arguments,a=this,c=e,n){if(void 0===o)return function(e){return l=e,o=setTimeout(m,t),d?g(e):s}(c);if(u)return clearTimeout(o),o=setTimeout(m,t),g(c)}return void 0===o&&(o=setTimeout(m,t)),s}return t=Tm(t)||0,bh(n)&&(d=!!n.leading,r=(u="maxWait"in n)?Ow(Tm(n.maxWait)||0,t):r,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==o&&clearTimeout(o),l=0,i=c=a=o=void 0},_.flush=function(){return void 0===o?s:f(zw())},_}function Pw(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return bh(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),Rw(e,t,{leading:i,maxWait:t,trailing:a})}class Lw{constructor(e){this._timer=new If,this._interacted=!1,this.reportInteraction=Pw((()=>{this._reportInteraction()}),1e3),this._api=e}initialize(){this._setInteraction(!1)}hasInteraction(){return this._interacted}_setInteraction(e){this._interacted=e,pf(this._api.getCardElementManager().getElement(),e,"interaction"),this._api.getConditionsManager().setState({interaction:e})}_reportInteraction(){this._timer.stop(),this._setInteraction(!0);const e=this._api.getConfigManager().getConfig()?.view.interaction_seconds;e&&this._timer.start(e,(()=>{this._setInteraction(!1)}))}}class Nw{constructor(e){this._state={},this._handleKeydown=e=>{const t={state:"down",ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey,shift:e.shiftKey};Bv(this._state[e.key],t)||(this._state[e.key]=t,this._processStateChange())},this._handleKeyup=e=>{e.key in this._state&&"down"===this._state[e.key].state&&(this._state[e.key].state="up",this._processStateChange())},this._handleBlur=()=>{Object.keys(this._state).length&&(this._state={},this._processStateChange())},this._api=e}initialize(){const e=this._api.getCardElementManager().getElement();e.addEventListener("keydown",this._handleKeydown),e.addEventListener("keyup",this._handleKeyup),e.addEventListener("blur",this._handleBlur)}uninitialize(){const e=this._api.getCardElementManager().getElement();e.removeEventListener("keydown",this._handleKeydown),e.removeEventListener("keyup",this._handleKeyup),e.removeEventListener("blur",this._handleBlur)}_processStateChange(){this._api.getConditionsManager().setState({keys:this._state})}}function Fw(e,t){let n;return n=e instanceof Event?e.composedPath()[0]:e,n instanceof HTMLImageElement?{width:n.naturalWidth,height:n.naturalHeight,...t}:n instanceof HTMLVideoElement?{width:n.videoWidth,height:n.videoHeight,...t}:n instanceof HTMLCanvasElement?{width:n.width,height:n.height,player:t?.player,...t}:null}function Vw(e,t,n){const i=Fw(t,n);i&&Hw(e,i)}function Hw(e,t){Km(e,"media:loaded",t)}function Bw(e){Km(e,"media:unloaded")}function Uw(e){Km(e,"media:volumechange")}function qw(e){Km(e,"media:play")}function Ww(e){Km(e,"media:pause")}class Zw{constructor(e){this._current=null,this._lastKnown=null,this._api=e}initialize(){this.clear()}set(e){var t;(t=e).height>=50&&t.width>=50&&(K_(this._api.getConfigManager().getCardWideConfig(),"Frigate Card media load: ",e),this._current=e,this._lastKnown=e,this._api.getConditionsManager().setState({media_loaded:!0}),this._api.getStyleManager().setExpandedMode(),this._api.getCardElementManager().update())}get(){return this._current}getLastKnown(){return this._lastKnown}clear(){this._current=null,this._api.getConditionsManager().setState({media_loaded:!1})}has(){return!!this._current}}class Qw{static isEvent(e){return this.isClip(e)||this.isSnapshot(e)}static isRecording(e){return"recording"===e.getMediaType()}static isClip(e){return"clip"===e.getMediaType()}static isSnapshot(e){return"snapshot"===e.getMediaType()}static isVideo(e){return this.isClip(e)||this.isRecording(e)}}class Yw{constructor(e){this._mediaPlayers=[],this._api=e}getMediaPlayers(){return this._mediaPlayers}hasMediaPlayers(){return this._mediaPlayers.length>0}async initializeIfNecessary(e){e?.menu.buttons.media_player.enabled!==this._api.getConfigManager().getConfig()?.menu.buttons.media_player.enabled&&await this.initialize()}async initialize(){const e=this._api.getHASSManager().getHASS();if(!e||!this._api.getConfigManager().getConfig()?.menu.buttons.media_player.enabled)return!1;const t=Object.keys(e.states).filter((t=>{if(t.startsWith("media_player.")){const n=e.states[t];if(n&&"unavailable"!==n.state&&Rb(n,131072))return!0}return!1}));let n=null;try{n=await this._api.getEntityRegistryManager().getEntities(e,t)}catch(e){af(e)}return this._mediaPlayers=t.filter((e=>{const t=n?.get(e);return!t||!t.hidden_by})),!0}async stop(e){const t=this._api.getHASSManager().getHASS(),n=t?.states[e];if(!n)return;let i;if(Rb(n,4096))i="media_stop";else{if(!Rb(n,256))return;i="turn_off"}await t.callService("media_player",i,{entity_id:e})}async playLive(e,t){const n=this._api.getCameraManager().getStore().getCameraConfig(t);n&&("dashboard"===n.cast?.method?await this._playLiveDashboard(e,n):await this._playLiveStandard(e,t,n))}async _playLiveStandard(e,t,n){const i=this._api.getHASSManager().getHASS(),a=n?.camera_entity??null;if(!i||!a)return;const r=this._api.getCameraManager().getCameraMetadata(t)?.title??null,s=i.states[a]?.attributes?.entity_picture??null;await i.callService("media_player","play_media",{entity_id:e,media_content_id:`media-source://camera/${a}`,media_content_type:"application/vnd.apple.mpegurl",extra:{...r&&{title:r},...s&&{thumb:s}}})}async _playLiveDashboard(e,t){const n=this._api.getHASSManager().getHASS();if(!n)return;const i=t.cast?.dashboard;i?.dashboard_path&&i?.view_path?await n.callService("cast","show_lovelace_view",{entity_id:e,dashboard_path:i.dashboard_path,view_path:i.view_path}):this._api.getMessageManager().setMessageIfHigherPriority({type:"error",icon:"mdi:cast",message:Y_("error.no_dashboard_or_view")})}async playMedia(e,t){const n=this._api.getHASSManager().getHASS();if(!n||!t)return;const i=t.getTitle(),a=t.getThumbnail();await n.callService("media_player","play_media",{entity_id:e,media_content_id:t.getContentID(),media_content_type:Qw.isVideo(t)?"video":"image",extra:{...i&&{title:i},...a&&{thumb:a}}})}}const Gw={info:10,error:20,connection:30,diagnostics:40};class Kw{constructor(e){this._message=null,this._api=e}getMessage(){return this._message}hasMessage(){return!!this._message}hasErrorMessage(){return"error"===this._message?.type}reset(){const e=this.hasMessage();this._message=null,e&&this._api.getCardElementManager().update()}resetType(e){this._message?.type===e&&this.reset()}setErrorIfHigherPriority(e,t){e&&"object"==typeof e&&"message"in e&&(af(e),this.setMessageIfHigherPriority({message:t?`${t}: ${e.message}`:String(e.message),type:"error",...e instanceof Oo&&{context:e.context}}))}setMessageIfHigherPriority(e){const t=e=>e.type??"info",n=this._message?Gw[t(this._message)]:0,i=Gw[t(e)];return!(this._message&&i<n)&&(this._message=e,this._api.getMediaLoadedInfoManager().clear(),this._api.getCardElementManager().scrollReset(),this._api.getCardElementManager().update(),!0)}}class Jw{constructor(e){this._timer=new If,this._state={connected:!1,muted:!0,forbidden:!1},this._desireMute=!0,this._api=e}getState(){return this._state}initialize(){this._setState()}shouldConnectOnInitialization(){return!!this._api.getConfigManager().getConfig()?.live.microphone?.always_connected&&this.isSupported()}isSupported(){return!!navigator.mediaDevices?.getUserMedia}async connect(){if(!this.isSupported())return!1;try{this._stream=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})}catch(e){return af(e),this._stream=null,this._setState(),!1}return this._setDesiredMuteOnStream(),this._setState(),!0}disconnect(){this._stream?.getTracks().forEach((e=>e.stop())),this._stream=void 0,this._setState()}getStream(){return this._stream??void 0}mute(){this._desireMute=!0,this._setDesiredMuteOnStream(),this._setState()}async unmute(){this.isSupported()&&(this._desireMute=!1,this.isConnected()||this.isForbidden()?this.isConnected()&&(this._setDesiredMuteOnStream(),this._setState()):await this.connect())}isConnected(){return!!this._stream}isForbidden(){return null===this._stream}isMuted(){return!this._stream||this._stream.getTracks().every((e=>!e.enabled))}_setDesiredMuteOnStream(){this._stream?.getTracks().forEach((e=>{e.enabled=!this._desireMute})),this._startDisconnectTimer()}_startDisconnectTimer(){const e=this._api.getConfigManager().getConfig()?.live.microphone;if(e?.always_connected)return;const t=e?.disconnect_seconds??0;t&&this._timer.start(t,(()=>{this.disconnect()}))}_setState(){this._state={stream:this._stream,connected:this.isConnected(),muted:this.isMuted(),forbidden:this.isForbidden()},this._api.getConditionsManager().setState({microphone:this._state}),this._api.getCardElementManager().update()}}class Xw{constructor(e){this._shouldRun=!0,this.requestExecution=()=>{this._shouldRun=!0,this._api.getCardElementManager().update()},this.executeIfNecessary=async()=>{this._shouldRun&&(this._shouldRun=!1,await this._executeViewRelated(this._calculateIntent()),await this._executeNonViewRelated(this._calculateIntent()))},this._isViewAction=e=>{switch(e.frigate_card_action){case"clip":case"clips":case"diagnostics":case"image":case"live":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":return!0}return!1},this._api=e}hasViewRelatedActionsToRun(){return!!this._calculateIntent().view&&this._shouldRun}async _executeViewRelated(e){e.view&&(e.view.default?await this._api.getViewManager().setViewDefaultWithNewQuery({params:{camera:e.view.camera},...e.view.substream&&{modifiers:[new mb(e.view.substream)]}}):await this._api.getViewManager().setViewByParametersWithNewQuery({params:{...e.view.view&&{view:e.view.view},...e.view.camera&&{camera:e.view.camera}},...e.view.substream&&{modifiers:[new mb(e.view.substream)]}}))}async _executeNonViewRelated(e){e.other&&await this._api.getActionsManager().executeActions(e.other)}_calculateIntent(){const e={};for(const t of this._getActions())this._isViewAction(t)?((e.view??={}).view=t.frigate_card_action,(e.view??={}).default=void 0):"default"===t.frigate_card_action?((e.view??={}).default=!0,(e.view??={}).view=void 0):"camera_select"===t.frigate_card_action?(e.view??={}).camera=t.camera:"live_substream_select"===t.frigate_card_action?(e.view??={}).substream=t.camera:(e.other??=[]).push(t);return e}_getActions(){const e=new URLSearchParams(window.location.search),t=[],n=new RegExp(/^frigate-card-action([.:](?<cardID>\w+))?[.:](?<action>\w+)/);for(const[i,a]of e.entries()){const e=i.match(n);if(!e||!e.groups)continue;const r=e.groups.cardID,s=e.groups.action;let o=null;switch(s){case"camera_select":case"live_substream_select":a&&(o=Cf(s,a,{cardID:r}));break;case"camera_ui":case"clip":case"clips":case"default":case"diagnostics":case"download":case"expand":case"image":case"live":case"menu_toggle":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":o=Mf(s,{cardID:r});break;default:console.warn(`Frigate card received unknown card action in query string: ${s}`)}o&&t.push(o)}return t}}class ex{constructor(e){this._items=[],this._dynamicItems=[],this._api=e}addDynamicStatusBarItem(e){this._dynamicItems.includes(e)||this._dynamicItems.push(e),this._api.getCardElementManager().update()}removeDynamicStatusBarItem(e){this._dynamicItems=this._dynamicItems.filter((t=>!Bv(t,e))),this._api.getCardElementManager().update()}removeAllDynamicStatusBarItems(){this._dynamicItems=[],this._api.getCardElementManager().update()}calculateItems(e){const t=e?.view?e?.cameraManager?.getCameraMetadata(e?.view?.camera):null,n=t?.engineIcon??null,i=e?.view?.is("live")?t?.title??null:e?.view?.isViewerView()?e?.view.queryResults?.getSelectedResult()?.getTitle()??null:null,a=e?.mediaLoadedInfo?this._calculateResolution(e?.mediaLoadedInfo):null,r=e?.mediaLoadedInfo?.technology?.length?e?.mediaLoadedInfo.technology[0]:null;return[...i?[{type:"custom:frigate-card-status-bar-string",string:i,expand:!0,sufficient:!0,...e?.statusConfig?.items.title}]:[],...a?[{type:"custom:frigate-card-status-bar-string",string:a,...e?.statusConfig?.items.resolution}]:[],...r&&"webrtc"===r?[{type:"custom:frigate-card-status-bar-icon",icon:"mdi:webrtc",...e?.statusConfig?.items.technology}]:r?[{type:"custom:frigate-card-status-bar-string",string:r.toUpperCase(),...e?.statusConfig?.items.technology}]:[],...n?[{type:"custom:frigate-card-status-bar-icon",icon:n,...e?.statusConfig?.items.engine}]:[],...this._dynamicItems]}_matchesWidthHeight(e,t,n){const i=.99*t,a=1.01*t,r=.99*n,s=1.01*n,o=(e,t,n)=>e>=t&&e<=n;return!!e&&(o(e.width,i,a)&&o(e.height,r,s)||o(e.height,i,a)&&o(e.width,r,s))}_calculateResolution(e){return this._matchesWidthHeight(e,1920,1080)?"1080p":this._matchesWidthHeight(e,1280,720)?"720p":this._matchesWidthHeight(e,640,480)?"VGA":this._matchesWidthHeight(e,3840,2160)?"4K":this._matchesWidthHeight(e,720,480)?"480p":this._matchesWidthHeight(e,720,576)?"576p":this._matchesWidthHeight(e,7680,4320)?"8K":`${e.width}x${e.height}`}}class tx{constructor(e){this._api=e}setExpandedMode(){const e=this._api.getCardElementManager().getElement(),t=this._api.getViewManager().getView(),n=this._api.getMediaLoadedInfoManager().getLastKnown();e.style.setProperty("--frigate-card-expand-aspect-ratio",t?.isAnyMediaView()&&n?`${n.width} / ${n.height}`:"unset");const i=t?.isGrid();e.style.setProperty("--frigate-card-expand-width",!i&&t?.isAnyMediaView()?"none":"var(--frigate-card-expand-max-width)"),e.style.setProperty("--frigate-card-expand-height",!i&&t?.isAnyMediaView()?"none":"var(--frigate-card-expand-max-height)")}updateFromConfig(){this.applyTheme(),this._setMinMaxHeight(),this._setPerformance(),this._setDimmable()}applyTheme(){const e=this._api.getConfigManager().getConfig()?.view.theme;if(!e)return;const t=this._api.getCardElementManager().getElement(),n=this._getThemeNames(e);if(pf(t,!!n,"themes",n?.join(" ")),e.overrides)for(const[n,i]of Object.entries(e.overrides))t.style.setProperty(n,i)}_getThemeNames(e){return e.themes.length?e.themes:Qd.view.theme.themes}_setDimmable(){const e=this._api.getConfigManager().getConfig();pf(this._api.getCardElementManager().getElement(),!!e?.view.dim,"dimmable")}_setMinMaxHeight(){const e=this._api.getConfigManager().getConfig();if(e){this._api.getCardElementManager().getElement().style.setProperty("--frigate-card-height",e.dimensions.height)}}_setPerformance(){const e={box_shadow:"none",border_radius:"0px"},t=this._api.getCardElementManager().getElement(),n=this._api.getConfigManager().getCardWideConfig()?.performance,i=n?.style??{};for(const n of Object.keys(i)){const a=`--frigate-card-css-${n.replaceAll("_","-")}`;!1===i[n]?t.style.setProperty(a,e[n]):t.style.removeProperty(a)}}_isAspectRatioEnforced(e,t){const n=e.dimensions.aspect_ratio_mode;return!(this._api.getFullscreenManager().isInFullscreen()||this._api.getExpandManager().isExpanded()||"unconstrained"===n||"dynamic"===n&&(!t||t?.isAnyMediaView()||t?.is("timeline")||t?.is("diagnostics")))}getAspectRatioStyle(){const e=this._api.getConfigManager().getConfig(),t=this._api.getViewManager().getView();if(e){if(!this._isAspectRatioEnforced(e,t))return yf();const n=e.dimensions.aspect_ratio_mode,i=this._api.getMediaLoadedInfoManager().getLastKnown();return yf(i&&"dynamic"===n?{ratio:[i.width,i.height]}:{ratio:e.dimensions.aspect_ratio})}return yf({defaultStatic:!0})}}class nx{constructor(e){this._triggeredCameras=new Map,this._triggeredCameraTimers=new Map,this._throttledTriggerAction=Pw(this._triggerAction.bind(this),1e3,{trailing:!0}),this._api=e}getTriggeredCameraIDs(){return new Set(this._triggeredCameras.keys())}isTriggered(){return!!this._triggeredCameras.size}getMostRecentlyTriggeredCameraID(){const e=Dv([...this._triggeredCameras.entries()],(e=>e[1].getTime()),"desc");return e.length?e[0][0]:null}async handleCameraEvent(e){const t=this._api.getConfigManager().getConfig()?.view.triggers,n=this._api.getViewManager().getView()?.camera;if(!t||!n)return;const i=this._api.getCameraManager().getStore().getAllDependentCameras(n);t.filter_selected_camera&&!i.has(e.cameraID)||("end"!==e.type?(this._triggeredCameras.set(e.cameraID,new Date),this._setConditionStateIfNecessary(),await this._throttledTriggerAction(e)):this._startUntriggerTimer(e.cameraID))}_hasAllowableInteractionStateForAction(){const e=this._api.getConfigManager().getConfig()?.view.triggers,t=this._api.getInteractionManager().hasInteraction();return!!e&&("all"===e.actions.interaction_mode||"active"===e.actions.interaction_mode&&t||"inactive"===e.actions.interaction_mode&&!t)}async _triggerAction(e){const t=this._api.getConfigManager().getConfig()?.view.triggers.actions.trigger,n=this._api.getConfigManager().getConfig()?.view.default;("high"!==e.fidelity||e.snapshot||e.clip||"live"===t||"default"===t&&"live"===n)&&(this._hasAllowableInteractionStateForAction()&&("update"===t?await this._api.getViewManager().setViewByParametersWithNewQuery({queryExecutorOptions:{useCache:!1}}):"live"===t?await this._api.getViewManager().setViewByParametersWithNewQuery({params:{view:"live",camera:e.cameraID}}):"default"===t?await this._api.getViewManager().setViewDefaultWithNewQuery({params:{camera:e.cameraID}}):"high"===e.fidelity&&"media"===t&&await this._api.getViewManager().setViewByParametersWithNewQuery({params:{view:e.clip?"clip":"snapshot",camera:e.cameraID}})),this._api.getCardElementManager().update())}_setConditionStateIfNecessary(){const e=new Set(this._triggeredCameras.keys()),t=e.size?e:void 0;Bv(t,this._api.getConditionsManager().getState().triggered)||this._api.getConditionsManager().setState({triggered:t})}async _untriggerAction(e){const t=this._api.getConfigManager().getConfig()?.view.triggers.actions.untrigger;"default"===t&&this._hasAllowableInteractionStateForAction()&&await this._api.getViewManager().setViewDefaultWithNewQuery(),this._triggeredCameras.delete(e),this._deleteTimer(e),this._setConditionStateIfNecessary(),this._api.getCardElementManager().update()}_startUntriggerTimer(e){this._deleteTimer(e);const t=new If;this._triggeredCameraTimers.set(e,t),t.start(
/* istanbul ignore next: the case of config being null here cannot be
           reached, as there's no way to have the untrigger call happen without
           a config. -- @preserve */
this._api.getConfigManager().getConfig()?.view.triggers.untrigger_seconds??0,(async()=>{await this._untriggerAction(e)}))}_deleteTimer(e){this._triggeredCameraTimers.get(e)?.stop(),this._triggeredCameraTimers.delete(e)}}function ix(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Gm(e,void 0,t):[]}class ax{constructor(e){this._queries=null,e&&(this._queries=e)}clone(){return y_(this)}getQueries(){return this._queries}setQueries(e){return this._queries=e,this}getQueryCameraIDs(){if(!this._queries)return null;const e=new Set;return this._queries.forEach((t=>[...t.cameraIDs].forEach((t=>e.add(t))))),e}setQueryCameraIDs(e){if(!this._queries)return this;const t=[];return this._queries.forEach((n=>t.push({...n,cameraIDs:tf(e)}))),this._queries=ix(t,Bv),this}hasQueriesForCameraIDs(e){for(const t of e)if(!this._queries?.some((e=>e.cameraIDs.has(t))))return!1;return!0}}class rx extends ax{convertToClipsQueries(){for(const e of this._queries??[])delete e.hasSnapshot,e.hasClip=!0;return this}}class sx extends ax{}class ox{static areEventQueries(e){return e instanceof rx}static areRecordingQueries(e){return e instanceof sx}static areClipsQueries(e){return this.areEventQueries(e)&&!!e?.getQueries()?.every((e=>e.hasClip))}static areSnapshotQueries(e){return this.areEventQueries(e)&&!!e?.getQueries()?.every((e=>e.hasSnapshot))}static getQueriesType(e){return this.areEventQueries(e)?"event":this.areRecordingQueries(e)?"recording":null}static getMediaType(e){return this.areClipsQueries(e)?"clips":this.areSnapshotQueries(e)?"snapshots":this.areRecordingQueries(e)?"recordings":null}}const cx=(e,t,n)=>{const i={anyCapabilities:["clips","snapshots","recordings"]};switch(t){case"image":case"diagnostics":return e.getStore().getCameraIDs();case"live":case"clip":case"clips":case"snapshot":case"snapshots":case"recording":case"recordings":const a="clip"===t?"clips":"snapshot"===t?"snapshots":"recording"===t?"recordings":t;return n?e.getStore().getAllDependentCameras(n,a):e.getStore().getCameraIDsWithCapability(a);case"timeline":return e.getStore().getCameraIDsWithCapability(i);case"media":return n?e.getStore().getAllDependentCameras(n,i):e.getStore().getCameraIDsWithCapability(i)}},lx=(e,t)=>Wy({},e,t);class dx{constructor(e){this.view=e.view,this.camera=e.camera,this.query=e.query??null,this.queryResults=e.queryResults??null,this.context=e.context??null,this.displayMode=e.displayMode??null}clone(){return new dx({view:this.view,camera:this.camera,query:this.query?.clone()??null,queryResults:this.queryResults?.clone()??null,context:this.context,displayMode:this.displayMode})}evolve(e){return new dx({view:void 0!==e.view?e.view:this.view,camera:void 0!==e.camera?e.camera:this.camera,query:void 0!==e.query?e.query:this.query?.clone()??null,queryResults:void 0!==e.queryResults?e.queryResults:this.queryResults?.clone()??null,context:void 0!==e.context?e.context:this.context,displayMode:void 0!==e.displayMode?e.displayMode:this.displayMode})}mergeInContext(e){return this.context=lx(this.context,e),this}removeContext(e){return this.context&&delete this.context[e],this}removeContextProperty(e,t){const n=this.context?.[e];return n&&delete n[t],this}is(e){return this.view==e}isGalleryView(){return["clips","snapshots","recordings"].includes(this.view)}isAnyMediaView(){return this.isViewerView()||this.is("live")||this.is("image")}isViewerView(){return["media","clip","snapshot","recording"].includes(this.view)}supportsMultipleDisplayModes(){return this.isViewerView()||this.is("live")}getDefaultMediaType(){return["clip","clips"].includes(this.view)?"clips":["snapshot","snapshots"].includes(this.view)?"snapshots":["recording","recordings"].includes(this.view)?"recordings":null}isGrid(){return"grid"===this.displayMode}}const ux=(e,t)=>{t?.forEach((t=>t.modify(e)))};class hx extends Oo{}class gx extends Oo{}class px{constructor(e){this._api=e}getViewDefault(e){const t=this._api.getConfigManager().getConfig();if(!t)return null;let n=null;const i=e?.params?.view??t.view.default;if(e?.params?.camera)n=e.params.camera;else{const a=[...cx(this._api.getCameraManager(),i)];if(!a.length)return null;if(e?.baseView?.camera&&t.view.default_cycle_camera){const t=a.indexOf(e.baseView.camera);n=a[t+1>=a.length?0:t+1]}else n=a[0]}return this.getViewByParameters({params:{...e?.params,view:i,camera:n},baseView:e?.baseView})}getViewByParameters(e){const t=this._api.getConfigManager().getConfig();if(!t)return null;let n=e?.params?.camera??e?.baseView?.camera??null,i=e?.params?.view??e?.baseView?.view??t.view.default;const a=this._api.getCameraManager().getStore().getCameraIDs();if(!n||!a.has(n)){n=cx(this._api.getCameraManager(),i).keys().next().value??null}if(!n){const e=[...this._api.getCameraManager().getStore().getCameras()].reduce(((e,[t,n])=>{const i=n.getCapabilities()?.getRawCapabilities();return i&&(e[t]=i),e}),{});throw new hx(Y_("error.no_supported_cameras"),{view:i,cameras_capabilities:e})}if(!this.isViewSupportedByCamera(n,i)){if(!e?.failSafe||!this.isViewSupportedByCamera(n,Ko)){const e=this._api.getCameraManager().getStore().getCamera(n)?.getCapabilities()?.getRawCapabilities();throw new gx(Y_("error.no_supported_camera"),{view:i,camera:n,...e&&{camera_capabilities:e}})}i=Ko}const r=this._getDefaultDisplayModeForView(i,t),s=(i!==e?.baseView?.view?r:null)??e?.params?.displayMode??e?.baseView?.displayMode??r??"single",o={...e?.params,view:i,camera:n,displayMode:s},c=e?.baseView?e.baseView.evolve(o):new dx(o);return ux(c,e?.modifiers),c}isViewSupportedByCamera(e,t){return!!cx(this._api.getCameraManager(),t,e).size}_getDefaultDisplayModeForView(e,t){let n=null;switch(e){case"media":case"clip":case"recording":case"snapshot":n=t.media_viewer.display?.mode??null;break;case"live":n=t.live.display?.mode??null}return n}}class mx{constructor(e,t){this._key=e,this._property=t}modify(e){e.removeContextProperty(this._key,this._property)}}class fx{constructor(e){this._query=e?.query,this._queryResults=e?.queryResults}modify(e){void 0!==this._query&&(e.query=this._query),void 0!==this._queryResults&&(e.queryResults=this._queryResults)}}const _x=(e,t,n)=>{let i;for(const[a,r]of e.entries()){const e=r.getStartTime(),s=r.getUsableEndTime();if(r.includesTime(t)&&e&&s){const t=s.getTime()-e.getTime();(!i||n&&i.cameraID!==n&&r.getCameraID()===n||t>i.duration&&(!n||i.cameraID!==n||r.getCameraID()===n))&&(i={index:a,duration:t,cameraID:r.getCameraID()})}}return i?i.index:null};class vx{constructor(e){this._results=e?.results??[],this._selectedIndex=this._getInitialSelectedIndex(e)}_getInitialSelectedIndex(e){return null!=e?.selectedIndex?e.selectedIndex:e?.results&&e.results.length?e?.selectApproach&&"last"!==e?.selectApproach?0:e.results.length-1:null}clone(){return new vx({results:this._results,selectedIndex:this._selectedIndex})}getResults(){return this._results}getSelectedIndex(){return this._selectedIndex}getResultsCount(){return this.getResults().length}hasResults(){return 0!==this.getResultsCount()}getResult(e){return void 0===e?null:this._results[e]}getSelectedResult(){const e=this.getSelectedIndex();return null!==e?this.getResult(e):null}hasSelectedResult(){return null!==this.getSelectedResult()}resetSelectedResult(){this._selectedIndex=null}selectIndex(e){(null===e||e>=0&&e<this._results.length)&&(this._selectedIndex=e)}selectResultIfFound(e){for(const[t,n]of this._results.entries())if(e(n)){this.selectIndex(t);break}}selectBestResult(e){const t=e(this._results);null!==t&&this.selectIndex(t)}}class yx{constructor(e){this._resultsTimestamp=null,this._cameras=new Map,this._resultsTimestamp=new Date,this._main=new vx(e),this._buildByCameraSlices(e?.selectApproach)}_buildByCameraSlices(e){const t=new Map;for(const e of this._main.getResults()){const n=e.getCameraID(),i=t.get(n)??[];i.push(e),t.set(n,i)}for(const[n,i]of t.entries())this._cameras.set(n,new vx({results:i,selectApproach:e}))}clone(){const e=new yx;e._resultsTimestamp=this._resultsTimestamp,e._main=this._main.clone();for(const[t,n]of this._cameras.entries())e._cameras.set(t,n.clone());return e}isSupersetOf(e){const t=new Set(this._main.getResults()?.map((e=>e.getID()))),n=new Set(e._main.getResults()?.map((e=>e.getID())));return!(!t.size||!n.size||t.has(null)||n.has(null))&&((e,t)=>{for(const n of t)if(!e.has(n))return!1;return!0})(t,n)}getCameraIDs(){return new Set(this._cameras.keys())}getSlice(e){return e?this._cameras.get(e)??null:this._main}getResults(e){return this.getSlice(e)?.getResults()??null}getResultsCount(e){return this.getSlice(e)?.getResultsCount()??0}hasResults(e){return 0!==this.getSlice(e)?.getResultsCount()}getResult(e,t){return this.getSlice(t)?.getResult(e)??null}getSelectedIndex(e){return this.getSlice(e)?.getSelectedIndex()??null}getSelectedResult(e){return this.getSlice(e)?.getSelectedResult()??null}getMultipleSelectedResults(e){const t=[];if(!e||e.main){const e=this.getSelectedResult();e&&t.push(e)}const n=this._getCameraIDsFromCriteria(e);for(const e of n??[]){const n=this.getSelectedResult(e);n&&t.push(n)}return t}hasSelectedResult(e){return this.getSlice(e)?.hasSelectedResult()??!1}resetSelectedResult(e){return this.getSlice(e)?.resetSelectedResult(),this}getResultsTimestamp(){return this._resultsTimestamp}selectIndex(e,t){return this.getSlice(t)?.selectIndex(e),t||this.demoteMainSelectionToCameraSelection(),this}demoteMainSelectionToCameraSelection(){const e=this.getSelectedResult();if(e){const t=e.getCameraID();this.resetSelectedResult(t),this.selectResultIfFound((t=>t===e),{cameraID:t})}return this}promoteCameraSelectionToMainSelection(e){const t=this.getSelectedResult(e);return this.resetSelectedResult(),this.selectResultIfFound((e=>e===t)),this}_getCameraIDsFromCriteria(e){return e?.allCameras?this.getCameraIDs():e?.cameraID?new Set([e.cameraID]):null}selectResultIfFound(e,t){t&&!t?.main||(this._main.selectResultIfFound(e),this.demoteMainSelectionToCameraSelection());const n=this._getCameraIDsFromCriteria(t);for(const t of n??[])this.getSlice(t)?.selectResultIfFound(e);return this}selectBestResult(e,t){t&&!t.main||(this._main.selectBestResult(e),this.demoteMainSelectionToCameraSelection());const n=this._getCameraIDsFromCriteria(t);for(const t of n??[])this.getSlice(t)?.selectBestResult(e);return this}}class bx{constructor(e){this._api=e}async executeDefaultEventQuery(e){const t=e?.eventsMediaType&&"all"!==e?.eventsMediaType?e.eventsMediaType:{anyCapabilities:["clips","snapshots"]},n=this._api.getCameraManager(),i=e?.cameraID?n.getStore().getAllDependentCameras(e.cameraID,t):n.getStore().getCameraIDsWithCapability(t);if(!i.size)return null;const a=n.generateDefaultEventQueries(i,{limit:this._getChunkLimit(),..."clips"===e?.eventsMediaType&&{hasClip:!0},..."snapshots"===e?.eventsMediaType&&{hasSnapshot:!0}});if(!a)return null;const r=new rx(a),s=await this.execute(r,e?.executorOptions);return s?{query:r,queryResults:s}:null}async executeDefaultRecordingQuery(e){const t=this._api.getCameraManager(),n=e?.cameraID?t.getStore().getAllDependentCameras(e.cameraID,"recordings"):t.getStore().getCameraIDsWithCapability("recordings");if(!n.size)return null;const i=t.generateDefaultRecordingQueries(n,{limit:this._getChunkLimit()});if(!i)return null;const a=new sx(i),r=await this.execute(a,e?.executorOptions);return r?{query:a,queryResults:r}:null}async execute(e,t){const n=e.getQueries();if(!n)return null;const i=await this._api.getCameraManager().executeMediaQueries(n,{useCache:t?.useCache});if(!i)return null;const a=new yx({results:i});return t?.rejectResults?.(a)?null:(t?.selectResult?.id?a.selectBestResult((e=>e.findIndex((e=>e.getID()===t.selectResult?.id)))):t?.selectResult?.func?a.selectResultIfFound(t.selectResult.func):t?.selectResult?.time&&a.selectBestResult((e=>_x(e,t.selectResult?.time?.time,t.selectResult?.time?.favorCameraID))),a)}_getChunkLimit(){const e=this._api.getConfigManager().getCardWideConfig();return e?.performance?.features.media_chunk_size??50}}class wx{constructor(e,t){this._api=e,this._executor=t??new bx(e)}async getExistingQueryModifiers(e,t){return e.query?[new fx({queryResults:await this._executor.execute(e.query,t)})]:[]}async getNewQueryModifiers(e,t){return await this._executeNewQuery(e,{useCache:!1,...t})}async _executeNewQuery(e,t){const n=this._api.getConfigManager().getConfig();if(!n)return null;const i=e?.getDefaultMediaType(),a=[],r=async n=>{
/* istanbul ignore if: this path cannot be reached -- @preserve */
if(!n)return[];const i="recordings"===n?await this._executor.executeDefaultRecordingQuery({...!e.isGrid()&&{cameraID:e.camera},executorOptions:t}):"clips"===n||"snapshots"===n||"all"===n?await this._executor.executeDefaultEventQuery({...!e.isGrid()&&{cameraID:e.camera},eventsMediaType:n,executorOptions:t}):/* istanbul ignore next -- @preserve */
null;return i?[new fx(i)]:[]};switch(e.view){case"live":"none"!==n.live.controls.thumbnails.mode&&a.push(...await r("recordings"===n.live.controls.thumbnails.media_type?"recordings":n.live.controls.thumbnails.events_media_type));break;case"media":a.push(...await r("clips"));break;case"clip":case"clips":case"snapshot":case"snapshots":case"recording":case"recordings":a.push(...await r(i))}return a.push(...this._getTimelineWindowViewModifier(e)),a.push(...this._getSeekTimeModifier(t?.selectResult?.time?.time)),a}_getTimelineWindowViewModifier(e){if(e.is("live")){const e=new Date,t=this._api.getConfigManager().getConfig()?.live;
/* istanbul ignore if: this if branch cannot be reached as if the config is
               empty this function is never called -- @preserve */
return t?[new ib({timeline:{window:{start:nh(e,{seconds:t.controls.timeline.window_seconds}),end:e}}})]:[]}return[new mx("timeline","window")]}_getSeekTimeModifier(e){return e?[new ib({mediaViewer:{seek:e}})]:[new mx("mediaViewer","seek")]}}class xx{constructor(e,t){this._view=null,this._epoch=this._createEpoch(),this._loadingIndex=1,this.setViewDefault=e=>this._setViewGeneric(this._viewFactory.getViewDefault.bind(this._viewFactory),e),this.setViewByParameters=e=>this._setViewGeneric(this._viewFactory.getViewByParameters.bind(this._viewFactory),e),this.setViewDefaultWithNewQuery=async e=>await this._setViewThenModifyAsync(this._viewFactory.getViewDefault.bind(this._viewFactory),this._viewQueryExecutor.getNewQueryModifiers.bind(this._viewQueryExecutor),e),this.setViewByParametersWithNewQuery=async e=>await this._setViewThenModifyAsync(this._viewFactory.getViewByParameters.bind(this._viewFactory),this._viewQueryExecutor.getNewQueryModifiers.bind(this._viewQueryExecutor),e),this.setViewByParametersWithExistingQuery=async e=>await this._setViewThenModifyAsync(this._viewFactory.getViewByParameters.bind(this._viewFactory),this._viewQueryExecutor.getExistingQueryModifiers.bind(this._viewQueryExecutor),e),this.initialize=async()=>(this._api.getQueryStringManager().hasViewRelatedActionsToRun()||this.setViewDefaultWithNewQuery({failSafe:!0}),!0),this._api=e,this._viewFactory=t?.viewFactory??new px(e),this._viewQueryExecutor=t?.viewQueryExecutor??new wx(e)}getEpoch(){return this._epoch}_createEpoch(e){return{manager:this,...e&&{oldView:e}}}getView(){return this._view}hasView(){return!!this.getView()}reset(){this._view&&this._setView(null)}_setViewGeneric(e,t){let n=null;try{n=e({baseView:this._view,...t})}catch(e){this._api.getMessageManager().setErrorIfHigherPriority(e)}n&&this._setView(n)}_markViewLoadingQuery(e,t){return e.mergeInContext({loading:{query:t}})}_markViewAsNotLoadingQuery(e){return e.removeContextProperty("loading","query")}async _setViewThenModifyAsync(e,t,n){let i=null;try{i=e({baseView:this._view,...n,params:{query:null,queryResults:null,...n?.params}})}catch(e){this._api.getMessageManager().setErrorIfHigherPriority(e)}if(!i)return;if(this._view&&this._shouldAdoptQueryAndResults(i))return i.query=this._view.query,i.queryResults=this._view.queryResults,this._markViewAsNotLoadingQuery(i),void this._setView(i);const a=this._loadingIndex++;this._markViewLoadingQuery(i,a),this._setView(i);let r=null,s=null;try{r=await t(i,n?.queryExecutorOptions)}catch(e){s=e}if(this._view&&this.hasMajorMediaChange(this._view,i))return void(this._view.context?.loading?.query===a&&this._setView(this._markViewAsNotLoadingQuery(this._view.clone())));if(s)return void this._api.getMessageManager().setErrorIfHigherPriority(s);
/* istanbul ignore if: the if path cannot be reached as the view is set
        above -- @preserve */if(!this._view)return;const o=this._view.clone();this._view.context?.loading?.query===a&&this._markViewAsNotLoadingQuery(o),ux(o,r),this._setView(o)}_shouldAdoptQueryAndResults(e){const t=this._view?.isViewerView()&&e?.isGalleryView(),n=e?.getDefaultMediaType(),i=ox.getMediaType(this._view?.query)===n;return!!t&&i}setViewWithMergedContext(e){if(this._view)return this._setView(this._view?.clone().mergeInContext(e))}isViewSupportedByCamera(e,t){return!!cx(this._api.getCameraManager(),t,e).size}hasMajorMediaChange(e,t){const n=t??this._view;return!!e!=!!n||e?.view!==n?.view||e?.camera!==n?.camera||"live"===n?.view&&e&&zy(e)!==zy(n)||"live"!==n?.view&&e?.queryResults!==n?.queryResults}_setView(e){const t=this._view;K_(this._api.getConfigManager().getCardWideConfig(),"Frigate Card view change: ",e),this._view=e,this._epoch=this._createEpoch(t),this.hasMajorMediaChange(t)&&this._api.getMediaLoadedInfoManager().clear(),t?.view!==e?.view&&this._api.getCardElementManager().scrollReset(),this._api.getMessageManager().reset(),this._api.getStyleManager().setExpandedMode(),this._api.getConditionsManager()?.setState({view:e?.view,camera:e?.camera,displayMode:e?.displayMode??void 0}),this._api.getCardElementManager().update()}}class Mx{constructor(e,t,n,i){this._deviceRegistryManager=new py(new hy((e=>e.id))),this._entityRegistryManager=new _y(new hy((e=>e.entity_id))),this._resolvedMediaCache=new yy,this._actionsManager=new Mb(this),this._automationsManager=new Cb(this),this._cameraManager=new uy(this),this._cameraURLManager=new Sb(this),this._configManager=new _w(this),this._defaultManager=new vw(this),this._downloadManager=new xw(this),this._expandManager=new Mw(this),this._fullscreenManager=new Aw(this),this._hassManager=new Tw(this),this._initializationManager=new Nb(this),this._interactionManager=new Lw(this),this._keyboardStateManager=new Nw(this),this._mediaLoadedInfoManager=new Zw(this),this._mediaPlayerManager=new Yw(this),this._messageManager=new Kw(this),this._microphoneManager=new Jw(this),this._queryStringManager=new Xw(this),this._statusBarItemManager=new ex(this),this._styleManager=new tx(this),this._triggersManager=new nx(this),this._viewManager=new xx(this),e.addController(this),this._conditionsManager=new hw(this,i),this._cardElementManager=new Fb(this,e,t,n)}getActionsManager(){return this._actionsManager}getAutomationsManager(){return this._automationsManager}getCameraManager(){return this._cameraManager}createCameraManager(){this._cameraManager=new uy(this)}getCameraURLManager(){return this._cameraURLManager}getCardElementManager(){return this._cardElementManager}getConditionsManager(){return this._conditionsManager}static async getConfigElement(){return await import("./editor-2858b7fe.js"),document.createElement("frigate-card-editor")}getConfigManager(){return this._configManager}getDefaultManager(){return this._defaultManager}getDeviceRegistryManager(){return this._deviceRegistryManager}getDownloadManager(){return this._downloadManager}getEntityRegistryManager(){return this._entityRegistryManager}getExpandManager(){return this._expandManager}getFullscreenManager(){return this._fullscreenManager}getHASSManager(){return this._hassManager}getInitializationManager(){return this._initializationManager}getInteractionManager(){return this._interactionManager}getKeyboardStateManager(){return this._keyboardStateManager}getMediaLoadedInfoManager(){return this._mediaLoadedInfoManager}getMediaPlayerManager(){return this._mediaPlayerManager}getMessageManager(){return this._messageManager}getMicrophoneManager(){return this._microphoneManager}createMicrophoneManager(){this._microphoneManager=new Jw(this)}getQueryStringManager(){return this._queryStringManager}getResolvedMediaCache(){return this._resolvedMediaCache}getStatusBarItemManager(){return this._statusBarItemManager}static getStubConfig(e){return{cameras:[{camera_entity:e.find((e=>e.startsWith("camera.")))??"camera.demo"}]}}getStyleManager(){return this._styleManager}getTriggersManager(){return this._triggersManager}getViewManager(){return this._viewManager}hostConnected(){this.getCardElementManager().elementConnected()}hostDisconnected(){this.getCardElementManager().elementDisconnected()}}class Cx{constructor(){this._dynamicMenuButtons=[]}addDynamicMenuButton(e){this._dynamicMenuButtons.includes(e)||this._dynamicMenuButtons.push(e)}removeDynamicMenuButton(e){this._dynamicMenuButtons=this._dynamicMenuButtons.filter((t=>t!=e))}calculateButtons(e,t,n,i){return[this._getDefaultButton(t),this._getCamerasButton(t,n,i?.view),this._getSubstreamsButton(t,n,i?.view),this._getLiveButton(t,i?.view,i?.viewManager),this._getClipsButton(t,i?.view,i?.viewManager),this._getSnapshotsButton(t,i?.view,i?.viewManager),this._getRecordingsButton(t,i?.view,i?.viewManager),this._getImageButton(t,i?.view,i?.viewManager),this._getTimelineButton(t,i?.view,i?.viewManager),this._getDownloadButton(t,n,i?.view),this._getCameraUIButton(t,i?.showCameraUIButton),this._getMicrophoneButton(t,i?.microphoneManager,i?.currentMediaLoadedInfo),this._getExpandButton(t,i?.inExpandedMode),this._getFullscreenButton(t,i?.inFullscreenMode),this._getCastButton(e,t,n,i?.view,i?.mediaPlayerController),this._getPlayPauseButton(t,i?.currentMediaLoadedInfo),this._getMuteUnmuteButton(t,i?.currentMediaLoadedInfo),this._getScreenshotButton(t,i?.currentMediaLoadedInfo),this._getDisplayModeButton(t,n,i?.view),this._getPTZControlsButton(t,n,i?.view),this._getPTZHomeButton(t,n,i?.view),...this._dynamicMenuButtons.map((e=>({style:this._getStyleFromActions(t,e,i),...e})))].filter(mf)}_getDefaultButton(e){return{icon:"frigate",...e.menu.buttons.frigate,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.frigate"),permanent:!0,tap_action:"hidden"===e.menu?.style?Mf("menu_toggle"):Mf("default"),hold_action:Mf("diagnostics")}}_getCamerasButton(e,t,n){const i=t.getStore().getCameraIDsWithCapability("menu");if(i.size>1){const a=Array.from(i,(e=>{const i=Cf("camera_select",e),a=t.getCameraMetadata(e);return{enabled:!0,icon:a?.icon.icon,entity:a?.icon.entity,state_color:!0,title:a?.title,selected:n?.camera===e,...i&&{tap_action:i}}}));return{icon:"mdi:video-switch",...e.menu.buttons.cameras,type:"custom:frigate-card-menu-submenu",title:Y_("config.menu.buttons.cameras"),items:a}}return null}_getSubstreamsButton(e,t,n){if(!n)return null;const i=t.getStore().getAllDependentCameras(n.camera,"substream");if(i.size&&n.is("live")){const a=[...i].filter((e=>e!==n.camera)),r=[n.camera,...a],s=zy(n);if(2===r.length)return{icon:"mdi:video-input-component",style:s!==n.camera?this._getEmphasizedStyle():{},title:Y_("config.menu.buttons.substreams"),...e.menu.buttons.substreams,type:"custom:frigate-card-menu-icon",tap_action:Mf(jy(n)?"live_substream_off":"live_substream_on")};if(r.length>2){const i=Array.from(r,(e=>{const n=Cf("live_substream_select",e),i=t.getCameraMetadata(e)??void 0;return{enabled:!0,icon:i?.icon.icon,entity:i?.icon.entity,state_color:!0,title:i?.title,selected:s===e,...n&&{tap_action:n}}}));return{icon:"mdi:video-input-component",title:Y_("config.menu.buttons.substreams"),style:s!==n.camera?this._getEmphasizedStyle():{},...e.menu.buttons.substreams,type:"custom:frigate-card-menu-submenu",items:i}}}return null}_getLiveButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"live")?{icon:"mdi:cctv",...e.menu.buttons.live,type:"custom:frigate-card-menu-icon",title:Y_("config.view.views.live"),style:t.is("live")?this._getEmphasizedStyle():{},tap_action:Mf("live")}:null}_getClipsButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"clips")?{icon:"mdi:filmstrip",...e.menu.buttons.clips,type:"custom:frigate-card-menu-icon",title:Y_("config.view.views.clips"),style:t?.is("clips")?this._getEmphasizedStyle():{},tap_action:Mf("clips"),hold_action:Mf("clip")}:null}_getSnapshotsButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"snapshots")?{icon:"mdi:camera",...e.menu.buttons.snapshots,type:"custom:frigate-card-menu-icon",title:Y_("config.view.views.snapshots"),style:t?.is("snapshots")?this._getEmphasizedStyle():{},tap_action:Mf("snapshots"),hold_action:Mf("snapshot")}:null}_getRecordingsButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"recordings")?{icon:"mdi:album",...e.menu.buttons.recordings,type:"custom:frigate-card-menu-icon",title:Y_("config.view.views.recordings"),style:t.is("recordings")?this._getEmphasizedStyle():{},tap_action:Mf("recordings"),hold_action:Mf("recording")}:null}_getImageButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"image")?{icon:"mdi:image",...e.menu.buttons.image,type:"custom:frigate-card-menu-icon",title:Y_("config.view.views.image"),style:t?.is("image")?this._getEmphasizedStyle():{},tap_action:Mf("image")}:null}_getTimelineButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"timeline")?{icon:"mdi:chart-gantt",...e.menu.buttons.timeline,type:"custom:frigate-card-menu-icon",title:Y_("config.view.views.timeline"),style:t.is("timeline")?this._getEmphasizedStyle():{},tap_action:Mf("timeline")}:null}_getDownloadButton(e,t,n){const i=n?.queryResults?.getSelectedResult(),a=i?t?.getMediaCapabilities(i):null;return n?.isViewerView()&&a?.canDownload&&!kb()?{icon:"mdi:download",...e.menu.buttons.download,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.download"),tap_action:Mf("download")}:null}_getCameraUIButton(e,t){return t?{icon:"mdi:web",...e.menu.buttons.camera_ui,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.camera_ui"),tap_action:Mf("camera_ui")}:null}_getMicrophoneButton(e,t,n){if(t&&n?.capabilities?.supports2WayAudio){const n=t.isForbidden()||!t.isSupported(),i=t.isMuted(),a=e.menu.buttons.microphone.type;return{icon:n?"mdi:microphone-message-off":i?"mdi:microphone-off":"mdi:microphone",...e.menu.buttons.microphone,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.microphone"),style:n||i?{}:this._getEmphasizedStyle(!0),...!n&&"momentary"===a&&{start_tap_action:Mf("microphone_unmute"),end_tap_action:Mf("microphone_mute")},...!n&&"toggle"===a&&{tap_action:Mf(i?"microphone_unmute":"microphone_mute")}}}return null}_getExpandButton(e,t){return{icon:t?"mdi:arrow-collapse-all":"mdi:arrow-expand-all",...e.menu.buttons.expand,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.expand"),tap_action:Mf("expand"),style:t?this._getEmphasizedStyle():{}}}_getFullscreenButton(e,t){return kb()?null:{icon:t?"mdi:fullscreen-exit":"mdi:fullscreen",...e.menu.buttons.fullscreen,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.fullscreen"),tap_action:Mf("fullscreen"),style:t?this._getEmphasizedStyle():{}}}_getCastButton(e,t,n,i,a){if(!i)return null;const r=n.getStore().getCameraConfig(i.camera);if(a?.hasMediaPlayers()&&(i.isViewerView()||i.is("live")&&r?.camera_entity)){const n=a.getMediaPlayers().map((t=>{const n=Ib(e,t)||t,i=e.states[t],a=Sf(t,"play"),r=Sf(t,"stop"),s=!i||"unavailable"===i.state;return{enabled:!0,selected:!1,entity:t,state_color:!1,title:n,disabled:s,...!s&&a&&{tap_action:a},...!s&&r&&{hold_action:r}}}));return{icon:"mdi:cast",...t.menu.buttons.media_player,type:"custom:frigate-card-menu-submenu",title:Y_("config.menu.buttons.media_player"),items:n}}return null}_getPlayPauseButton(e,t){if(t&&t.player&&t.capabilities?.supportsPause){const n=t.player.isPaused();return{icon:n?"mdi:play":"mdi:pause",...e.menu.buttons.play,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.play"),tap_action:Mf(n?"play":"pause")}}return null}_getMuteUnmuteButton(e,t){if(t&&t.player&&t?.capabilities?.hasAudio){const n=t.player.isMuted();return{icon:n?"mdi:volume-off":"mdi:volume-high",...e.menu.buttons.mute,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.mute"),tap_action:Mf(n?"unmute":"mute")}}return null}_getScreenshotButton(e,t){return t&&t.player?{icon:"mdi:monitor-screenshot",...e.menu.buttons.screenshot,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.screenshot"),tap_action:Mf("screenshot")}:null}_getDisplayModeButton(e,t,n){const i=n?cx(t,n.view):null;if(n?.supportsMultipleDisplayModes()&&i&&i.size>1){const t=n.isGrid();return{icon:t?"mdi:grid-off":"mdi:grid",...e.menu.buttons.display_mode,style:t?this._getEmphasizedStyle():{},type:"custom:frigate-card-menu-icon",title:Y_(t?"display_modes.single":"display_modes.grid"),tap_action:(a=t?"single":"grid",{action:"fire-dom-event",frigate_card_action:"display_mode_select",display_mode:a,...r?.cardID&&{card_id:r.cardID}})}}var a,r;return null}_getPTZControlsButton(e,t,n){const i=n?.is("live")?e.live.controls.ptz:n?.isViewerView()?e.media_viewer.controls.ptz:null;if(!n||!i)return null;const a=Uy(n,{cameraManager:t});if(a){const t=void 0!==n.context?.ptzControls?.enabled?n.context.ptzControls.enabled:"on"===i.mode||"auto"===i.mode&&"ptz"===a.type;return{icon:"mdi:pan",...e.menu.buttons.ptz_controls,style:t?this._getEmphasizedStyle():{},type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.ptz_controls"),tap_action:(r=!t,{action:"fire-dom-event",frigate_card_action:"ptz_controls",enabled:r,...s?.cardID&&{card_id:s.cardID}})}}var r,s;return null}_getPTZHomeButton(e,t,n){const i=n?Uy(n,{cameraManager:t}):null;return!i||(("digital"===i.type&&n?.context?.zoom?.[i.targetID]?.observed?.isDefault)??1)?null:{icon:"mdi:home",...e.menu.buttons.ptz_home,type:"custom:frigate-card-menu-icon",title:Y_("config.menu.buttons.ptz_home"),tap_action:kf({targetID:i.targetID})}}_getEmphasizedStyle(e){return e?{animation:"pulse 3s infinite",color:"var(--frigate-card-menu-button-critical-color)"}:{color:"var(--frigate-card-menu-button-active-color)"}}_getStyleFromActions(e,t,n){for(const i of[t.tap_action,t.double_tap_action,t.hold_action,t.start_tap_action,t.end_tap_action]){const t=Array.isArray(i)?i:[i];for(const i of t){if(!i||"fire-dom-event"!==i.action||!("frigate_card_action"in i))continue;const t=i;if(Go.some((e=>e===t.frigate_card_action&&n?.view?.is(t.frigate_card_action)))||"default"===t.frigate_card_action&&n?.view?.is(e.view.default)||"fullscreen"===t.frigate_card_action&&n?.inFullscreenMode||"camera_select"===t.frigate_card_action&&n?.view?.camera===t.camera)return this._getEmphasizedStyle()}}return{}}}const Sx=(e,t)=>{t instanceof Error&&Km(e,"message",{message:t.message,type:"error",...t instanceof Oo&&{context:t.context}})};let kx=class extends oe{constructor(){super(...arguments),this._root=null}createRenderRoot(){return this}_createRoot(){const e=customElements.get("hui-conditional-element");if(!e||!this.hass)throw new Error(Y_("error.could_not_render_elements"));const t=new e;t.hass=this.hass;const n={type:"conditional",conditions:[],elements:this.elements};try{t.setConfig(n)}catch(e){throw af(e,console.error),new Oo(Y_("error.invalid_elements_config"))}return t}willUpdate(e){try{!this.elements||this._root&&!e.has("elements")||(this._root=this._createRoot())}catch(e){return Sx(this,e)}}render(){return U`${this._root||""}`}updated(){this.hass&&this._root&&(this._root.hass=this.hass)}};e([he({attribute:!1})],kx.prototype,"elements",void 0),e([he({attribute:!1})],kx.prototype,"conditionsManagerEpoch",void 0),e([he({attribute:!1})],kx.prototype,"hass",void 0),kx=e([le("frigate-card-elements-core")],kx);let $x=class extends oe{constructor(){super(...arguments),this._menuRemoveHandler=e=>{Km(this,"menu:remove",e.detail)},this._statusBarRemoveHandler=e=>{Km(this,"status-bar:remove",e.detail)},this._menuAddHandler=e=>{const t=e.composedPath();t.length&&this._addHandler(t[0],"frigate-card:menu:remove",this._menuRemoveHandler)},this._statusBarAddHandler=e=>{const t=e.composedPath();t.length&&this._addHandler(t[0],"frigate-card:status-bar:add",this._statusBarRemoveHandler)}}_addHandler(e,t,n){e.removeEventListener(t,n),e.addEventListener(t,n)}connectedCallback(){super.connectedCallback(),this.addEventListener("frigate-card:menu:add",this._menuAddHandler),this.addEventListener("frigate-card:status-bar:add",this._statusBarAddHandler)}disconnectedCallback(){this.removeEventListener("frigate-card:menu:add",this._menuAddHandler),this.addEventListener("frigate-card:status-bar:add",this._statusBarAddHandler),super.disconnectedCallback()}render(){return U`<frigate-card-elements-core
      .hass=${this.hass}
      .conditionsManagerEpoch=${this.conditionsManagerEpoch}
      .elements=${this.elements}
    >
    </frigate-card-elements-core>`}static get styles(){return s(":host {\n  position: absolute;\n  inset: 0;\n  overflow: hidden;\n  pointer-events: none;\n}\n\n.element {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  pointer-events: auto;\n}\n\nhui-error-card.element {\n  inset: 0px;\n  transform: unset;\n}")}};e([he({attribute:!1})],$x.prototype,"hass",void 0),e([he({attribute:!1})],$x.prototype,"conditionsManagerEpoch",void 0),e([he({attribute:!1})],$x.prototype,"elements",void 0),$x=e([le("frigate-card-elements")],$x);let Ex=class extends oe{setConfig(e){this._config=e}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.className=""}render(){if(function(e,t){if(!t)return!0;const n=new dw(t,{bubbles:!0,composed:!0});return e.dispatchEvent(n),n.evaluation??!1}(this,this._config?.conditions))return U` <frigate-card-elements-core
        .hass=${this.hass}
        .elements=${this._config?.elements}
      >
      </frigate-card-elements-core>`}};e([he({attribute:!1,hasChanged:()=>!0})],Ex.prototype,"hass",void 0),Ex=e([le("frigate-card-conditional")],Ex);class Ax extends oe{constructor(e){super(),this._config=null,this._eventCategory=e}setConfig(e){this._config=e}connectedCallback(){super.connectedCallback(),this._config&&Km(this,`${this._eventCategory}:add`,this._config)}disconnectedCallback(){this._config&&Km(this,`${this._eventCategory}:remove`,this._config),super.disconnectedCallback()}}e([ge()],Ax.prototype,"_config",void 0);class Ix extends Ax{constructor(){super("menu")}}let Tx=class extends Ix{};Tx=e([le("frigate-card-menu-icon")],Tx);let zx=class extends Ix{};zx=e([le("frigate-card-menu-state-icon")],zx);let jx=class extends Ix{};jx=e([le("frigate-card-menu-submenu")],jx);let Ox=class extends Ix{};Ox=e([le("frigate-card-menu-submenu-select")],Ox);class Dx extends Ax{constructor(){super("status-bar")}}let Rx=class extends Dx{};Rx=e([le("frigate-card-status-bar-icon")],Rx);let Px=class extends Dx{};Px=e([le("frigate-card-status-bar-image")],Px);let Lx=class extends Dx{};Lx=e([le("frigate-card-status-bar-string")],Lx);var Nx="Wed, 22 Jan 2025 03:43:55 GMT",Fx="805a211",Vx="Tue, 21 Jan 2025 19:42:47 -0800";const Hx=bi.object({domain:bi.string(),version:bi.string().optional()}).passthrough(),Bx="hass_web_proxy",Ux=(e,t)=>`/api/${Bx}/v${t??0}/?url=${encodeURIComponent(e)}`,qx=(e,t,n="media")=>(e=>e.config.components.includes(Bx))(e)&&!!t[n];async function Wx(e,t,n){await e.callService(Bx,"create_proxied_url",{url_pattern:t,...n&&{url_id:n.urlID,ssl_verification:n.sslVerification,ssl_ciphers:n.sslCiphers,open_limit:n.openLimit,ttl:n.ttl,allow_unauthenticated:n.allowUnauthenticated}})}const Zx=async(e,t)=>{let n=null;if(t)try{n=await(async(e,t)=>await Rv(e,Hx,{type:"manifest/get",integration:t}))(t,e)}catch(e){}return{detected:!!n,...n?.version&&{version:n.version}}};class Qx{getCustomIcon(e){switch(e?.icon){case"frigate":return'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.876 22.744c.087.692.812 1.163.379 1.271-.433.109-2.327-3.436-2.76-4.952-.433-1.515-.677-3.22-.569-4.194.109-.974 5.71-2.49 5.71-2.895 0-.406-1.813-.028-1.894-.352-.081-.325 1.37-.13 1.759-.65.609-.811 1.38-.676 1.867-1.11.487-.432 1.082-2.083 1.19-2.786.109-.704-1.082-1.516-1.407-2.057-.324-.541.704-.92 3.194-1.948C14.835 2.042 22.735-.231 22.844.04c.108.27-2.598 1.407-4.492 2.11-1.894.704-4.98 2.057-4.98 2.436s.163.677.055 1.543c-.108.866-.121 1.27-.325 1.84-.135.379-.27 1.272 0 2.083.217.65.92 1.137 1.245 1.245.27.018 1.017.043 1.84 0 1.028-.054 2.49.054 2.49.325 0 .27-2.22.108-2.22.487s2.274-.054 2.22.325c-.054.378-1.895.216-2.869.216-.78 0-1.93-.036-2.435-.216l-.108.378c-.18 0-.558.109-.948.109-.487 0-.514.162-1.407.162s-.622-.054-1.434-.108c-.812-.054-3.842 2.273-4.384 3.03-.54.758-.216 2.598-.216 3.437 0 .754-.108 2.436 0 3.302z" fill="#000" style="fill:#fff;fill-opacity:1;stroke:none;stroke-width:.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/></svg>';case"motioneye":return'<svg xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><linearGradient id="d"><stop style="stop-color:#fff;stop-opacity:1" offset="0"/><stop style="stop-color:#585858;stop-opacity:1" offset="1"/></linearGradient><linearGradient id="b"><stop style="stop-color:#fff;stop-opacity:1" offset="0"/><stop style="stop-color:gray;stop-opacity:1" offset="1"/></linearGradient><linearGradient id="a"><stop style="stop-color:#4aa3e0;stop-opacity:1" offset="0"/><stop style="stop-color:#3096db;stop-opacity:1" offset="1"/></linearGradient><linearGradient id="c"><stop style="stop-color:#fff;stop-opacity:1" offset="0"/><stop style="stop-color:#585858;stop-opacity:1" offset="1"/></linearGradient><linearGradient xlink:href="#a" id="i" x1="26.602" y1="43.035" x2="26.602" y2="29.466" gradientUnits="userSpaceOnUse" gradientTransform="matrix(.96429 0 0 .96429 .914 .914)"/><linearGradient xlink:href="#b" id="e" gradientUnits="userSpaceOnUse" x1="26.446" y1="47.518" x2="26.446" y2="3.818"/><linearGradient xlink:href="#c" id="f" gradientUnits="userSpaceOnUse" x1="26.446" y1="47.518" x2="26.446" y2="3.818"/><linearGradient xlink:href="#d" id="g" gradientUnits="userSpaceOnUse" x1="26.446" y1="47.518" x2="26.446" y2="3.818"/><filter style="color-interpolation-filters:sRGB" id="h" x="-.02" y="-.14" width="1.041" height="1.208"><feFlood flood-opacity=".588" flood-color="#000" result="flood"/><feComposite in="flood" in2="SourceGraphic" operator="in" result="composite1"/><feGaussianBlur in="composite1" stdDeviation=".2" result="blur"/><feOffset dy="-.5" result="offset"/><feComposite in="SourceGraphic" in2="offset" result="composite2"/></filter></defs><path d="M8.935 40.515C5.365 36.547 3.2 31.358 3.2 25.6c0-12.371 10.029-22.4 22.4-22.4C37.971 3.2 48 13.229 48 25.6c0 5.737-2.161 10.952-5.708 14.915-1.696-.623-3.388-1.349-5.061-2.288a7.777 7.777 0 0 0 5.6-7.458c0-4.26-3.47-7.754-7.754-7.754-3.634 0-6.69 2.51-7.539 5.87h-3.876a7.784 7.784 0 0 0-7.539-5.87c-4.284 0-7.78 3.494-7.78 7.754 0 3.561 2.456 6.586 5.76 7.485-1.675.912-3.404 1.62-5.168 2.261zM25.6 26.462c.533-1.982 1.102-3.948 3.446-5.17L25.6 16.123l-3.446 5.17c2.053 1.454 3 3.237 3.446 5.169z" style="fill:url(#e);fill-opacity:1;stroke:none;filter:url(#filter4327)" transform="matrix(.49239 0 0 -.49239 -.605 24.564)"/><path d="M16.123 33.354a2.585 2.585 0 1 1 0-5.17 2.585 2.585 0 0 1 0 5.17z" style="fill:url(#f);fill-opacity:1;stroke:none;filter:url(#filter4327)" transform="matrix(.49239 0 0 -.49239 -.605 24.564)"/><path d="M35.077 33.354a2.585 2.585 0 1 1 0-5.17 2.585 2.585 0 0 1 0 5.17z" style="fill:url(#g);fill-opacity:1;stroke:none;filter:url(#filter4327)" transform="matrix(.49239 0 0 -.49239 -.605 24.564)"/><path style="fill:#d9d9d9;fill-opacity:1;stroke:none;filter:url(#h)" d="M25.6 47.2c-4.374 0-8.437-1.4-11.838-3.635 3.677-.394 7.305-1.343 11.423-3.375 4.166 2.123 8.434 3.01 12.28 3.453A21.465 21.465 0 0 1 25.6 47.2Z" transform="matrix(.51063 0 0 -.51063 -1.072 25.031)"/><path style="fill:url(#i);fill-opacity:1;stroke:none;filter:url(#filter4315)" d="M39.723 42.553c-4.329-.029-10.243-2.156-14.538-4.12-4.516 1.631-9.15 4.216-14.383 4.094a20.537 20.537 0 0 1-1.039-.052l-4.101-.337 3.894-1.299c5.342-1.74 10.04-2.85 14.175-10.026h3.738c4.12 7.134 9.06 8.325 14.15 10.026l3.842 1.247-3.998.389c-.545.052-1.121.082-1.74.078z" transform="matrix(.51063 0 0 -.51063 -1.072 25.031)"/></svg>';case"reolink":return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path style="fill:#fff;stroke-width:.0393282;fill-opacity:1" d="M17.037 23.965a1.724 1.724 0 0 1-.711-.285c-.13-.086-1.782-1.727-4.108-4.078-2.14-2.164-3.998-4.02-4.128-4.123a3.023 3.023 0 0 0-1.591-.677c-.185-.021-1.42-.039-2.745-.039H1.345l.007-7.394V-.025h6.204c3.98 0 6.36.015 6.637.041a7.269 7.269 0 0 1 5.579 3.501c.686 1.131 1.02 2.278 1.067 3.655.063 1.885-.574 3.66-1.831 5.1a7.592 7.592 0 0 1-2.93 2.025l-.319.118-1.951-1.98-1.951-1.979 1.046-.023c.576-.013 1.1-.037 1.165-.053.596-.151.95-.314 1.322-.611a3.05 3.05 0 0 0 1.138-2.067c.168-1.506-.771-2.87-2.263-3.29l-.315-.089-4.152-.012-4.159-.013V10.437h1.419c1.627.001 1.779.02 2.31.28.31.152.39.22 1.082.915 3.027 3.043 12.194 12.309 12.205 12.337.016.044-5.365.04-5.618-.004z"/></svg>';case"iris":return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g style="fill-opacity:.05;fill:#fff;stroke-width:1.0015748;stroke-dasharray:none"><path d="m13.73 15-3.9 6.76a9.984 9.984 0 0 0 8.49-2.01l-3.66-6.35M2.46 15c.92 2.92 3.15 5.26 5.99 6.34L12.12 15m-3.58-3-3.9-6.75A9.855 9.855 0 0 0 2 12c0 .68.07 1.35.2 2h7.49m12.11-4h-7.49l.29.5 4.76 8.25A9.93 9.93 0 0 0 22 12c0-.69-.07-1.36-.2-2m-.26-1c-.92-2.93-3.15-5.26-5.99-6.34L11.88 9M9.4 10.5l4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.84-6.32 2.25l3.66 6.35z" style="fill-opacity:1;fill:#fff;opacity:1;stroke-width:1.0015748;stroke-dasharray:none"/></g></svg>';default:return null}}createStateObjectForStateBadge(e,t){return e.states[t]?{...e.states[t],attributes:{...e.states[t].attributes,entity_picture:void 0,entity_picture_local:void 0}}:null}}let Yx=class extends oe{constructor(){super(...arguments),this.allowOverrideNonActiveStyles=!1,this._controller=new Qx,this._svg=null}willUpdate(e){if(e.has("icon")){const e=this._controller.getCustomIcon(this.icon);if(e){const t=document.createElement("svg");t.innerHTML=e,this._svg=t}else this._svg=null}}render(){if(this._svg)return U`${this._svg}`;if(this.hass&&this.icon?.entity){const e=this._controller.createStateObjectForStateBadge(this.hass,this.icon.entity);if(e)return U`<state-badge
          .color="${this.style.color??void 0}"
          .stateColor=${this.icon.stateColor??!0}
          .hass=${this.hass}
          .stateObj=${e}
          .overrideIcon=${this.icon.icon}
        ></state-badge>`}return this.icon?.icon?U`<ha-icon icon="${this.icon.icon}"></ha-icon>`:this.icon?.fallback?U`<ha-icon icon="${this.icon.fallback}"></ha-icon>`:U``}static get styles(){return s(":host {\n  display: inline-block;\n  width: var(--mdc-icon-size, 24px);\n  height: var(--mdc-icon-size, 24px);\n  --ha-icon-display: block;\n}\n\nha-icon,\nstate-badge,\nsvg {\n  display: block;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n}\n\nsvg path {\n  fill: currentColor !important;\n}\n\n:host([allow-override-non-active-styles]) state-badge {\n  --state-inactive-color: inherit;\n  --state-unavailable-color: inherit;\n}")}};e([he({attribute:!1})],Yx.prototype,"hass",void 0),e([he({attribute:!1})],Yx.prototype,"icon",void 0),e([he({attribute:"allow-override-non-active-styles",type:Boolean})],Yx.prototype,"allowOverrideNonActiveStyles",void 0),Yx=e([le("frigate-card-icon")],Yx);let Gx=class extends oe{render(){return U`<frigate-card-icon .icon=${{icon:"iris"}}></frigate-card-icon
      ><span>${"6.3.8"}</span>`}static get styles(){return s(":host {\n  width: intrinsic;\n  height: intrinsic;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n  background-color: var(--frigate-card-loading-background-color);\n  color: var(--frigate-card-loading-foreground-color);\n  transition: opacity 1.5s ease-in;\n  opacity: 1;\n}\n\n:host([loaded]) {\n  opacity: 0;\n}\n\nfrigate-card-icon {\n  margin-bottom: 20px;\n  height: 25%;\n  width: auto;\n  animation: rotate 8s linear infinite;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\nspan {\n  font-size: x-large;\n}")}};Gx=e([le("frigate-card-loading")],Gx);const Kx=(e,t)=>{Km(e,"action:execution-request",t)};class Jx{constructor(e){this._config=null,this._buttons=[],this._expanded=!1,this._host=e}setMenuConfig(e){this._config=e,this._host.style.setProperty("--frigate-card-menu-button-size",`${e.button_size}px`),this._host.setAttribute("data-style",e.style),this._host.setAttribute("data-position",e.position),this._host.setAttribute("data-alignment",e.alignment),this._sortButtons(),this._host.requestUpdate()}getMenuConfig(){return this._config}isExpanded(){return this._expanded}setButtons(e){this._buttons=e,this._sortButtons(),this._host.requestUpdate()}getButtons(e){const t=e=>!this._isHidingMenu()||this._expanded||!!e.permanent;return this._buttons.filter((n=>(e=>!1!==e.enabled)(n)&&(t=>t.alignment===e||"matching"===e&&!t.alignment)(n)&&t(n)))}setExpanded(e){this._expanded=e,pf(this._host,e,"expanded"),this._host.requestUpdate()}toggleExpanded(){this.setExpanded(!this._expanded)}actionHandler(e,t){if(e.stopPropagation(),e.detail.config&&(t=e.detail.config),!t)return;const n=e.detail.action,i=$f(n,t);if(!i)return;const a=ef(i);let r=!1;const s=a.filter((e=>mf(e)&&!this._isUnknownActionMenuToggleAction(e)));if(s.length!=a.length&&(r=!0),s.length&&Kx(this._host,{action:a,config:t}),this._isHidingMenu())if(r)this.setExpanded(!this._expanded);else{const e=$f("hold",t),i=$f("double_tap",t),a=$f("tap",t),r=$f("end_tap",t);"end_tap"!==n&&("start_tap"!==n||e||i||a||r)&&("end_tap"===n||r)||this.setExpanded(!1)}}_sortButtons(){this._buttons=Dv(this._buttons,(e=>(e.priority??0)+(this._isHidingMenu()&&e.permanent?Qo:0)),["desc"])}_isHidingMenu(){return"hidden"===this._config?.style}_isUnknownActionMenuToggleAction(e){const t=xf(e);return!!t&&"menu_toggle"==t.frigate_card_action}}const Xx=(e,t,n)=>{const i=e.states[t],a=n?.state?n.state:i?i.state:null;if(!a)return null;const r=Ge(t),s=i?i.attributes:null;return n?.entity?.translation_key&&e.localize(`component.${n.entity.platform}.entity.${r}.${n.entity.translation_key}.state.${a}`)||s?.device_class&&e.localize(`component.${r}.state.${s.device_class}.${a}`)||e.localize(`component.${r}.state._.${a}`)||a};let eM=class extends oe{_renderItem(e){if(!this.hass)return;const t=e.title??Ib(this.hass,e.entity),n=Re(e.style||{});return U`
      <mwc-list-item
        graphic=${ve(e.icon||e.entity?"icon":void 0)}
        ?twoline=${!!e.subtitle}
        ?selected=${e.selected}
        ?activated=${e.selected}
        ?disabled=${!1===e.enabled}
        aria-label="${t??""}"
        @action=${t=>{t.detail.config=e}}
        .actionHandler=${jf({hasHold:Ef(e.hold_action),hasDoubleClick:Ef(e.double_tap_action)})}
      >
        <span style="${n}">${t??""}</span>
        ${e.subtitle?U`<span slot="secondary" style="${n}">${e.subtitle}</span>`:""}
        <frigate-card-icon
          slot="graphic"
          .hass=${this.hass}
          .icon=${{icon:e.icon,entity:e.entity}}
          style="${n}"
        ></frigate-card-icon>
      </mwc-list-item>
    `}render(){if(!this.submenu)return U``;const e=this.submenu.items,t=Re(this.submenu.style||{});return U`
      <ha-button-menu
        corner=${"BOTTOM_LEFT"}
        @closed=${e=>e.stopPropagation()}
        @click=${e=>Af(e)}
      >
        <ha-icon-button
          style="${t}"
          slot="trigger"
          .label=${this.submenu.title||""}
          .actionHandler=${jf({allowPropagation:!0,hasHold:Ef(this.submenu.hold_action),hasDoubleClick:Ef(this.submenu.double_tap_action)})}
        >
          <frigate-card-icon
            ?allow-override-non-active-styles=${!0}
            style="${t}"
            .hass=${this.hass}
            .icon=${"string"==typeof this.submenu.icon?{icon:this.submenu.icon}:this.submenu.icon}
          ></frigate-card-icon>
        </ha-icon-button>
        ${e.map(this._renderItem.bind(this))}
      </ha-button-menu>
    `}static get styles(){return s("ha-icon-button {\n  color: var(--frigate-card-button-color);\n  background-color: var(--frigate-card-button-background);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  pointer-events: auto;\n}\n\nmwc-list-item {\n  z-index: 20;\n}\n\nha-icon-button {\n  --state-unavailable-color: var(--frigate-card-button-color);\n  --state-inactive-color: var(--frigate-card-button-color);\n  color: var(--frigate-card-menu-button-inactive-color);\n  background-color: var(--frigate-card-menu-button-background);\n}")}};e([he({attribute:!1})],eM.prototype,"hass",void 0),e([he({attribute:!1})],eM.prototype,"submenu",void 0),eM=e([le("frigate-card-submenu")],eM);let tM=class extends oe{shouldUpdate(e){const t=e.get("hass");return!e.has("hass")||!t||!this.submenuSelect||Ab(this.hass,t,[this.submenuSelect.entity])}async _refreshOptionTitles(){if(!this.hass||!this.submenuSelect)return;const e=this.submenuSelect.entity,t=this.hass.states[e],n=t?.attributes?.options,i=await(this.entityRegistryManager?.getEntity(this.hass,e))??null,a={};for(const t of n){const n=Xx(this.hass,e,{...i&&{entity:i},state:t});n&&(a[t]=n)}this._optionTitles=a}willUpdate(){if(!this.submenuSelect||!this.hass)return;this._optionTitles||this._refreshOptionTitles();const e=this.submenuSelect.entity,t=this.hass.states[e],n=t?.attributes?.options;if(!t||!n)return;const i=Ib(this.hass,e),a={...i&&{title:i},...this.submenuSelect,icon:{icon:this.submenuSelect.icon,entity:e,fallback:"mdi:format-list-bulleted"},type:"custom:frigate-card-menu-submenu",items:[]};delete a.options;const r=a.items;for(const i of n){const n=this._optionTitles?.[i]??i;r.push({state_color:!0,selected:t.state===i,enabled:!0,title:n||i,...(e.startsWith("select.")||e.startsWith("input_select."))&&{tap_action:{action:"perform-action",perform_action:e.startsWith("select.")?"select.select_option":"input_select.select_option",target:{entity_id:e},data:{option:i}}},...this.submenuSelect.options&&this.submenuSelect.options[i]})}this._generatedSubmenu=a}render(){return U` <frigate-card-submenu
      .hass=${this.hass}
      .submenu=${this._generatedSubmenu}
    ></frigate-card-submenu>`}};e([he({attribute:!1})],tM.prototype,"hass",void 0),e([he({attribute:!1})],tM.prototype,"submenuSelect",void 0),e([he({attribute:!1})],tM.prototype,"entityRegistryManager",void 0),e([ge()],tM.prototype,"_optionTitles",void 0),tM=e([le("frigate-card-submenu-select")],tM);let nM=class extends oe{constructor(){super(...arguments),this._controller=new Jx(this)}set menuConfig(e){this._controller.setMenuConfig(e)}set buttons(e){this._controller.setButtons(e)}set expanded(e){this._controller.setExpanded(e)}toggleMenu(){this._controller.toggleExpanded()}_renderButton(e){if(!this.hass)return;if("custom:frigate-card-menu-submenu"===e.type)return U` <frigate-card-submenu
        .hass=${this.hass}
        .submenu=${e}
        @action=${e=>this._controller.actionHandler(e)}
      >
      </frigate-card-submenu>`;if("custom:frigate-card-menu-submenu-select"===e.type)return U` <frigate-card-submenu-select
        .hass=${this.hass}
        .submenuSelect=${e}
        .entityRegistryManager=${this.entityRegistryManager}
        @action=${e=>this._controller.actionHandler(e)}
      >
      </frigate-card-submenu-select>`;const t=this.hass&&"custom:frigate-card-menu-state-icon"===e.type&&!e.title?Ib(this.hass,e.entity):e.title;return U` <ha-icon-button
      .actionHandler=${jf({hasHold:Ef(e.hold_action),hasDoubleClick:Ef(e.double_tap_action)})}
      .label=${t??""}
      @action=${t=>this._controller.actionHandler(t,e)}
    >
      <frigate-card-icon
        ?allow-override-non-active-styles=${!0}
        style="${Re(e.style||{})}"
        .hass=${this.hass}
        .icon=${{icon:e.icon,entity:e.entity,stateColor:e.state_color,fallback:"mdi:gesture-tap-button"}}
      ></frigate-card-icon>
    </ha-icon-button>`}_renderPerInstanceStyle(){const e=this._controller.getMenuConfig();if(!e)return;const t=e.position,n=e.style,i=e.alignment,a=e=>`\n        var(--frigate-card-menu-override-${e},\n        var(--frigate-card-menu-position-${t}-alignment-${i}-style-${n}-${e},\n        var(--frigate-card-menu-position-${t}-alignment-${i}-${e},\n        var(--frigate-card-menu-position-${t}-${e},\n        var(--frigate-card-menu-style-${n}-${e},\n        var(--frigate-card-menu-alignment-${i}-${e},\n        var(--frigate-card-menu-${e})))))))`;return U`<style>
      :host(${`[data-position='${t}'][data-style='${n}'][data-alignment='${i}']`+("hidden"===n?"[expanded]":"")}) {
        background: ${a("background")};

        ha-icon-button {
          color: ${a("button-inactive-color")};
          background: ${a("button-background")};
        }
      }
    </style>`}render(){const e=this._controller.getMenuConfig(),t=e?.style;if(!e||"none"===t)return;const n=this._controller.getButtons("matching"),i=this._controller.getButtons("opposing");return U` ${this._renderPerInstanceStyle()}
      <div
        class="matching"
        style="${Re({flex:String(n.length)})}"
      >
        ${n.map((e=>this._renderButton(e)))}
      </div>
      <div
        class="opposing"
        style="${Re({flex:String(i.length)})}"
      >
        ${i.map((e=>this._renderButton(e)))}
      </div>`}static get styles(){return s('ha-icon-button {\n  color: var(--frigate-card-button-color);\n  background-color: var(--frigate-card-button-background);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  --frigate-card-menu-button-size: 40px;\n  --mdc-icon-button-size: var(--frigate-card-menu-button-size);\n  --mdc-icon-size: calc(var(--mdc-icon-button-size) / 2);\n  pointer-events: auto;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  overflow: visible;\n}\n\n:host([data-style=outside]) {\n  width: 100%;\n}\n\n/*******************************************************\n * Non-hover styles should not interact with the pointer\n *******************************************************/\n:host(:not([data-style*=hover])) {\n  pointer-events: none;\n}\n\n/***********************************\n * Aligned divs: matching & opposing\n ***********************************/\ndiv.matching,\ndiv.opposing {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  align-items: flex-start;\n  min-width: 0px;\n  min-height: 0px;\n}\n\ndiv.matching {\n  justify-content: flex-start;\n}\n\ndiv.opposing {\n  justify-content: flex-end;\n}\n\n/********************************************************\n * Hack: Ensure host & div expand for column flex layouts\n ********************************************************/\n:host(:not([data-style=outside])[data-position=left]) {\n  writing-mode: vertical-lr;\n}\n\n:host(:not([data-style=outside])[data-position=right]) {\n  writing-mode: vertical-rl;\n}\n\n:host(:not([data-style=outside])[data-style=overlay][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style=overlay][data-position=right]) div > *,\n:host(:not([data-style=outside])[data-style*=hover][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style*=hover][data-position=right]) div > *,\n:host(:not([data-style=outside])[data-style=hidden][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style=hidden][data-position=right]) div > * {\n  writing-mode: horizontal-tb;\n}\n\n/**********************\n * "Reverse" alignments\n **********************/\n:host(:not([data-style=outside])[data-position=left][data-alignment=bottom]),\n:host(:not([data-style=outside])[data-position=right][data-alignment=bottom]),\n:host([data-position=top][data-alignment=right]),\n:host([data-position=bottom][data-alignment=right]),\n:host(:not([data-style=outside])[data-position=left][data-alignment=bottom]) div,\n:host(:not([data-style=outside])[data-position=right][data-alignment=bottom]) div,\n:host([data-position=top][data-alignment=right]) div,\n:host([data-position=bottom][data-alignment=right]) div {\n  flex-direction: row-reverse;\n}\n\n/****************************\n * Wrap upwards on the bottom\n ****************************/\n:host(:not([data-style=outside])[data-position=bottom]) div {\n  flex-wrap: wrap-reverse;\n}\n\n/********************************************\n * Positioning for absolute based menu styles\n ********************************************/\n:host([data-style=overlay][data-position=top]),\n:host([data-style=overlay][data-position=bottom]),\n:host([data-style*=hover][data-position=top]),\n:host([data-style*=hover][data-position=bottom]),\n:host([data-style=hidden][data-position=top]),\n:host([data-style=hidden][data-position=bottom]) {\n  width: 100%;\n  height: auto;\n}\n\n:host([data-style=overlay][data-position=left]),\n:host([data-style=overlay][data-position=right]),\n:host([data-style*=hover][data-position=left]),\n:host([data-style*=hover][data-position=right]),\n:host([data-style=hidden][data-position=left]),\n:host([data-style=hidden][data-position=right]) {\n  width: auto;\n  height: 100%;\n}\n\n/************\n * Menu theme\n ************/\n:host([data-style=hidden]:not([expanded])) ha-icon-button {\n  background: var(--frigate-card-menu-background);\n}\n\n:host ha-icon-button {\n  --state-unavailable-color: var(--frigate-card-button-color);\n  --state-inactive-color: var(--frigate-card-button-color);\n}')}};
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
function iM(e){return null==e}e([he({attribute:!1})],nM.prototype,"entityRegistryManager",void 0),e([he({attribute:!1})],nM.prototype,"hass",void 0),nM=e([le("frigate-card-menu")],nM);var aM=function(e,t){var n,i="";for(n=0;n<t;n+=1)i+=e;return i},rM={isNothing:iM,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:iM(e)?[]:[e]},repeat:aM,isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,i,a,r;if(t)for(n=0,i=(r=Object.keys(t)).length;n<i;n+=1)e[a=r[n]]=t[a];return e}};function sM(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),i+" "+n):i}function oM(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=sM(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}oM.prototype=Object.create(Error.prototype),oM.prototype.constructor=oM,oM.prototype.toString=function(e){return this.name+": "+sM(this,e)};var cM=oM;function lM(e,t,n,i,a){var r="",s="",o=Math.floor(a/2)-1;return i-t>o&&(t=i-o+(r=" ... ").length),n-i>o&&(n=i+o-(s=" ...").length),{str:r+e.slice(t,n).replace(/\t/g,"")+s,pos:i-t+r.length}}function dM(e,t){return rM.repeat(" ",t-e.length)+e}var uM=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,i=/\r?\n|\r|\0/g,a=[0],r=[],s=-1;n=i.exec(e.buffer);)r.push(n.index),a.push(n.index+n[0].length),e.position<=n.index&&s<0&&(s=a.length-2);s<0&&(s=a.length-1);var o,c,l="",d=Math.min(e.line+t.linesAfter,r.length).toString().length,u=t.maxLength-(t.indent+d+3);for(o=1;o<=t.linesBefore&&!(s-o<0);o++)c=lM(e.buffer,a[s-o],r[s-o],e.position-(a[s]-a[s-o]),u),l=rM.repeat(" ",t.indent)+dM((e.line-o+1).toString(),d)+" | "+c.str+"\n"+l;for(c=lM(e.buffer,a[s],r[s],e.position,u),l+=rM.repeat(" ",t.indent)+dM((e.line+1).toString(),d)+" | "+c.str+"\n",l+=rM.repeat("-",t.indent+d+3+c.pos)+"^\n",o=1;o<=t.linesAfter&&!(s+o>=r.length);o++)c=lM(e.buffer,a[s+o],r[s+o],e.position-(a[s]-a[s+o]),u),l+=rM.repeat(" ",t.indent)+dM((e.line+o+1).toString(),d)+" | "+c.str+"\n";return l.replace(/\n$/,"")},hM=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],gM=["scalar","sequence","mapping"];var pM=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===hM.indexOf(t))throw new cM('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===gM.indexOf(this.kind))throw new cM('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function mM(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,i){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=i)})),n[t]=e})),n}function fM(e){return this.extend(e)}fM.prototype.extend=function(e){var t=[],n=[];if(e instanceof pM)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new cM("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof pM))throw new cM("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new cM("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new cM("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof pM))throw new cM("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var i=Object.create(fM.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=mM(i,"implicit"),i.compiledExplicit=mM(i,"explicit"),i.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return n}(i.compiledImplicit,i.compiledExplicit),i};var _M=fM,vM=new pM("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),yM=new pM("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),bM=new pM("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),wM=new _M({explicit:[vM,yM,bM]});var xM=new pM("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var MM=new pM("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function CM(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function SM(e){return 48<=e&&e<=55}function kM(e){return 48<=e&&e<=57}var $M=new pM("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,i=0,a=!1;if(!n)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===n)return!0;if("b"===(t=e[++i])){for(i++;i<n;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;a=!0}return a&&"_"!==t}if("x"===t){for(i++;i<n;i++)if("_"!==(t=e[i])){if(!CM(e.charCodeAt(i)))return!1;a=!0}return a&&"_"!==t}if("o"===t){for(i++;i<n;i++)if("_"!==(t=e[i])){if(!SM(e.charCodeAt(i)))return!1;a=!0}return a&&"_"!==t}}if("_"===t)return!1;for(;i<n;i++)if("_"!==(t=e[i])){if(!kM(e.charCodeAt(i)))return!1;a=!0}return!(!a||"_"===t)},construct:function(e){var t,n=e,i=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(i=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return i*parseInt(n.slice(2),2);if("x"===n[1])return i*parseInt(n.slice(2),16);if("o"===n[1])return i*parseInt(n.slice(2),8)}return i*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!rM.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),EM=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var AM=/^[-+]?[0-9]+e/;var IM=new pM("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!EM.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||rM.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(rM.isNegativeZero(e))return"-0.0";return n=e.toString(10),AM.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),TM=wM.extend({implicit:[xM,MM,$M,IM]}),zM=TM,jM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),OM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var DM=new pM("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==jM.exec(e)||null!==OM.exec(e))},construct:function(e){var t,n,i,a,r,s,o,c,l=0,d=null;if(null===(t=jM.exec(e))&&(t=OM.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(n,i,a));if(r=+t[4],s=+t[5],o=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(d=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(d=-d)),c=new Date(Date.UTC(n,i,a,r,s,o,l)),d&&c.setTime(c.getTime()-d),c},instanceOf:Date,represent:function(e){return e.toISOString()}});var RM=new pM("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),PM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var LM=new pM("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,i=0,a=e.length,r=PM;for(n=0;n<a;n++)if(!((t=r.indexOf(e.charAt(n)))>64)){if(t<0)return!1;i+=6}return i%8==0},construct:function(e){var t,n,i=e.replace(/[\r\n=]/g,""),a=i.length,r=PM,s=0,o=[];for(t=0;t<a;t++)t%4==0&&t&&(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)),s=s<<6|r.indexOf(i.charAt(t));return 0===(n=a%4*6)?(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)):18===n?(o.push(s>>10&255),o.push(s>>2&255)):12===n&&o.push(s>>4&255),new Uint8Array(o)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,i="",a=0,r=e.length,s=PM;for(t=0;t<r;t++)t%3==0&&t&&(i+=s[a>>18&63],i+=s[a>>12&63],i+=s[a>>6&63],i+=s[63&a]),a=(a<<8)+e[t];return 0===(n=r%3)?(i+=s[a>>18&63],i+=s[a>>12&63],i+=s[a>>6&63],i+=s[63&a]):2===n?(i+=s[a>>10&63],i+=s[a>>4&63],i+=s[a<<2&63],i+=s[64]):1===n&&(i+=s[a>>2&63],i+=s[a<<4&63],i+=s[64],i+=s[64]),i}}),NM=Object.prototype.hasOwnProperty,FM=Object.prototype.toString;var VM=new pM("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,i,a,r,s=[],o=e;for(t=0,n=o.length;t<n;t+=1){if(i=o[t],r=!1,"[object Object]"!==FM.call(i))return!1;for(a in i)if(NM.call(i,a)){if(r)return!1;r=!0}if(!r)return!1;if(-1!==s.indexOf(a))return!1;s.push(a)}return!0},construct:function(e){return null!==e?e:[]}}),HM=Object.prototype.toString;var BM=new pM("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,i,a,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(i=s[t],"[object Object]"!==HM.call(i))return!1;if(1!==(a=Object.keys(i)).length)return!1;r[t]=[a[0],i[a[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,i,a,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1)i=s[t],a=Object.keys(i),r[t]=[a[0],i[a[0]]];return r}}),UM=Object.prototype.hasOwnProperty;var qM=new pM("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(UM.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),WM=zM.extend({implicit:[DM,RM],explicit:[LM,VM,BM,qM]}),ZM=Object.prototype.hasOwnProperty,QM=1,YM=2,GM=3,KM=4,JM=1,XM=2,eC=3,tC=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,nC=/[\x85\u2028\u2029]/,iC=/[,\[\]\{\}]/,aC=/^(?:!|!!|![a-z\-]+!)$/i,rC=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function sC(e){return Object.prototype.toString.call(e)}function oC(e){return 10===e||13===e}function cC(e){return 9===e||32===e}function lC(e){return 9===e||32===e||10===e||13===e}function dC(e){return 44===e||91===e||93===e||123===e||125===e}function uC(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function hC(e){return 120===e?2:117===e?4:85===e?8:0}function gC(e){return 48<=e&&e<=57?e-48:-1}function pC(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function mC(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var fC=new Array(256),_C=new Array(256),vC=0;vC<256;vC++)fC[vC]=pC(vC)?1:0,_C[vC]=pC(vC);function yC(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||WM,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function bC(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=uM(n),new cM(t,n)}function wC(e,t){throw bC(e,t)}function xC(e,t){e.onWarning&&e.onWarning.call(null,bC(e,t))}var MC={YAML:function(e,t,n){var i,a,r;null!==e.version&&wC(e,"duplication of %YAML directive"),1!==n.length&&wC(e,"YAML directive accepts exactly one argument"),null===(i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&wC(e,"ill-formed argument of the YAML directive"),a=parseInt(i[1],10),r=parseInt(i[2],10),1!==a&&wC(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=r<2,1!==r&&2!==r&&xC(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var i,a;2!==n.length&&wC(e,"TAG directive accepts exactly two arguments"),i=n[0],a=n[1],aC.test(i)||wC(e,"ill-formed tag handle (first argument) of the TAG directive"),ZM.call(e.tagMap,i)&&wC(e,'there is a previously declared suffix for "'+i+'" tag handle'),rC.test(a)||wC(e,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch(t){wC(e,"tag prefix is malformed: "+a)}e.tagMap[i]=a}};function CC(e,t,n,i){var a,r,s,o;if(t<n){if(o=e.input.slice(t,n),i)for(a=0,r=o.length;a<r;a+=1)9===(s=o.charCodeAt(a))||32<=s&&s<=1114111||wC(e,"expected valid JSON character");else tC.test(o)&&wC(e,"the stream contains non-printable characters");e.result+=o}}function SC(e,t,n,i){var a,r,s,o;for(rM.isObject(n)||wC(e,"cannot merge mappings; the provided source object is unacceptable"),s=0,o=(a=Object.keys(n)).length;s<o;s+=1)r=a[s],ZM.call(t,r)||(t[r]=n[r],i[r]=!0)}function kC(e,t,n,i,a,r,s,o,c){var l,d;if(Array.isArray(a))for(l=0,d=(a=Array.prototype.slice.call(a)).length;l<d;l+=1)Array.isArray(a[l])&&wC(e,"nested arrays are not supported inside keys"),"object"==typeof a&&"[object Object]"===sC(a[l])&&(a[l]="[object Object]");if("object"==typeof a&&"[object Object]"===sC(a)&&(a="[object Object]"),a=String(a),null===t&&(t={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(r))for(l=0,d=r.length;l<d;l+=1)SC(e,t,r[l],n);else SC(e,t,r,n);else e.json||ZM.call(n,a)||!ZM.call(t,a)||(e.line=s||e.line,e.lineStart=o||e.lineStart,e.position=c||e.position,wC(e,"duplicated mapping key")),"__proto__"===a?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:r}):t[a]=r,delete n[a];return t}function $C(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):wC(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function EC(e,t,n){for(var i=0,a=e.input.charCodeAt(e.position);0!==a;){for(;cC(a);)9===a&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&35===a)do{a=e.input.charCodeAt(++e.position)}while(10!==a&&13!==a&&0!==a);if(!oC(a))break;for($C(e),a=e.input.charCodeAt(e.position),i++,e.lineIndent=0;32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position)}return-1!==n&&0!==i&&e.lineIndent<n&&xC(e,"deficient indentation"),i}function AC(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!lC(t)))}function IC(e,t){1===t?e.result+=" ":t>1&&(e.result+=rM.repeat("\n",t-1))}function TC(e,t){var n,i,a=e.tag,r=e.anchor,s=[],o=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),i=e.input.charCodeAt(e.position);0!==i&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,wC(e,"tab characters must not be used in indentation")),45===i)&&lC(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,EC(e,!0,-1)&&e.lineIndent<=t)s.push(null),i=e.input.charCodeAt(e.position);else if(n=e.line,OC(e,t,GM,!1,!0),s.push(e.result),EC(e,!0,-1),i=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==i)wC(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=a,e.anchor=r,e.kind="sequence",e.result=s,!0)}function zC(e){var t,n,i,a,r=!1,s=!1;if(33!==(a=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&wC(e,"duplication of a tag property"),60===(a=e.input.charCodeAt(++e.position))?(r=!0,a=e.input.charCodeAt(++e.position)):33===a?(s=!0,n="!!",a=e.input.charCodeAt(++e.position)):n="!",t=e.position,r){do{a=e.input.charCodeAt(++e.position)}while(0!==a&&62!==a);e.position<e.length?(i=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):wC(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==a&&!lC(a);)33===a&&(s?wC(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),aC.test(n)||wC(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),iC.test(i)&&wC(e,"tag suffix cannot contain flow indicator characters")}i&&!rC.test(i)&&wC(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch(t){wC(e,"tag name is malformed: "+i)}return r?e.tag=i:ZM.call(e.tagMap,n)?e.tag=e.tagMap[n]+i:"!"===n?e.tag="!"+i:"!!"===n?e.tag="tag:yaml.org,2002:"+i:wC(e,'undeclared tag handle "'+n+'"'),!0}function jC(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&wC(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!lC(n)&&!dC(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&wC(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function OC(e,t,n,i,a){var r,s,o,c,l,d,u,h,g,p=1,m=!1,f=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,r=s=o=KM===n||GM===n,i&&EC(e,!0,-1)&&(m=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;zC(e)||jC(e);)EC(e,!0,-1)?(m=!0,o=r,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):o=!1;if(o&&(o=m||a),1!==p&&KM!==n||(h=QM===n||YM===n?t:t+1,g=e.position-e.lineStart,1===p?o&&(TC(e,g)||function(e,t,n){var i,a,r,s,o,c,l,d=e.tag,u=e.anchor,h={},g=Object.create(null),p=null,m=null,f=null,_=!1,v=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=h),l=e.input.charCodeAt(e.position);0!==l;){if(_||-1===e.firstTabInLine||(e.position=e.firstTabInLine,wC(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),r=e.line,63!==l&&58!==l||!lC(i)){if(s=e.line,o=e.lineStart,c=e.position,!OC(e,n,YM,!1,!0))break;if(e.line===r){for(l=e.input.charCodeAt(e.position);cC(l);)l=e.input.charCodeAt(++e.position);if(58===l)lC(l=e.input.charCodeAt(++e.position))||wC(e,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(kC(e,h,g,p,m,null,s,o,c),p=m=f=null),v=!0,_=!1,a=!1,p=e.tag,m=e.result;else{if(!v)return e.tag=d,e.anchor=u,!0;wC(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return e.tag=d,e.anchor=u,!0;wC(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(_&&(kC(e,h,g,p,m,null,s,o,c),p=m=f=null),v=!0,_=!0,a=!0):_?(_=!1,a=!0):wC(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=i;if((e.line===r||e.lineIndent>t)&&(_&&(s=e.line,o=e.lineStart,c=e.position),OC(e,t,KM,!0,a)&&(_?m=e.result:f=e.result),_||(kC(e,h,g,p,m,f,s,o,c),p=m=f=null),EC(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===r||e.lineIndent>t)&&0!==l)wC(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return _&&kC(e,h,g,p,m,null,s,o,c),v&&(e.tag=d,e.anchor=u,e.kind="mapping",e.result=h),v}(e,g,h))||function(e,t){var n,i,a,r,s,o,c,l,d,u,h,g,p=!0,m=e.tag,f=e.anchor,_=Object.create(null);if(91===(g=e.input.charCodeAt(e.position)))s=93,l=!1,r=[];else{if(123!==g)return!1;s=125,l=!0,r={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),g=e.input.charCodeAt(++e.position);0!==g;){if(EC(e,!0,t),(g=e.input.charCodeAt(e.position))===s)return e.position++,e.tag=m,e.anchor=f,e.kind=l?"mapping":"sequence",e.result=r,!0;p?44===g&&wC(e,"expected the node content, but found ','"):wC(e,"missed comma between flow collection entries"),h=null,o=c=!1,63===g&&lC(e.input.charCodeAt(e.position+1))&&(o=c=!0,e.position++,EC(e,!0,t)),n=e.line,i=e.lineStart,a=e.position,OC(e,t,QM,!1,!0),u=e.tag,d=e.result,EC(e,!0,t),g=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==g||(o=!0,g=e.input.charCodeAt(++e.position),EC(e,!0,t),OC(e,t,QM,!1,!0),h=e.result),l?kC(e,r,_,u,d,h,n,i,a):o?r.push(kC(e,null,_,u,d,h,n,i,a)):r.push(d),EC(e,!0,t),44===(g=e.input.charCodeAt(e.position))?(p=!0,g=e.input.charCodeAt(++e.position)):p=!1}wC(e,"unexpected end of the stream within a flow collection")}(e,h)?f=!0:(s&&function(e,t){var n,i,a,r,s=JM,o=!1,c=!1,l=t,d=0,u=!1;if(124===(r=e.input.charCodeAt(e.position)))i=!1;else{if(62!==r)return!1;i=!0}for(e.kind="scalar",e.result="";0!==r;)if(43===(r=e.input.charCodeAt(++e.position))||45===r)JM===s?s=43===r?eC:XM:wC(e,"repeat of a chomping mode identifier");else{if(!((a=gC(r))>=0))break;0===a?wC(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?wC(e,"repeat of an indentation width identifier"):(l=t+a-1,c=!0)}if(cC(r)){do{r=e.input.charCodeAt(++e.position)}while(cC(r));if(35===r)do{r=e.input.charCodeAt(++e.position)}while(!oC(r)&&0!==r)}for(;0!==r;){for($C(e),e.lineIndent=0,r=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),oC(r))d++;else{if(e.lineIndent<l){s===eC?e.result+=rM.repeat("\n",o?1+d:d):s===JM&&o&&(e.result+="\n");break}for(i?cC(r)?(u=!0,e.result+=rM.repeat("\n",o?1+d:d)):u?(u=!1,e.result+=rM.repeat("\n",d+1)):0===d?o&&(e.result+=" "):e.result+=rM.repeat("\n",d):e.result+=rM.repeat("\n",o?1+d:d),o=!0,c=!0,d=0,n=e.position;!oC(r)&&0!==r;)r=e.input.charCodeAt(++e.position);CC(e,n,e.position,!1)}}return!0}(e,h)||function(e,t){var n,i,a;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,i=a=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(CC(e,i,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;i=e.position,e.position++,a=e.position}else oC(n)?(CC(e,i,a,!0),IC(e,EC(e,!1,t)),i=a=e.position):e.position===e.lineStart&&AC(e)?wC(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);wC(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var n,i,a,r,s,o;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return CC(e,n,e.position,!0),e.position++,!0;if(92===o){if(CC(e,n,e.position,!0),oC(o=e.input.charCodeAt(++e.position)))EC(e,!1,t);else if(o<256&&fC[o])e.result+=_C[o],e.position++;else if((s=hC(o))>0){for(a=s,r=0;a>0;a--)(s=uC(o=e.input.charCodeAt(++e.position)))>=0?r=(r<<4)+s:wC(e,"expected hexadecimal character");e.result+=mC(r),e.position++}else wC(e,"unknown escape sequence");n=i=e.position}else oC(o)?(CC(e,n,i,!0),IC(e,EC(e,!1,t)),n=i=e.position):e.position===e.lineStart&&AC(e)?wC(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}wC(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?f=!0:!function(e){var t,n,i;if(42!==(i=e.input.charCodeAt(e.position)))return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!lC(i)&&!dC(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&wC(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),ZM.call(e.anchorMap,n)||wC(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],EC(e,!0,-1),!0}(e)?function(e,t,n){var i,a,r,s,o,c,l,d,u=e.kind,h=e.result;if(lC(d=e.input.charCodeAt(e.position))||dC(d)||35===d||38===d||42===d||33===d||124===d||62===d||39===d||34===d||37===d||64===d||96===d)return!1;if((63===d||45===d)&&(lC(i=e.input.charCodeAt(e.position+1))||n&&dC(i)))return!1;for(e.kind="scalar",e.result="",a=r=e.position,s=!1;0!==d;){if(58===d){if(lC(i=e.input.charCodeAt(e.position+1))||n&&dC(i))break}else if(35===d){if(lC(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&AC(e)||n&&dC(d))break;if(oC(d)){if(o=e.line,c=e.lineStart,l=e.lineIndent,EC(e,!1,-1),e.lineIndent>=t){s=!0,d=e.input.charCodeAt(e.position);continue}e.position=r,e.line=o,e.lineStart=c,e.lineIndent=l;break}}s&&(CC(e,a,r,!1),IC(e,e.line-o),a=r=e.position,s=!1),cC(d)||(r=e.position+1),d=e.input.charCodeAt(++e.position)}return CC(e,a,r,!1),!!e.result||(e.kind=u,e.result=h,!1)}(e,h,QM===n)&&(f=!0,null===e.tag&&(e.tag="?")):(f=!0,null===e.tag&&null===e.anchor||wC(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(f=o&&TC(e,g))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&wC(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,l=e.implicitTypes.length;c<l;c+=1)if((u=e.implicitTypes[c]).resolve(e.result)){e.result=u.construct(e.result),e.tag=u.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(ZM.call(e.typeMap[e.kind||"fallback"],e.tag))u=e.typeMap[e.kind||"fallback"][e.tag];else for(u=null,c=0,l=(d=e.typeMap.multi[e.kind||"fallback"]).length;c<l;c+=1)if(e.tag.slice(0,d[c].tag.length)===d[c].tag){u=d[c];break}u||wC(e,"unknown tag !<"+e.tag+">"),null!==e.result&&u.kind!==e.kind&&wC(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+u.kind+'", not "'+e.kind+'"'),u.resolve(e.result,e.tag)?(e.result=u.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):wC(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||f}function DC(e){var t,n,i,a,r=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(a=e.input.charCodeAt(e.position))&&(EC(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==a));){for(s=!0,a=e.input.charCodeAt(++e.position),t=e.position;0!==a&&!lC(a);)a=e.input.charCodeAt(++e.position);for(i=[],(n=e.input.slice(t,e.position)).length<1&&wC(e,"directive name must not be less than one character in length");0!==a;){for(;cC(a);)a=e.input.charCodeAt(++e.position);if(35===a){do{a=e.input.charCodeAt(++e.position)}while(0!==a&&!oC(a));break}if(oC(a))break;for(t=e.position;0!==a&&!lC(a);)a=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}0!==a&&$C(e),ZM.call(MC,n)?MC[n](e,n,i):xC(e,'unknown document directive "'+n+'"')}EC(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,EC(e,!0,-1)):s&&wC(e,"directives end mark is expected"),OC(e,e.lineIndent-1,KM,!1,!0),EC(e,!0,-1),e.checkLineBreaks&&nC.test(e.input.slice(r,e.position))&&xC(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&AC(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,EC(e,!0,-1)):e.position<e.length-1&&wC(e,"end of the stream or a document separator is expected")}function RC(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new yC(e,t),i=e.indexOf("\0");for(-1!==i&&(n.position=i,wC(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)DC(n);return n.documents}var PC={loadAll:function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var i=RC(e,n);if("function"!=typeof t)return i;for(var a=0,r=i.length;a<r;a+=1)t(i[a])},load:function(e,t){var n=RC(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new cM("expected a single document in the stream, but found more")}}},LC=Object.prototype.toString,NC=Object.prototype.hasOwnProperty,FC=65279,VC=9,HC=10,BC=13,UC=32,qC=33,WC=34,ZC=35,QC=37,YC=38,GC=39,KC=42,JC=44,XC=45,eS=58,tS=61,nS=62,iS=63,aS=64,rS=91,sS=93,oS=96,cS=123,lS=124,dS=125,uS={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},hS=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],gS=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function pS(e){var t,n,i;if(t=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else{if(!(e<=4294967295))throw new cM("code point within a string may not be greater than 0xFFFFFFFF");n="U",i=8}return"\\"+n+rM.repeat("0",i-t.length)+t}var mS=1,fS=2;function _S(e){this.schema=e.schema||WM,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=rM.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,i,a,r,s,o,c;if(null===t)return{};for(n={},a=0,r=(i=Object.keys(t)).length;a<r;a+=1)s=i[a],o=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(c=e.compiledTypeMap.fallback[s])&&NC.call(c.styleAliases,o)&&(o=c.styleAliases[o]),n[s]=o;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?fS:mS,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function vS(e,t){for(var n,i=rM.repeat(" ",t),a=0,r=-1,s="",o=e.length;a<o;)-1===(r=e.indexOf("\n",a))?(n=e.slice(a),a=o):(n=e.slice(a,r+1),a=r+1),n.length&&"\n"!==n&&(s+=i),s+=n;return s}function yS(e,t){return"\n"+rM.repeat(" ",e.indent*t)}function bS(e){return e===UC||e===VC}function wS(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==FC||65536<=e&&e<=1114111}function xS(e){return wS(e)&&e!==FC&&e!==BC&&e!==HC}function MS(e,t,n){var i=xS(e),a=i&&!bS(e);return(n?i:i&&e!==JC&&e!==rS&&e!==sS&&e!==cS&&e!==dS)&&e!==ZC&&!(t===eS&&!a)||xS(t)&&!bS(t)&&e===ZC||t===eS&&a}function CS(e,t){var n,i=e.charCodeAt(t);return i>=55296&&i<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}function SS(e){return/^\n* /.test(e)}var kS=1,$S=2,ES=3,AS=4,IS=5;function TS(e,t,n,i,a,r,s,o){var c,l=0,d=null,u=!1,h=!1,g=-1!==i,p=-1,m=function(e){return wS(e)&&e!==FC&&!bS(e)&&e!==XC&&e!==iS&&e!==eS&&e!==JC&&e!==rS&&e!==sS&&e!==cS&&e!==dS&&e!==ZC&&e!==YC&&e!==KC&&e!==qC&&e!==lS&&e!==tS&&e!==nS&&e!==GC&&e!==WC&&e!==QC&&e!==aS&&e!==oS}(CS(e,0))&&function(e){return!bS(e)&&e!==eS}(CS(e,e.length-1));if(t||s)for(c=0;c<e.length;l>=65536?c+=2:c++){if(!wS(l=CS(e,c)))return IS;m=m&&MS(l,d,o),d=l}else{for(c=0;c<e.length;l>=65536?c+=2:c++){if((l=CS(e,c))===HC)u=!0,g&&(h=h||c-p-1>i&&" "!==e[p+1],p=c);else if(!wS(l))return IS;m=m&&MS(l,d,o),d=l}h=h||g&&c-p-1>i&&" "!==e[p+1]}return u||h?n>9&&SS(e)?IS:s?r===fS?IS:$S:h?AS:ES:!m||s||a(e)?r===fS?IS:$S:kS}function zS(e,t,n,i,a){e.dump=function(){if(0===t.length)return e.quotingType===fS?'""':"''";if(!e.noCompatMode&&(-1!==hS.indexOf(t)||gS.test(t)))return e.quotingType===fS?'"'+t+'"':"'"+t+"'";var r=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-r),o=i||e.flowLevel>-1&&n>=e.flowLevel;switch(TS(t,o,e.indent,s,(function(t){return function(e,t){var n,i;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!i,a)){case kS:return t;case $S:return"'"+t.replace(/'/g,"''")+"'";case ES:return"|"+jS(t,e.indent)+OS(vS(t,r));case AS:return">"+jS(t,e.indent)+OS(vS(function(e,t){var n,i,a=/(\n+)([^\n]*)/g,r=(o=e.indexOf("\n"),o=-1!==o?o:e.length,a.lastIndex=o,DS(e.slice(0,o),t)),s="\n"===e[0]||" "===e[0];var o;for(;i=a.exec(e);){var c=i[1],l=i[2];n=" "===l[0],r+=c+(s||n||""===l?"":"\n")+DS(l,t),s=n}return r}(t,s),r));case IS:return'"'+function(e){for(var t,n="",i=0,a=0;a<e.length;i>=65536?a+=2:a++)i=CS(e,a),!(t=uS[i])&&wS(i)?(n+=e[a],i>=65536&&(n+=e[a+1])):n+=t||pS(i);return n}(t)+'"';default:throw new cM("impossible error: invalid scalar style")}}()}function jS(e,t){var n=SS(e)?String(t):"",i="\n"===e[e.length-1];return n+(i&&("\n"===e[e.length-2]||"\n"===e)?"+":i?"":"-")+"\n"}function OS(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function DS(e,t){if(""===e||" "===e[0])return e;for(var n,i,a=/ [^ ]/g,r=0,s=0,o=0,c="";n=a.exec(e);)(o=n.index)-r>t&&(i=s>r?s:o,c+="\n"+e.slice(r,i),r=i+1),s=o;return c+="\n",e.length-r>t&&s>r?c+=e.slice(r,s)+"\n"+e.slice(s+1):c+=e.slice(r),c.slice(1)}function RS(e,t,n,i){var a,r,s,o="",c=e.tag;for(a=0,r=n.length;a<r;a+=1)s=n[a],e.replacer&&(s=e.replacer.call(n,String(a),s)),(LS(e,t+1,s,!0,!0,!1,!0)||void 0===s&&LS(e,t+1,null,!0,!0,!1,!0))&&(i&&""===o||(o+=yS(e,t)),e.dump&&HC===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=c,e.dump=o||"[]"}function PS(e,t,n){var i,a,r,s,o,c;for(r=0,s=(a=n?e.explicitTypes:e.implicitTypes).length;r<s;r+=1)if(((o=a[r]).instanceOf||o.predicate)&&(!o.instanceOf||"object"==typeof t&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(n?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(c=e.styleMap[o.tag]||o.defaultStyle,"[object Function]"===LC.call(o.represent))i=o.represent(t,c);else{if(!NC.call(o.represent,c))throw new cM("!<"+o.tag+'> tag resolver accepts not "'+c+'" style');i=o.represent[c](t,c)}e.dump=i}return!0}return!1}function LS(e,t,n,i,a,r,s){e.tag=null,e.dump=n,PS(e,n,!1)||PS(e,n,!0);var o,c=LC.call(e.dump),l=i;i&&(i=e.flowLevel<0||e.flowLevel>t);var d,u,h="[object Object]"===c||"[object Array]"===c;if(h&&(u=-1!==(d=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||u||2!==e.indent&&t>0)&&(a=!1),u&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(h&&u&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),"[object Object]"===c)i&&0!==Object.keys(e.dump).length?(!function(e,t,n,i){var a,r,s,o,c,l,d="",u=e.tag,h=Object.keys(n);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new cM("sortKeys must be a boolean or a function");for(a=0,r=h.length;a<r;a+=1)l="",i&&""===d||(l+=yS(e,t)),o=n[s=h[a]],e.replacer&&(o=e.replacer.call(n,s,o)),LS(e,t+1,s,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&HC===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,c&&(l+=yS(e,t)),LS(e,t+1,o,!0,c)&&(e.dump&&HC===e.dump.charCodeAt(0)?l+=":":l+=": ",d+=l+=e.dump));e.tag=u,e.dump=d||"{}"}(e,t,e.dump,a),u&&(e.dump="&ref_"+d+e.dump)):(!function(e,t,n){var i,a,r,s,o,c="",l=e.tag,d=Object.keys(n);for(i=0,a=d.length;i<a;i+=1)o="",""!==c&&(o+=", "),e.condenseFlow&&(o+='"'),s=n[r=d[i]],e.replacer&&(s=e.replacer.call(n,r,s)),LS(e,t,r,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),LS(e,t,s,!1,!1)&&(c+=o+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),u&&(e.dump="&ref_"+d+" "+e.dump));else if("[object Array]"===c)i&&0!==e.dump.length?(e.noArrayIndent&&!s&&t>0?RS(e,t-1,e.dump,a):RS(e,t,e.dump,a),u&&(e.dump="&ref_"+d+e.dump)):(!function(e,t,n){var i,a,r,s="",o=e.tag;for(i=0,a=n.length;i<a;i+=1)r=n[i],e.replacer&&(r=e.replacer.call(n,String(i),r)),(LS(e,t,r,!1,!1)||void 0===r&&LS(e,t,null,!1,!1))&&(""!==s&&(s+=","+(e.condenseFlow?"":" ")),s+=e.dump);e.tag=o,e.dump="["+s+"]"}(e,t,e.dump),u&&(e.dump="&ref_"+d+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new cM("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&zS(e,e.dump,t,r,l)}null!==e.tag&&"?"!==e.tag&&(o=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),o="!"===e.tag[0]?"!"+o:"tag:yaml.org,2002:"===o.slice(0,18)?"!!"+o.slice(18):"!<"+o+">",e.dump=o+" "+e.dump)}return!0}function NS(e,t){var n,i,a=[],r=[];for(FS(e,a,r),n=0,i=r.length;n<i;n+=1)t.duplicates.push(a[r[n]]);t.usedDuplicates=new Array(i)}function FS(e,t,n){var i,a,r;if(null!==e&&"object"==typeof e)if(-1!==(a=t.indexOf(e)))-1===n.indexOf(a)&&n.push(a);else if(t.push(e),Array.isArray(e))for(a=0,r=e.length;a<r;a+=1)FS(e[a],t,n);else for(a=0,r=(i=Object.keys(e)).length;a<r;a+=1)FS(e[i[a]],t,n)}function VS(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var HS={Type:pM,Schema:_M,FAILSAFE_SCHEMA:wM,JSON_SCHEMA:TM,CORE_SCHEMA:zM,DEFAULT_SCHEMA:WM,load:PC.load,loadAll:PC.loadAll,dump:{dump:function(e,t){var n=new _S(t=t||{});n.noRefs||NS(e,n);var i=e;return n.replacer&&(i=n.replacer.call({"":i},"",i)),LS(n,0,i,!0,!0)?n.dump+"\n":""}}.dump,YAMLException:cM,types:{binary:LM,float:IM,map:bM,null:xM,pairs:BM,set:qM,timestamp:DM,bool:MM,int:$M,merge:RM,omap:VM,seq:yM,str:vM},safeLoad:VS("safeLoad","load"),safeLoadAll:VS("safeLoadAll","loadAll"),safeDump:VS("safeDump","dump")};class BS{getMessageString(e){return e.message+(e.context&&"string"==typeof e.context?": "+e.context:"")}getIcon(e){return e.icon?e.icon:"error"===e.type?"mdi:alert-circle":"mdi:information-outline"}shouldShowTroubleshootingURL(e){return"error"===e.type}getTroubleshootingURL(e){return e.troubleshootingURL??wi}getContextStrings(e){return Array.isArray(e.context)?e.context.map((e=>HS.dump(e))):"object"==typeof e.context?[HS.dump(e.context)]:"string"==typeof e.context?[e.context]:[]}}var US='.dotdotdot:after {\n  animation: dots 2s linear infinite;\n  content: "";\n  display: inline-block;\n  width: 3em;\n}\n@keyframes dots {\n  0%, 20% {\n    content: ".";\n  }\n  40% {\n    content: "..";\n  }\n  60% {\n    content: "...";\n  }\n  90%, 100% {\n    content: "";\n  }\n}\n\n:host {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  user-select: text;\n  -webkit-user-select: text;\n}\n\n:host(:not([overlay])) {\n  height: 100%;\n  width: 100%;\n  background: var(--frigate-card-message-background);\n  color: var(--frigate-card-message-color);\n}\n\n:host([overlay]) {\n  position: absolute;\n  inset: 5%;\n  background: var(--frigate-card-message-overlay-background);\n  color: var(--frigate-card-message-overlay-color);\n}\n\ndiv.wrapper {\n  height: 100%;\n}\n\ndiv.message {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  height: 100%;\n}\n\ndiv.message.padded {\n  padding: 20px;\n}\n\ndiv.message div.contents {\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  margin-top: auto;\n  margin-bottom: auto;\n  min-width: 0;\n}\n\ndiv.message div.icon {\n  padding: 10px;\n}\n\n.vertical {\n  flex-direction: column;\n}\n\na {\n  word-break: break-word;\n}\n\n:host(:not([overlay])) a {\n  color: var(--frigate-card-message-color);\n}\n\n:host([overlay]) a {\n  color: var(--frigate-card-message-overlay-color);\n}\n\n.message pre {\n  margin-top: 20px;\n  overflow-x: auto;\n  border: 1px dotted var(--frigate-card-divider-color);\n  padding: 1em;\n}';function qS(e,t){return U` <frigate-card-message
    .message=${e}
    ?overlay=${!!t?.overlay}
  ></frigate-card-message>`}let WS=class extends oe{constructor(){super(...arguments),this.overlay=!1,this._controller=new BS}render(){if(!this.message)return;const e=U`
      ${this._controller.getMessageString(this.message)}.
      ${this._controller.shouldShowTroubleshootingURL(this.message)?U`<a href="${this._controller.getTroubleshootingURL(this.message)}"
            >${Y_("error.troubleshooting")}</a
          >`:""}
    `,t=this._controller.getIcon(this.message),n={dotdotdot:!!this.message?.dotdotdot};return U` <div class="wrapper">
      <div class="message padded">
        <div class="icon">
          <frigate-card-icon .icon="${{icon:t}}"></frigate-card-icon>
        </div>
        <div class="contents">
          <span class="${_e(n)}">${e}</span>
          ${this._controller.getContextStrings(this.message).map((e=>U`<pre>${e}</pre>`))}
        </div>
      </div>
    </div>`}static get styles(){return s(US)}};e([he({attribute:!1})],WS.prototype,"message",void 0),e([he({attribute:!0,type:Boolean})],WS.prototype,"overlay",void 0),WS=e([le("frigate-card-message")],WS);let ZS=class extends oe{render(){return U`
      <slot name="top"></slot>
      <slot name="left"></slot>
      <slot name="right"></slot>
      <slot name="bottom"></slot>
    `}static get styles(){return s("ha-icon-button {\n  color: var(--frigate-card-button-color);\n  background-color: var(--frigate-card-button-background);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\nslot {\n  position: absolute;\n  display: flex;\n}\n\n/***************\n * Slot position\n ***************/\nslot[name=top] {\n  top: 0px;\n}\n\nslot[name=bottom] {\n  bottom: 0px;\n}\n\nslot[name=left] {\n  left: 0px;\n}\n\nslot[name=right] {\n  right: 0px;\n}\n\n/***********\n * Slot size\n ***********/\nslot[name=top],\nslot[name=bottom] {\n  width: 100%;\n  flex-direction: column;\n}\n\nslot[name=left],\nslot[name=right] {\n  height: 100%;\n  flex-direction: row;\n}\n\nslot[name=top],\nslot[name=left] {\n  justify-content: flex-start;\n}\n\nslot[name=bottom],\nslot[name=right] {\n  justify-content: flex-end;\n}\n\n/*******************************\n * Match rounded corners to card\n *******************************/\n::slotted([slot=top]:first-child),\n::slotted([slot=left]:first-child) {\n  border-top-left-radius: var(--ha-card-border-radius, 4px);\n}\n\n::slotted([slot=top]:first-child),\n::slotted([slot=right]:first-child) {\n  border-top-right-radius: var(--ha-card-border-radius, 4px);\n}\n\n::slotted([slot=bottom]:last-child),\n::slotted([slot=left]:last-child) {\n  border-bottom-left-radius: var(--ha-card-border-radius, 4px);\n}\n\n::slotted([slot=bottom]:last-child),\n::slotted([slot=right]:last-child) {\n  border-bottom-right-radius: var(--ha-card-border-radius, 4px);\n}")}};ZS=e([le("frigate-card-overlay")],ZS);class QS{constructor(e){this._config=null,this._popupTimer=new If,this._items=[],this._host=e}getRenderItems(){return this._items}setItems(e){const t=e.filter((e=>!!e.exclusive)),n=Dv(t.length?t:e,(e=>e.priority??50),"desc"),i=this._getSufficientValues(this._items),a=this._getSufficientValues(n);this._items=n,"popup"!==this._config?.style||Bv(i,a)||(this._show(),this._popupTimer.start(this._config.popup_seconds,(()=>this._hide()))),this._host.requestUpdate()}setConfig(e){this._config=e,this._host.style.setProperty("--frigate-card-status-bar-height",`${e.height}px`),this._host.setAttribute("data-style",e.style),this._host.setAttribute("data-position",e.position),"popup"!==this._config?.style&&this._show(),this._host.requestUpdate()}getConfig(){return this._config}shouldRender(){return this._items.some((e=>!1!==e.enabled&&e.sufficient))}actionHandler(e,t){e.stopPropagation();const n=$f(e.detail.action,t);n&&Kx(this._host,{action:ef(n),config:t})}_getSufficientValue(e){
/* istanbul ignore else: cannot happen -- @preserve */
return"custom:frigate-card-status-bar-icon"===e.type?e.icon:"custom:frigate-card-status-bar-string"===e.type?e.string:"custom:frigate-card-status-bar-image"===e.type?e.image:null}_getSufficientValues(e){return e.filter((e=>!1!==e.enabled&&e.sufficient)).map((e=>this._getSufficientValue(e)))}_show(){pf(this._host,!1,"hide")}_hide(){pf(this._host,!0,"hide")}}let YS=class extends oe{constructor(){super(...arguments),this._controller=new QS(this)}willUpdate(e){e.has("config")&&this.config&&this._controller.setConfig(this.config),e.has("items")&&this._controller.setItems(this.items??[])}_renderPerInstanceStyle(){const e=this._controller.getConfig();if(!e)return;const t=e.position,n=e.style,i=e=>`\n        var(--frigate-card-status-bar-override-${e},\n        var(--frigate-card-status-bar-position-${t}-style-${n}-${e},\n        var(--frigate-card-status-bar-position-${t}-${e},\n        var(--frigate-card-status-bar-style-${n}-${e},\n        var(--frigate-card-status-bar-${e})))))`;return U`<style>
      :host(${`[data-position='${t}'][data-style='${n}']`}) {
        color: ${i("color")};
        background: ${i("background")};
      }
    </style>`}render(){if(this._controller.shouldRender())return U`
      ${this._renderPerInstanceStyle()}
      <div class="status">
        ${this._controller.getRenderItems().map((e=>{if(!1===e.enabled)return;const t=_e({item:!0,expand:!!e.expand,action:!!Object.keys(e.actions??{}).length}),n=jf({hasHold:Ef(e.actions?.hold_action),hasDoubleClick:Ef(e.actions?.double_tap_action)});return"custom:frigate-card-status-bar-string"===e.type?U`<div
              .actionHandler=${n}
              class="${t}"
              @action=${t=>this._controller.actionHandler(t,e.actions)}
            >
              ${e.string}
            </div>`:"custom:frigate-card-status-bar-icon"===e.type?U`<frigate-card-icon
              .actionHandler=${n}
              .icon=${{icon:e.icon}}
              class="${t}"
              @action=${t=>this._controller.actionHandler(t,e.actions)}
            ></frigate-card-icon>`:"custom:frigate-card-status-bar-image"===e.type?U`<img
              .actionHandler=${n}
              class="${t}"
              src="${e.image}"
              @action=${t=>this._controller.actionHandler(t,e.actions)}
            />`:void 0}))}
      </div>
    `}static get styles(){return s("ha-icon-button {\n  color: var(--frigate-card-button-color);\n  background-color: var(--frigate-card-button-background);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  --mdc-icon-size: calc(var(--frigate-card-status-bar-height) / 2);\n  display: block;\n  width: 100%;\n  pointer-events: auto;\n  opacity: 1;\n  transition: opacity 1s;\n}\n\n/*******************************************************\n * Non-hover styles should not interact with the pointer\n *******************************************************/\n:host(:not([data-style*=hover])) {\n  pointer-events: none;\n}\n\n/**********************\n * Popup style behavior\n **********************/\n:host([data-style=popup][hide]) {\n  opacity: 0;\n}\n\n/*********************\n * Status bar contents\n *********************/\n.status {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  overflow: hidden;\n  width: 100%;\n  height: var(--frigate-card-status-bar-height);\n}\n\n.item {\n  display: inline-block;\n  margin: 3px 5px;\n  align-content: center;\n}\n\n.item:first-child {\n  margin-left: 10px;\n}\n\n.item:last-child {\n  margin-right: 10px;\n}\n\n.item.expand {\n  flex: 1;\n}\n\n.item.action {\n  cursor: pointer;\n}\n\nimg.item,\nfrigate-card-icon.item {\n  display: block;\n  height: var(--mdc-icon-size, 24px);\n  width: auto;\n}\n\n/************************\n * Status bar theme hooks\n ************************/")}};e([he({attribute:!1})],YS.prototype,"items",void 0),e([he({attribute:!1})],YS.prototype,"config",void 0),YS=e([le("frigate-card-status-bar")],YS);function GS(e){return"number"==typeof e}function KS(e){return"string"==typeof e}function JS(e){return"boolean"==typeof e}function XS(e){return"[object Object]"===Object.prototype.toString.call(e)}function ek(e){return Math.abs(e)}function tk(e){return Math.sign(e)}function nk(e,t){return ek(e-t)}function ik(e){return ck(e).map(Number)}function ak(e){return e[rk(e)]}function rk(e){return Math.max(0,e.length-1)}function sk(e,t){return t===rk(e)}function ok(e,t=0){return Array.from(Array(e),((e,n)=>t+n))}function ck(e){return Object.keys(e)}function lk(e,t){return[e,t].reduce(((e,t)=>(ck(t).forEach((n=>{const i=e[n],a=t[n],r=XS(i)&&XS(a);e[n]=r?lk(i,a):a})),e)),{})}function dk(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function uk(){let e=[];const t={add:function(n,i,a,r={passive:!0}){let s;if("addEventListener"in n)n.addEventListener(i,a,r),s=()=>n.removeEventListener(i,a,r);else{const e=n;e.addListener(a),s=()=>e.removeListener(a)}return e.push(s),t},clear:function(){e=e.filter((e=>e()))}};return t}function hk(e,t,n,i){const a=uk(),r=1e3/60;let s=null,o=0,c=0;function l(e){if(!c)return;s||(s=e);const a=e-s;for(s=e,o+=a;o>=r;)n(r),o-=r;i(o/r),c&&t.requestAnimationFrame(l)}function d(){t.cancelAnimationFrame(c),s=null,o=0,c=0}return{init:function(){a.add(e,"visibilitychange",(()=>{e.hidden&&(s=null,o=0)}))},destroy:function(){d(),a.clear()},start:function(){c||(c=t.requestAnimationFrame(l))},stop:d,update:()=>n(r),render:i}}function gk(e=0,t=0){const n=ek(e-t);function i(t){return t<e}function a(e){return e>t}function r(e){return i(e)||a(e)}const s={length:n,max:t,min:e,constrain:function(n){return r(n)?i(n)?e:t:n},reachedAny:r,reachedMax:a,reachedMin:i,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}};return s}function pk(e,t,n){const{constrain:i}=gk(0,e),a=e+1;let r=s(t);function s(e){return n?ek((a+e)%a):i(e)}function o(){return r}function c(){return pk(e,o(),n)}const l={get:o,set:function(e){return r=s(e),l},add:function(e){return c().set(o()+e)},clone:c};return l}function mk(e,t,n,i,a,r,s,o,c,l,d,u,h,g,p,m,f,_,v){const{cross:y,direction:b}=e,w=["INPUT","SELECT","TEXTAREA"],x={passive:!1},M=uk(),C=uk(),S=gk(50,225).constrain(g.measure(20)),k={mouse:300,touch:400},$={mouse:500,touch:600},E=p?43:25;let A=!1,I=0,T=0,z=!1,j=!1,O=!1,D=!1;function R(e){if(!dk(e,i)&&e.touches.length>=2)return P(e);const t=r.readPoint(e),n=r.readPoint(e,y),s=nk(t,I),c=nk(n,T);if(!j&&!D){if(!e.cancelable)return P(e);if(j=s>c,!j)return P(e)}const d=r.pointerMove(e);s>m&&(O=!0),l.useFriction(.3).useDuration(.75),o.start(),a.add(b(d)),e.preventDefault()}function P(e){const t=d.byDistance(0,!1).index!==u.get(),n=r.pointerUp(e)*(p?$:k)[D?"mouse":"touch"],i=function(e,t){const n=u.add(-1*tk(e)),i=d.byDistance(e,!p).distance;return p||ek(e)<S?i:f&&t?.5*i:d.byIndex(n.get(),0).distance}(b(n),t),a=function(e,t){if(0===e||0===t)return 0;if(ek(e)<=ek(t))return 0;const n=nk(ek(e),ek(t));return ek(n/e)}(n,i),s=E-10*a,o=_+a/50;j=!1,z=!1,C.clear(),l.useDuration(s).useFriction(o),c.distance(i,!p),D=!1,h.emit("pointerUp")}function L(e){O&&(e.stopPropagation(),e.preventDefault(),O=!1)}return{init:function(e){if(!v)return;function o(o){(JS(v)||v(e,o))&&function(e){const o=dk(e,i);if(D=o,O=p&&o&&!e.buttons&&A,A=nk(a.get(),s.get())>=2,o&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return w.includes(t)}(e.target))return;z=!0,r.pointerDown(e),l.useFriction(0).useDuration(0),a.set(s),function(){const e=D?n:t;C.add(e,"touchmove",R,x).add(e,"touchend",P).add(e,"mousemove",R,x).add(e,"mouseup",P)}(),I=r.readPoint(e),T=r.readPoint(e,y),h.emit("pointerDown")}(o)}const c=t;M.add(c,"dragstart",(e=>e.preventDefault()),x).add(c,"touchmove",(()=>{}),x).add(c,"touchend",(()=>{})).add(c,"touchstart",o).add(c,"mousedown",o).add(c,"touchcancel",P).add(c,"contextmenu",P).add(c,"click",L,!0)},destroy:function(){M.clear(),C.clear()},pointerDown:function(){return z}}}function fk(e,t){let n,i;function a(e){return e.timeStamp}function r(n,i){const a="client"+("x"===(i||e.scroll)?"X":"Y");return(dk(n,t)?n:n.touches[0])[a]}return{pointerDown:function(e){return n=e,i=e,r(e)},pointerMove:function(e){const t=r(e)-r(i),s=a(e)-a(n)>170;return i=e,s&&(n=e),t},pointerUp:function(e){if(!n||!i)return 0;const t=r(i)-r(n),s=a(e)-a(n),o=a(e)-a(i)>170,c=t/s;return s&&!o&&ek(c)>.1?c:0},readPoint:r}}function _k(e,t,n,i,a,r,s){const o=[e].concat(i);let c,l,d=[],u=!1;function h(e){return a.measureSize(s.measure(e))}return{init:function(a){r&&(l=h(e),d=i.map(h),c=new ResizeObserver((n=>{(JS(r)||r(a,n))&&function(n){for(const r of n){if(u)return;const n=r.target===e,s=i.indexOf(r.target),o=n?l:d[s];if(ek(h(n?e:i[s])-o)>=.5){a.reInit(),t.emit("resize");break}}}(n)})),n.requestAnimationFrame((()=>{o.forEach((e=>c.observe(e)))})))},destroy:function(){u=!0,c&&c.disconnect()}}}function vk(e,t,n,i,a){const r=a.measure(10),s=a.measure(50),o=gk(.1,.99);let c=!1;function l(){return!c&&(!!e.reachedAny(n.get())&&!!e.reachedAny(t.get()))}return{shouldConstrain:l,constrain:function(a){if(!l())return;const c=e.reachedMin(t.get())?"min":"max",d=ek(e[c]-t.get()),u=n.get()-t.get(),h=o.constrain(d/s);n.subtract(u*h),!a&&ek(u)<r&&(n.set(e.constrain(n.get())),i.useDuration(25).useBaseFriction())},toggleActive:function(e){c=!e}}}function yk(e,t,n,i){const a=t.min+.1,r=t.max+.1,{reachedMin:s,reachedMax:o}=gk(a,r);const c={loop:function(t){if(!function(e){return 1===e?o(n.get()):-1===e&&s(n.get())}(t))return;const a=e*(-1*t);i.forEach((e=>e.add(a)))}};return c}function bk(e,t,n,i,a){const{reachedAny:r,removeOffset:s,constrain:o}=i;function c(e){return e.concat().sort(((e,t)=>ek(e)-ek(t)))[0]}function l(t,i){const a=[t,t+n,t-n];if(!e)return t;if(!i)return c(a);const r=a.filter((e=>tk(e)===i));return r.length?c(r):ak(a)-n}return{byDistance:function(n,i){const c=a.get()+n,{index:d,distance:u}=function(n){const i=e?s(n):o(n),a=t.map(((e,t)=>({diff:l(e-i,0),index:t}))).sort(((e,t)=>ek(e.diff)-ek(t.diff))),{index:r}=a[0];return{index:r,distance:i}}(c),h=!e&&r(c);return!i||h?{index:d,distance:n}:{index:d,distance:n+l(t[d]-u,0)}},byIndex:function(e,n){return{index:e,distance:l(t[e]-a.get(),n)}},shortcut:l}}function wk(e,t,n,i,a,r,s,o){const c={passive:!0,capture:!0};let l=0;function d(e){"Tab"===e.code&&(l=(new Date).getTime())}return{init:function(u){o&&(r.add(document,"keydown",d,!1),t.forEach(((t,d)=>{r.add(t,"focus",(t=>{(JS(o)||o(u,t))&&function(t){if((new Date).getTime()-l>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;const r=n.findIndex((e=>e.includes(t)));GS(r)&&(a.useDuration(0),i.index(r,0),s.emit("slideFocus"))}(d)}),c)})))}}}function xk(e){let t=e;function n(e){return GS(e)?e:e.get()}const i={get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}};return i}function Mk(e,t){const n="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},i=t.style;let a=!1;return{clear:function(){a||(i.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){a||(i.transform=n(e.direction(t)))},toggleActive:function(e){a=!e}}}function Ck(e,t,n,i,a,r,s,o,c){const l=.5,d=ik(a),u=ik(a).reverse(),h=function(){const e=s[0];return m(p(u,e),n,!1)}().concat(function(){const e=t-s[0]-1;return m(p(d,e),-n,!0)}());function g(e,t){return e.reduce(((e,t)=>e-a[t]),t)}function p(e,t){return e.reduce(((e,n)=>g(e,t)>0?e.concat([n]):e),[])}function m(a,s,d){const u=function(e){return r.map(((n,a)=>({start:n-i[a]+l+e,end:n+t-l+e})))}(s);return a.map((t=>{const i=d?0:-n,a=d?n:0,r=d?"end":"start",s=u[t][r];return{index:t,loopPoint:s,slideLocation:xk(-1),translate:Mk(e,c[t]),target:()=>o.get()>s?i:a}}))}const f={canLoop:function(){return h.every((({index:e})=>{const n=d.filter((t=>t!==e));return g(n,t)<=.1}))},clear:function(){h.forEach((e=>e.translate.clear()))},loop:function(){h.forEach((e=>{const{target:t,translate:n,slideLocation:i}=e,a=t();a!==i.get()&&(n.to(a),i.set(a))}))},loopPoints:h};return f}function Sk(e,t,n){let i,a=!1;return{init:function(r){n&&(i=new MutationObserver((e=>{a||(JS(n)||n(r,e))&&function(e){for(const n of e)if("childList"===n.type){r.reInit(),t.emit("slidesChanged");break}}(e)})),i.observe(e,{childList:!0}))},destroy:function(){i&&i.disconnect(),a=!0}}}function kk(e,t,n,i){const a={};let r,s=null,o=null,c=!1;return{init:function(){r=new IntersectionObserver((e=>{c||(e.forEach((e=>{const n=t.indexOf(e.target);a[n]=e})),s=null,o=null,n.emit("slidesInView"))}),{root:e.parentElement,threshold:i}),t.forEach((e=>r.observe(e)))},destroy:function(){r&&r.disconnect(),c=!0},get:function(e=!0){if(e&&s)return s;if(!e&&o)return o;const t=function(e){return ck(a).reduce(((t,n)=>{const i=parseInt(n),{isIntersecting:r}=a[i];return(e&&r||!e&&!r)&&t.push(i),t}),[])}(e);return e&&(s=t),e||(o=t),t}}}function $k(e,t,n,i,a,r,s,o,c){const{startEdge:l,endEdge:d,direction:u}=e,h=GS(n);const g={groupSlides:function(e){return h?function(e,t){return ik(e).filter((e=>e%t==0)).map((n=>e.slice(n,n+t)))}(e,n):function(e){return e.length?ik(e).reduce(((n,h,g)=>{const p=ak(n)||0,m=0===p,f=h===rk(e),_=a[l]-r[p][l],v=a[l]-r[h][d],y=!i&&m?u(s):0,b=ek(v-(!i&&f?u(o):0)-(_+y));return g&&b>t+c&&n.push(h),f&&n.push(e.length),n}),[]).map(((t,n,i)=>{const a=Math.max(i[n-1]||0);return e.slice(a,t)})):[]}(e)}};return g}function Ek(e,t,n,i,a,r,s){const{align:o,axis:c,direction:l,startIndex:d,loop:u,duration:h,dragFree:g,dragThreshold:p,inViewThreshold:m,slidesToScroll:f,skipSnaps:_,containScroll:v,watchResize:y,watchSlides:b,watchDrag:w,watchFocus:x}=r,M={measure:function(e){const{offsetTop:t,offsetLeft:n,offsetWidth:i,offsetHeight:a}=e;return{top:t,right:n+i,bottom:t+a,left:n,width:i,height:a}}},C=M.measure(t),S=n.map(M.measure),k=function(e,t){const n="rtl"===t,i="y"===e,a=!i&&n?-1:1,r={scroll:i?"y":"x",cross:i?"x":"y",startEdge:i?"top":n?"right":"left",endEdge:i?"bottom":n?"left":"right",measureSize:function(e){const{height:t,width:n}=e;return i?t:n},direction:function(e){return e*a}};return r}(c,l),$=k.measureSize(C),E=function(e){const t={measure:function(t){return e*(t/100)}};return t}($),A=function(e,t){const n={start:function(){return 0},center:function(e){return i(e)/2},end:i};function i(e){return t-e}const a={measure:function(i,a){return KS(e)?n[e](i):e(t,i,a)}};return a}(o,$),I=!u&&!!v,T=u||!!v,{slideSizes:z,slideSizesWithGaps:j,startGap:O,endGap:D}=function(e,t,n,i,a,r){const{measureSize:s,startEdge:o,endEdge:c}=e,l=n[0]&&a,d=function(){if(!l)return 0;const e=n[0];return ek(t[o]-e[o])}(),u=function(){if(!l)return 0;const e=r.getComputedStyle(ak(i));return parseFloat(e.getPropertyValue(`margin-${c}`))}(),h=n.map(s),g=n.map(((e,t,n)=>{const i=!t,a=sk(n,t);return i?h[t]+d:a?h[t]+u:n[t+1][o]-e[o]})).map(ek);return{slideSizes:h,slideSizesWithGaps:g,startGap:d,endGap:u}}(k,C,S,n,T,a),R=$k(k,$,f,u,C,S,O,D,2),{snaps:P,snapsAligned:L}=function(e,t,n,i,a){const{startEdge:r,endEdge:s}=e,{groupSlides:o}=a,c=o(i).map((e=>ak(e)[s]-e[0][r])).map(ek).map(t.measure),l=i.map((e=>n[r]-e[r])).map((e=>-ek(e))),d=o(l).map((e=>e[0])).map(((e,t)=>e+c[t]));return{snaps:l,snapsAligned:d}}(k,A,C,S,R),N=-ak(P)+ak(j),{snapsContained:F,scrollContainLimit:V}=function(e,t,n,i,a){const r=gk(-t+e,0),s=n.map(((e,t)=>{const{min:i,max:a}=r,s=r.constrain(e),o=!t,l=sk(n,t);return o?a:l||c(i,s)?i:c(a,s)?a:s})).map((e=>parseFloat(e.toFixed(3)))),o=function(){const e=s[0],t=ak(s);return gk(s.lastIndexOf(e),s.indexOf(t)+1)}();function c(e,t){return nk(e,t)<1}return{snapsContained:function(){if(t<=e+a)return[r.max];if("keepSnaps"===i)return s;const{min:n,max:c}=o;return s.slice(n,c)}(),scrollContainLimit:o}}($,N,L,v,2),H=I?F:L,{limit:B}=function(e,t,n){const i=t[0];return{limit:gk(n?i-e:ak(t),i)}}(N,H,u),U=pk(rk(H),d,u),q=U.clone(),W=ik(n),Z=hk(i,a,(e=>(({dragHandler:e,scrollBody:t,scrollBounds:n,options:{loop:i}},a)=>{i||n.constrain(e.pointerDown()),t.seek(a)})(oe,e)),(e=>(({scrollBody:e,translate:t,location:n,offsetLocation:i,scrollLooper:a,slideLooper:r,dragHandler:s,animation:o,eventHandler:c,scrollBounds:l,options:{loop:d}},u)=>{const h=e.settled(),g=!l.shouldConstrain(),p=d?h:h&&g;p&&!s.pointerDown()&&(o.stop(),c.emit("settle")),p||c.emit("scroll");const m=n.get()*u+G.get()*(1-u);i.set(m),d&&(a.loop(e.direction()),r.loop()),t.to(i.get())})(oe,e))),Q=H[U.get()],Y=xk(Q),G=xk(Q),K=xk(Q),J=xk(Q),X=function(e,t,n,i,a,r){let s=0,o=0,c=a,l=r,d=e.get(),u=0;function h(e){return c=e,p}function g(e){return l=e,p}const p={direction:function(){return o},duration:function(){return c},velocity:function(){return s},seek:function(t){const a=t/1e3,r=c*a,h=i.get()-e.get();let g=0;return c?(n.set(e),s+=h/r,s*=l,d+=s,e.add(s*a),g=d-u):(s=0,n.set(i),e.set(i),g=h),o=tk(g),u=d,p},settled:function(){return ek(i.get()-t.get())<.001},useBaseFriction:function(){return g(r)},useBaseDuration:function(){return h(a)},useFriction:g,useDuration:h};return p}(Y,K,G,J,h,.68),ee=bk(u,H,N,B,J),te=function(e,t,n,i,a,r,s){function o(a){const o=a.distance,c=a.index!==t.get();r.add(o),o&&(i.duration()?e.start():(e.update(),e.render(1),e.update())),c&&(n.set(t.get()),t.set(a.index),s.emit("select"))}const c={distance:function(e,t){o(a.byDistance(e,t))},index:function(e,n){const i=t.clone().set(e);o(a.byIndex(i.get(),n))}};return c}(Z,U,q,X,ee,J,s),ne=function(e){const{max:t,length:n}=e,i={get:function(e){return n?(e-t)/-n:0}};return i}(B),ie=uk(),ae=kk(t,n,s,m),{slideRegistry:re}=function(e,t,n,i,a,r){const{groupSlides:s}=a,{min:o,max:c}=i;return{slideRegistry:function(){const i=s(r),a=!e||"keepSnaps"===t;return 1===n.length?[r]:a?i:i.slice(o,c).map(((e,t,n)=>{const i=!t,a=sk(n,t);return i?ok(ak(n[0])+1):a?ok(rk(r)-ak(n)[0]+1,ak(n)[0]):e}))}()}}(I,v,H,V,R,W),se=wk(e,n,re,te,X,ie,s,x),oe={ownerDocument:i,ownerWindow:a,eventHandler:s,containerRect:C,slideRects:S,animation:Z,axis:k,dragHandler:mk(k,e,i,a,J,fk(k,a),Y,Z,te,X,ee,U,s,E,g,p,_,.68,w),eventStore:ie,percentOfView:E,index:U,indexPrevious:q,limit:B,location:Y,offsetLocation:K,previousLocation:G,options:r,resizeHandler:_k(t,s,a,n,k,y,M),scrollBody:X,scrollBounds:vk(B,K,J,X,E),scrollLooper:yk(N,B,K,[Y,K,G,J]),scrollProgress:ne,scrollSnapList:H.map(ne.get),scrollSnaps:H,scrollTarget:ee,scrollTo:te,slideLooper:Ck(k,$,N,z,j,P,H,K,n),slideFocus:se,slidesHandler:Sk(t,s,b),slidesInView:ae,slideIndexes:W,slideRegistry:re,slidesToScroll:R,target:J,translate:Mk(k,t)};return oe}const Ak={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Ik(e){function t(e,t){return lk(e,t||{})}const n={mergeOptions:t,optionsAtMedia:function(n){const i=n.breakpoints||{},a=ck(i).filter((t=>e.matchMedia(t).matches)).map((e=>i[e])).reduce(((e,n)=>t(e,n)),{});return t(n,a)},optionsMediaQueries:function(t){return t.map((e=>ck(e.breakpoints||{}))).reduce(((e,t)=>e.concat(t)),[]).map(e.matchMedia)}};return n}function Tk(e,t,n){const i=e.ownerDocument,a=i.defaultView,r=Ik(a),s=function(e){let t=[];const n={init:function(n,i){return t=i.filter((({options:t})=>!1!==e.optionsAtMedia(t).active)),t.forEach((t=>t.init(n,e))),i.reduce(((e,t)=>Object.assign(e,{[t.name]:t})),{})},destroy:function(){t=t.filter((e=>e.destroy()))}};return n}(r),o=uk(),c=function(){let e,t={};function n(e){return t[e]||[]}const i={init:function(t){e=t},emit:function(t){return n(t).forEach((n=>n(e,t))),i},off:function(e,a){return t[e]=n(e).filter((e=>e!==a)),i},on:function(e,a){return t[e]=n(e).concat([a]),i},clear:function(){t={}}};return i}(),{mergeOptions:l,optionsAtMedia:d,optionsMediaQueries:u}=r,{on:h,off:g,emit:p}=c,m=k;let f,_,v,y,b=!1,w=l(Ak,Tk.globalOptions),x=l(w),M=[];function C(t){const n=Ek(e,v,y,i,a,t,c);if(t.loop&&!n.slideLooper.canLoop()){return C(Object.assign({},t,{loop:!1}))}return n}function S(t,n){b||(w=l(w,t),x=d(w),M=n||M,function(){const{container:t,slides:n}=x,i=KS(t)?e.querySelector(t):t;v=i||e.children[0];const a=KS(n)?v.querySelectorAll(n):n;y=[].slice.call(a||v.children)}(),f=C(x),u([w,...M.map((({options:e})=>e))]).forEach((e=>o.add(e,"change",k))),x.active&&(f.translate.to(f.location.get()),f.animation.init(),f.slidesInView.init(),f.slideFocus.init(I),f.eventHandler.init(I),f.resizeHandler.init(I),f.slidesHandler.init(I),f.options.loop&&f.slideLooper.loop(),v.offsetParent&&y.length&&f.dragHandler.init(I),_=s.init(I,M)))}function k(e,t){const n=A();$(),S(l({startIndex:n},e),t),c.emit("reInit")}function $(){f.dragHandler.destroy(),f.eventStore.clear(),f.translate.clear(),f.slideLooper.clear(),f.resizeHandler.destroy(),f.slidesHandler.destroy(),f.slidesInView.destroy(),f.animation.destroy(),s.destroy(),o.clear()}function E(e,t,n){x.active&&!b&&(f.scrollBody.useBaseFriction().useDuration(!0===t?0:x.duration),f.scrollTo.index(e,n||0))}function A(){return f.index.get()}const I={canScrollNext:function(){return f.index.add(1).get()!==A()},canScrollPrev:function(){return f.index.add(-1).get()!==A()},containerNode:function(){return v},internalEngine:function(){return f},destroy:function(){b||(b=!0,o.clear(),$(),c.emit("destroy"),c.clear())},off:g,on:h,emit:p,plugins:function(){return _},previousScrollSnap:function(){return f.indexPrevious.get()},reInit:m,rootNode:function(){return e},scrollNext:function(e){E(f.index.add(1).get(),e,-1)},scrollPrev:function(e){E(f.index.add(-1).get(),e,1)},scrollProgress:function(){return f.scrollProgress.get(f.location.get())},scrollSnapList:function(){return f.scrollSnapList},scrollTo:E,selectedScrollSnap:A,slideNodes:function(){return y},slidesInView:function(){return f.slidesInView.get()},slidesNotInView:function(){return f.slidesInView.get(!1)}};return S(t,n),setTimeout((()=>c.emit("init")),0),I}function zk(){return zk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zk.apply(this,arguments)}Tk.globalOptions=void 0;var jk=function(e,t){return void 0===t&&(t=.996),e*t/(1-t)};function Ok(e,t){if(e.length!==t.length)throw new Error("vectors must be same length");return e.map((function(e,n){return e+t[n]}))}function Dk(e){return Math.max.apply(Math,e.map(Math.abs))}function Rk(e){return Object.freeze(e),Object.values(e).forEach((function(e){null===e||"object"!=typeof e||Object.isFrozen(e)||Rk(e)})),e}var Pk=[1,18,"undefined"!=typeof window&&window.innerHeight||800];var Lk=[-1,-1,-1];var Nk=function(e){return zk({},e,{axisDelta:e.axisDelta.map((function(e){return t=e,n=-700,i=700,Math.min(Math.max(n,t),i);var t,n,i}))})},Fk=.6,Vk=.96,Hk=2,Bk=5,Uk=Rk({preventWheelAction:!0,reverseSign:[!0,!0,!1]}),qk=400;function Wk(){return{isStarted:!1,isStartPublished:!1,isMomentum:!1,startTime:0,lastAbsDelta:1/0,axisMovement:[0,0,0],axisVelocity:[0,0,0],accelerationFactors:[],scrollPoints:[],scrollPointsToMerge:[],willEndTimeout:qk}}function Zk(e){void 0===e&&(e={});var t,n,i,a=function(){var e={};function t(t,n){e[t]=(e[t]||[]).filter((function(e){return e!==n}))}return Rk({on:function(n,i){return e[n]=(e[n]||[]).concat(i),function(){return t(n,i)}},off:t,dispatch:function(t,n){t in e&&e[t].forEach((function(e){return e(n)}))}})}(),r=a.on,s=a.off,o=a.dispatch,c=Uk,l=Wk(),d=!1,u=function(e){Array.isArray(e)?e.forEach((function(e){return p(e)})):p(e)},h=function(e){return void 0===e&&(e={}),Object.values(e).some((function(e){return null==e}))?c:c=Rk(zk({},Uk,c,e))},g=function(e){var i=zk({event:t,isStart:!1,isEnding:!1,isMomentumCancel:!1,isMomentum:l.isMomentum,axisDelta:[0,0,0],axisVelocity:l.axisVelocity,axisMovement:l.axisMovement,get axisMovementProjection(){return Ok(i.axisMovement,i.axisVelocity.map((function(e){return jk(e)})))}},e);o("wheel",zk({},i,{previous:n})),n=i},p=function(e){var n=Nk(function(e,t){if(!t)return e;var n=!0===t?Lk:t.map((function(e){return e?-1:1}));return zk({},e,{axisDelta:e.axisDelta.map((function(e,t){return e*n[t]}))})}(function(e){var t=e.deltaX*Pk[e.deltaMode],n=e.deltaY*Pk[e.deltaMode],i=(e.deltaZ||0)*Pk[e.deltaMode];return{timeStamp:e.timeStamp,axisDelta:[t,n,i]}}(e),c.reverseSign)),i=n.axisDelta,a=n.timeStamp,r=Dk(i);e.preventDefault&&function(e,t){var n=c.preventWheelAction,i=t[0],a=t[1],r=t[2];if("boolean"==typeof n)return n;switch(n){case"x":return Math.abs(i)>=e;case"y":return Math.abs(a)>=e;case"z":return Math.abs(r)>=e;default:return!1}}(r,i)&&e.preventDefault(),l.isStarted?l.isMomentum&&r>Math.max(2,2*l.lastAbsDelta)&&(C(!0),x()):x(),0===r&&Object.is&&Object.is(e.deltaX,-0)?d=!0:(t=e,l.axisMovement=Ok(l.axisMovement,i),l.lastAbsDelta=r,l.scrollPointsToMerge.push({axisDelta:i,timeStamp:a}),m(),g({axisDelta:i,isStart:!l.isStartPublished}),l.isStartPublished=!0,M())},m=function(){var e;l.scrollPointsToMerge.length===Hk?(l.scrollPoints.unshift({axisDeltaSum:l.scrollPointsToMerge.map((function(e){return e.axisDelta})).reduce(Ok),timeStamp:(e=l.scrollPointsToMerge.map((function(e){return e.timeStamp})),e.reduce((function(e,t){return e+t}))/e.length)}),_(),l.scrollPointsToMerge.length=0,l.scrollPoints.length=1,l.isMomentum||b()):l.isStartPublished||f()},f=function(){var e;l.axisVelocity=(e=l.scrollPointsToMerge,e[e.length-1]).axisDelta.map((function(e){return e/l.willEndTimeout}))},_=function(){var e=l.scrollPoints,t=e[0],n=e[1];if(n&&t){var i=t.timeStamp-n.timeStamp;if(!(i<=0)){var a=t.axisDeltaSum.map((function(e){return e/i})),r=a.map((function(e,t){return e/(l.axisVelocity[t]||1)}));l.axisVelocity=a,l.accelerationFactors.push(r),v(i)}}},v=function(e){var t=10*Math.ceil(e/10)*1.2;l.isMomentum||(t=Math.max(100,2*t)),l.willEndTimeout=Math.min(1e3,Math.round(t))},y=function(e){return 0===e||e<=Vk&&e>=Fk},b=function(){if(l.accelerationFactors.length>=Bk){if(d&&(d=!1,Dk(l.axisVelocity)>=.2))return void w();var e=l.accelerationFactors.slice(-1*Bk);e.every((function(e){var t=!!e.reduce((function(e,t){return e&&e<1&&e===t?1:0})),n=e.filter(y).length===e.length;return t||n}))&&w(),l.accelerationFactors=e}},w=function(){l.isMomentum=!0},x=function(){(l=Wk()).isStarted=!0,l.startTime=Date.now(),n=void 0,d=!1},M=function(){clearTimeout(i),i=setTimeout(C,l.willEndTimeout)},C=function(e){void 0===e&&(e=!1),l.isStarted&&(l.isMomentum&&e?g({isEnding:!0,isMomentumCancel:!0}):g({isEnding:!0}),l.isMomentum=!1,l.isStarted=!1)},S=function(e){var t=[],n=function(n){n.removeEventListener("wheel",e),t=t.filter((function(e){return e!==n}))};return Rk({observe:function(i){return i.addEventListener("wheel",e,{passive:!1}),t.push(i),function(){return n(i)}},unobserve:n,disconnect:function(){t.forEach(n)}})}(u),k=S.observe,$=S.unobserve,E=S.disconnect;return h(e),Rk({on:r,off:s,observe:k,unobserve:$,disconnect:E,feedWheel:u,updateOptions:h})}var Qk={active:!0,breakpoints:{},wheelDraggingClass:"is-wheel-dragging",forceWheelAxis:void 0,target:void 0};function Yk(e){var t;void 0===e&&(e={});var n=function(){};var i={name:"wheelGestures",options:e,init:function(i,a){var r,s,o=a.mergeOptions,c=a.optionsAtMedia,l=o(Qk,Yk.globalOptions),d=o(l,e);t=c(d);var u,h=i.internalEngine(),g=null!=(r=t.target)?r:i.containerNode().parentNode,p=null!=(s=t.forceWheelAxis)?s:h.options.axis,m=Zk({preventWheelAction:p,reverseSign:[!0,!0,!1]}),f=m.observe(g),_=m.on("wheel",(function(e){var i=e.axisDelta,a=i[0],r=i[1],s="x"===p?a:r,o="x"===p?r:a,c=e.isMomentum&&e.previous&&!e.previous.isMomentum,l=e.isEnding&&!e.isMomentum||c;Math.abs(s)>Math.abs(o)&&!v&&!e.isMomentum&&function(e){try{x(u=new MouseEvent("mousedown",e.event))}catch(e){return n()}v=!0,document.documentElement.addEventListener("mousemove",b,!0),document.documentElement.addEventListener("mouseup",b,!0),void document.documentElement.addEventListener("mousedown",b,!0),t.wheelDraggingClass&&g.classList.add(t.wheelDraggingClass)}(e);if(!v)return;l?function(e){v=!1,x(w("mouseup",e)),y(),t.wheelDraggingClass&&g.classList.remove(t.wheelDraggingClass)}(e):x(w("mousemove",e))})),v=!1;function y(){document.documentElement.removeEventListener("mousemove",b,!0),document.documentElement.removeEventListener("mouseup",b,!0),document.documentElement.removeEventListener("mousedown",b,!0)}function b(e){v&&e.isTrusted&&e.stopImmediatePropagation()}function w(e,t){var n,i;if(p===h.options.axis){var a=t.axisMovement;n=a[0],i=a[1]}else{var r=t.axisMovement;i=r[0],n=r[1]}if(!h.options.skipSnaps&&!h.options.dragFree){var s=h.containerRect.width,o=h.containerRect.height;n=n<0?Math.max(n,-s):Math.min(n,s),i=i<0?Math.max(i,-o):Math.min(i,o)}return new MouseEvent(e,{clientX:u.clientX+n,clientY:u.clientY+i,screenX:u.screenX+n,screenY:u.screenY+i,movementX:n,movementY:i,button:0,bubbles:!0,cancelable:!0,composed:!0})}function x(e){i.containerNode().dispatchEvent(e)}n=function(){f(),_(),y()}},destroy:function(){return n()}};return i}Yk.globalOptions=void 0;class Gk{constructor(e,t,n){this._mutationObserver=new MutationObserver(((e,t)=>this._refreshCarouselContents())),this._refreshCarouselContents=()=>{const e=_f(this._parent);!Bv(this._carousel.slideNodes(),e)&&(this._carousel.destroy(),this._carousel=this._createCarousel(e))},this._root=e,this._parent=t,this._direction=n?.direction??"horizontal",this._transitionEffect=n?.transitionEffect??"slide",this._startIndex=n?.startIndex??0,this._dragFree=n?.dragFree??!1,this._loop=n?.loop??!1,this._draggable=n?.dragEnabled??!0,this._plugins=n?.plugins??[],this._textDirection=n?.textDirection??"ltr",this._carousel=this._createCarousel(_f(this._parent)),t instanceof HTMLSlotElement&&t.addEventListener("slotchange",this._refreshCarouselContents),this._mutationObserver.observe(this._parent,{childList:!0})}destroy(){this._parent instanceof HTMLSlotElement&&this._parent.removeEventListener("slotchange",this._refreshCarouselContents),this._mutationObserver.disconnect(),this._carousel.destroy()}getSlide(e){return this._carousel.slideNodes()[e]??null}getSelectedSlide(){return this.getSlide(this.getSelectedIndex())}getSelectedIndex(){return this._carousel.selectedScrollSnap()}selectSlide(e){this._carousel.scrollTo(e,"none"===this._transitionEffect);const t=this.getSlide(e);t&&Km(this._parent,"carousel:force-select",{index:e,element:t})}_createCarousel(e){const t=Tk(this._root,{slides:e,axis:"horizontal"===this._direction?"x":"y",duration:20,startIndex:this._startIndex,dragFree:this._dragFree,loop:this._loop,containScroll:"trimSnaps",watchSlides:!1,watchResize:!0,watchDrag:this._draggable,direction:this._textDirection},[...this._plugins,...e.length>1?[Yk({forceWheelAxis:"y"})]:[]]),n=()=>{const e=(()=>{const e=t.selectedScrollSnap(),n=t.slideNodes()[e]??null;return n?{index:e,element:n}:null})();e&&Km(this._parent,"carousel:select",e)};return t.on("select",(()=>n())),t}}const Kk=e=>"rtl"===getComputedStyle(e).direction?"rtl":"ltr";let Jk=class extends oe{constructor(){super(...arguments),this.direction="horizontal",this.dragEnabled=!0,this.selected=0,this._refParent=Ie(),this._refRoot=Ie(),this._carousel=null}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){this._carousel?.destroy(),this._carousel=null,super.disconnectedCallback()}willUpdate(e){e.has("direction")&&this.setAttribute("direction",this.direction);["direction","dragEnabled","dragFree","loop","plugins","transitionEffect"].some((t=>e.has(t)))&&(this._carousel?.destroy(),this._carousel=null)}render(){return U` <div class="embla">
      <slot name="left"></slot>
      <div ${je(this._refRoot)} class="embla__viewport">
        <div class="embla__container">
          <slot ${je(this._refParent)}></slot>
        </div>
      </div>
      <slot name="right"></slot>
    </div>`}updated(e){!this._carousel&&this._refRoot.value&&this._refParent.value?this._carousel=new Gk(this._refRoot.value,this._refParent.value,{direction:this.direction,dragEnabled:this.dragEnabled,dragFree:this.dragFree,startIndex:this.selected,transitionEffect:this.transitionEffect,loop:this.loop,plugins:this.plugins,textDirection:Kk(this)}):e.has("selected")&&this._carousel?.selectSlide(this.selected)}static get styles(){return s(":host {\n  display: block;\n  height: 100%;\n  width: 100%;\n  position: relative;\n}\n\n.embla {\n  width: 100%;\n  height: 100%;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.embla__container {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  user-select: none;\n  -webkit-touch-callout: none;\n  -khtml-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n:host([direction=vertical]) .embla__container {\n  flex-direction: column;\n}\n\n:host([direction=horizontal]) .embla__container {\n  flex-direction: row;\n}\n\n.embla__viewport {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.embla__viewport.is-draggable {\n  cursor: move;\n  cursor: grab;\n}\n\n.embla__viewport.is-dragging {\n  cursor: grabbing;\n}\n\n:host([direction=vertical]) ::slotted(.embla__slide) {\n  margin-bottom: 5px;\n}\n\n:host([direction=horizontal]) ::slotted(.embla__slide) {\n  margin-right: 5px;\n}")}};e([he({attribute:!0,reflect:!0})],Jk.prototype,"direction",void 0),e([he({attribute:!0})],Jk.prototype,"transitionEffect",void 0),e([he({attribute:!1})],Jk.prototype,"loop",void 0),e([he({attribute:!1})],Jk.prototype,"dragFree",void 0),e([he({attribute:!1})],Jk.prototype,"dragEnabled",void 0),e([he({attribute:!1})],Jk.prototype,"plugins",void 0),e([he({attribute:!1})],Jk.prototype,"selected",void 0),Jk=e([le("frigate-card-carousel")],Jk);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Xk=window,e$=Xk.ShadowRoot&&(void 0===Xk.ShadyCSS||Xk.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,t$=Symbol(),n$=new WeakMap;let i$=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==t$)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(e$&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=n$.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&n$.set(t,e))}return e}toString(){return this.cssText}};const a$=(e,t)=>{e$?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const n=document.createElement("style"),i=Xk.litNonce;void 0!==i&&n.setAttribute("nonce",i),n.textContent=t.cssText,e.appendChild(n)}))},r$=e$?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new i$("string"==typeof e?e:e+"",void 0,t$))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var s$;const o$=window,c$=o$.trustedTypes,l$=c$?c$.emptyScript:"",d$=o$.reactiveElementPolyfillSupport,u$={toAttribute(e,t){switch(t){case Boolean:e=e?l$:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},h$=(e,t)=>t!==e&&(t==t||e==e),g$={attribute:!0,type:String,converter:u$,reflect:!1,hasChanged:h$},p$="finalized";class m$ extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const i=this._$Ep(n,t);void 0!==i&&(this._$Ev.set(i,n),e.push(i))})),e}static createProperty(e,t=g$){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(i){const a=this[e];this[t]=i,this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||g$}static finalize(){if(this.hasOwnProperty(p$))return!1;this[p$]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(r$(e))}else void 0!==e&&t.push(r$(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return a$(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=g$){var i;const a=this.constructor._$Ep(e,n);if(void 0!==a&&!0===n.reflect){const r=(void 0!==(null===(i=n.converter)||void 0===i?void 0:i.toAttribute)?n.converter:u$).toAttribute(t,n.type);this._$El=e,null==r?this.removeAttribute(a):this.setAttribute(a,r),this._$El=null}}_$AK(e,t){var n;const i=this.constructor,a=i._$Ev.get(e);if(void 0!==a&&this._$El!==a){const e=i.getPropertyOptions(a),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:u$;this._$El=a,this[a]=r.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let i=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||h$)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}m$[p$]=!0,m$.elementProperties=new Map,m$.elementStyles=[],m$.shadowRootOptions={mode:"open"},null==d$||d$({ReactiveElement:m$}),(null!==(s$=o$.reactiveElementVersions)&&void 0!==s$?s$:o$.reactiveElementVersions=[]).push("1.6.3");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const f$=0,_$=Symbol();class v${constructor(e,t,n){this.o=0,this.status=0,this.autoRun=!0,this.i=e,this.i.addController(this);const i="object"==typeof t?t:{task:t,args:n};this.t=i.task,this.h=i.args,void 0!==i.autoRun&&(this.autoRun=i.autoRun),this.taskComplete=new Promise(((e,t)=>{this.l=e,this.u=t}))}hostUpdated(){this.performTask()}async performTask(){var e;const t=null===(e=this.h)||void 0===e?void 0:e.call(this);this.shouldRun(t)&&this.run(t)}shouldRun(e){return this.autoRun&&this.v(e)}async run(e){var t;let n,i;null!=e||(e=null===(t=this.h)||void 0===t?void 0:t.call(this)),2!==this.status&&3!==this.status||(this.taskComplete=new Promise(((e,t)=>{this.l=e,this.u=t}))),this.status=1,this._=void 0,this.m=void 0,this.i.requestUpdate();const a=++this.o;try{n=await this.t(e)}catch(e){i=e}this.o===a&&(n===_$?this.status=0:(void 0===i?(this.status=2,this.l(n)):(this.status=3,this.u(i)),this.m=n,this._=i),this.i.requestUpdate())}get value(){return this.m}get error(){return this._}render(e){var t,n,i,a;switch(this.status){case 0:return null===(t=e.initial)||void 0===t?void 0:t.call(e);case 1:return null===(n=e.pending)||void 0===n?void 0:n.call(e);case 2:return null===(i=e.complete)||void 0===i?void 0:i.call(e,this.value);case 3:return null===(a=e.error)||void 0===a?void 0:a.call(e,this.error);default:this.status}}v(e){const t=this.T;return this.T=e,Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.some(((e,n)=>h$(e,t[n]))):e!==t}}class y${constructor(e){this._keys=e}modify(e){this._keys.forEach((t=>e.removeContext(t)))}}var b$=":host {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-left: 5px;\n  padding: 5px;\n  color: var(--frigate-card-thumbnail-text-color);\n  overflow: hidden;\n  column-gap: 5%;\n}\n\ndiv.title {\n  font-size: 1.2rem;\n  font-weight: bold;\n}\n\ndiv.details {\n  flex: 1;\n  justify-content: center;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  --mdc-icon-size: 16px;\n  min-height: 0px;\n}\n\ndiv.details div {\n  display: flex;\n  align-items: center;\n}\n\ndiv.details div * {\n  margin: 0px 3px;\n}";function w$(e){return U`
    <frigate-card-progress-indicator
      class="${_e(e?.classes??{})}"
      .size=${e?.size}
      ${e?.componentRef?je(e.componentRef):""}
      .message=${e?.message||""}
      .animated=${e?.cardWideConfig?.performance?.features.animated_progress_indicator??!0}
    >
    </frigate-card-progress-indicator>
  `}let x$=class extends oe{constructor(){super(...arguments),this.message="",this.animated=!1,this.size="large"}render(){return U` <div class="message vertical">
      ${this.animated?U`<ha-circular-progress indeterminate size="${this.size}">
          </ha-circular-progress>`:U`<frigate-card-icon
            .icon=${{icon:"mdi:timer-sand"}}
          ></frigate-card-icon>`}
      ${this.message?U`<span>${this.message}</span>`:U``}
    </div>`}static get styles(){return s(US)}};e([he({attribute:!1})],x$.prototype,"message",void 0),e([he({attribute:!1})],x$.prototype,"animated",void 0),e([he({attribute:!1})],x$.prototype,"size",void 0),x$=e([le("frigate-card-progress-indicator")],x$);const M$=(e,t,n)=>{const i={...n?.cardWideConfig&&{cardWideConfig:n.cardWideConfig}};return U` ${e.render({initial:()=>n?.inProgressFunc?.()??w$(i),pending:()=>n?.inProgressFunc?.()??w$(i),error:e=>{af(e),n?.errorFunc&&n.errorFunc(e)},complete:t})}`},C$=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,S$=(e,t,n,i=!0)=>new v$(e,{args:()=>[!!t(),n()],task:async([e,n])=>{const i=t();return e&&i&&n?(async(e,t)=>e&&t?t.startsWith("data:")||t.match(C$)?t:new Promise(((n,i)=>{e?e.fetchWithAuth(t).then((e=>e.blob())).then((e=>{const t=new FileReader;t.onload=()=>{const e=t.result;n("string"==typeof e?e:null)},t.onerror=e=>i(e),t.readAsDataURL(e)})).catch((e=>i(e))):i()})):null)(i,n):null},autoRun:i}),k$=300;let $$=class extends oe{constructor(){super(),this._thumbnailError=!1,this._intersectionObserver=new IntersectionObserver(this._intersectionHandler.bind(this))}connectedCallback(){this._intersectionObserver.observe(this),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._intersectionObserver.disconnect()}willUpdate(e){e.has("thumbnail")&&(this._embedThumbnailTask=S$(this,(()=>this.hass),(()=>this.thumbnail),!1),this._intersectionObserver.unobserve(this),this._intersectionObserver.observe(this))}_intersectionHandler(e){this._embedThumbnailTask?.status===f$&&e.some((e=>e.isIntersecting))&&this._embedThumbnailTask?.run()}render(){const e=U`<frigate-card-icon
      .icon=${{icon:"mdi:image-off"}}
      title=${Y_("thumbnail.no_thumbnail")}
    ></frigate-card-icon> `;return!this._embedThumbnailTask||this._thumbnailError?e:U`${this.thumbnail?M$(this._embedThumbnailTask,(e=>e?U`<img src="${e}" />`:U``),{inProgressFunc:()=>e,errorFunc:()=>{this._thumbnailError=!0}}):e} `}static get styles(){return s(":host {\n  display: block;\n  overflow: hidden;\n  aspect-ratio: 1/1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\nimg {\n  display: block;\n}\n\nimg,\nfrigate-card-icon {\n  display: inline-block;\n  vertical-align: top;\n  margin: 0;\n  border-radius: var(--frigate-card-css-border-radius, var(--ha-card-border-radius, 4px));\n  width: var(--frigate-card-thumbnail-size);\n  max-height: 100%;\n  aspect-ratio: 1/1;\n  object-fit: cover;\n}\n\nfrigate-card-icon {\n  --mdc-icon-size: 50%;\n  color: var(--primary-text-color);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-sizing: border-box;\n  opacity: 0.2;\n}")}};e([he({attribute:!1})],$$.prototype,"thumbnail",void 0),e([he({attribute:!1})],$$.prototype,"hass",void 0),e([ge()],$$.prototype,"_thumbnailError",void 0),$$=e([le("frigate-card-thumbnail-feature-thumbnail")],$$);let E$=class extends oe{render(){if(this.date)return U`
      ${this.cameraMetadata?.engineIcon?U`<frigate-card-icon
            class="background"
            .icon=${{icon:this.cameraMetadata.engineIcon}}
          ></frigate-card-icon>`:""}
      <div class="content">
        <div class="title">${eh(this.date,"HH:mm")}</div>
        <div class="subtitle">${eh(this.date,"MMM do")}</div>
        ${this.showCameraTitle&&this.cameraMetadata?.title?U`<div class="camera">${this.cameraMetadata.title}</div>`:U``}
      </div>
    `}static get styles(){return s(":host {\n  display: block;\n  max-width: var(--frigate-card-thumbnail-size);\n  max-height: var(--frigate-card-thumbnail-size);\n  aspect-ratio: 1/1;\n  border: 1px solid var(--secondary-color);\n  background-color: var(--secondary-background-color);\n  border-radius: var(--frigate-card-css-border-radius, var(--ha-card-border-radius, 4px));\n  overflow: hidden;\n  padding: 10px;\n  box-sizing: border-box;\n  position: relative;\n}\n\nfrigate-card-icon.background {\n  display: block;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  inset: 0;\n  padding: 10%;\n  box-sizing: border-box;\n  pointer-events: none;\n  opacity: 0.1;\n}\n\ndiv.content {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: var(--primary-text-color);\n}\n\ndiv {\n  text-align: center;\n}\n\ndiv.title {\n  font-size: 1.5rem;\n}\n\ndiv.camera {\n  font-size: 0.7em;\n}")}};e([he({attribute:!1})],E$.prototype,"date",void 0),e([he({attribute:!1})],E$.prototype,"cameraMetadata",void 0),e([he({attribute:!1})],E$.prototype,"showCameraTitle",void 0),E$=e([le("frigate-card-thumbnail-feature-text")],E$);let A$=class extends oe{render(){if(!this.media)return;const e=this.media.getScore(),t=e?(100*e).toFixed(2)+"%":null,n=this.media.getStartTime(),i=n?sf(n):null,a=this.media.getEndTime(),r=n&&a?lf(n,a):null,s=this.media.inProgress()?Y_("event.in_progress"):null,o=Jm(this.media.getWhat()?.join(", "))??null,c=Jm(this.media.getWhere()?.join(", "))??null,l=Jm(this.media.getTags()?.join(", "))??null,d=o||l?(o??"")+(o&&l?": ":"")+(l??""):null,u=this.seek?eh(this.seek,"HH:mm:ss"):null;return U`
      ${d?U` <div class="title">
            <span title=${d}>${d}</span>
            ${t?U`<span title="${t}">${t}</span>`:""}
          </div>`:""}
      <div class="details">
        ${i?U` <div>
                <frigate-card-icon
                  title=${Y_("event.start")}
                  .icon=${{icon:"mdi:calendar-clock-outline"}}
                ></frigate-card-icon>
                <span title="${i}">${i}</span>
              </div>
              ${r||s?U` <div>
                    <frigate-card-icon
                      title=${Y_("event.duration")}
                      .icon=${{icon:"mdi:clock-outline"}}
                    ></frigate-card-icon>
                    ${r?U`<span title="${r}">${r}</span>`:""}
                    ${s?U`<span title="${s}">${s}</span>`:""}
                  </div>`:""}`:""}
        ${this.cameraTitle?U` <div>
              <frigate-card-icon
                title=${Y_("event.camera")}
                .icon=${{icon:"mdi:cctv"}}
              ></frigate-card-icon>
              <span title="${this.cameraTitle}">${this.cameraTitle}</span>
            </div>`:""}
        ${c?U` <div>
              <frigate-card-icon
                title=${Y_("event.where")}
                .icon=${{icon:"mdi:map-marker-outline"}}
              ></frigate-card-icon>
              <span title="${c}">${c}</span>
            </div>`:U``}
        ${l?U` <div>
              <frigate-card-icon
                title=${Y_("event.tag")}
                .icon=${{icon:"mdi:tag"}}
              ></frigate-card-icon>
              <span title="${l}">${l}</span>
            </div>`:U``}
        ${u?U` <div>
              <frigate-card-icon
                title=${Y_("event.seek")}
                .icon=${{icon:"mdi:clock-fast"}}
              ></frigate-card-icon>
              <span title="${u}">${u}</span>
            </div>`:U``}
      </div>
    `}static get styles(){return s(b$)}};e([he({attribute:!1})],A$.prototype,"media",void 0),e([he({attribute:!1})],A$.prototype,"seek",void 0),e([he({attribute:!1})],A$.prototype,"cameraTitle",void 0),A$=e([le("frigate-card-thumbnail-details-event")],A$);let I$=class extends oe{render(){if(!this.media)return;const e=this.media.getStartTime(),t=e?sf(e):null,n=this.media.getEndTime(),i=e&&n?lf(e,n):null,a=this.media.inProgress()?Y_("recording.in_progress"):null,r=this.seek?eh(this.seek,"HH:mm:ss"):null,s=this.media.getEventCount();return U`
      ${this.cameraTitle?U` <div class="title">
            <span title="${this.cameraTitle}">${this.cameraTitle}</span>
          </div>`:""}
      <div class="details">
        ${t?U` <div>
                <frigate-card-icon
                  title=${Y_("recording.start")}
                  .icon=${{icon:"mdi:calendar-clock-outline"}}
                ></frigate-card-icon>
                <span title="${t}">${t}</span>
              </div>
              ${i||a?U` <div>
                    <frigate-card-icon
                      title=${Y_("recording.duration")}
                      .icon=${{icon:"mdi:clock-outline"}}
                    ></frigate-card-icon>
                    ${i?U`<span title="${i}">${i}</span>`:""}
                    ${a?U`<span title="${a}">${a}</span>`:""}
                  </div>`:""}`:""}
        ${r?U` <div>
              <frigate-card-icon
                title=${Y_("event.seek")}
                .icon=${{icon:"mdi:clock-fast"}}
              ></frigate-card-icon>
              <span title="${r}">${r}</span>
            </div>`:U``}
        ${null!==s?U`<div>
              <frigate-card-icon
                title=${Y_("recording.events")}
                .icon=${{icon:"mdi:shield-alert"}}
              ></frigate-card-icon>
              <span title="${s}">${s}</span>
            </div>`:""}
      </div>
    `}static get styles(){return s(b$)}};e([he({attribute:!1})],I$.prototype,"media",void 0),e([he({attribute:!1})],I$.prototype,"seek",void 0),e([he({attribute:!1})],I$.prototype,"cameraTitle",void 0),I$=e([le("frigate-card-thumbnail-details-recording")],I$);let T$=class extends oe{constructor(){super(...arguments),this.details=!1,this.show_favorite_control=!1,this.show_timeline_control=!1,this.show_download_control=!1}render(){if(!this.media||!this.cameraManager||!this.hass)return;const e=this.media.getThumbnail(),t=this.media.getTitle()??"",n={star:!0,starred:!!this.media?.isFavorite()},i=this.show_timeline_control&&(!Qw.isRecording(this.media)||this.media.getStartTime()&&this.media.getEndTime()),a=this.cameraManager?.getMediaCapabilities(this.media),r=this.show_favorite_control&&this.media&&this.hass&&a?.canFavorite,s=this.show_download_control&&this.hass&&this.media.getID()&&a?.canDownload,o=this.cameraManager.getCameraMetadata(this.media.getCameraID());return U`
      ${Qw.isEvent(this.media)&&e?U`<frigate-card-thumbnail-feature-thumbnail
            aria-label="${t??""}"
            title=${t}
            .hass=${this.hass}
            .date=${this.media.getStartTime()??void 0}
            .thumbnail=${e??void 0}
          ></frigate-card-thumbnail-feature-thumbnail>`:Qw.isEvent(this.media)||Qw.isRecording(this.media)?U`<frigate-card-thumbnail-feature-text
              aria-label="${t??""}"
              title="${t??""}"
              .cameraMetadata=${o}
              .showCameraTitle=${!this.details}
              .date=${this.media.getStartTime()??void 0}
            ></frigate-card-thumbnail-feature-text>`:U``}
      ${r?U` <frigate-card-icon
            class="${_e(n)}"
            title=${Y_("thumbnail.retain_indefinitely")}
            .icon=${{icon:this.media.isFavorite()?"mdi:star":"mdi:star-outline"}}
            @click=${async e=>{if(Af(e),this.hass&&this.media){try{await(this.cameraManager?.favoriteMedia(this.media,!this.media?.isFavorite()))}catch(e){return void af(e)}this.requestUpdate()}}}
          /></frigate-card-icon>`:""}
      ${this.details&&Qw.isEvent(this.media)?U`<frigate-card-thumbnail-details-event
            .media=${this.media??void 0}
            .cameraTitle=${o?.title}
            .seek=${this.seek}
          ></frigate-card-thumbnail-details-event>`:this.details&&Qw.isRecording(this.media)?U`<frigate-card-thumbnail-details-recording
              .media=${this.media??void 0}
              .cameraTitle=${o?.title}
              .seek=${this.seek}
            ></frigate-card-thumbnail-details-recording>`:U``}
      ${i?U`<frigate-card-icon
            class="timeline"
            .icon=${{icon:"mdi:target"}}
            title=${Y_("thumbnail.timeline")}
            @click=${e=>{Af(e),this.viewManagerEpoch&&this.media&&this.viewManagerEpoch.manager.setViewByParameters({params:{view:"timeline",queryResults:this.viewManagerEpoch?.manager.getView()?.queryResults?.clone().selectResultIfFound((e=>e===this.media))},modifiers:[new y$(["timeline"])]})}}
          ></frigate-card-icon>`:""}
      ${s?U` <frigate-card-icon
            class="download"
            .icon=${{icon:"mdi:download"}}
            title=${Y_("thumbnail.download")}
            @click=${async e=>{if(Af(e),this.hass&&this.cameraManager&&this.media)try{await bw(this.hass,this.cameraManager,this.media)}catch(e){Sx(this,e)}}}
          ></frigate-card-icon>`:""}
    `}static get styles(){return s(":host {\n  display: flex;\n  flex-direction: row;\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n  transition: transform 0.2s linear;\n}\n\n:host(:not([details])) {\n  aspect-ratio: 1/1;\n}\n\n:host([details]) {\n  border: 1px solid var(--frigate-card-thumbnail-border-color);\n  border-radius: var(--frigate-card-css-border-radius, var(--ha-card-border-radius, 4px));\n  padding: 2px;\n  background-color: var(--frigate-card-thumbnail-background);\n}\n\n:host(:hover) {\n  transform: scale(1.04);\n}\n\nfrigate-card-icon {\n  position: absolute;\n  border-radius: 50%;\n  color: var(--frigate-card-thumbnail-icon-color);\n  cursor: pointer;\n  transition: opacity 0.2s ease-in-out, color 0.2s ease-in-out;\n}\n\nfrigate-card-icon:hover {\n  opacity: 1;\n}\n\nfrigate-card-icon.star {\n  top: 3px;\n  left: 3px;\n}\n\nfrigate-card-icon.star.starred {\n  color: var(--frigate-card-thumbnail-icon-favorite-color);\n}\n\nfrigate-card-icon.timeline {\n  top: 3px;\n  right: 3px;\n}\n\nfrigate-card-icon.download {\n  right: 3px;\n  bottom: 3px;\n}\n\nfrigate-card-thumbnail-details-event,\nfrigate-card-thumbnail-details-recording {\n  flex: 1;\n}")}};e([he({attribute:!1})],T$.prototype,"cameraManager",void 0),e([he({attribute:!1})],T$.prototype,"media",void 0),e([he({attribute:!0,type:Boolean})],T$.prototype,"details",void 0),e([he({attribute:!0,type:Boolean})],T$.prototype,"show_favorite_control",void 0),e([he({attribute:!0,type:Boolean})],T$.prototype,"show_timeline_control",void 0),e([he({attribute:!0,type:Boolean})],T$.prototype,"show_download_control",void 0),e([he({attribute:!1})],T$.prototype,"seek",void 0),T$=e([le("frigate-card-thumbnail")],T$);let z$=class extends oe{constructor(){super(...arguments),this.fadeThumbnails=!1,this._thumbnailSlides=[]}willUpdate(e){if(e.has("config")){this.config?.size&&this.style.setProperty("--frigate-card-thumbnail-size",`${this.config.size}px`);const e=this._getDirection();e?this.setAttribute("direction",e):this.removeAttribute("direction")}["cameraManager","config","transitionEffect","viewManagerEpoch"].some((t=>e.has(t)))&&(this._thumbnailSlides=this._renderSlides()),e.has("viewManagerEpoch")&&this.style.setProperty("--frigate-card-carousel-thumbnail-opacity",this.fadeThumbnails&&null!==this._getSelectedSlide()?"0.4":"1.0")}_getSelectedSlide(){return this.viewManagerEpoch?.manager.getView()?.queryResults?.getSelectedIndex()??null}_renderSlides(){const e=[],t=this.viewManagerEpoch?.manager.getView(),n=t?.context?.mediaViewer?.seek,i=this._getSelectedSlide();for(const a of t?.queryResults?.getResults()??[]){const t=e.length,r={embla__slide:!0,"slide-selected":i===t};e.push(U` <frigate-card-thumbnail
          class="${_e(r)}"
          .cameraManager=${this.cameraManager}
          .hass=${this.hass}
          .media=${a}
          .viewManagerEpoch=${this.viewManagerEpoch}
          .seek=${n&&a.includesTime(n)?n:void 0}
          ?details=${!!this.config?.show_details}
          ?show_favorite_control=${this.config?.show_favorite_control}
          ?show_timeline_control=${this.config?.show_timeline_control}
          ?show_download_control=${this.config?.show_download_control}
          @click=${e=>{const n=this.viewManagerEpoch?.manager.getView();n&&n.queryResults&&Km(this,"thumbnail-carousel:tap",{queryResults:n.queryResults.clone().selectIndex(t)}),Af(e)}}
        >
        </frigate-card-thumbnail>`)}return e}_getDirection(){return"left"===this.config?.mode||"right"===this.config?.mode?"vertical":"above"===this.config?.mode||"below"===this.config?.mode?"horizontal":null}render(){const e=this._getDirection();if(this._thumbnailSlides.length&&this.config&&e)return U`<frigate-card-carousel
      direction=${e}
      .selected=${this._getSelectedSlide()??0}
      .dragFree=${!0}
    >
      ${this._thumbnailSlides}
    </frigate-card-carousel>`}static get styles(){return s(":host {\n  --frigate-card-thumbnail-size-max: 300px;\n  --frigate-card-thumbnail-details-width: calc(\n    var(--frigate-card-thumbnail-size) + 200px\n  );\n}\n\n:host {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-color: var(--frigate-card-thumbnail-background);\n  --frigate-card-carousel-thumbnail-opacity: 1;\n}\n\n:host([direction=vertical]) {\n  height: 100%;\n}\n\n:host([direction=horizontal]) {\n  height: auto;\n}\n\n.embla__slide {\n  flex: 0 0 auto;\n  opacity: var(--frigate-card-carousel-thumbnail-opacity);\n}\n\n.embla__slide.slide-selected {\n  opacity: 1;\n}\n\nfrigate-card-thumbnail {\n  width: var(--frigate-card-thumbnail-size);\n  height: var(--frigate-card-thumbnail-size);\n  max-width: 100%;\n}\n\nfrigate-card-thumbnail[details] {\n  width: var(--frigate-card-thumbnail-details-width);\n}")}};e([he({attribute:!1})],z$.prototype,"hass",void 0),e([he({attribute:!1})],z$.prototype,"viewManagerEpoch",void 0),e([he({attribute:!1})],z$.prototype,"cameraManager",void 0),e([he({attribute:!1})],z$.prototype,"config",void 0),e([he({attribute:!1})],z$.prototype,"fadeThumbnails",void 0),z$=e([le("frigate-card-thumbnail-carousel")],z$);var j$=":host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}";const O$=document.createElement("template");O$.innerHTML='<style>\n:host {\n  background-color: #ffffff;\n  width: 350px;\n  max-width: 75vw;\n\n  visibility: hidden;\n  transition: visibility 0.5s;\n}\n\n:host([open]) {\n  visibility: visible;\n}\n\n::slotted(div) {\n  box-sizing: border-box;\n}\n\n#d {\n  position: fixed;\n  z-index: 99;\n  background-color: inherit;\n  -webkit-overflow-scrolling: touch;\n  overflow: auto;\n  overscroll-behavior: contain;\n  backdrop-filter: var(--side-drawer-backdrop-filter, none);\n\n  top: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  box-sizing: border-box;\n  transform: translateX(-100%);\n  transition: var(\n    --side-drawer-transition,\n    transform 0.25s ease-out\n  );\n  width: inherit;\n  max-width: inherit;\n  border-top-right-radius: inherit;\n  border-bottom-right-radius: inherit;\n}\n\n:host([open]) #d {\n  transform: none;\n  box-shadow: 0px 0px 25px 0px rgba(0, 0, 0, 0.5);\n}\n\n#fs {\n  position: fixed;\n  z-index: 98;\n  background-color: #000000;\n  backdrop-filter: var(--side-drawer-backdrop-filter, none);\n\n  top: 0;\n  bottom: 0;\n  right: -30px; /* hide scrollbar until overscroll bug is fixed */\n  height: 100vh;\n  transition: var(\n    --side-drawer-overlay-transition,\n    opacity linear 0.25s\n  );\n  width: calc(\n    100vw + 30px\n  ); /* put back to just 100vw once overscroll bug fixed */\n  opacity: 0;\n  visibility: hidden;\n\n  overflow: auto;\n  overscroll-behavior: contain;\n}\n\n:host([open]) #fs {\n  opacity: var(--side-drawer-overlay-opacity, 0.7);\n  visibility: visible;\n}\n\n/*\n   * Workaround for bug https://bugs.chromium.org/p/chromium/issues/detail?id=813094\n   * Once bug is fixed and in the wild we can remove this element and make #if overflow:hidden\n   * and set "right: 0; width: 100vw" for #fs\n   */\n#ifs {\n  height: calc(100vh + 1px);\n}\n</style>\n<div id="d"><slot></slot></div>\n<div id="fs"><div id="ifs"></div></div>\n';class D$ extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"});e.appendChild(O$.content.cloneNode(!0)),this._freeSpaceDiv=e.getElementById("fs")}connectedCallback(){this._freeSpaceDiv&&this._freeSpaceDiv.addEventListener("click",this.handleFreeSpaceDivClick),this.upgradeProperty("open")}disconnectedCallback(){document.removeEventListener("keyup",this.handleKeyUp)}upgradeProperty(e){if(this.hasOwnProperty(e)){let t=this[e];delete this[e],this[e]=t}}handleKeyUp=e=>{if(!e.altKey&&"Escape"===e.key)e.preventDefault(),this.open=!1};get open(){return this.hasAttribute("open")}set open(e){e?this.hasAttribute("open")||this.setAttribute("open",""):this.hasAttribute("open")&&this.removeAttribute("open")}static get observedAttributes(){return["open"]}attributeChangedCallback(e,t,n){"open"===e&&(this.open?(this.setAttribute("tabindex","0"),this.setAttribute("aria-disabled","false"),this.focus({preventScroll:!0}),document.addEventListener("keyup",this.handleKeyUp),this.dispatchEvent(new CustomEvent("open",{bubbles:!0}))):(this.setAttribute("tabindex","-1"),this.setAttribute("aria-disabled","true"),document.removeEventListener("keyup",this.handleKeyUp),this.dispatchEvent(new CustomEvent("close",{bubbles:!0}))))}handleFreeSpaceDivClick=()=>{this.open=!1}}customElements.define("side-drawer",D$);let R$=class extends oe{constructor(){super(...arguments),this.location="left",this.control=!0,this.open=!1,this.empty=!0,this._refDrawer=Ie(),this._refSlot=Ie(),this._resizeObserver=new ResizeObserver((()=>this._hideDrawerIfNecessary())),this._isHoverableDevice=rf()}firstUpdated(e){super.firstUpdated(e);const t=document.createElement("style");t.innerHTML=":host {\n  width: unset;\n}\n\n#fs {\n  display: none;\n  width: 100%;\n  inset: 0;\n}\n\n#d,\n#fs {\n  height: 100%;\n  position: absolute;\n}\n\n#d {\n  overflow: visible;\n  max-width: 90%;\n  z-index: 10;\n}\n\n:host([location=right]) #d {\n  left: unset;\n  right: 0;\n  transform: translateX(100%);\n}\n\n:host([location=right][open]) #d {\n  transform: none;\n  box-shadow: var(--frigate-card-css-box-shadow, 0px 0px 25px 0px black);\n}\n\n#ifs {\n  height: 100%;\n}",this._refDrawer.value?.shadowRoot?.appendChild(t)}_slotChanged(){const e=this._refSlot.value?_f(this._refSlot.value):[];this._resizeObserver.disconnect();for(const t of e)this._resizeObserver.observe(t);this._hideDrawerIfNecessary()}_hideDrawerIfNecessary(){if(!this._refDrawer.value)return;const e=this._refSlot.value?_f(this._refSlot.value):null;this.empty=!e||!e.length||e.every((e=>{const t=e.getBoundingClientRect();return!t.width||!t.height}))}render(){return U`
      <side-drawer
        ${je(this._refDrawer)}
        location="${this.location}"
        ?open=${this.open}
        @mouseleave=${()=>{this.open&&(this.open=!1)}}
      >
        ${this.control?U`
              <div
                class="control-surround"
                @click=${e=>{Af(e),this.open=!this.open}}
              >
                <frigate-card-icon
                  class="control"
                  .icon="${{icon:this.open?this.icons?.open??"mdi:menu-open":this.icons?.closed??"mdi:menu"}}"
                  @mouseenter=${()=>{this._isHoverableDevice&&!this.open&&(this.open=!0)}}
                >
                </frigate-card-icon>
              </div>
            `:""}
        <slot ${je(this._refSlot)} @slotchange=${()=>this._slotChanged()}></slot>
      </side-drawer>
    `}static get styles(){return s("side-drawer {\n  background-color: var(--card-background-color);\n}\n\ndiv.control-surround {\n  position: absolute;\n  bottom: 50%;\n  transform: translateY(50%);\n  z-index: 0;\n  padding-top: 20px;\n  padding-bottom: 20px;\n}\n\n:host([location=left]) div.control-surround {\n  padding-right: 12px;\n  left: 100%;\n}\n\n:host([location=right]) div.control-surround {\n  padding-left: 12px;\n  right: 100%;\n}\n\n:host([empty]),\n:host([empty]) > * {\n  visibility: hidden;\n}\n\n:host(:not([empty])),\n:host(:not([empty])) > * {\n  visibility: visible;\n}\n\nfrigate-card-icon.control {\n  color: var(--frigate-card-button-color);\n  background-color: var(--frigate-card-button-background);\n  pointer-events: all;\n  --mdc-icon-size: 20px;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  transition: opacity 0.5s ease;\n}\n\n:host([open]) frigate-card-icon.control,\nfrigate-card-icon.control:hover {\n  opacity: 1;\n}\n\n:host([location=left]) frigate-card-icon.control {\n  border-top-right-radius: 20px;\n  border-bottom-right-radius: 20px;\n}\n\n:host([location=right]) frigate-card-icon.control {\n  border-top-left-radius: 20px;\n  border-bottom-left-radius: 20px;\n}")}};e([he({attribute:!0,reflect:!0})],R$.prototype,"location",void 0),e([he({attribute:!0,reflect:!0,type:Boolean})],R$.prototype,"control",void 0),e([he({type:Boolean,reflect:!0,attribute:!0})],R$.prototype,"open",void 0),e([he({attribute:!1})],R$.prototype,"icons",void 0),e([he({type:Boolean,reflect:!0,attribute:!0})],R$.prototype,"empty",void 0),R$=e([le("frigate-card-drawer")],R$);let P$=class extends oe{constructor(){super(...arguments),this._refDrawerLeft=Ie(),this._refDrawerRight=Ie(),this._boundDrawerHandler=this._drawerHandler.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("frigate-card:drawer:open",this._boundDrawerHandler),this.addEventListener("frigate-card:drawer:close",this._boundDrawerHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("frigate-card:drawer:open",this._boundDrawerHandler),this.removeEventListener("frigate-card:drawer:close",this._boundDrawerHandler)}_drawerHandler(e){const t=e.detail.drawer,n=e.type.endsWith(":open");"left"===t&&this._refDrawerLeft.value?this._refDrawerLeft.value.open=n:"right"===t&&this._refDrawerRight.value&&(this._refDrawerRight.value.open=n)}render(){return U` <slot name="above"></slot>
      <slot></slot>
      <frigate-card-drawer
        ${je(this._refDrawerLeft)}
        location="left"
        .icons=${this.drawerIcons?.left}
      >
        <slot name="left"></slot>
      </frigate-card-drawer>
      <frigate-card-drawer
        ${je(this._refDrawerRight)}
        location="right"
        .icons=${this.drawerIcons?.right}
      >
        <slot name="right"></slot>
      </frigate-card-drawer>
      <slot name="below"></slot>`}static get styles(){return s(":host {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n}\n\n::slotted(:not([slot])) {\n  flex: 1;\n  min-height: 0px;\n}")}};e([he({attribute:!1})],P$.prototype,"drawerIcons",void 0),P$=e([le("frigate-card-surround-basic")],P$);let L$=class extends oe{_hasDrawer(){return!!this.thumbnailConfig&&["left","right"].includes(this.thumbnailConfig.mode)}willUpdate(e){this.timelineConfig?.mode&&"none"!==this.timelineConfig.mode&&import("./timeline-core-b1a6921f.js");const t=this.viewManagerEpoch?.manager.getView();e.has("viewManagerEpoch")&&(this.viewManagerEpoch?.manager.hasMajorMediaChange(this.viewManagerEpoch?.oldView)||this.viewManagerEpoch?.oldView?.displayMode!==t?.displayMode)&&(this._cameraIDsForTimeline=this._getCameraIDsForTimeline()??void 0)}_getCameraIDsForTimeline(){const e=this.viewManagerEpoch?.manager.getView();if(!e||!this.cameraManager)return null;if(e.is("live")){const t={anyCapabilities:["clips","snapshots","recordings"]};return e.supportsMultipleDisplayModes()&&e.isGrid()?this.cameraManager.getStore().getCameraIDsWithCapability(t):this.cameraManager.getStore().getAllDependentCameras(e.camera,t)}return e.isViewerView()?e.query?.getQueryCameraIDs()??null:null}render(){const e=this.viewManagerEpoch?.manager.getView();if(!this.hass||!e)return;const t=(e,t)=>{this.thumbnailConfig&&this._hasDrawer()&&Km(e.composedPath()[0],"drawer:"+t,{drawer:this.thumbnailConfig.mode})};return U` <frigate-card-surround-basic
      @frigate-card:thumbnails:open=${e=>t(e,"open")}
      @frigate-card:thumbnails:close=${e=>t(e,"close")}
    >
      ${this.thumbnailConfig&&"none"!==this.thumbnailConfig.mode?U` <frigate-card-thumbnail-carousel
            slot=${this.thumbnailConfig.mode}
            .hass=${this.hass}
            .config=${this.thumbnailConfig}
            .cameraManager=${this.cameraManager}
            .fadeThumbnails=${e.isViewerView()}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .selected=${e.queryResults?.getSelectedIndex()??void 0}
            @frigate-card:thumbnail-carousel:tap=${e=>{const n=e.detail.queryResults.getSelectedResult();n&&(this.viewManagerEpoch?.manager.setViewByParameters({params:{view:"media",queryResults:e.detail.queryResults,...n.getCameraID()&&{camera:n.getCameraID()}},modifiers:[new y$(["timeline","mediaViewer"])]}),t(e,"close"))}}
          >
          </frigate-card-thumbnail-carousel>`:""}
      ${this.timelineConfig&&"none"!==this.timelineConfig.mode?U` <frigate-card-timeline-core
            slot=${this.timelineConfig.mode}
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .itemClickAction=${e.isViewerView()||!this.thumbnailConfig||"none"===this.thumbnailConfig?.mode?"play":"select"}
            .cameraIDs=${this._cameraIDsForTimeline}
            .mini=${!0}
            .timelineConfig=${this.timelineConfig}
            .thumbnailConfig=${this.thumbnailConfig}
            .cameraManager=${this.cameraManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </frigate-card-timeline-core>`:""}
      <slot></slot>
    </frigate-card-surround-basic>`}static get styles(){return s(j$)}};e([he({attribute:!1})],L$.prototype,"hass",void 0),e([he({attribute:!1})],L$.prototype,"viewManagerEpoch",void 0),e([he({attribute:!1,hasChanged:nf})],L$.prototype,"thumbnailConfig",void 0),e([he({attribute:!1,hasChanged:nf})],L$.prototype,"timelineConfig",void 0),e([he({attribute:!1})],L$.prototype,"cameraManager",void 0),e([he({attribute:!1})],L$.prototype,"cardWideConfig",void 0),L$=e([le("frigate-card-surround")],L$);let N$=class extends oe{constructor(){super(...arguments),this._diagnostics=null}async _fetchDiagnostics(){this._diagnostics=await(async(e,t,n)=>{const i=e&&t?await t.getMatchingDevices(e,(e=>"Frigate"===e.manufacturer)):[],a=new Map;return i?.forEach((e=>{e.config_entries.forEach((t=>{e.model&&a.set(t,e.model)}))})),{card_version:"6.3.8",browser:navigator.userAgent,date:new Date,lang:Q_(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,git:{hash:Fx,build_date:Nx,commit_date:Vx},...e&&{ha_version:e.config.version},custom_integrations:{frigate:{...await Zx("frigate",e),...a.size&&{devices:Object.fromEntries(a)}},hass_web_proxy:await Zx(Bx,e)},...n&&{config:n}}})(this.hass,this.deviceRegistryManager,this.rawConfig)}shouldUpdate(){return!!this._diagnostics||(this._fetchDiagnostics().then((()=>this.requestUpdate())),!1)}render(){return qS({message:Y_("error.diagnostics"),icon:"mdi:cogs",context:this._diagnostics})}static get styles(){return s(j$)}};e([he({attribute:!1})],N$.prototype,"hass",void 0),e([he({attribute:!1})],N$.prototype,"deviceRegistryManager",void 0),e([he({attribute:!1})],N$.prototype,"rawConfig",void 0),e([ge()],N$.prototype,"_diagnostics",void 0),N$=e([le("frigate-card-diagnostics")],N$);let F$=class extends oe{willUpdate(e){if(e.has("viewManagerEpoch")||e.has("config")){const e=this.viewManagerEpoch?.manager.getView();(e?.is("live")||this._shouldLivePreload())&&import("./index-5c69b7a4.js"),e?.isGalleryView()?import("./gallery-ed9a9e7b.js"):e?.isViewerView()?import("./index-5fa16a42.js"):e?.is("image")?import("./image-9ebba201.js"):e?.is("timeline")&&import("./timeline-ddbcbe2e.js")}e.has("hide")&&(this.hide?this.setAttribute("hidden",""):this.removeAttribute("hidden"))}shouldUpdate(e){return!0}_shouldLivePreload(){const e=this.viewManagerEpoch?.manager.getView();return!!this.overriddenConfig?.live.preload&&!e?.is("diagnostics")}render(){if(!(this.hass&&this.overriddenConfig&&this.nonOverriddenConfig&&this.cardWideConfig))return U``;const e=this.viewManagerEpoch?.manager.getView(),t={hidden:this._shouldLivePreload()&&!e?.is("live")},n={hidden:!!this.hide},i=e?.is("live")?this.overriddenConfig.live.controls.thumbnails:e?.isViewerView()?this.overriddenConfig.media_viewer.controls.thumbnails:e?.is("timeline")?this.overriddenConfig.timeline.controls.thumbnails:void 0,a=e?.is("live")?this.overriddenConfig.live.controls.timeline:e?.isViewerView()?this.overriddenConfig.media_viewer.controls.timeline:void 0,r=e?this.cameraManager?.getStore().getCameraConfig(e.camera)??null:null;return U` <frigate-card-surround
      class="${_e(n)}"
      .hass=${this.hass}
      .viewManagerEpoch=${this.viewManagerEpoch}
      .thumbnailConfig=${this.hide?void 0:i}
      .timelineConfig=${this.hide?void 0:a}
      .cameraManager=${this.cameraManager}
      .cardWideConfig=${this.cardWideConfig}
    >
      ${!this.hide&&e?.is("image")&&r?U` <frigate-card-image
            .imageConfig=${this.overriddenConfig.image}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .hass=${this.hass}
            .cameraConfig=${r}
            .cameraManager=${this.cameraManager}
          >
          </frigate-card-image>`:""}
      ${!this.hide&&e?.isGalleryView()?U` <frigate-card-gallery
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .galleryConfig=${this.overriddenConfig.media_gallery}
            .cameraManager=${this.cameraManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </frigate-card-gallery>`:""}
      ${!this.hide&&e?.isViewerView()?U`
            <frigate-card-viewer
              .hass=${this.hass}
              .viewManagerEpoch=${this.viewManagerEpoch}
              .viewerConfig=${this.overriddenConfig.media_viewer}
              .resolvedMediaCache=${this.resolvedMediaCache}
              .cameraManager=${this.cameraManager}
              .cardWideConfig=${this.cardWideConfig}
            >
            </frigate-card-viewer>
          `:""}
      ${!this.hide&&e?.is("timeline")?U` <frigate-card-timeline
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .timelineConfig=${this.overriddenConfig.timeline}
            .cameraManager=${this.cameraManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </frigate-card-timeline>`:""}
      ${!this.hide&&e?.is("diagnostics")?U` <frigate-card-diagnostics
            .hass=${this.hass}
            .rawConfig=${this.rawConfig}
            .deviceRegistryManager=${this.deviceRegistryManager}
          >
          </frigate-card-diagnostics>`:""}
      ${this._shouldLivePreload()||!this.hide&&e?.is("live")?U`
              <frigate-card-live
                .hass=${this.hass}
                .viewManagerEpoch=${this.viewManagerEpoch}
                .nonOverriddenLiveConfig=${this.nonOverriddenConfig.live}
                .overriddenLiveConfig=${this.overriddenConfig.live}
                .conditionsManagerEpoch=${this.conditionsManagerEpoch}
                .overrides=${this.overriddenConfig.overrides}
                .cameraManager=${this.cameraManager}
                .cardWideConfig=${this.cardWideConfig}
                .microphoneState=${this.microphoneState}
                .triggeredCameraIDs=${this.triggeredCameraIDs}
                class="${_e(t)}"
              >
              </frigate-card-live>
            `:""}
    </frigate-card-surround>`}static get styles(){return s(":host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n:host([hidden]),\n.hidden {\n  display: none;\n}")}};e([he({attribute:!1})],F$.prototype,"hass",void 0),e([he({attribute:!1})],F$.prototype,"viewManagerEpoch",void 0),e([he({attribute:!1})],F$.prototype,"cameraManager",void 0),e([he({attribute:!1})],F$.prototype,"nonOverriddenConfig",void 0),e([he({attribute:!1})],F$.prototype,"overriddenConfig",void 0),e([he({attribute:!1})],F$.prototype,"cardWideConfig",void 0),e([he({attribute:!1})],F$.prototype,"rawConfig",void 0),e([he({attribute:!1})],F$.prototype,"resolvedMediaCache",void 0),e([he({attribute:!1})],F$.prototype,"conditionsManagerEpoch",void 0),e([he({attribute:!1})],F$.prototype,"hide",void 0),e([he({attribute:!1})],F$.prototype,"microphoneState",void 0),e([he({attribute:!1})],F$.prototype,"triggeredCameraIDs",void 0),e([he({attribute:!1})],F$.prototype,"deviceRegistryManager",void 0),F$=e([le("frigate-card-views")],F$);console.info(`%c FRIGATE-HASS-CARD \n%c ${Y_("common.version")} 6.3.8`,"color: pink; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray"),window.customCards=window.customCards||[],window.customCards.push({type:"frigate-card",name:Y_("common.frigate_card"),description:Y_("common.frigate_card_description"),preview:!0,documentationURL:"https://github.com/dermotduffy/frigate-hass-card"});let V$=class extends oe{constructor(){super(...arguments),this._controller=new Mx(this,(()=>this._refMain.value?.scroll({top:0})),(()=>this._refMenu.value?.toggleMenu()),this._requestUpdateForComponentsThatUseConditions.bind(this)),this._menuButtonController=new Cx,this._refMenu=Ie(),this._refOverlay=Ie(),this._refMain=Ie(),this._refElements=Ie(),this._refViews=Ie()}get _config(){return this._controller.getConfigManager().getConfig()}get _hass(){return this._controller.getHASSManager().getHASS()}set hass(e){this._controller.getHASSManager().setHASS(e),this._refMenu.value&&(this._refMenu.value.hass=e),this._refElements.value&&(this._refElements.value.hass=e),this._refViews.value&&(this._refViews.value.hass=e)}static async getConfigElement(){return await Mx.getConfigElement()}static getStubConfig(e,t){return Mx.getStubConfig(t)}_requestUpdateForComponentsThatUseConditions(){this._refViews.value&&(this._refViews.value.conditionsManagerEpoch=this._controller.getConditionsManager().getEpoch()??void 0),this._refElements.value&&(this._refElements.value.conditionsManagerEpoch=this._controller.getConditionsManager().getEpoch()??void 0)}setConfig(e){this._controller.getConfigManager().setConfig(e)}shouldUpdate(){return!!this.isConnected&&(this._controller.getMessageManager().hasMessage()||this._controller.getInitializationManager().isInitializedMandatory()||this._controller.getInitializationManager().initializeMandatory(),!0)}_renderMenuStatusContainer(e){if(!this._config)return;const t=this._config.menu.style,n=this._config.menu.position,i=this._config.status_bar.style,a=this._config.status_bar.position;if("none"===t&&"none"===i||"overlay"===e&&"outside"===t&&"outside"===i||"overlay"!==e&&("outside"!==t||n!==e)&&("outside"!==i||a!==e))return;const r=r=>{const s="none"!==t&&("outside"===t&&"outerlay"===r&&n===e||"outside"!==t&&"overlay"===r),o="none"!==i&&("outside"===i&&"outerlay"===r&&a===e||"outside"!==i&&"overlay"===r),c="left"===n||"right"===n||"bottom"===n&&"hidden"===t&&"popup"!==i||"top"===n&&"popup"===i;return U`
        ${s&&c?this._renderMenu(n):""}
        ${o?this._renderStatusBar(a):""}
        ${s&&!c?this._renderMenu(n):""}
      `};return U`
      ${"overlay"===e?U`<frigate-card-overlay>${r("overlay")}</frigate-card-overlay>`:U`<div class="outerlay" data-position="${e}">
            ${r("outerlay")}
          </div>`}
    `}_renderMenu(e){const t=this._controller.getViewManager().getView();if(this._hass&&this._config)return U`
      <frigate-card-menu
        ${je(this._refMenu)}
        slot=${ve(e)}
        .hass=${this._hass}
        .menuConfig=${this._config.menu}
        .buttons=${this._menuButtonController.calculateButtons(this._hass,this._config,this._controller.getCameraManager(),{inExpandedMode:this._controller.getExpandManager().isExpanded(),inFullscreenMode:this._controller.getFullscreenManager().isInFullscreen(),currentMediaLoadedInfo:this._controller.getMediaLoadedInfoManager().get(),showCameraUIButton:this._controller.getCameraURLManager().hasCameraURL(),mediaPlayerController:this._controller.getMediaPlayerManager(),microphoneManager:this._controller.getMicrophoneManager(),view:t,viewManager:this._controller.getViewManager()})}
        .entityRegistryManager=${this._controller.getEntityRegistryManager()}
      ></frigate-card-menu>
    `}_renderStatusBar(e){if(this._config)return U`
      <frigate-card-status-bar
        slot=${ve(e)}
        .items=${this._controller.getStatusBarItemManager().calculateItems({statusConfig:this._config.status_bar,cameraManager:this._controller.getCameraManager(),view:this._controller.getViewManager().getView(),mediaLoadedInfo:this._controller.getMediaLoadedInfoManager().get()})}
        .config=${this._config.status_bar}
      ></frigate-card-status-bar>
    `}updated(){this._controller.getInitializationManager().isInitializedMandatory()&&this._controller.getQueryStringManager().executeIfNecessary()}_renderInDialogIfNecessary(e){return this._controller.getExpandManager().isExpanded()?U` <web-dialog
        open
        center
        @close=${()=>{this._controller.getExpandManager().setExpanded(!1)}}
      >
        ${e}
      </web-dialog>`:e}render(){if(!this._hass)return;const e="outside"===this._config?.menu.style||"outside"===this._config?.status_bar.style,t={main:!0,"curve-top":!e||"top"!==this._config?.menu.position&&"top"!==this._config?.status_bar.position,"curve-bottom":!e||"bottom"!==this._config?.menu.position&&"bottom"!==this._config?.status_bar.position},n=this._controller.getActionsManager().getMergedActions(),i=this._controller.getCameraManager(),a=!1!==this._config?.performance?.features.card_loading_indicator&&!this._controller.getMessageManager().hasMessage();return this._renderInDialogIfNecessary(U` <ha-card
        id="ha-card"
        .actionHandler=${jf({hasHold:Ef(n.hold_action),hasDoubleClick:Ef(n.double_tap_action)})}
        style="${Re(this._controller.getStyleManager().getAspectRatioStyle())}"
        @frigate-card:message=${e=>this._controller.getMessageManager().setMessageIfHigherPriority(e.detail)}
        @frigate-card:media:loaded=${e=>this._controller.getMediaLoadedInfoManager().set(e.detail)}
        @frigate-card:media:unloaded=${()=>this._controller.getMediaLoadedInfoManager().clear()}
        @frigate-card:media:volumechange=${()=>this.requestUpdate()}
        @frigate-card:media:play=${()=>this.requestUpdate()}
        @frigate-card:media:pause=${()=>this.requestUpdate()}
        @frigate-card:focus=${()=>this.focus()}
      >
        ${a?U`<frigate-card-loading
              ?loaded=${this._controller.getInitializationManager().wasEverInitialized()}
            ></frigate-card-loading>`:""}
        ${this._renderMenuStatusContainer("top")}
        ${this._renderMenuStatusContainer("overlay")}
        <div ${je(this._refMain)} class="${_e(t)}">
          <frigate-card-views
            ${je(this._refViews)}
            .hass=${this._hass}
            .viewManagerEpoch=${this._controller.getViewManager().getEpoch()}
            .cameraManager=${i}
            .resolvedMediaCache=${this._controller.getResolvedMediaCache()}
            .nonOverriddenConfig=${this._controller.getConfigManager().getNonOverriddenConfig()}
            .overriddenConfig=${this._controller.getConfigManager().getConfig()}
            .cardWideConfig=${this._controller.getConfigManager().getCardWideConfig()}
            .rawConfig=${this._controller.getConfigManager().getRawConfig()}
            .configManager=${this._controller.getConfigManager()}
            .conditionsManagerEpoch=${this._controller.getConditionsManager()?.getEpoch()}
            .hide=${!!this._controller.getMessageManager().hasMessage()}
            .microphoneState=${this._controller.getMicrophoneManager().getState()}
            .triggeredCameraIDs=${this._config?.view.triggers.show_trigger_status?this._controller.getTriggersManager().getTriggeredCameraIDs():void 0}
            .deviceRegistryManager=${this._controller.getDeviceRegistryManager()}
          ></frigate-card-views>
          ${this._controller.getMessageManager().hasMessage()?qS(this._controller.getMessageManager().getMessage()):""}
        </div>
        ${this._renderMenuStatusContainer("bottom")}
        ${this._config?.elements?U` <frigate-card-elements
              ${je(this._refElements)}
              .hass=${this._hass}
              .elements=${this._config?.elements}
              .conditionsManagerEpoch=${this._controller.getConditionsManager()?.getEpoch()}
              @frigate-card:menu:add=${e=>{this._menuButtonController.addDynamicMenuButton(e.detail),this.requestUpdate()}}
              @frigate-card:menu:remove=${e=>{this._menuButtonController.removeDynamicMenuButton(e.detail),this.requestUpdate()}}
              @frigate-card:status-bar:add=${e=>{this._controller.getStatusBarItemManager().addDynamicStatusBarItem(e.detail)}}
              @frigate-card:status-bar:remove=${e=>{this._controller.getStatusBarItemManager().removeDynamicStatusBarItem(e.detail)}}
              @frigate-card:conditions:evaluate=${e=>{e.evaluation=this._controller.getConditionsManager()?.evaluateConditions(e.conditions)}}
            >
            </frigate-card-elements>`:""}
      </ha-card>`)}static get styles(){return s(':host([themes~=dark]) {\n  --primary-background-color: #111111;\n  --secondary-background-color: #282828;\n  --primary-text-color: #e1e1e1;\n  --divider-color: rgba(225, 225, 225, 0.12);\n  --app-header-background-color: #101e24;\n  --app-header-text-color: #e1e1e1;\n}\n\n:host([themes~=light]) {\n  --primary-background-color: #fafafa;\n  --secondary-background-color: #e5e5e5;\n  --primary-text-color: #212121;\n  --divider-color: rgba(0, 0, 0, 0.12);\n  --app-header-text-color: #ffffff;\n  --app-header-background-color: #03a9f4;\n}\n\n:host([themes~=traditional]) {\n  /*********\n   * General\n   *********/\n  --frigate-card-control-background: black;\n  /******\n   * Menu\n   ******/\n  --frigate-card-menu-button-active-color: var(--primary-color, white);\n  --frigate-card-menu-button-background: rgba(0, 0, 0, 0.6);\n  --frigate-card-menu-position-left-alignment-top-background: linear-gradient(180deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-menu-position-left-alignment-bottom-background: linear-gradient(0deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-menu-position-right-alignment-top-background: linear-gradient(180deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-menu-position-right-alignment-bottom-background: linear-gradient(0deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-menu-position-top-alignment-left-background: linear-gradient(90deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-menu-position-top-alignment-right-background: linear-gradient(270deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-menu-position-bottom-alignment-left-background: linear-gradient(90deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-menu-position-bottom-alignment-right-background: linear-gradient(270deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-menu-position-top-alignment-left-style-outside-background: var(\n    --secondary-background-color\n  );\n  --frigate-card-menu-position-top-alignment-right-style-outside-background: var(\n    --secondary-background-color\n  );\n  --frigate-card-menu-position-bottom-alignment-left-style-outside-background: var(\n    --secondary-background-color\n  );\n  --frigate-card-menu-position-bottom-alignment-right-style-outside-background: var(\n    --secondary-background-color\n  );\n  /************\n   * Status bar\n   ************/\n  --frigate-card-status-bar-color: white;\n  --frigate-card-status-bar-position-top-background: linear-gradient(90deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-status-bar-position-bottom-background: linear-gradient(90deg, var(--frigate-card-menu-background), var(--frigate-card-menu-background), var(--frigate-card-menu-background), color-mix(in oklab, var(--frigate-card-menu-background), transparent 100%));\n  --frigate-card-status-bar-position-top-style-outside-background: var(\n    --secondary-background-color\n  );\n  --frigate-card-status-bar-position-bottom-style-outside-background: var(\n    --secondary-background-color\n  );\n  --frigate-card-status-bar-position-top-style-outside-color: var(\n    --secondary-text-color\n  );\n  --frigate-card-status-bar-position-bottom-style-outside-color: var(\n    --secondary-text-color\n  );\n}\n\n:host {\n  /*********\n   * General\n   *********/\n  --frigate-card-exterior: var(--secondary-background-color, black);\n  --frigate-card-background: var(--primary-background-color, white);\n  --frigate-card-foreground-primary: var(--primary-color, black);\n  --frigate-card-active-color: var(--accent-color, orange);\n  --frigate-card-warning-color: var(--error-color, red);\n  --frigate-card-text-color: var(--primary-text-color);\n  --frigate-card-divider-color: var(--divider-color);\n  --frigate-card-control-background: var(--app-header-background-color);\n  --frigate-card-control-background-transparent: color-mix(\n    in oklab,\n    var(--frigate-card-control-background),\n    transparent 60%\n  );\n  --frigate-card-control-foreground: var(--app-header-text-color);\n  /*********\n   * Buttons\n   *********/\n  --frigate-card-button-color: var(--frigate-card-control-foreground);\n  --frigate-card-button-background: var(--frigate-card-control-background-transparent);\n  /******\n   * Menu\n   ******/\n  --frigate-card-menu-button-active-color: var(--frigate-card-active-color);\n  --frigate-card-menu-button-inactive-color: var(--frigate-card-button-color);\n  --frigate-card-menu-button-critical-color: var(\n    --error-color,\n    var(--frigate-card-warning-color)\n  );\n  --frigate-card-menu-button-background: color-mix(\n    in oklab,\n    var(--frigate-card-menu-button-inactive-color),\n    transparent 60%\n  );\n  --frigate-card-menu-background: var(--frigate-card-control-background-transparent);\n  --frigate-card-menu-style-outside-background: var(--frigate-card-control-background);\n  --frigate-card-menu-override-background: unset;\n  --frigate-card-menu-override-button-inactive-color: unset;\n  --frigate-card-menu-override-button-background: unset;\n  /************\n   * Status bar\n   ************/\n  --frigate-card-status-bar-override-background: unset;\n  --frigate-card-status-bar-override-color: unset;\n  --frigate-card-status-bar-color: var(--frigate-card-control-foreground);\n  --frigate-card-status-bar-background: var(\n    --frigate-card-control-background-transparent\n  );\n  --frigate-card-status-bar-style-outside-background: var(\n    --frigate-card-control-background\n  );\n  /************\n   * Thumbnails\n   ************/\n  --frigate-card-thumbnail-icon-color: var(--frigate-card-foreground-primary);\n  --frigate-card-thumbnail-border-color: var(--frigate-card-foreground-primary);\n  --frigate-card-thumbnail-background: var(--frigate-card-background);\n  --frigate-card-thumbnail-icon-favorite-color: color-mix(\n    in oklab,\n    gold,\n    transparent 25%\n  );\n  --frigate-card-thumbnail-text-color: var(--frigate-card-text-color);\n  /**********\n   * Timeline\n   **********/\n  --frigate-card-timeline-text-color: var(--frigate-card-text-color);\n  --frigate-card-timeline-item-color: var(--frigate-card-foreground-primary);\n  --frigate-card-timeline-tool-color: var(--frigate-card-foreground-primary);\n  --frigate-card-timeline-background: var(--frigate-card-background);\n  --frigate-card-timeline-background-item-color: color-mix(\n    in oklab,\n    var(--frigate-card-timeline-item-color),\n    transparent 90%\n  );\n  --frigate-card-timeline-divider-color: var(--frigate-card-divider-color);\n  --frigate-card-timeline-target-bar-color: var(--frigate-card-active-color);\n  /*******************\n   * Loading Indicator\n   *******************/\n  --frigate-card-loading-background-color: var(\n    --frigate-card-control-background-transparent\n  );\n  --frigate-card-loading-foreground-color: var(--frigate-card-control-foreground);\n  /*********\n   * Message\n   *********/\n  --frigate-card-message-color: var(--frigate-card-text-color);\n  --frigate-card-message-background: var(--frigate-card-background);\n  --frigate-card-message-overlay-background: var(\n    --frigate-card-control-background-transparent\n  );\n  --frigate-card-message-overlay-color: var(--frigate-card-control-foreground);\n}\n\n:host {\n  display: block;\n  position: relative;\n  background-color: var(--card-background-color);\n  border-radius: var(--ha-card-border-radius, 4px);\n  height: var(--frigate-card-height);\n  min-height: 100px;\n  pointer-events: all;\n  --frigate-card-expand-max-height: calc((100vh - (2 * 56px)) * 0.85);\n  --frigate-card-expand-max-width: 85vw;\n  --frigate-card-expand-width: none;\n  --frigate-card-expand-height: none;\n  --frigate-card-expand-aspect-ratio: unset;\n  --frigate-card-height: auto;\n}\n\nfrigate-card-loading {\n  position: absolute;\n  inset: 0;\n  z-index: 1;\n}\n\n:host([dimmable]:not([interaction])) {\n  filter: brightness(75%);\n}\n\n:host([panel]:not([casted])) {\n  height: calc(100vh - var(--kiosk-header-height, var(--header-height)));\n}\n\n:host([panel][casted]) {\n  height: 100%;\n}\n\ndiv.main {\n  position: relative;\n  overflow: auto;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  display: block;\n  transform: translateZ(0);\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n\n/* Hide scrollbar for Chrome, Safari and Opera */\ndiv.main::-webkit-scrollbar {\n  display: none;\n}\n\ndiv.main.curve-top {\n  border-top-left-radius: var(--ha-card-border-radius, 4px);\n  border-top-right-radius: var(--ha-card-border-radius, 4px);\n}\n\ndiv.main.curve-bottom {\n  border-bottom-left-radius: var(--ha-card-border-radius, 4px);\n  border-bottom-right-radius: var(--ha-card-border-radius, 4px);\n}\n\nha-card {\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  border: 0px;\n  overflow: visible;\n  width: 100%;\n  height: 100%;\n  position: static;\n  color: var(--secondary-text-color, white);\n}\n\n/************\n * Fullscreen\n *************/\n:host(:fullscreen) #ha-card {\n  border-radius: 0px;\n  box-shadow: none;\n  margin: 0;\n}\n\n:host(:-webkit-full-screen) #ha-card {\n  border-radius: 0px;\n  box-shadow: none;\n  margin: 0;\n}\n\n:host(:fullscreen) div.main,\n:host(:fullscreen) frigate-card-menu {\n  border-radius: 0px;\n}\n\n:host(:-webkit-full-screen) div.main,\n:host(:-webkit-full-screen) frigate-card-menu {\n  border-radius: 0px;\n}\n\n/***************\n * Expanded mode\n ***************/\nweb-dialog {\n  --dialog-padding: 0px;\n  --dialog-container-padding: 0px;\n  --dialog-max-height: var(--frigate-card-expand-max-height);\n  --dialog-max-width: var(--frigate-card-expand-max-width);\n  --dialog-width: var(--frigate-card-expand-width);\n  --dialog-height: var(--frigate-card-expand-height);\n  --dialog-overflow-x: visible;\n  --dialog-overflow-y: visible;\n  max-height: 100vh;\n}\n\nweb-dialog::part(dialog) {\n  aspect-ratio: var(--frigate-card-expand-aspect-ratio);\n  border-radius: 0px;\n  background: transparent;\n}\n\n/*************************************\n * "Outside" style for menu/status bar\n *************************************/\n.outerlay[data-position=top] > *:first-child {\n  border-top-left-radius: var(--ha-card-border-radius, 4px);\n  border-top-right-radius: var(--ha-card-border-radius, 4px);\n}\n\n.outerlay[data-position=bottom] > *:last-child {\n  border-bottom-left-radius: var(--ha-card-border-radius, 4px);\n  border-bottom-right-radius: var(--ha-card-border-radius, 4px);\n}\n\n/*******************\n * Menu hover styles\n *******************/\nfrigate-card-menu {\n  z-index: 2;\n}\n\nfrigate-card-menu[data-style*=hover] {\n  transition: opacity 0.5s ease;\n  opacity: 0;\n}\n\nfrigate-card-menu[data-style*=hover]:hover,\nha-card:hover > frigate-card-overlay > frigate-card-menu[data-style=hover-card] {\n  opacity: 1;\n}\n\n/*************************\n * Status bar hover styles\n *************************/\nfrigate-card-status-bar {\n  z-index: 1;\n}\n\nfrigate-card-status-bar[data-style*=hover] {\n  transition: opacity 0.5s ease;\n  opacity: 0;\n}\n\nfrigate-card-status-bar[data-style*=hover]:hover,\nha-card:hover > frigate-card-overlay > frigate-card-status-bar[data-style=hover-card] {\n  opacity: 1;\n}')}getCardSize(){return 6}};V$=e([le("frigate-card")],V$);export{Wo as $,ir as A,ar as B,Qa as C,rr as D,sr as E,or as F,La as G,Na as H,Fa as I,Va as J,Ha as K,Ba as L,Ua as M,qa as N,Wa as O,_o as P,Yo as Q,io as R,Qo as S,sc as T,qs as U,Vs as V,Hs as W,Bs as X,Us as Y,rc as Z,e as _,oe as a,Ts as a$,Rl as a0,Pl as a1,G_ as a2,Zb as a3,et as a4,Qb as a5,To as a6,Da as a7,Oa as a8,Ra as a9,xs as aA,Gr as aB,Kr as aC,Jr as aD,cs as aE,ls as aF,us as aG,hs as aH,ds as aI,rs as aJ,ss as aK,os as aL,ms as aM,vs as aN,ys as aO,gs as aP,ps as aQ,_s as aR,fs as aS,ns as aT,as as aU,is as aV,es as aW,ts as aX,Xr as aY,Is as aZ,zs as a_,Pa as aa,Za as ab,Xa as ac,to as ad,eo as ae,Xs as af,no as ag,po as ah,go as ai,fo as aj,Zo as ak,mo as al,$s as am,Cs as an,js as ao,Ss as ap,ks as aq,Wr as ar,Zr as as,Qr as at,Yr as au,Es as av,As as aw,bs as ax,Ms as ay,ws as az,ge as b,Fi as b$,pr as b0,dr as b1,hr as b2,gr as b3,ur as b4,lr as b5,fr as b6,_r as b7,vr as b8,yr as b9,Ns as bA,Ds as bB,Rs as bC,Ls as bD,Zs as bE,Qs as bF,Gs as bG,Ks as bH,Ys as bI,Ws as bJ,bo as bK,yo as bL,wo as bM,So as bN,Co as bO,ko as bP,zo as bQ,$o as bR,Io as bS,Ao as bT,qb as bU,Bb as bV,Xm as bW,Si as bX,ea as bY,Ki as bZ,Ni as b_,Cr as ba,Ur as bb,Sr as bc,$r as bd,kr as be,br as bf,Mr as bg,wr as bh,xr as bi,Er as bj,Ar as bk,Ir as bl,Rr as bm,zr as bn,Or as bo,Dr as bp,jr as bq,Tr as br,Nr as bs,Hr as bt,Br as bu,Pr as bv,Lr as bw,Vr as bx,Fr as by,Ps as bz,Wb as c,Kk as c$,Ci as c0,ki as c1,Di as c2,Oi as c3,Ri as c4,ji as c5,Gi as c6,Wi as c7,Zi as c8,Qi as c9,la as cA,da as cB,ua as cC,ha as cD,aa as cE,ra as cF,$i as cG,Ei as cH,pa as cI,ga as cJ,fa as cK,ma as cL,Qd as cM,Mi as cN,Eo as cO,Hw as cP,Ie as cQ,Bw as cR,vf as cS,qS as cT,je as cU,xi as cV,nf as cW,uw as cX,od as cY,Sx as cZ,rb as c_,Yi as ca,va as cb,_a as cc,Pi as cd,Li as ce,Bi as cf,qi as cg,Vi as ch,Hi as ci,Ui as cj,Ji as ck,Xi as cl,na as cm,ta as cn,ba as co,ya as cp,wa as cq,xa as cr,Ai as cs,Ii as ct,Ti as cu,zi as cv,ia as cw,sa as cx,oa as cy,ca as cz,Yb as d,mf as d$,Af as d0,zy as d1,ve as d2,j$ as d3,Yd as d4,du as d5,c as d6,rx as d7,ny as d8,sx as d9,Ww as dA,mx as dB,If as dC,Rw as dD,S$ as dE,M$ as dF,$f as dG,Kx as dH,kf as dI,jf as dJ,Ef as dK,jo as dL,me as dM,fe as dN,q as dO,w_ as dP,b_ as dQ,qv as dR,Wv as dS,Xd as dT,Yv as dU,rf as dV,sf as dW,_x as dX,ib as dY,lx as dZ,mu as d_,ix as da,ox as db,af as dc,Dv as dd,eh as de,of as df,nh as dg,Km as dh,Pw as di,hf as dj,k$ as dk,yx as dl,w$ as dm,ww as dn,Qw as dp,by as dq,Ob as dr,Db as ds,qx as dt,Wx as du,$b as dv,Ux as dw,Vw as dx,Uw as dy,qw as dz,_e as e,Qv as e0,Gm as e1,bi as e2,uf as e3,Rv as e4,Oo as e5,ry as e6,ey as e7,tv as e8,nv as e9,Wu as eA,zb as eB,ty as eC,_f as eD,pe as eE,be as eF,W as eG,xe as eH,Ab as eI,Fw as eJ,Jy as eK,Xy as eL,eb as eM,wf as eN,nb as eO,Um as eP,tb as eQ,o as eR,Ae as eS,ye as eT,v$ as eU,ay as ea,cf as eb,df as ec,iy as ed,Gv as ee,gf as ef,Fv as eg,Nv as eh,Lv as ei,Vv as ej,su as ek,Gd as el,iu as em,nu as en,au as eo,ku as ep,ou as eq,cu as er,$u as es,Su as et,Kd as eu,uu as ev,Mu as ew,Hu as ex,Zu as ey,Qu as ez,pw as f,Tb as g,Ub as h,Bv as i,Ib as j,Jm as k,Y_ as l,Ja as m,he as n,Ga as o,Wd as p,Ya as q,s as r,pf as s,le as t,Ka as u,jb as v,er as w,U as x,nr as y,tr as z};
